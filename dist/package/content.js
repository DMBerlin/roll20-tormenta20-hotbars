!function(){"use strict";const e="tormenta-20-hotbars-favorite-skills",a="tormenta-20-hotbars-favorite-spells",o="tormenta-20-hotbars-spell-custom-images",t="tormenta-20-hotbars-avatar",s="tormenta-20-hotbars-charname",r="tormenta-20-hotbars-hunter-abilities",n="tormenta-20-hotbars-destiny-powers",i="tormenta-20-hotbars-selected-race",c="tormenta-20-hotbars-selected-race-type",d="tormenta-20-hotbars-learned-spells",l="tormenta-20-hotbars-image-cache",m="1.0",u="https://gitlab.com/vizael/Tormenta20/-/raw/master/icons/magias/",p="https://wow.zamimg.com/images/wow/icons/large/spell_magic_magearmor.jpg",g=window.console;function f(){const e=document.getElementById("textchat-notifier");return!!e&&"none"!==window.getComputedStyle(e).display}function v(e=f()){const a=document.getElementById("ttm-toggle-switch"),o=document.getElementById("ttm-toggle-knob"),t=document.getElementById("ttm-toggle-label");a&&o&&t&&(e?(a.style.background="#6ec6ff",a.style.borderColor="#6ec6ff",o.style.left="13px",t.style.color="#6ec6ff"):(a.style.background="#444",a.style.borderColor="#666",o.style.left="1px",t.style.color="#ecf0f1"))}function y(e){const a=function(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}(e);return`${u}${a}.webp`}function b(e){return new Promise(a=>{const o=new Image;o.onload=()=>a(!0),o.onerror=()=>a(!1),o.src=e,setTimeout(()=>a(!1),5e3)})}function h(e){const{icon:a,label:o,onClick:t,theme:s="blue",badge:r=null,dataLabel:n=null}=e,i={blue:{background:"rgba(60,80,120,0.95)",border:"#6ec6ff",hoverBackground:"#6ec6ff",hoverColor:"#222"},red:{background:"rgba(120,60,60,0.95)",border:"#ff6e6e",hoverBackground:"#ff6e6e",hoverColor:"#222"}},c=i[s]||i.blue,d=document.createElement("button");d.style.display="flex",d.style.flexDirection="column",d.style.alignItems="center",d.style.justifyContent="center",d.style.padding="0",d.style.background=c.background,d.style.color="#fff",d.style.border=`2px solid ${c.border}`,d.style.borderRadius="8px",d.style.cursor="pointer",d.style.fontSize="13px",d.style.fontWeight="bold",d.style.width="64px",d.style.height="64px",d.style.transition="all 0.2s",d.style.boxShadow="0 2px 8px rgba(0,0,0,0.3)",d.style.textAlign="center",d.style.lineHeight="1.1",d.style.position="relative",d.onmouseover=()=>{d.style.background=c.hoverBackground,d.style.color=c.hoverColor,d.style.transform="scale(1.08)"},d.onmouseout=()=>{d.style.background=c.background,d.style.color="#fff",d.style.transform="scale(1)"};const l=document.createElement("span");l.textContent=a,l.style.fontSize="26px",l.style.marginBottom="2px",d.appendChild(l);const m=document.createElement("span");if(m.textContent=o,m.style.fontSize="12px",m.style.marginTop="2px",d.appendChild(m),t&&(d.onclick=t),n&&d.setAttribute("data-label",n),r){const e=document.createElement("div");e.className="hotbar-button-badge",e.style.position="absolute",e.style.top="-2px",e.style.right="-2px",e.style.background=r.color||"#4caf50",e.style.color="#fff",e.style.borderRadius="50%",e.style.width="16px",e.style.height="16px",e.style.fontSize="10px",e.style.fontWeight="bold",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.border="2px solid #23243a",e.style.zIndex="1000",e.textContent=r.text,d.appendChild(e)}return d}function x(e){const{placeholder:a="Filtrar...",onInput:o=null,onClear:t=null,theme:s="blue",width:r="100%",marginBottom:n="10px",fontSize:i="15px",showClearButton:c=!0,autoFocus:d=!1}=e,l={blue:{border:"#6ec6ff",color:"#6ec6ff",background:"#23243a"},orange:{border:"#ffb86c",color:"#ffb86c",background:"#23243a"},purple:{border:"#9c27b0",color:"#9c27b0",background:"#23243a"},green:{border:"#4caf50",color:"#4caf50",background:"#23243a"},red:{border:"#f44336",color:"#f44336",background:"#23243a"}},m=l[s]||l.blue,u=document.createElement("div");u.style.position="relative",u.style.marginBottom=n,u.style.width=r;const p=document.createElement("input");p.type="text",p.placeholder=a,p.style.width="100%",p.style.padding="10px 28px 10px 12px",p.style.borderRadius="8px",p.style.border=`1px solid ${m.border}`,p.style.background=m.background,p.style.color="#fff",p.style.fontSize=i,p.style.outline="none",p.style.boxSizing="border-box",p.style.transition="border-color 0.2s ease",p.onmouseover=()=>{p.style.borderColor=m.color},p.onmouseout=()=>{document.activeElement!==p&&(p.style.borderColor=m.border)},p.onfocus=()=>{p.style.borderColor=m.color,p.style.boxShadow=`0 0 0 2px ${m.color}20`},p.onblur=()=>{p.style.borderColor=m.border,p.style.boxShadow="none"};let g=null;return c&&(g=document.createElement("span"),g.textContent="√ó",g.style.position="absolute",g.style.right="8px",g.style.top="50%",g.style.transform="translateY(-50%)",g.style.cursor="pointer",g.style.color=m.color,g.style.fontSize="18px",g.style.display="none",g.style.transition="all 0.2s ease",g.style.width="20px",g.style.height="20px",g.style.display="flex",g.style.alignItems="center",g.style.justifyContent="center",g.style.borderRadius="50%",g.onmouseover=()=>{g.style.background=`${m.color}20`,g.style.color=m.color},g.onmouseout=()=>{g.style.background="transparent",g.style.color=m.color},g.onclick=()=>{p.value="",p.dispatchEvent(new Event("input")),p.focus(),t&&t()}),p.oninput=()=>{c&&g&&(p.value.length>0?g.style.display="flex":g.style.display="none"),o&&o(p.value)},u.appendChild(p),c&&g&&u.appendChild(g),d&&setTimeout(()=>{p.focus()},100),{container:u,input:p,clearButton:g,clear:()=>{p.value="",p.dispatchEvent(new Event("input")),t&&t()},focus:()=>p.focus(),blur:()=>p.blur(),getValue:()=>p.value,setValue:e=>{p.value=e,p.dispatchEvent(new Event("input"))},setPlaceholder:e=>{p.placeholder=e},setTheme:e=>{const a=l[e]||l.blue;p.style.borderColor=a.border,g&&(g.style.color=a.color)}}}function C(e){const{title:a,description:o,tags:t=[],theme:s="blue",position:r="right",maxWidth:n=320,minWidth:i=280}=e,c={blue:{border:"#6ec6ff",titleColor:"#6ec6ff",background:"rgba(20,20,30,0.98)"},red:{border:"#ff6e6e",titleColor:"#ff6e6e",background:"rgba(20,20,30,0.98)"},green:{border:"#4caf50",titleColor:"#4caf50",background:"rgba(20,20,30,0.98)"},purple:{border:"#9c27b0",titleColor:"#9c27b0",background:"rgba(20,20,30,0.98)"}},d=c[s]||c.blue,l=document.createElement("div");l.className="roll20-tooltip",l.style.position="fixed",l.style.background=d.background,l.style.border=`2px solid ${d.border}`,l.style.borderRadius="8px",l.style.padding="12px",l.style.minWidth=`${i}px`,l.style.maxWidth=`${n}px`,l.style.zIndex="10004",l.style.boxShadow="0 4px 16px rgba(0,0,0,0.8)",l.style.pointerEvents="none",l.style.opacity="0",l.style.transition="opacity 0.2s ease";const m=document.createElement("div");if(m.style.display="flex",m.style.flexDirection="column",m.style.gap="8px",a){const e=document.createElement("div");e.textContent=a,e.style.color=d.titleColor,e.style.fontSize="16px",e.style.fontWeight="bold",e.style.marginBottom="4px",m.appendChild(e)}if(t.forEach(e=>{const a=document.createElement("div");a.textContent=e.text,a.style.background=e.bgColor||d.titleColor,a.style.color=e.color||"#23243a",a.style.fontSize="11px",a.style.fontWeight="bold",a.style.borderRadius="4px",a.style.padding="2px 8px",a.style.display="inline-block",a.style.width="fit-content",a.style.marginTop="2px",m.appendChild(a)}),o){const e=document.createElement("div");e.textContent=o,e.style.color="#ecf0f1",e.style.fontSize="13px",e.style.lineHeight="1.4",e.style.marginTop="6px",m.appendChild(e)}function u(e){const a=e.getBoundingClientRect(),o=l.getBoundingClientRect();let t,s;switch(r){case"right":default:t=a.right+10,s=a.top;break;case"left":t=a.left-o.width-10,s=a.top;break;case"top":t=a.left+a.width/2-o.width/2,s=a.top-o.height-10;break;case"bottom":t=a.left+a.width/2-o.width/2,s=a.bottom+10}t<10&&(t=10),t+o.width>window.innerWidth-10&&(t=window.innerWidth-o.width-10),s<10&&(s=a.bottom+10),s+o.height>window.innerHeight-10&&(s=a.top-o.height-10),l.style.left=t+"px",l.style.top=s+"px"}return l.appendChild(m),{element:l,show:function(e){document.body.appendChild(l),u(e),setTimeout(()=>{l.style.opacity="1"},10)},hide:function(){l.style.opacity="0",setTimeout(()=>{l.parentNode&&l.parentNode.removeChild(l)},200)},position:u}}function w(e){const a=document.getElementById("condition-details-popup");a&&a.remove();const o=document.getElementById("condition-details-overlay");o&&o.remove();const t=document.createElement("div");t.id="condition-details-overlay",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0,0,0,0.5)",t.style.zIndex="10000",t.onclick=()=>{t.remove(),s.remove()},document.body.appendChild(t);const s=document.createElement("div");s.id="condition-details-popup",s.className="roll20-popup roll20-popup-orange",s.style.position="fixed",s.style.top="50%",s.style.left="50%",s.style.transform="translate(-50%, -50%)",s.style.background="rgba(30,30,40,0.98)",s.style.border="2px solid #ffb86c",s.style.borderRadius="12px",s.style.padding="20px",s.style.zIndex="10001",s.style.maxWidth="500px",s.style.maxHeight="600px",s.style.overflowY="auto",s.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)";const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="center",r.style.marginBottom="20px";const n=document.createElement("div");n.style.display="flex",n.style.alignItems="center",n.style.gap="12px";const i=document.createElement("div");i.style.width="32px",i.style.height="32px",i.style.borderRadius="6px",i.style.border="2px solid #ff6e6e",i.style.background="#23243a",i.style.overflow="hidden",i.style.flexShrink="0";const c=ua(e.iconeUrl||"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_curseoftounges.jpg",e.nome,e.icone||"‚ö†Ô∏è",{width:"100%",height:"100%",borderRadius:"4px",objectFit:"cover",showSkeleton:!0});i.appendChild(c);const d=document.createElement("h3");d.textContent=e.nome,d.style.color="#ffb86c",d.style.margin="0",d.style.fontSize="20px",d.style.fontWeight="bold",n.appendChild(i),n.appendChild(d);const l=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ffb86c",onClick:()=>{s.remove();const e=document.getElementById("condition-details-overlay");e&&e.remove()}});r.appendChild(n),r.appendChild(l.render()),s.appendChild(r);const m=document.createElement("div");if(m.style.display="flex",m.style.flexDirection="column",m.style.gap="16px",e.categoria){const a=document.createElement("div");a.style.display="flex",a.style.alignItems="center",a.style.gap="8px";const o=document.createElement("span");o.textContent="Categoria:",o.style.color="#ffb86c",o.style.fontWeight="bold",o.style.fontSize="14px";const t=document.createElement("span");t.textContent=e.categoria,t.style.color="#ecf0f1",t.style.fontSize="14px",a.appendChild(o),a.appendChild(t),m.appendChild(a)}if(e.descricaoCompleta){const a=document.createElement("div"),o=document.createElement("div");o.textContent="Descri√ß√£o Completa:",o.style.color="#ffb86c",o.style.fontWeight="bold",o.style.fontSize="14px",o.style.marginBottom="8px";const t=document.createElement("div"),s=e.descricaoCompleta.split("\n\n").map(e=>`<p>${e.replace(/\n/g,"<br>").replace(/\*(.*?)\*/g,"<em>$1</em>")}</p>`).join("");t.innerHTML=s,t.style.color="#ecf0f1",t.style.fontSize="14px",t.style.lineHeight="1.5",t.style.padding="12px",t.style.background="rgba(255,184,108,0.1)",t.style.borderRadius="6px",t.style.border="1px solid rgba(255,184,108,0.3)",t.querySelectorAll("p").forEach(e=>{e.style.margin="0 0 8px 0",e.style.padding="0"}),a.appendChild(o),a.appendChild(t),m.appendChild(a)}if(e.efeitos){const a=document.createElement("div"),o=document.createElement("div");o.textContent="Efeitos:",o.style.color="#ffb86c",o.style.fontWeight="bold",o.style.fontSize="14px",o.style.marginBottom="8px";const t=document.createElement("div");t.textContent=e.efeitos,t.style.color="#ecf0f1",t.style.fontSize="13px",t.style.lineHeight="1.4",a.appendChild(o),a.appendChild(t),m.appendChild(a)}const u=document.createElement("div");u.style.marginTop="16px",u.style.padding="12px",u.style.background="rgba(255,184,108,0.05)",u.style.borderRadius="6px",u.style.border="1px solid rgba(255,184,108,0.2)";const p=document.createElement("div");p.textContent="Regras Gerais das Condi√ß√µes:",p.style.color="#ffb86c",p.style.fontWeight="bold",p.style.fontSize="13px",p.style.marginBottom="8px";const g=document.createElement("div");g.innerHTML='\n            <div style="color: #ecf0f1; font-size: 12px; line-height: 1.4; margin-bottom: 6px;">\n                ‚Ä¢ <strong>Condi√ß√µes com os mesmos efeitos n√£o se acumulam;</strong> aplique apenas os mais severos.\n            </div>\n            <div style="color: #ecf0f1; font-size: 12px; line-height: 1.4; margin-bottom: 6px;">\n                ‚Ä¢ <strong>A menos que especificado o contr√°rio, condi√ß√µes terminam no fim da cena.</strong>\n            </div>\n            <div style="color: #ecf0f1; font-size: 12px; line-height: 1.4;">\n                ‚Ä¢ Algumas condi√ß√µes possuem um tipo de efeito (em <em>it√°lico</em>).\n            </div>\n        ',u.appendChild(p),u.appendChild(g),m.appendChild(u);const f=document.createElement("div");f.style.display="flex",f.style.gap="10px",f.style.marginTop="20px";const v=document.createElement("button");v.textContent="Compartilhar",v.style.flex="1",v.style.padding="10px 15px",v.style.background="#2c3e50",v.style.border="1px solid #34495e",v.style.borderRadius="6px",v.style.color="#ecf0f1",v.style.cursor="pointer",v.style.fontSize="14px",v.onclick=()=>{oa(e.nome),A(`Condi√ß√£o "${e.nome}" compartilhada no chat!`),Ce()},f.appendChild(v);const y=document.createElement("button");y.textContent="Aplicar Condi√ß√£o",y.style.flex="1",y.style.padding="10px 15px",y.style.background="#27ae60",y.style.border="1px solid #2ecc71",y.style.borderRadius="6px",y.style.color="#ecf0f1",y.style.cursor="pointer",y.style.fontSize="14px",y.onclick=()=>{ea(e.nome),Ce()},f.appendChild(y),m.appendChild(f),s.appendChild(m),document.body.appendChild(s),S(s,"orange")}function q(e,a,o){E();const t=document.createElement("div");let s,r;t.id="effect-hover-tooltip",t.style.position="fixed",t.style.background="rgba(30,30,40,0.95)",t.style.border="1px solid #6ec6ff",t.style.borderRadius="6px",t.style.padding="8px 12px",t.style.color="#ecf0f1",t.style.fontSize="12px",t.style.maxWidth="250px",t.style.zIndex="10004",t.style.boxShadow="0 4px 12px rgba(0,0,0,0.5)",t.style.pointerEvents="none","food"===o?(s=a.nome,r=a.descricao||"Efeito de comida ativo."):"drink"===o?(s=a.nome,r=a.descricao||"Efeito de bebida ativo."):"condition"===o?(s=a.nome,r=a.descricao||"Condi√ß√£o ativa."):"item"===o?(s=a.name,r=a.description||"Efeito de item ativo."):"potion"===o&&(s=a.nome,r=a.descricao||"Efeito de po√ß√£o ativo."),t.innerHTML=`\n                <div style="font-weight: bold; color: #6ec6ff; margin-bottom: 4px;">${s}</div>\n                <div style="color: #ecf0f1;">${r}</div>\n            `,document.body.appendChild(t);const n=e.getBoundingClientRect();t.style.left=n.right+10+"px",t.style.top=n.top-5+"px"}function E(){const e=document.getElementById("effect-hover-tooltip");e&&e.remove()}function z(e="item"){const a={skill:"üí° Segure CTRL + Clique para ver detalhes da per√≠cia",spell:"üí° Clique para lan√ßar magia ‚Ä¢ CTRL + Clique para ver detalhes",power:"üí° Segure CTRL + Clique para ver detalhes do poder",item:"üí° Segure CTRL + Clique para ver detalhes do item"},o=document.createElement("div");return o.textContent=a[e]||a.item,o.style.fontSize="11px",o.style.color="#6ec6ff",o.style.marginBottom="10px",o.style.fontStyle="italic",o.style.textAlign="center",o.style.width="100%",o}function S(e,a="blue"){const o={blue:{thumb:"rgba(110, 198, 255, 0.6)",thumbHover:"rgba(110, 198, 255, 0.8)",thumbActive:"rgba(110, 198, 255, 1)",border:"rgba(110, 198, 255, 0.2)",borderHover:"rgba(110, 198, 255, 0.4)",borderActive:"rgba(110, 198, 255, 0.6)",track:"rgba(35, 36, 58, 0.3)"},orange:{thumb:"rgba(255, 184, 108, 0.6)",thumbHover:"rgba(255, 184, 108, 0.8)",thumbActive:"rgba(255, 184, 108, 1)",border:"rgba(255, 184, 108, 0.2)",borderHover:"rgba(255, 184, 108, 0.4)",borderActive:"rgba(255, 184, 108, 0.6)",track:"rgba(35, 36, 58, 0.3)"},purple:{thumb:"rgba(156, 39, 176, 0.6)",thumbHover:"rgba(156, 39, 176, 0.8)",thumbActive:"rgba(156, 39, 176, 1)",border:"rgba(156, 39, 176, 0.2)",borderHover:"rgba(156, 39, 176, 0.4)",borderActive:"rgba(156, 39, 176, 0.6)",track:"rgba(35, 36, 58, 0.3)"},green:{thumb:"rgba(76, 175, 80, 0.6)",thumbHover:"rgba(76, 175, 80, 0.8)",thumbActive:"rgba(76, 175, 80, 1)",border:"rgba(76, 175, 80, 0.2)",borderHover:"rgba(76, 175, 80, 0.4)",borderActive:"rgba(76, 175, 80, 0.6)",track:"rgba(35, 36, 58, 0.3)"},red:{thumb:"rgba(244, 67, 54, 0.6)",thumbHover:"rgba(244, 67, 54, 0.8)",thumbActive:"rgba(244, 67, 54, 1)",border:"rgba(244, 67, 54, 0.2)",borderHover:"rgba(244, 67, 54, 0.4)",borderActive:"rgba(244, 67, 54, 0.6)",track:"rgba(35, 36, 58, 0.3)"},brown:{thumb:"rgba(139, 69, 19, 0.6)",thumbHover:"rgba(139, 69, 19, 0.8)",thumbActive:"rgba(139, 69, 19, 1)",border:"rgba(139, 69, 19, 0.2)",borderHover:"rgba(139, 69, 19, 0.4)",borderActive:"rgba(139, 69, 19, 0.6)",track:"rgba(35, 36, 58, 0.3)"}},t=o[a]||o.blue;e.querySelectorAll("*").forEach(a=>{const o=window.getComputedStyle(a),s=o.overflowY,r=o.overflow;if("auto"===s||"scroll"===s||"auto"===r||"scroll"===r){g.log("Found scrollable element:",a.id||a.className,"in popup:",e.id),a.style.setProperty("scrollbar-width","thin","important"),a.style.setProperty("scrollbar-color",`${t.thumb} ${t.track}`,"important");const o=a.id||`scrollable-${Math.random().toString(36).substr(2,9)}`;a.id||(a.id=o);const s=document.createElement("style");s.textContent=`\n                        #${o}::-webkit-scrollbar {\n                            width: 8px !important;\n                            height: 8px !important;\n                        }\n                        #${o}::-webkit-scrollbar-track {\n                            background: ${t.track} !important;\n                            border-radius: 4px !important;\n                            margin: 2px !important;\n                        }\n                        #${o}::-webkit-scrollbar-thumb {\n                            background: ${t.thumb} !important;\n                            border-radius: 4px !important;\n                            border: 1px solid ${t.border} !important;\n                            transition: all 0.2s ease !important;\n                        }\n                        #${o}::-webkit-scrollbar-thumb:hover {\n                            background: ${t.thumbHover} !important;\n                            border-color: ${t.borderHover} !important;\n                        }\n                        #${o}::-webkit-scrollbar-thumb:active {\n                            background: ${t.thumbActive} !important;\n                            border-color: ${t.borderActive} !important;\n                        }\n                        #${o}::-webkit-scrollbar-corner {\n                            background: ${t.track} !important;\n                            border-radius: 4px !important;\n                        }\n                    `,document.head.appendChild(s)}});const s=window.getComputedStyle(e);if("auto"===s.overflowY||"scroll"===s.overflowY){g.log("Popup itself is scrollable:",e.id),e.style.setProperty("scrollbar-width","thin","important"),e.style.setProperty("scrollbar-color",`${t.thumb} ${t.track}`,"important");const a=document.createElement("style");a.textContent=`\n                    #${e.id}::-webkit-scrollbar {\n                        width: 8px !important;\n                        height: 8px !important;\n                    }\n                    #${e.id}::-webkit-scrollbar-track {\n                        background: ${t.track} !important;\n                        border-radius: 4px !important;\n                        margin: 2px !important;\n                    }\n                    #${e.id}::-webkit-scrollbar-thumb {\n                        background: ${t.thumb} !important;\n                        border-radius: 4px !important;\n                        border: 1px solid ${t.border} !important;\n                        transition: all 0.2s ease !important;\n                    }\n                    #${e.id}::-webkit-scrollbar-thumb:hover {\n                        background: ${t.thumbHover} !important;\n                        border-color: ${t.borderHover} !important;\n                    }\n                    #${e.id}::-webkit-scrollbar-thumb:active {\n                        background: ${t.thumbActive} !important;\n                        border-color: ${t.borderActive} !important;\n                    }\n                    #${e.id}::-webkit-scrollbar-corner {\n                        background: ${t.track} !important;\n                        border-radius: 4px !important;\n                    }\n                `,document.head.appendChild(a)}}"undefined"!=typeof window&&(window.addTooltipToElement=function(e,a){let o=null,t=null;return e.addEventListener("mouseenter",()=>{t=setTimeout(()=>{o=C(a),o.show(e)},a.delay||300)}),e.addEventListener("mouseleave",()=>{t&&(clearTimeout(t),t=null),o&&(o.hide(),o=null)}),e.addEventListener("click",()=>{t&&(clearTimeout(t),t=null),o&&(o.hide(),o=null)}),{element:e,tooltip:o,show:()=>o?.show(e),hide:()=>o?.hide()}});let k=null;function j(e,a="info",o=5e3){const t=k||(k=document.createElement("div"),k.id="roll20-notification-container",k.className="roll20-scrollbar-thin",k.style.cssText="\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                z-index: 10005;\n                display: flex;\n                flex-direction: column;\n                gap: 10px;\n                pointer-events: none;\n            ",document.body.appendChild(k),k),s=document.createElement("div");s.className=`roll20-notification roll20-notification-${a}`,s.style.cssText=`\n                background: ${function(e){switch(e){case"success":return"#d4edda";case"warning":return"#fff3cd";case"error":return"#f8d7da";default:return"#d1ecf1"}}(a)};\n                border: 1px solid ${function(e){switch(e){case"success":return"#c3e6cb";case"warning":return"#ffeaa7";case"error":return"#f5c6cb";default:return"#bee5eb"}}(a)};\n                border-radius: 8px;\n                padding: 12px 16px;\n                margin-bottom: 8px;\n                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n                display: flex;\n                align-items: center;\n                gap: 12px;\n                min-width: 300px;\n                max-width: 400px;\n                opacity: 0;\n                transform: translateX(100%);\n                transition: all 0.3s ease;\n                pointer-events: auto;\n                font-family: 'Roboto', sans-serif;\n                font-size: 14px;\n                color: ${function(e){switch(e){case"success":return"#155724";case"warning":return"#856404";case"error":return"#721c24";default:return"#0c5460"}}(a)};\n            `;const r=document.createElement("div");r.innerHTML=function(e){switch(e){case"success":return"‚úì";case"warning":return"‚ö†";case"error":return"‚úó";default:return"‚Ñπ"}}(a),r.style.cssText="\n                font-size: 18px;\n                flex-shrink: 0;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                width: 24px;\n                height: 24px;\n            ",s.appendChild(r);const n=document.createElement("div");n.textContent=e,n.style.cssText="\n                flex: 1;\n                line-height: 1.4;\n            ",s.appendChild(n);const i=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"20px",width:"24px",height:"24px",padding:"0",customStyles:"opacity: 0.7; transition: opacity 0.2s ease;",onClick:()=>P(s)});return s.appendChild(i.render()),t.appendChild(s),setTimeout(()=>{s.style.opacity="1",s.style.transform="translateX(0)"},10),o>0&&setTimeout(()=>{P(s)},o),s}function P(e){e&&e.parentNode&&(e.style.opacity="0",e.style.transform="translateX(100%)",setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},300))}function A(e,a=5e3){return j(e,"success",a)}function _(e,a=5e3){return j(e,"warning",a)}function $(){return localStorage.getItem("tormenta-20-hotbars-sync-name")||localStorage.getItem(s)||"Nome do Personagem"}function I(){const e=localStorage.getItem("tormenta-20-hotbars-char-identification-key");return e&&""!==e.trim()?e.trim():$().replace(/['"]/g,"")}const T="tormenta-20-hotbars-char-level-attr";function D(){return localStorage.getItem("tormenta-20-hotbars-sync-level")||localStorage.getItem(T)||"1"}function M(){const e=document.getElementById("character-name");if(e){const a=$();e.textContent=a}const a=document.querySelector("#character-avatar").parentNode.querySelector('div[title="N√≠vel do her√≥i"]');a&&(a.textContent=D());const o=document.querySelector("#character-avatar").parentNode.querySelector('div[title="Defesa"]');if(o){const e=localStorage.getItem("tormenta-20-hotbars-sync-ac")||"0";o.textContent=e}!function(){const e=document.querySelector("#character-avatar")?.parentNode?.parentNode;if(!e)return;const a=e.children[1],o=a.children[1];if(o){const e=o.children[0]?.children[0],a=o.children[1];if(e&&a){const o=parseInt(localStorage.getItem("tormenta-20-hotbars-sync-hp-current")||"0"),t=parseInt(localStorage.getItem("tormenta-20-hotbars-sync-hp-total")||"1"),s=t>0?Math.max(0,Math.min(100,o/t*100)):0;e.style.width=`${s}%`,a.textContent=`${o}/${t}`,e.style.background=s>50?"#4caf50":s>25?"#ff9800":"#f44336"}}const t=a.children[2];if(t){const e=t.children[0]?.children[0],a=t.children[1];if(e&&a){const o=parseInt(localStorage.getItem("tormenta-20-hotbars-sync-mp-current")||"0"),t=parseInt(localStorage.getItem("tormenta-20-hotbars-sync-mp-total")||"1"),s=t>0?Math.max(0,Math.min(100,o/t*100)):0;e.style.width=`${s}%`,a.textContent=`${o}/${t}`}}}()}function R(){try{const a=localStorage.getItem(e);return a?JSON.parse(a):[]}catch(e){return g.log("Erro ao carregar favoritos:",e),[]}}function V(){try{const e=localStorage.getItem(a);return e?JSON.parse(e):[]}catch(e){return g.log("Erro ao carregar magias favoritas:",e),[]}}function B(){try{const e=localStorage.getItem(o);return e?JSON.parse(e):{}}catch(e){return g.log("Erro ao carregar imagens customizadas das magias:",e),{}}}function N(e,a){const t=B();return a&&a.trim()?(t[e]=a.trim(),A(`Imagem customizada adicionada para "${e}"!`)):(delete t[e],_(`Imagem customizada removida de "${e}"!`)),function(e){try{localStorage.setItem(o,JSON.stringify(e))}catch(e){g.log("Erro ao salvar imagens customizadas das magias:",e)}}(t),t}function O(e){return B()[e]||""}function F(){try{return localStorage.getItem(t)||null}catch(e){return g.log("Erro ao carregar avatar:",e),null}}function U(e){try{localStorage.setItem(t,e)}catch(e){g.log("Erro ao salvar avatar:",e)}}function L(){try{const e=localStorage.getItem(r);return e?JSON.parse(e):[]}catch(e){return g.log("Erro ao carregar habilidades aprendidas:",e),[]}}function W(e){try{localStorage.setItem(r,JSON.stringify(e))}catch(e){g.log("Erro ao salvar habilidades aprendidas:",e)}}function H(e){const a=L(),o=a.indexOf(e);return o>-1?(a.splice(o,1),_(`Habilidade "${e}" removida da lista de aprendidas.`)):(a.push(e),A(`Habilidade "${e}" adicionada √† lista de aprendidas!`)),W(a),a}function J(e){const a=[];return e>=3&&a.push("Explorador"),e>=5&&a.push("Caminho do Explorador"),e>=20&&a.push("Mestre Ca√ßador"),a}function G(e,a){if(["Marca da Presa","Rastreador"].includes(e))return!0;if(J(a).includes(e))return!0;const o=L(),t=function(e){return{2:1,3:2,4:3,5:4,6:5,7:6,8:7,9:8,10:9,11:10,12:11,13:12,14:13,15:14,16:15,17:16,18:17,19:18,20:19}[e]||0}(a);return o.filter(e=>!["Marca da Presa","Rastreador"].includes(e)&&!J(a).includes(e)).length<t}function Q(){try{const e=localStorage.getItem(d);return e?JSON.parse(e):[]}catch(e){return g.log("Erro ao carregar magias aprendidas:",e),[]}}function K(e){const a=L();return!!["Marca da Presa","Rastreador"].includes(e)||a.includes(e)}function Y(){const e=document.getElementById("avatar-popup");e&&e.remove();const a=document.getElementById("avatar-overlay");a&&a.remove();const o=document.createElement("div");o.id="avatar-overlay",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.background="rgba(0,0,0,0.5)",o.style.zIndex="10000",o.onclick=()=>{o.remove(),t.remove()},document.body.appendChild(o);const t=document.createElement("div");t.id="avatar-popup",t.className="roll20-popup",t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.background="rgba(30,30,40,0.98)",t.style.border="2px solid #6ec6ff",t.style.borderRadius="12px",t.style.padding="20px",t.style.zIndex="10001",t.style.maxWidth="400px",t.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="stretch";const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="space-between",s.style.alignItems="center",s.style.marginBottom="15px",s.style.width="100%";const r=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{t.remove();const e=document.getElementById("avatar-overlay");e&&e.remove()}}),n=document.createElement("h3");n.textContent="Configurar Avatar",n.style.color="#ecf0f1",n.style.margin="0",n.style.fontSize="17px",n.style.fontWeight="bold",s.appendChild(n),s.appendChild(r.render()),t.appendChild(s);const i=document.createElement("div");i.style.display="flex",i.style.justifyContent="center",i.style.marginBottom="15px";const c=F(),d=document.createElement("div");d.style.width="80px",d.style.height="80px",d.style.borderRadius="50%",d.style.border="3px solid #6ec6ff",d.style.display="flex",d.style.alignItems="center",d.style.justifyContent="center",d.style.fontSize="24px",d.style.fontWeight="bold",d.style.color="#ecf0f1",d.style.background="#23243a",d.style.overflow="hidden",c?(d.style.background=`url(${c}) center/cover`,d.textContent=""):d.textContent="EE",i.appendChild(d),t.appendChild(i);const l=document.createElement("label");l.textContent="URL da imagem:",l.style.color="#ecf0f1",l.style.fontSize="14px",l.style.fontWeight="bold",l.style.marginBottom="8px",t.appendChild(l);const m=document.createElement("input");m.type="url",m.placeholder="https://exemplo.com/imagem.jpg",m.value=c||"",m.style.width="100%",m.style.padding="10px",m.style.borderRadius="6px",m.style.border="1px solid #6ec6ff",m.style.background="#23243a",m.style.color="#fff",m.style.fontSize="14px",m.style.outline="none",m.style.boxSizing="border-box",m.style.marginBottom="15px",t.appendChild(m);const u=document.createElement("div");u.style.display="flex",u.style.gap="10px";const p=document.createElement("button");p.textContent="Salvar",p.style.flex="1",p.style.padding="10px",p.style.background="#6ec6ff",p.style.color="#23243a",p.style.border="none",p.style.borderRadius="6px",p.style.fontSize="14px",p.style.fontWeight="bold",p.style.cursor="pointer",p.style.transition="all 0.2s",p.onmouseover=()=>{p.style.background="#5bb8ff"},p.onmouseout=()=>{p.style.background="#6ec6ff"},p.onclick=()=>{const e=m.value.trim();e&&(U(e),X(),A("Avatar do personagem atualizado!")),t.remove();const a=document.getElementById("avatar-overlay");a&&a.remove()};const g=document.createElement("button");g.textContent="Limpar",g.style.flex="1",g.style.padding="10px",g.style.background="#444",g.style.color="#ecf0f1",g.style.border="none",g.style.borderRadius="6px",g.style.fontSize="14px",g.style.fontWeight="bold",g.style.cursor="pointer",g.style.transition="all 0.2s",g.onmouseover=()=>{g.style.background="#555"},g.onmouseout=()=>{g.style.background="#444"},g.onclick=()=>{U(""),X(),_("Avatar do personagem removido."),t.remove();const e=document.getElementById("avatar-overlay");e&&e.remove()},u.appendChild(p),u.appendChild(g),t.appendChild(u),document.body.appendChild(t),S(t,"blue")}function X(){const e=document.getElementById("character-avatar");if(!e)return;const a=F();a?(e.style.background=`url(${a}) center/cover`,e.textContent=""):(e.style.background="#23243a",e.textContent="EE")}function Z(e){const a=document.querySelector("#textchat-input textarea"),o=document.querySelector("#chatSendBtn");if(a&&o){let t=e.replace(/\s+/g," ").trim();a.value=t,a.dispatchEvent(new Event("input",{bubbles:!0})),a.dispatchEvent(new Event("change",{bubbles:!0})),o.click()}}async function ee(e){try{const a="DATA_"+Math.random().toString(36).substr(2,9).toUpperCase()+"_"+Date.now().toString(36),o=I(),t={};Object.keys(e).forEach(a=>{const s=e[a];t[a]=`@{${o}|${s}}`});const s=`${JSON.stringify(t)} [${a}]`;g.log("=== DEBUG SINCRONIZA√á√ÉO ==="),g.log("Nome do personagem:",o),g.log("Atributos configurados:",e),g.log("Objeto JSON criado:",t),g.log("Comando de sincroniza√ß√£o JSON enviado:",s),g.log("================================"),Z(s);const r=await function(e,a=5e3){return new Promise((o,t)=>{const s=Date.now(),r=()=>{const n=document.querySelectorAll("#textchat .message");g.log(`Procurando mensagem com chave: ${e}`),g.log(`Mensagens encontradas no chat: ${n.length}`);for(let a of n){const t=a.textContent||a.innerText;if(t.includes(e))return g.log("Mensagem encontrada:",t),void o(a)}Date.now()-s<a?setTimeout(r,100):(console.error("Timeout: Mensagem de dados n√£o encontrada"),t(new Error("Timeout: Mensagem de dados n√£o encontrada")))};r()})}(a),n=function(e,a){try{const o=e.textContent||e.innerText;g.log("Mensagem JSON completa recebida:",o);let t,s=o.replace(`[${a}]`,"").trim();g.log("Texto JSON limpo (sem chave):",s),s=s.replace(/^[^{[]*/,"").replace(/[^}\]]*$/,""),g.log("Texto JSON limpo (sem caracteres extras):",s);try{t=JSON.parse(s)}catch(e){return console.error("Erro ao fazer parse do JSON:",e),g.log("Texto que falhou no parse:",s),g.log("Tentando extra√ß√£o manual dos dados..."),function(e){try{g.log("Extraindo dados manualmente do texto:",e);let a=e;a=a.replace(/^\{|\}$/g,""),a=a.replace(/"/g,""),g.log("Texto limpo:",a);const o=a.split(",").map(e=>e.trim()),t={};return o.forEach(e=>{if(e.includes(":")){const a=e.indexOf(":"),o=e.substring(0,a).trim(),s=e.substring(a+1).trim();if(o&&s){const e=s.replace(/^['"]|['"]$/g,"");t[o]=e,g.log(`Extra√≠do: ${o} = ${e}`)}}}),g.log("Dados extra√≠dos manualmente:",t),0===Object.keys(t).length?(g.log("Tentando extra√ß√£o agressiva..."),function(e){try{g.log("Extra√ß√£o agressiva do texto:",e);const a=e.replace(/[^\w\s,:]/g,"");g.log("Texto limpo agressivamente:",a);const o=/(\w+):\s*([^,]+)/g,t={};let s;for(;null!==(s=o.exec(a));){const e=s[1].trim(),a=s[2].trim();e&&a&&(t[e]=a,g.log(`Extra√≠do agressivamente: ${e} = ${a}`))}return g.log("Dados extra√≠dos agressivamente:",t),t}catch(e){return console.error("Erro na extra√ß√£o agressiva:",e),null}}(e)):t}catch(e){return console.error("Erro na extra√ß√£o manual:",e),null}}(s)}return g.log("Dados JSON extra√≠dos:",t),t}catch(e){return console.error("Erro ao extrair dados JSON da mensagem:",e),null}}(r,a);if(n)return function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}(r),g.log("=== DADOS CAPTURADOS DA FICHA ==="),g.log("Dados brutos:",n),Object.keys(n).forEach(e=>{const a=n[e];if(null!=a){const o=`tormenta-20-hotbars-sync-${e}`;localStorage.setItem(o,a),g.log(`Salvando ${o}: ${a}`)}}),g.log("=== FIM DOS DADOS CAPTURADOS ==="),M(),n;throw new Error("Falha ao extrair dados JSON da mensagem")}catch(e){throw console.error("Erro na sincroniza√ß√£o de dados:",e),e}}function ae(){const a=document.getElementById("skills-popup");a&&a.remove();const o=document.getElementById("skills-overlay");o&&o.remove();const t=document.createElement("div");t.id="skills-overlay",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0,0,0,0.5)",t.style.zIndex="10000",t.onclick=()=>{document.querySelectorAll('[style*="z-index: 10002"]').forEach(e=>{"fixed"===e.style.position&&e.style.background.includes("rgba(0, 0, 0, 0.9)")&&e.remove()}),t.remove(),s.remove()},document.body.appendChild(t);const s=document.createElement("div");s.id="skills-popup",s.className="roll20-popup",s.style.position="fixed",s.style.top="50%",s.style.left="50%",s.style.transform="translate(-50%, -50%)",s.style.background="rgba(30,30,40,0.98)",s.style.border="2px solid #6ec6ff",s.style.borderRadius="12px",s.style.padding="18px 20px 16px 20px",s.style.zIndex="10001",s.style.maxWidth="340px",s.style.maxHeight="480px",s.style.overflowY="auto",s.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="stretch";const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="center",r.style.marginBottom="10px",r.style.width="100%";const n=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{document.querySelectorAll('[style*="z-index: 10002"]').forEach(e=>{"fixed"===e.style.position&&e.style.background.includes("rgba(0, 0, 0, 0.9)")&&e.remove()}),s.remove();const e=document.getElementById("skills-overlay");e&&e.remove()}}),i=document.createElement("h3");i.textContent="Per√≠cias",i.style.color="#ecf0f1",i.style.margin="0",i.style.fontSize="17px",i.style.fontWeight="bold",r.appendChild(i),r.appendChild(n.render()),s.appendChild(r);const c=x({placeholder:"Filtrar per√≠cias...",theme:"blue",onInput:()=>{u()},onClear:()=>{u()}});s.appendChild(c.container);const d=z("skill");s.appendChild(d);const l=[{nome:"Acrobacia",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Acrobacia}}{{theroll=[[1d20+[[@{${I()}|acrobaciatotal}]]]]}}`},{nome:"Adestramento",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Adestramento}}{{theroll=[[1d20+[[@{${I()}|adestramentototal}]]]]}}`},{nome:"Atletismo",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Atletismo}}{{theroll=[[1d20+[[@{${I()}|atletismototal}]]]]}}`},{nome:"Atua√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Atua√ß√£o}}{{theroll=[[1d20+[[@{${I()}|atuacaototal}]]]]}}`},{nome:"Cavalgar",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Cavalgar}}{{theroll=[[1d20+[[@{${I()}|cavalgartotal}]]]]}}`},{nome:"Conhecimento",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Conhecimento}}{{theroll=[[1d20+[[@{${I()}|conhecimentototal}]]]]}}`},{nome:"Cura",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Cura}}{{theroll=[[1d20+[[@{${I()}|curatotal}]]]]}}`},{nome:"Diplomacia",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Diplomacia}}{{theroll=[[1d20+[[@{${I()}|diplomaciatotal}]]]]}}`},{nome:"Engana√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Engana√ß√£o}}{{theroll=[[1d20+[[@{${I()}|enganacaototal}]]]]}}`},{nome:"Fortitude",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Fortitude}}{{theroll=[[1d20+[[@{${I()}|fortitudetotal}]]]]}}`},{nome:"Furtividade",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Furtividade}}{{theroll=[[1d20+[[@{${I()}|furtividadetotal}]]]]}}`},{nome:"Guerra",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Guerra}}{{theroll=[[1d20+[[@{${I()}|guerratotal}]]]]}}`},{nome:"Iniciativa",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Iniciativa}}{{theroll=[[1d20+[[@{${I()}|iniciativatotal}]] &{tracker}]]}}`},{nome:"Intimida√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Intimida√ß√£o}}{{theroll=[[1d20+[[@{${I()}|intimidacaototal}]]]]}}`},{nome:"Intui√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Intui√ß√£o}}{{theroll=[[1d20+[[@{${I()}|intuicaototal}]]]]}}`},{nome:"Investiga√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Investiga√ß√£o}}{{theroll=[[1d20+[[@{${I()}|investigacaototal}]]]]}}`},{nome:"Jogatina",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Jogatina}}{{theroll=[[1d20+[[@{${I()}|jogatinatotal}]]]]}}`},{nome:"Ladinagem",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Ladinagem}}{{theroll=[[1d20+[[@{${I()}|ladinagemtotal}]]]]}}`},{nome:"Luta",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Luta}}{{theroll=[[1d20+[[@{${I()}|lutatotal}]]]]}}`},{nome:"Misticismo",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Misticismo}}{{theroll=[[1d20+[[@{${I()}|misticismototal}]]]]}}`},{nome:"Nobreza",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Nobreza}}{{theroll=[[1d20+[[@{${I()}|nobrezatotal}]]]]}}`},{nome:"Of√≠cio",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Of√≠cio @{${I()}|oficionome}}}{{theroll=[[1d20+[[@{${I()}|oficiototal}]]]]}}`},{nome:"Percep√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Percep√ß√£o}}{{theroll=[[1d20+[[@{${I()}|percepcaototal}]]]]}}`},{nome:"Pilotagem",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Pilotagem}}{{theroll=[[1d20+[[@{${I()}|pilotagemtotal}]]]]}}`},{nome:"Pontaria",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Pontaria}}{{theroll=[[1d20+[[@{${I()}|pontariatotal}]]]]}}`},{nome:"Reflexos",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Reflexos}}{{theroll=[[1d20+[[@{${I()}|reflexostotal}]]]]}}`},{nome:"Religi√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Religi√£o}}{{theroll=[[1d20+[[@{${I()}|religiaototal}]]]]}}`},{nome:"Sobreviv√™ncia",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Sobreviv√™ncia}}{{theroll=[[1d20+[[@{${I()}|sobrevivenciatotal}]]]]}}`},{nome:"Vontade",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Vontade}}{{theroll=[[1d20+[[@{${I()}|vontadetotal}]]]]}}`}],m=document.createElement("div");function u(){document.querySelectorAll('[style*="z-index: 10002"]').forEach(e=>{"fixed"===e.style.position&&e.style.background.includes("rgba(0, 0, 0, 0.9)")&&e.remove()});const a=c.getValue().trim().toLowerCase(),o=R();let t=l.filter(e=>e.nome.toLowerCase().includes(a));const s=[...t.filter(e=>o.includes(e.nome)),...t.filter(e=>!o.includes(e.nome))];if(m.innerHTML="",0===s.length&&a.length>0){const e=ye(a,"per√≠cia","blue");return void m.appendChild(e)}s.forEach(a=>{const t=o.includes(a.nome),s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.gap="8px",s.style.background=t?"rgba(110, 198, 255, 0.1)":"transparent",s.style.borderRadius="6px",s.style.padding="2px";const r=document.createElement("button"),n=document.createElement("div");n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.width="100%",n.style.padding="0 8px";const i=document.createElement("span");i.textContent=a.nome,i.style.textAlign="center",i.style.fontWeight="bold",n.appendChild(i),r.appendChild(n),r.style.flex="1",r.style.background="#23243a",r.style.color="#fff",r.style.border="1px solid #6ec6ff",r.style.borderRadius="6px",r.style.padding="8px 0",r.style.fontSize="15px",r.style.fontWeight="bold",r.style.cursor="pointer",r.style.transition="all 0.2s",r.onmouseover=()=>{r.style.background="#6ec6ff",r.style.color="#23243a"},r.onmouseout=()=>{r.style.background="#23243a",r.style.color="#fff"};let c=null,d=null;r.onmouseenter=()=>{const e=xe[a.nome];if(!e||!e.descricao)return;c&&(c.hide(),c=null),d&&(clearTimeout(d),d=null);const o=e.descricao,t={title:a.nome,description:o,theme:"blue",tags:[{text:"Per√≠cia",bgColor:"#6ec6ff",color:"#23243a"}]};c=C(t),c.show(r)},r.onmouseleave=()=>{c&&(c.hide(),c=null)},r.onclick=e=>{c&&(c.hide(),c=null),e.ctrlKey?we(a.nome):(Z(a.comando),Ce())};const l=document.createElement("button");l.innerHTML=t?"üìå":"üìç",l.style.background="none",l.style.border="none",l.style.color=t?"#6ec6ff":"#666",l.style.fontSize="14px",l.style.cursor="pointer",l.style.padding="4px",l.style.borderRadius="4px",l.style.transition="all 0.2s",l.style.minWidth="24px",l.style.height="24px",l.style.display="flex",l.style.alignItems="center",l.style.justifyContent="center",l.title=t?"Remover dos favoritos":"Adicionar aos favoritos",l.onmouseover=()=>{l.style.background="rgba(110, 198, 255, 0.2)",l.style.color="#6ec6ff"},l.onmouseout=()=>{l.style.background="none",l.style.color=t?"#6ec6ff":"#666"},l.onclick=o=>{o.stopPropagation(),function(a){const o=R(),t=o.indexOf(a);t>-1?(o.splice(t,1),_(`Skill "${a}" removida dos favoritos.`)):(o.push(a),A(`Skill "${a}" adicionada aos favoritos!`)),function(a){try{localStorage.setItem(e,JSON.stringify(a))}catch(e){g.log("Erro ao salvar favoritos:",e)}}(o)}(a.nome),u()},s.appendChild(r),s.appendChild(l),m.appendChild(s)})}m.style.display="flex",m.style.flexDirection="column",m.style.gap="6px",m.style.marginTop="2px",s.appendChild(m),u(),document.body.appendChild(s),S(s,"blue")}const oe=e=>({nome:e.nome,comando:e.comando,onClick:()=>function(e,a){const o=document.getElementById("spell-cast-popup");o&&o.remove();const t=document.getElementById("spell-cast-overlay");t&&t.remove();const s=document.createElement("div");s.id="spell-cast-overlay",s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="100%",s.style.height="100%",s.style.background="rgba(0,0,0,0.5)",s.style.zIndex="10002",s.onclick=()=>{s.remove(),r.remove()},document.body.appendChild(s);const r=document.createElement("div");r.id="spell-cast-popup",r.className="roll20-modal roll20-popup-purple",r.style.position="fixed",r.style.top="50%",r.style.left="50%",r.style.transform="translate(-50%, -50%)",r.style.background="rgba(30,30,40,0.98)",r.style.border="2px solid #6ec6ff",r.style.borderRadius="12px",r.style.padding="20px",r.style.zIndex="10003",r.style.maxWidth="500px",r.style.maxHeight="600px",r.style.overflowY="auto",r.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="stretch";const n=document.createElement("div");n.style.display="flex",n.style.justifyContent="space-between",n.style.alignItems="center",n.style.marginBottom="15px",n.style.width="100%";const i=document.createElement("div");i.style.display="flex",i.style.flexDirection="column",i.style.alignItems="flex-start",i.style.gap="2px";const c=document.createElement("h3");c.textContent=a,c.style.color="#ecf0f1",c.style.margin="0",c.style.fontSize="18px",c.style.fontWeight="bold",i.appendChild(c);const d=document.createElement("div");function l(e,a,o){const t=document.createElement("span");return t.textContent=e,t.style.background=o,t.style.color=a,t.style.fontSize="11px",t.style.fontWeight="bold",t.style.borderRadius="12px",t.style.padding="3px 8px",t.style.display="inline-block",t.style.letterSpacing="0.3px",t.style.boxShadow="0 1px 3px rgba(0,0,0,0.2)",t.style.border="1px solid rgba(255,255,255,0.1)",t}d.style.display="flex",d.style.flexWrap="wrap",d.style.gap="6px",d.style.marginTop="8px";const m=function(e){return{"Luz Sagrada":{tipo:"Divina",ciclo:1,escola:"Evoca√ß√£o"},"Sombras Profanas":{tipo:"Universal",ciclo:1,escola:"Necromancia"},"Cura Ferimentos Leves":{tipo:"Divina",ciclo:1,escola:"Cura"},"Prote√ß√£o Divina":{tipo:"Divina",ciclo:1,escola:"Abjura√ß√£o"},"B√™n√ß√£o":{tipo:"Divina",ciclo:1,escola:"Encantamento"},"Raio de Energia":{tipo:"Arcana",ciclo:1,escola:"Evoca√ß√£o"},"Escudo M√°gico":{tipo:"Arcana",ciclo:1,escola:"Abjura√ß√£o"},"Disfarce Ilus√≥rio":{tipo:"Arcana",ciclo:1,escola:"Ilus√£o"},"Detectar Magia":{tipo:"Universal",ciclo:1,escola:"Adivinha√ß√£o"},"Compreender Idiomas":{tipo:"Universal",ciclo:1,escola:"Adivinha√ß√£o"},"Cura Ferimentos Moderados":{tipo:"Divina",ciclo:2,escola:"Cura"},"Sil√™ncio":{tipo:"Divina",ciclo:2,escola:"Ilus√£o"},"Bola de Fogo":{tipo:"Arcana",ciclo:3,escola:"Evoca√ß√£o"},"Rel√¢mpago":{tipo:"Arcana",ciclo:3,escola:"Evoca√ß√£o"},Invisibilidade:{tipo:"Arcana",ciclo:2,escola:"Ilus√£o"},"Sugest√£o":{tipo:"Arcana",ciclo:2,escola:"Encantamento"},"Dissipar Magia":{tipo:"Universal",ciclo:3,escola:"Abjura√ß√£o"},Voo:{tipo:"Arcana",ciclo:3,escola:"Transmuta√ß√£o"},Teleporte:{tipo:"Arcana",ciclo:4,escola:"Conjura√ß√£o"},"Ressurrei√ß√£o":{tipo:"Divina",ciclo:5,escola:"Cura"},Meteoro:{tipo:"Arcana",ciclo:6,escola:"Evoca√ß√£o"}}[e]||{}}(e);if(m.tipo){const e=l(m.tipo,"#23243a","Arcana"===m.tipo?"#9c27b0":"#ff9800");d.appendChild(e)}if(m.ciclo){const e=l(`${m.ciclo}¬∫ C√≠rculo`,"#23243a","#2196f3");d.appendChild(e)}if(m.escola){const e=l(m.escola,"#23243a","#4caf50");d.appendChild(e)}if("Luz Sagrada"===e){const e=l("Aggelus","#23243a","#6ec6ff");d.appendChild(e)}else if("Sombras Profanas"===e){const e=l("Sulfure","#23243a","#6ec6ff");d.appendChild(e)}i.appendChild(d),n.appendChild(i);const u=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{r.remove();const e=document.getElementById("spell-cast-overlay");e&&e.remove()}});n.appendChild(u.render()),r.appendChild(n);const p=document.createElement("div");p.style.background="#1a1a2e",p.style.border="1px solid #6ec6ff",p.style.borderRadius="8px",p.style.padding="12px",p.style.marginBottom="15px",p.style.display="grid",p.style.gridTemplateColumns="1fr 1fr",p.style.gap="8px",[{label:"Tipo",value:"Universal"},{label:"Execu√ß√£o",value:"Padr√£o"},{label:"Dura√ß√£o",value:"Cena"},{label:"Alcance",value:"Curto"},{label:"√Årea/Alvo",value:"1 Objeto"},{label:"Resist√™ncia",value:"Vontade"}].forEach(e=>{const a=document.createElement("div");a.style.display="flex",a.style.flexDirection="column",a.style.gap="2px";const o=document.createElement("span");o.textContent=e.label,o.style.color="#6ec6ff",o.style.fontSize="11px",o.style.fontWeight="bold",o.style.textTransform="uppercase";const t=document.createElement("span");t.textContent=e.value,t.style.color="#ecf0f1",t.style.fontSize="13px",t.style.fontWeight="bold",a.appendChild(o),a.appendChild(t),p.appendChild(a)}),r.appendChild(p);const g=document.createElement("div");g.style.background="#1a1a2e",g.style.border="1px solid #6ec6ff",g.style.borderRadius="8px",g.style.padding="12px",g.style.marginBottom="15px",g.style.display="flex",g.style.flexDirection="column",g.style.gap="6px";const f=document.createElement("div");f.textContent="Descri√ß√£o",f.style.color="#6ec6ff",f.style.fontSize="13px",f.style.fontWeight="bold",f.style.marginBottom="2px",g.appendChild(f);const v=document.createElement("div");v.style.color="#ecf0f1",v.style.fontSize="14px",v.style.lineHeight="1.4","Luz Sagrada"===e?v.textContent="O alvo emite luz (mas n√£o produz calor) em uma √°rea com 6m de raio. O objeto pode ser guardado (em um bolso, por exemplo) para interromper a luz, que voltar√° a funcionar caso o objeto seja revelado. Se lan√ßar a magia num objeto de uma criatura involunt√°ria, ela tem direito a um teste de Vontade para anul√°-la. Luz anula Escurid√£o.":"Sombras Profanas"===e&&(v.textContent="O alvo emana sombras em uma √°rea com 6m de raio. Criaturas dentro da √°rea recebem camuflagem leve por escurid√£o leve. As sombras n√£o podem ser iluminadas por nenhuma fonte de luz natural. O objeto pode ser guardado (em um bolso, por exemplo) para interromper a escurid√£o, que voltar√° a funcionar caso o objeto seja revelado. Se lan√ßar a magia num objeto de uma criatura involunt√°ria, ela tem direito a um teste de Vontade para anul√°-la. Escurid√£o anula Luz."),g.appendChild(v);let y=[];"Luz Sagrada"===e?y=[{label:"+1 PM: aumenta a √°rea iluminada em +3m de raio.",cost:1},{label:"+2 PM: muda a dura√ß√£o para um dia.",cost:2},{label:"+2 PM: muda a dura√ß√£o para permanente e adiciona componente material (p√≥ de rubi no valor de T$ 50). N√£o pode ser usado em conjunto com outros aprimoramentos. Requer 2¬∫ c√≠rculo.",cost:2},{label:"+0 PM (Apenas Arcanos): muda o alvo para 1 criatura. Voc√™ lan√ßa a magia nos olhos do alvo, que fica ofuscado pela cena. N√£o afeta criaturas cegas.",cost:0},{label:"+2 PM (Apenas Arcanos): muda o alcance para longo e o efeito para cria 4 pequenos globos flutuantes de pura luz. Voc√™ pode posicionar os globos onde quiser dentro do alcance. Uma vez por rodada, voc√™ pode mover os globos com uma a√ß√£o livre. Cada um ilumina como uma tocha, mas n√£o produz calor. Se um globo ocupar o espa√ßo de uma criatura, ela fica ofuscada e sua silhueta pode ser vista claramente (ela n√£o recebe camuflagem por escurid√£o ou invisibilidade). Requer 2¬∫ c√≠rculo.",cost:2},{label:"+2 PM (Apenas Divinos): a luz √© c√°lida como a do sol. Criaturas que sofrem penalidades e dano pela luz solar sofrem seus efeitos como se estivessem expostas √† luz solar real. Seus aliados na √°rea estabilizam automaticamente e ficam imunes √† condi√ß√£o sangrando, e seus inimigos ficam ofuscados. Requer 2¬∫ c√≠rculo.",cost:2},{label:"+5 PM (Apenas Divinos): muda o alcance para toque e o alvo para 1 criatura. Em vez do normal, o alvo √© envolto por um halo de luz, recebendo +10 em testes de Diplomacia e redu√ß√£o de trevas 10. Requer 2¬∫ c√≠rculo.",cost:5}]:"Sombras Profanas"===e&&(y=[{label:"+1 PM: aumenta a √°rea da escurid√£o em +1,5m de raio.",cost:1},{label:"+2 PM: camuflagem total por escurid√£o total.",cost:2},{label:"+2 PM: alvo 1 criatura, resist√™ncia Fortitude parcial, cego pela cena (requer 2¬∫ c√≠rculo).",cost:2},{label:"+3 PM: dura√ß√£o de um dia.",cost:3},{label:"+5 PM: alcance pessoal, alvo voc√™, +10 Furtividade/camuflagem (requer 2¬∫ c√≠rculo).",cost:5}]);const b=document.createElement("div");b.textContent="Aprimoramentos:",b.style.color="#6ec6ff",b.style.fontSize="13px",b.style.fontWeight="bold",b.style.margin="10px 0 4px 0",g.appendChild(b);const h=document.createElement("div");h.style.display="flex",h.style.flexDirection="column",h.style.gap="4px";const x=[];y.forEach((e,a)=>{const o=document.createElement("label");o.style.display="flex",o.style.alignItems="center",o.style.gap="8px";const t=document.createElement("input");t.type="checkbox",t.value=a,x.push(t),o.appendChild(t);const s=document.createElement("span");s.textContent=e.label,s.style.color="#ecf0f1",s.style.fontSize="13px",o.appendChild(s),h.appendChild(o)}),g.appendChild(h);const C=document.createElement("div");function w(){let e=1;x.forEach((a,o)=>{a.checked&&(e+=y[o].cost)}),C.textContent=`Custo total: ${e} PM`}C.style.color="#6ec6ff",C.style.fontWeight="bold",C.style.marginTop="10px",x.forEach(e=>{e.onchange=w}),w(),g.appendChild(C);const q=document.createElement("button");q.textContent="Compartilhar",q.style.background="none",q.style.border="1px solid #6ec6ff",q.style.color="#6ec6ff",q.style.fontSize="14px",q.style.fontWeight="bold",q.style.borderRadius="6px",q.style.padding="8px 0",q.style.marginTop="10px",q.style.width="100%",q.style.cursor="pointer",q.style.transition="all 0.2s",q.onmouseover=()=>{q.style.background="#6ec6ff",q.style.color="#23243a"},q.onmouseout=()=>{q.style.background="none",q.style.color="#6ec6ff"},q.onclick=()=>{const a=$();let o="";"Luz Sagrada"===e?o=`${v.textContent}\n\n    +1 PM: aumenta a √°rea iluminada em +3m de raio.\n\n    +2 PM: muda a dura√ß√£o para um dia.\n\n    +2 PM: muda a dura√ß√£o para permanente e adiciona componente material (p√≥ de rubi no valor de T$ 50). N√£o pode ser usado em conjunto com outros aprimoramentos. Requer 2¬∫ c√≠rculo.\n\n    +0 PM (Apenas Arcanos): muda o alvo para 1 criatura. Voc√™ lan√ßa a magia nos olhos do alvo, que fica ofuscado pela cena. N√£o afeta criaturas cegas.\n\n    +2 PM (Apenas Arcanos): muda o alcance para longo e o efeito para cria 4 pequenos globos flutuantes de pura luz. Voc√™ pode posicionar os globos onde quiser dentro do alcance. Uma vez por rodada, voc√™ pode mover os globos com uma a√ß√£o livre. Cada um ilumina como uma tocha, mas n√£o produz calor. Se um globo ocupar o espa√ßo de uma criatura, ela fica ofuscada e sua silhueta pode ser vista claramente (ela n√£o recebe camuflagem por escurid√£o ou invisibilidade). Requer 2¬∫ c√≠rculo.\n\n    +2 PM (Apenas Divinos): a luz √© c√°lida como a do sol. Criaturas que sofrem penalidades e dano pela luz solar sofrem seus efeitos como se estivessem expostas √† luz solar real. Seus aliados na √°rea estabilizam automaticamente e ficam imunes √† condi√ß√£o sangrando, e seus inimigos ficam ofuscados. Requer 2¬∫ c√≠rculo.\n\n    +5 PM (Apenas Divinos): muda o alcance para toque e o alvo para 1 criatura. Em vez do normal, o alvo √© envolto por um halo de luz, recebendo +10 em testes de Diplomacia e redu√ß√£o de trevas 10. Requer 2¬∫ c√≠rculo.`:"Sombras Profanas"===e&&(o=`${v.textContent}\n\n    +1 PM: aumenta a √°rea da escurid√£o em +1,5m de raio.\n\n    +2 PM: muda o efeito para fornecer camuflagem total por escurid√£o total. As sombras bloqueiam a vis√£o na √°rea e atrav√©s dela.\n\n    +2 PM: muda o alvo para 1 criatura e a resist√™ncia para Fortitude parcial. Voc√™ lan√ßa a magia nos olhos do alvo, que fica cego pela cena. Se passar na resist√™ncia, fica cego por 1 rodada. Requer 2¬∫ c√≠rculo.\n\n    +3 PM: muda a dura√ß√£o para um dia.\n\n    +5 PM: muda o alcance para pessoal e o alvo para voc√™. Em vez do normal, voc√™ √© coberto por sombras, recebendo +10 em testes de Furtividade e camuflagem leve. Requer 2¬∫ c√≠rculo.`),Z(`&{template:spell}{{character=@{${a}|character_name}}}{{spellname=${e}}}{{type=Universal}}{{execution=Padr√£o}}{{duration=Cena}}{{range=Curto}}{{targetarea=1 Objeto}}{{resistance=Vontade}}{{description=${o}\n    JdA:193}}{{cd=[[@{${a}|cdtotal}+0]]}}`)},g.appendChild(q),r.appendChild(g),document.body.appendChild(r),S(r,"blue")}(e.nome,e.nome,e.comando)});function te(){const e=document.getElementById("misc-popup");e&&e.remove();const a=document.getElementById("misc-overlay");a&&a.remove();const o=document.createElement("div");o.id="misc-overlay",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.background="rgba(0,0,0,0.5)",o.style.zIndex="10000",o.onclick=()=>{o.remove(),t.remove()},document.body.appendChild(o);const t=document.createElement("div");t.id="misc-popup",t.className="roll20-popup roll20-popup-orange",t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.background="rgba(30,30,40,0.98)",t.style.border="2px solid #ffb86c",t.style.borderRadius="12px",t.style.padding="18px 20px 16px 20px",t.style.zIndex="10001",t.style.maxWidth="400px",t.style.maxHeight="600px",t.style.overflowY="auto",t.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="stretch";const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="space-between",s.style.alignItems="center",s.style.marginBottom="15px",s.style.width="100%";const r=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ffb86c",onClick:()=>{t.remove();const e=document.getElementById("misc-overlay");e&&e.remove()}}),n=document.createElement("h3");n.textContent="Miscel√¢neos",n.style.color="#ffb86c",n.style.margin="0",n.style.fontSize="17px",n.style.fontWeight="bold",s.appendChild(n),s.appendChild(r.render()),t.appendChild(s);const i=document.createElement("div");i.style.display="flex",i.style.flexDirection="column",i.style.gap="16px",i.style.marginTop="10px",t.appendChild(i);const c=document.createElement("div");c.style.background="#23243a",c.style.border="1.5px solid #ffb86c",c.style.borderRadius="8px",c.style.padding="16px",c.style.cursor="pointer",c.style.transition="all 0.2s",c.onmouseover=()=>{c.style.background="#2d2e4a"},c.onmouseout=()=>{c.style.background="#23243a"},c.onclick=()=>{t.remove();const e=document.getElementById("misc-overlay");e&&e.remove(),function(){g.log("Abrindo Pratos Especiais");try{const e=document.getElementById("pratos-popup");e&&e.remove();const a=document.getElementById("pratos-overlay");a&&a.remove();const o=document.createElement("div");o.id="pratos-overlay",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.background="rgba(0,0,0,0.5)",o.style.zIndex="10000",o.onclick=()=>{o.remove(),t.remove()},document.body.appendChild(o);const t=document.createElement("div");t.id="pratos-popup",t.className="roll20-popup roll20-popup-orange",t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.background="rgba(30,30,40,0.98)",t.style.border="2px solid #ffb86c",t.style.borderRadius="12px",t.style.padding="18px 20px 16px 20px",t.style.zIndex="10001",t.style.maxWidth="480px",t.style.maxHeight="600px",t.style.overflowY="auto",t.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="stretch";const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="space-between",s.style.alignItems="center",s.style.marginBottom="15px",s.style.width="100%";const r=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ffb86c",onClick:()=>{t.remove();const e=document.getElementById("pratos-overlay");e&&e.remove()}}),n=document.createElement("h3");n.textContent="Pratos Especiais",n.style.color="#ffb86c",n.style.margin="0",n.style.fontSize="17px",n.style.fontWeight="bold",s.appendChild(n),s.appendChild(r.render()),t.appendChild(s);const i=document.createElement("div");i.style.position="relative",i.style.marginBottom="10px";const c=document.createElement("input");c.type="text",c.placeholder="Filtrar pratos...",c.style.width="100%",c.style.padding="10px 12px",c.style.borderRadius="8px",c.style.border="1px solid #ffb86c",c.style.background="#23243a",c.style.color="#fff",c.style.fontSize="14px",c.style.outline="none",c.style.boxSizing="border-box",c.style.fontSize="15px",i.appendChild(c),t.appendChild(i);const d=document.createElement("div");d.style.display="flex",d.style.flexDirection="column",d.style.gap="14px",d.style.marginTop="10px",t.appendChild(d);const l=[{nome:"Assado de Carnes",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_60.jpg",raridade:"Comum",descricao:"Um prato muito apreciado no Reinado, mas mal visto no Imp√©rio de Tauron. Pura prote√≠na, deixa qualquer um mais forte.",bonus:"+2 em rolagens de dano corpo a corpo.",preco:"T$ 30",ingredientes:"Carne, carne de ca√ßa, porco",custoIngredientes:"T$ 56",cdTeste:"20",icone:"ü•©"},{nome:"Balinhas",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/achievement_halloween_candy_01.jpg",raridade:"Comum",descricao:"Balas coloridas e doces. Arcanistas gostam ‚Äî dizem que o a√ß√∫car fe√©rico usado nas balinhas potencializa suas magias.",bonus:"+2 em rolagens de dano de magias.",preco:"T$ 30",ingredientes:"A√ß√∫car das fadas, fruta",custoIngredientes:"T$ 53",cdTeste:"20",icone:"üç¨"},{nome:"Banquete dos Her√≥is",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_cauldron_frost.jpg",raridade:"Comum",descricao:"Uma mesa repleta das melhores comidas que o dinheiro pode pagar.",bonus:"+1 em um atributo a sua escolha. Esse aumento n√£o oferece PV, PM e per√≠cias adicionais.",preco:"T$ 150",ingredientes:"Carne de ca√ßa, ovo de monstro, avel√£ de Norba",custoIngredientes:"T$ 82",cdTeste:"25",icone:"üçΩÔ∏è"},{nome:"Batata Valkariana",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_103_potatobread.jpg",raridade:"Comum",descricao:"Batatas cortadas em tiras e mergulhadas em √≥leo fervente. Gordurentas e pouco nutritivas, s√£o o tipo de prato que s√≥ √© servido numa metr√≥pole como Valkaria. Apesar disso, s√£o saborosas e deixam qualquer um empolgado.",bonus:"+1d6 em um teste a sua escolha realizado at√© o fim do dia.",preco:"T$ 2",ingredientes:"√ìleo, legume",custoIngredientes:"T$ 4",cdTeste:"15",icone:"üçü"},{nome:"Bolo de Cenoura",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_fishcake.jpg",raridade:"Comum",descricao:'Uma sobremesa simples, que "faz bem para a vista", segundo anci√µes de todo o Reinado. Aparentemente, os anci√µes est√£o certos, pois o bolo de cenoura fornece +2 em testes de Percep√ß√£o.',bonus:"+2 em testes de Percep√ß√£o.",preco:"T$ 4",ingredientes:"Farinha, fruta, √≥leo",custoIngredientes:"T$ 7",cdTeste:"15",icone:"üç∞"},{nome:"Bolo do Pante√£o",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_144_cakeslice.jpg",raridade:"Comum",descricao:"Uma sobremesa divina! Este bolo de gorad √© preparado com os melhores ingredientes, por isso √© car√≠ssimo, servido apenas em banquetes reais ‚Äî ou em tavernas que atendem aventureiros famosos. Dizem que o gorad usado no bolo √© uma das fontes de energia do Pante√£o.",bonus:"Seu custo para ativar habilidades e lan√ßar magias diminui em -1 PM (m√≠nimo 1).",preco:"T$ 150",ingredientes:"A√ß√∫car das fadas, avel√£ de Norba, farinha, gorad",custoIngredientes:"T$ 121",cdTeste:"25",icone:"üç∞"},{nome:"Ensopado Refor√ßado",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_swirlingmistsoup.jpg",raridade:"Comum",descricao:"Um prato nutritivo, mas pesado.",bonus:"+20 PV tempor√°rios, mas seu deslocamento diminui em ‚Äì1,5m.",preco:"T$ 6",ingredientes:"Cereal, porco, verdura",custoIngredientes:"T$ 10",cdTeste:"15",icone:"üç≤"},{nome:"Estrogonofe",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_sauteedcarrots.jpg",raridade:"Comum",descricao:"Essa iguaria deliciosa foi inventada nas cortes do antigo Reino de Yudennach ‚Äî dizem que √© uma das poucas coisas boas a sair daquele lugar. Comer estrogonofe deixa voc√™ firme em suas convic√ß√µes.",bonus:"+2 em testes de Vontade.",preco:"T$ 12",ingredientes:"Carne, cogumelo, leite",custoIngredientes:"T$ 22",cdTeste:"15",icone:"üç≤"},{nome:"Fritada Monstruosa",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_06.jpg",raridade:"Comum",descricao:"A receita √© simples ‚Äî o segredo est√° nos ingredientes. Feita com ovos de monstros, esta omelete √© extremamente nutritiva.",bonus:"+10 PV tempor√°rios.",preco:"T$ 30",ingredientes:"Ovo de monstro, √≥leo",custoIngredientes:"T$ 53",cdTeste:"20",icone:"üç≥"},{nome:"Futomaki",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_161_fish_white.jpg",raridade:"Comum",descricao:"Criado no Imp√©rio de Jade, este prato consiste em um rolo de arroz recheado com peixes, folhas e ra√≠zes. Uma refei√ß√£o elegante, que deixa todos dispostos a dialogar.",bonus:"+2 em testes de Diplomacia.",preco:"T$ 12",ingredientes:"Cereal, peixe",custoIngredientes:"T$ 8",cdTeste:"15",icone:"üç£"},{nome:"Gorad Quente",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_meat_cooked_08.jpg",raridade:"Comum",descricao:"Gorad e leite, servidos fumegando. N√£o tem erro. O gorad ativa o c√©rebro.",bonus:"+2 PM tempor√°rios.",preco:"T$ 18",ingredientes:"Gorad, leite",custoIngredientes:"T$ 31",cdTeste:"20",icone:"ü•õ"},{nome:"Gorvel√£",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_cask_04.jpg",raridade:"Comum",descricao:"Gorad com avel√£ de Norba. √â uma sobremesa cara, mas deliciosa.",bonus:"+5 PM tempor√°rios.",preco:"T$ 42",ingredientes:"Gorad, avel√£ de Norba",custoIngredientes:"T$ 70",cdTeste:"25",icone:"üç∞"},{nome:"Macarr√£o de Yuvalin",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_cooking_90_cinnamonbonefishstew.jpg",raridade:"Comum",descricao:"Yuvalin √© uma cidade mineradora em Zakharov, na fronteira com as Montanhas Uivantes. Seus habitantes criaram este prato refor√ßado (macarr√£o, bacon e creme de leite) para encarar suas √°rduas jornadas de trabalho nas minas. Deliciosa, a receita se espalhou por outras cidades e reinos.",bonus:"+5 PV tempor√°rios.",preco:"T$ 6",ingredientes:"Farinha, leite, porco",custoIngredientes:"T$ 10",cdTeste:"15",icone:"üçù"},{nome:"P√£o de Queijo",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_orchardfruit01.jpg",raridade:"Comum",descricao:"Um bom p√£o de queijo deixa qualquer aventureiro bem nutrido e saud√°vel.",bonus:"+2 em testes de Fortitude.",preco:"T$ 10",ingredientes:"Farinha, queijo",custoIngredientes:"T$ 7",cdTeste:"15",icone:"ü•®"},{nome:"Pizza",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_deliciouspizza.jpg",raridade:"Comum",descricao:"Um disco de massa coberto com molho de tomate e queijo, este prato foi criado por Guido Venusto, um nobre de Ahlen que queria ascender socialmente. Inepto nas artes da intriga, Venusto resolveu manipular a corte pela barriga. Funcionou ‚Äî o prato foi um sucesso e o nobre cozinheiro teve muita influ√™ncia por anos. Certa noite, um espi√£o conseguiu roubar a receita. O segredo da pizza se espalhou e, sem seu trunfo, Venusto foi assassinado logo depois. Comer uma pizza deixa-o pronto para encarar qualquer perigo.",bonus:"+1 em todos os testes de resist√™ncia.",preco:"T$ 6",ingredientes:"Farinha, fruta, queijo",custoIngredientes:"T$ 10",cdTeste:"15",icone:"üçï"},{nome:"Porco Assado",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_123_roast.jpg",raridade:"Comum",descricao:"Um prato t√≠pico e popular em Deheon, que j√° se alastrou pelo Reinado. Comer um porco assado o deixa valente e brig√£o.",bonus:"+1 em testes de Luta.",preco:"T$ 36",ingredientes:"Porco, frutas, legume",custoIngredientes:"T$ 12",cdTeste:"15",icone:"üçñ"},{nome:"Prato do Aventureiro",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_fish_18.jpg",raridade:"Comum",descricao:"Um cozido de frango com legumes, esta √© uma refei√ß√£o simples, mas mant√©m qualquer um bem alimentado.",bonus:"Em sua pr√≥xima noite de sono, voc√™ aumenta a sua recupera√ß√£o de pontos de vida em +1 por n√≠vel.",preco:"T$ 2",ingredientes:"Ave, legume",custoIngredientes:"T$ 5",cdTeste:"10",icone:"üç≤"},{nome:"Salada de Salistick",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_goldcarpconsomme.jpg",raridade:"Comum",descricao:"Com folhas e carne de frango, esta salada foi criada no Reino dos M√©dicos, onde a sa√∫de √© uma grande preocupa√ß√£o. Uma alimenta√ß√£o leve, mas nutritiva.",bonus:"Aumenta seu deslocamento em +1,5m (1 quadrado).",preco:"T$ 4",ingredientes:"Ave, fruta, legume",custoIngredientes:"T$ 8",cdTeste:"15",icone:"ü•ó"},{nome:"Salada √âlfica",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_swirlingmistsoup.jpg",raridade:"Comum",descricao:"Esta salada vegetariana leva uma mistura de folhas, frutas e legumes. Segundo os relatos, a receita foi inventada em Len√≥rienn e passada aos reinos humanos de Lamnor, antes do isolamento dos povos. Felizmente, a salada se espalhou por Arton antes da queda do continente. Um prato leve e equilibrado, inspira disparos precisos.",bonus:"+1 em testes de Pontaria.",preco:"T$ 4",ingredientes:"Fruta, legume, verdura",custoIngredientes:"T$ 5",cdTeste:"15",icone:"ü•ó"},{nome:"Salada Imperial",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_braisedturtle.jpg",raridade:"Comum",descricao:"Uma mistura de folhas com bacon e queijo, esta salada √© leve, mas empolgante.",bonus:"+2 em testes de Iniciativa.",preco:"T$ 6",ingredientes:"Porco, queijo, verdura",custoIngredientes:"T$ 15",cdTeste:"15",icone:"ü•ó"},{nome:"Sashimi",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_valleystirfry.jpg",raridade:"Comum",descricao:"Uma iguaria da culin√°ria tamuraniana, este prato consiste de peixes e frutos do mar fatiados em pequenos peda√ßos e servidos com um molho t√≠pico do Imp√©rio de Jade. Uma refei√ß√£o refinada, leve e equilibrada.",bonus:"+2 em rolagens de dano √† dist√¢ncia.",preco:"T$ 22",ingredientes:"Peixe, molho tamuraniano",custoIngredientes:"T$ 37",cdTeste:"20",icone:"üç£"},{nome:"Sopa de Cogumelos",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_slime_02.jpg",raridade:"Comum",descricao:"Esta sopa expande sua percep√ß√£o m√≠stica.",bonus:"+2 em testes de Misticismo.",preco:"T$ 6",ingredientes:"Cogumelo, legume, verdura",custoIngredientes:"T$ 7",cdTeste:"15",icone:"üç≤"},{nome:"Sopa de Peixe",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_63.jpg",raridade:"Comum",descricao:"Um cozido de peixe com verduras, √© um prato simples e humilde, mas garante descanso relaxante.",bonus:"Em sua pr√≥xima noite de sono, voc√™ aumenta a sua recupera√ß√£o de pontos de mana em +1 por n√≠vel.",preco:"T$ 3",ingredientes:"Verdura, peixe",custoIngredientes:"T$ 8",cdTeste:"10",icone:"üç≤"},{nome:"Torta de Ma√ß√£",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_10.jpg",raridade:"Comum",descricao:"Dizem que, ap√≥s uma bruxa usar uma ma√ß√£ envenenada para matar uma princesa, Thantalla-Dhaedelin, a Rainha das Fadas, decretou que ma√ß√£s nunca mais fariam mal a ningu√©m. Se a lenda √© verdade, ou se ma√ß√£s s√£o simplesmente saud√°veis, ningu√©m sabe dizer, mas comer este prato fornece resist√™ncia a veneno +5.",bonus:"Resist√™ncia a veneno +5.",preco:"T$ 2",ingredientes:"Farinha, fruta",custoIngredientes:"T$ 4",cdTeste:"15",icone:"üç∞"},{nome:"Baga Celeste Cozida",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_goldcarpconsomme.jpg",raridade:"Comum",descricao:"Encontradas originalmente nas encostas invertidas de Vectora, estas bagas se espalharam por toda Arton. Quando preparadas adequadamente, fornecem qualidades m√≠sticas de flutua√ß√£o.",bonus:"Todo dano de queda que voc√™ sofre √© reduzido em ‚àí1d6.",preco:"T$ 25",ingredientes:"Fruta, especiaria",custoIngredientes:"T$ 35",cdTeste:"20",icone:"üåü"},{nome:"Cozido de Pimenta",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_159_fish_82.jpg",raridade:"Comum",descricao:"Um prato forte, capaz de trazer l√°grimas aos olhos do mais resistente dos comensais.",bonus:"+1 em Fortitude (cumulativo com outros itens) e +1 na rolagem do D20 para testes da per√≠cia Fortitude.",preco:"T$ 15",ingredientes:"Legume, especiaria",custoIngredientes:"T$ 12",cdTeste:"18",icone:"üå∂Ô∏è"},{nome:"Manjar de Sombras",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_cooking_80_ravenberrytart.jpg",raridade:"Comum",descricao:"A origem da receita original deste prato se perdeu, mas sua ess√™ncia se manteve inalterada. Consiste de um manjar com ingredientes cultivados em terras pr√≥ximas de cemit√©rios, que protege o corpo contra energias sombrias.",bonus:"Voc√™ ignora os pr√≥ximos 10 pontos de dano de trevas que sofrer.",preco:"T$ 40",ingredientes:"Cereal, especiaria, verdura",custoIngredientes:"T$ 28",cdTeste:"22",icone:"üåë"}];function m(e=""){d.innerHTML="";const a=l.filter(a=>a.nome.toLowerCase().includes(e.toLowerCase())||a.descricao.toLowerCase().includes(e.toLowerCase())||a.bonus.toLowerCase().includes(e.toLowerCase())),o=ce();if(a.sort((e,a)=>{const t=o.includes(e.nome),s=o.includes(a.nome);return t&&!s?-1:!t&&s?1:e.nome.localeCompare(a.nome)}),a.forEach(e=>{const a=ve(e,"food",()=>m(c.value));d.appendChild(a)}),0===a.length&&e.length>0){const a=ye(e,"prato especial","orange");d.appendChild(a)}}c.addEventListener("input",()=>{m(c.value)}),m(),document.body.appendChild(t),S(t,"orange")}catch(u){console.error("Erro ao abrir Pratos Especiais:",u),alert("Erro ao abrir Pratos Especiais. Veja o console para detalhes.")}}()};const d=document.createElement("div");d.textContent="Pratos Especiais",d.style.color="#ffb86c",d.style.fontSize="16px",d.style.fontWeight="bold",d.style.marginBottom="6px",c.appendChild(d);const l=document.createElement("div");l.textContent="Comidas raras que concedem b√¥nus √∫nicos. Disponibilidade e efeitos definidos pelo mestre.",l.style.color="#ecf0f1",l.style.fontSize="13px",c.appendChild(l),i.appendChild(c);const m=document.createElement("div");m.style.background="#23243a",m.style.border="1.5px solid #ffb86c",m.style.borderRadius="8px",m.style.padding="16px",m.style.cursor="pointer",m.style.transition="all 0.2s",m.onmouseover=()=>{m.style.background="#2d2e4a"},m.onmouseout=()=>{m.style.background="#23243a"},m.onclick=()=>{t.remove();const e=document.getElementById("misc-overlay");e&&e.remove(),function(){g.log("Abrindo Bebidas Artonianas");try{const e=document.getElementById("bebidas-popup");e&&e.remove();const a=document.getElementById("bebidas-overlay");a&&a.remove();const o=document.createElement("div");o.id="bebidas-overlay",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.background="rgba(0,0,0,0.5)",o.style.zIndex="10000",o.onclick=()=>{o.remove(),t.remove()},document.body.appendChild(o);const t=document.createElement("div");t.id="bebidas-popup",t.className="roll20-popup roll20-popup-orange",t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.background="rgba(30,30,40,0.98)",t.style.border="2px solid #ffb86c",t.style.borderRadius="12px",t.style.padding="18px 20px 16px 20px",t.style.zIndex="10001",t.style.maxWidth="480px",t.style.maxHeight="600px",t.style.overflowY="auto",t.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="stretch";const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="space-between",s.style.alignItems="center",s.style.marginBottom="15px",s.style.width="100%";const r=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ffb86c",onClick:()=>{t.remove();const e=document.getElementById("bebidas-overlay");e&&e.remove()}}),n=document.createElement("h3");n.textContent="Bebidas Artonianas",n.style.color="#ffb86c",n.style.margin="0",n.style.fontSize="17px",n.style.fontWeight="bold",s.appendChild(n),s.appendChild(r.render()),t.appendChild(s);const i=document.createElement("div");i.style.position="relative",i.style.marginBottom="10px";const c=document.createElement("input");c.type="text",c.placeholder="Filtrar bebidas...",c.style.width="100%",c.style.padding="10px 12px",c.style.borderRadius="8px",c.style.border="1px solid #ffb86c",c.style.background="#23243a",c.style.color="#fff",c.style.fontSize="14px",c.style.outline="none",c.style.boxSizing="border-box",c.style.fontSize="15px",i.appendChild(c),t.appendChild(i);const d=document.createElement("div");d.style.display="flex",d.style.flexDirection="column",d.style.gap="14px",d.style.marginTop="10px",t.appendChild(d);const l=[{nome:"Baba de Troll",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_potion_136.jpg",tipo:"N√£o alco√≥lica",descricao:"Uma bebida sem √°lcool, √† base de leite, castanhas, nozes e mel.",efeito:"+1d4 em um teste √† sua escolha at√© o fim do dia.",cd:"‚Äî",icone:"üßÉ"},{nome:"Barba Queimada",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_05.jpg",tipo:"Alco√≥lica",descricao:"Forte e amarga, esta cerveja an√£ fortalece o corpo e o esp√≠rito.",efeito:"Redu√ß√£o de Dano 2.",cd:"20",icone:"üç∫"},{nome:"Cerveja Deheoni",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_08.jpg",tipo:"Alco√≥lica",descricao:"A bebida mais comum nas tavernas do Reinado.",efeito:"+1 em testes de resist√™ncia.",cd:"15",icone:"üçª"},{nome:"Dil√≠nio",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_11.jpg",tipo:"Alco√≥lica",descricao:"Destilado tradicional de Mortenstenn, feito com um cereal que s√≥ cresce no continente sul. A receita se perdeu ap√≥s as invas√µes duyshidakk, e poucos barris chegaram ao Reinado.",efeito:"O limite de gasto de PM aumenta em +1.",cd:"20",observacao:"N√£o pode ser fabricado",icone:"ü•É"},{nome:"Grogue Negro",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_12.jpg",tipo:"Alco√≥lica",descricao:"Rum misturado com especiarias. Seu nome vem de sua origem ‚Äî piratas do Conclave, que atuam no Mar Negro ‚Äî e n√£o da cor da bebida, que √© dourada clara.",efeito:"Quando voc√™ usa Aud√°cia, o b√¥nus fornecido pelo poder aumenta em +1.",cd:"15",icone:"üè¥‚Äç‚ò†Ô∏è"},{nome:"Grogue Rubro",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_13.jpg",tipo:"Alco√≥lica",descricao:"Varia√ß√£o do grogue negro, com especiarias picantes que fazem a bebida adquirir uma colora√ß√£o avermelhada ‚Äî e quem a bebe, certa inclina√ß√£o para a viol√™ncia.",efeito:"Voc√™ pode usar Aud√°cia para testes de ataque.",cd:"20",icone:"üî•"},{nome:"Hidromel Uivante",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_14.jpg",tipo:"Alco√≥lica",descricao:"Fabricada nas montanhas geladas, esta bebida aquece e incita.",efeito:"+2 em rolagens de dano corpo a corpo.",cd:"20",icone:"‚ùÑÔ∏è"},{nome:"Licor Fe√©rico",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_15.jpg",tipo:"Alco√≥lica",descricao:"De apar√™ncia enevoada e gosto adocicado, dizem que √© feito na Pondsm√¢nia e trazido com dificuldade ao Reinado. Alguns acham que √© inven√ß√£o dos taverneiros, at√© provarem uma dose.",efeito:"Escolha uma habilidade. O custo para ativ√°-la diminui em ‚Äì1 PM.",cd:"25",icone:"‚ú®"},{nome:"Sidra Ahleniense",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_16.jpg",tipo:"Alco√≥lica",descricao:"Esta bebida doce deixa qualquer um mais falante.",efeito:"+2 em testes de per√≠cias originalmente baseadas em Carisma.",cd:"15",icone:"üçè"},{nome:"Vinho Pruss",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_17.jpg",tipo:"Alco√≥lica",descricao:"Batizado em homenagem ao antigo Rei-Imperador Thormy ‚Äî dizem que era o favorito do monarca.",efeito:"Concede 3 pontos de mana tempor√°rios.",cd:"15",icone:"üç∑"},{nome:"Vinho √âlfico",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_18.jpg",tipo:"Alco√≥lica",descricao:"De sabor complexo, agu√ßa a mente.",efeito:"+1 na CD para resistir √†s suas habilidades.",cd:"20",icone:"üåø"}];function m(e=""){d.innerHTML="";const a=l.filter(a=>a.nome.toLowerCase().includes(e.toLowerCase())||a.descricao.toLowerCase().includes(e.toLowerCase())||a.efeito.toLowerCase().includes(e.toLowerCase())),o=de();if(a.sort((e,a)=>{const t=o.includes(e.nome),s=o.includes(a.nome);return t&&!s?-1:!t&&s?1:e.nome.localeCompare(a.nome)}),a.forEach(e=>{const a=ve(e,"drink",()=>m(c.value));d.appendChild(a)}),0===a.length&&e.length>0){const a=ye(e,"bebida artoniana","orange");d.appendChild(a)}}c.addEventListener("input",()=>{m(c.value)}),m(),document.body.appendChild(t),S(t,"orange")}catch(u){console.error("Erro ao abrir Bebidas Artonianas:",u),alert("Erro ao abrir Bebidas Artonianas. Veja o console para detalhes.")}}()};const u=document.createElement("div");u.textContent="Bebidas Artonianas",u.style.color="#ffb86c",u.style.fontSize="16px",u.style.fontWeight="bold",u.style.marginBottom="6px",m.appendChild(u);const p=document.createElement("div");p.textContent="Bebidas alco√≥licas e n√£o alco√≥licas que concedem b√¥nus √∫nicos. Efeitos duram 24 horas.",p.style.color="#ecf0f1",p.style.fontSize="13px",m.appendChild(p),i.appendChild(m);const f=document.createElement("div");f.style.background="#23243a",f.style.border="1.5px solid #ffb86c",f.style.borderRadius="8px",f.style.padding="16px",f.style.cursor="pointer",f.style.transition="all 0.2s",f.onmouseover=()=>{f.style.background="#2d2e4a"},f.onmouseout=()=>{f.style.background="#23243a"},f.onclick=()=>{t.remove();const e=document.getElementById("misc-overlay");e&&e.remove(),function(){const e=document.getElementById("conditions-popup");e&&e.remove();const a=document.getElementById("conditions-overlay");a&&a.remove();const o=document.createElement("div");o.id="conditions-overlay",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.background="rgba(0,0,0,0.5)",o.style.zIndex="10000",o.onclick=()=>{o.remove(),t.remove()},document.body.appendChild(o);const t=document.createElement("div");t.id="conditions-popup",t.className="roll20-popup roll20-popup-orange",t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.background="rgba(30,30,40,0.98)",t.style.border="2px solid #ffb86c",t.style.borderRadius="12px",t.style.padding="18px 20px 16px 20px",t.style.zIndex="10001",t.style.maxWidth="450px",t.style.maxHeight="600px",t.style.overflowY="auto",t.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)";const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="space-between",s.style.alignItems="center",s.style.marginBottom="15px";const r=document.createElement("h3");r.textContent="Condi√ß√µes",r.style.color="#ffb86c",r.style.margin="0",r.style.fontSize="18px",r.style.fontWeight="bold";const n=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ffb86c",onClick:()=>{t.remove();const e=document.getElementById("conditions-overlay");e&&e.remove()}});s.appendChild(r),s.appendChild(n.render()),t.appendChild(s);const i=x({placeholder:"Buscar condi√ß√µes...",theme:"orange",marginBottom:"12px",onInput:e=>{d(e)}});t.appendChild(i.container);const c=document.createElement("div");function d(e){const a=da().filter(a=>!e||a.nome.toLowerCase().includes(e.toLowerCase())||a.descricao.toLowerCase().includes(e.toLowerCase())||a.efeitos.toLowerCase().includes(e.toLowerCase()));c.innerHTML="",a.forEach(e=>{const a=window.Roll20Components.createFavoritableCardWithPreset("condition",{title:e.nome,summary:fe(e.descricao),efeitos:e.efeitos,onClick:()=>{w(e)}});c.appendChild(a.render())})}c.id="conditions-list",c.style.display="flex",c.style.flexDirection="column",c.style.gap="8px",d(""),t.appendChild(c),document.body.appendChild(t),S(t,"orange")}()};const v=document.createElement("div");v.textContent="Lista de Condi√ß√µes",v.style.color="#ffb86c",v.style.fontSize="16px",v.style.fontWeight="bold",v.style.marginBottom="6px",f.appendChild(v);const y=document.createElement("div");y.textContent="Condi√ß√µes que afetam o personagem.",y.style.color="#ecf0f1",y.style.fontSize="13px",f.appendChild(y),i.appendChild(f);const b=document.createElement("div");b.style.background="#23243a",b.style.border="1.5px solid #ffb86c",b.style.borderRadius="8px",b.style.padding="16px",b.style.cursor="pointer",b.style.transition="all 0.2s",b.onmouseover=()=>{b.style.background="#2d2e4a"},b.onmouseout=()=>{b.style.background="#23243a"},b.onclick=()=>{t.remove();const e=document.getElementById("misc-overlay");e&&e.remove(),function(){g.log("Abrindo Po√ß√µes");try{const e=document.getElementById("pocoes-popup");e&&e.remove();const a=document.getElementById("pocoes-overlay");a&&a.remove();const o=document.createElement("div");o.id="pocoes-overlay",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.background="rgba(0,0,0,0.5)",o.style.zIndex="10000",o.onclick=()=>{o.remove(),t.remove()},document.body.appendChild(o);const t=document.createElement("div");t.id="pocoes-popup",t.className="roll20-popup roll20-popup-orange",t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.background="rgba(30,30,40,0.98)",t.style.border="2px solid #ffb86c",t.style.borderRadius="12px",t.style.padding="18px 20px 16px 20px",t.style.zIndex="10001",t.style.maxWidth="480px",t.style.maxHeight="600px",t.style.overflowY="auto",t.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="stretch";const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="space-between",s.style.alignItems="center",s.style.marginBottom="15px",s.style.width="100%";const r=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ffb86c",onClick:()=>{t.remove();const e=document.getElementById("pocoes-overlay");e&&e.remove()}}),n=document.createElement("h3");n.textContent="Po√ß√µes",n.style.color="#ffb86c",n.style.margin="0",n.style.fontSize="17px",n.style.fontWeight="bold",s.appendChild(n),s.appendChild(r.render()),t.appendChild(s);const i=document.createElement("div");i.style.position="relative",i.style.marginBottom="10px";const c=document.createElement("input");c.type="text",c.placeholder="Filtrar po√ß√µes...",c.style.width="100%",c.style.padding="10px 12px",c.style.borderRadius="8px",c.style.border="1px solid #ffb86c",c.style.background="#23243a",c.style.color="#fff",c.style.fontSize="14px",c.style.outline="none",c.style.boxSizing="border-box",c.style.fontSize="15px",i.appendChild(c),t.appendChild(i);const d=document.createElement("div");d.style.display="flex",d.style.flexDirection="column",d.style.gap="14px",d.style.marginTop="10px",t.appendChild(d);const l=me();function m(e=""){d.innerHTML="";const a=l.filter(a=>a.nome.toLowerCase().includes(e.toLowerCase())||a.descricao.toLowerCase().includes(e.toLowerCase())||a.efeito.toLowerCase().includes(e.toLowerCase())||a.tipo.toLowerCase().includes(e.toLowerCase())),o=le();if(a.sort((e,a)=>{const t=o.includes(e.nome),s=o.includes(a.nome);return t&&!s?-1:!t&&s?1:e.nome.localeCompare(a.nome)}),a.forEach(e=>{const a=ve(e,"potion",()=>m(c.value));d.appendChild(a)}),0===a.length&&e.length>0){const a=ye(e,"po√ß√£o","orange");d.appendChild(a)}}c.addEventListener("input",()=>{m(c.value)}),m(),document.body.appendChild(t),S(t,"orange")}catch(u){console.error("Erro ao abrir Po√ß√µes:",u),alert("Erro ao abrir Po√ß√µes. Veja o console para detalhes.")}}()};const h=document.createElement("div");h.textContent="Po√ß√µes",h.style.color="#ffb86c",h.style.fontSize="16px",h.style.fontWeight="bold",h.style.marginBottom="6px",b.appendChild(h);const C=document.createElement("div");C.textContent="Po√ß√µes m√°gicas que concedem efeitos tempor√°rios. Efeitos duram por cena.",C.style.color="#ecf0f1",C.style.fontSize="13px",b.appendChild(C),i.appendChild(b);const q=document.createElement("div");q.style.background="#23243a",q.style.border="1.5px solid #ffb86c",q.style.borderRadius="8px",q.style.padding="16px",q.style.cursor="pointer",q.style.transition="all 0.2s",q.onmouseover=()=>{q.style.background="#2d2e4a"},q.onmouseout=()=>{q.style.background="#23243a"},q.onclick=()=>{t.remove();const e=document.getElementById("misc-overlay");e&&e.remove(),ne()};const E=document.createElement("div");E.textContent="Grim√≥rio de Magias",E.style.color="#ffb86c",E.style.fontSize="16px",E.style.fontWeight="bold",E.style.marginBottom="6px",q.appendChild(E);const z=document.createElement("div");z.textContent="Cat√°logo completo de magias organizadas por tradi√ß√µes e c√≠rculos.",z.style.color="#ecf0f1",z.style.fontSize="13px",q.appendChild(z),i.appendChild(q),document.body.appendChild(t),S(t,"orange")}async function se(){const e=[],a={abj:"Abjura√ß√£o",adv:"Adivinha√ß√£o",con:"Conjura√ß√£o",enc:"Encantamento",evo:"Evoca√ß√£o",ilu:"Ilus√£o",nec:"Necromancia",tra:"Transmuta√ß√£o"},o={acao:"A√ß√£o",action:"A√ß√£o",bonus:"A√ß√£o B√¥nus",reacao:"Rea√ß√£o",reaction:"Rea√ß√£o",free:"Livre",full:"A√ß√£o Completa",minute:"1 Minuto",hour:"1 Hora",move:"Movimento",special:"Especial",ritual:"Ritual"},t={1:"1¬∫ C√≠rculo",2:"2¬∫ C√≠rculo",3:"3¬∫ C√≠rculo",4:"4¬∫ C√≠rculo",5:"5¬∫ C√≠rculo"},s={arcana:{"1-circulo":{abjuracao:{alarme:{name:"Alarme",type:"Magia",img:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_orb_01.jpg",system:{circulo:"1",escola:"abjuracao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",duracao:"1 dia",alvo:"Esfera de 9m de raio",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Voc√™ cria uma barreira protetora invis√≠vel que detecta qualquer criatura que tocar ou entrar na √°rea protegida. Ao lan√ßar a magia, voc√™ pode escolher quais criaturas podem entrar na √°rea sem ativar seus efeitos. Alarme pode emitir um aviso telep√°tico ou sonoro, decidido quando a magia √© lan√ßada. Um aviso telep√°tico alerta apenas voc√™, inclusive acordando-o se estiver dormindo, mas apenas se estiver a at√© 1km da √°rea protegida. Um aviso sonoro alerta todas as criaturas em alcance longo."}},aprimoramentos:[{custo:2,descricao:"muda o alcance para pessoal. A √°rea √© emanada a partir de voc√™.",aumenta:!1},{custo:5,descricao:'al√©m do normal, voc√™ tamb√©m percebe qualquer efeito de adivinha√ß√£o que seja usado dentro da √°rea ou atravesse a √°rea. Voc√™ pode fazer um teste oposto de Misticismo contra quem usou o efeito; se passar, tem um vislumbre de seu rosto e uma ideia aproximada de sua localiza√ß√£o ("tr√™s dias de viagem ao norte", por exemplo).',aumenta:!1},{custo:9,descricao:"muda a dura√ß√£o para 1 dia ou at√© ser descarregada e a resist√™ncia para Vontade anula. Quando um intruso entra na √°rea, voc√™ pode descarregar a magia. Se o intruso falhar na resist√™ncia, ficar√° paralisado por 1d4 rodadas. Al√©m disso, pelas pr√≥ximas 24 horas voc√™ e as criaturas escolhidas ganham +10 em testes de Sobreviv√™ncia para rastrear o intruso.",aumenta:!1}]},"armadura-arcana":{name:"Armadura Arcana",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_magic_magearmor.jpg",system:{circulo:"1",escola:"abjuracao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"Voc√™",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Esta magia cria uma pel√≠cula protetora invis√≠vel, mas tang√≠vel, fornecendo +5 na Defesa. Esse b√¥nus √© cumulativo com outras magias, mas n√£o com b√¥nus fornecido por armaduras."}},aprimoramentos:[{custo:2,descricao:"aumenta o b√¥nus na Defesa em +1.",aumenta:!0},{custo:2,descricao:"muda a dura√ß√£o para 1 dia.",aumenta:!1}]},"tranca-arcana":{name:"Tranca Arcana",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_arcane_arcane01.jpg",system:{circulo:"1",escola:"abjuracao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 objeto Grande ou menor",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Esta magia tranca uma porta ou outro item que possa ser aberto ou fechado (como um ba√∫, caixa etc.), aumentando a CD de testes de For√ßa ou Ladinagem para abri-lo em +10. Voc√™ pode abrir livremente sua pr√≥pria tranca sem problemas.Componente material: chave de bronze no valor de T$ 25."}},aprimoramentos:[{custo:5,descricao:"aumenta a CD para abrir o alvo em +5.",aumenta:!0},{custo:5,descricao:"muda o alvo para 1 objeto de qualquer tamanho, podendo afetar at√© mesmo os port√µes de um castelo. Requer 3¬∫ c√≠rculo.",aumenta:!1}]}},adivinhacao:{"concentracao-de-combate":{name:"Concentra√ß√£o de Combate",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_focusedmind.jpg",system:{circulo:"1",escola:"adv",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"free"},alcance:"pessoal",duracao:"1 rodada",alvo:"Voc√™",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Esta magia amplia sua percep√ß√£o, antecipando movimentos dos inimigos e encontrando brechas em suas defesas. Quando faz um ataque, voc√™ rola dois dados e usa o melhor resultado."}},aprimoramentos:[{custo:2,descricao:"muda a execu√ß√£o para padr√£o e a dura√ß√£o para cena. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:5,descricao:"al√©m do normal, ao atacar voc√™, um inimigo deve rolar dois dados e usar o pior resultado. Requer 3¬∫ c√≠rculo.",aumenta:!1},{custo:9,descricao:"muda a execu√ß√£o para padr√£o, o alcance para curto, o alvo para criaturas escolhidas e a dura√ß√£o para cena. Requer 4¬∫ c√≠rculo.",aumenta:!1},{custo:14,descricao:"muda a execu√ß√£o para padr√£o e a dura√ß√£o para 1 dia. Al√©m do normal, voc√™ recebe um sexto sentido que o avisa de qualquer perigo ou amea√ßa. Voc√™ fica imune √†s condi√ß√µes surpreendido e desprevenido e recebe +10 em Defesa e Reflexos. Requer 5¬∫ c√≠rculo.",aumenta:!1}]}},convocacao:{"area-escorregadia":{name:"√Årea Escorregadia",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_web.jpg",system:{circulo:"1",escola:"convocacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"Quadrado de 3m ou 1 objeto",resistencia:"Reflexos (veja texto)",custo:"1 PM",description:{value:"Esta magia recobre uma superf√≠cie com uma subst√¢ncia gordurosa e escorregadia. Criaturas na √°rea devem passar na resist√™ncia para n√£o cair. Nas rodadas seguintes, criaturas que tentem movimentar-se pela √°rea devem fazer testes de Acrobacia para equil√≠brio (CD 10). √°rea Escorregadia pode tornar um item escorregadio. Uma criatura segurando um objeto afetado deve passar na resist√™ncia para n√£o deixar o item cair cada vez que us√°-lo."}},aprimoramentos:[{custo:2,descricao:"muda a CD dos testes de Acrobacia para 15.",aumenta:!1},{custo:5,descricao:"muda a CD dos testes de Acrobacia para 20.",aumenta:!1}]},"conjurar-monstro":{name:"Conjurar Monstro",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_summonnatureguardian.jpg",system:{circulo:"1",escola:"convocacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"curto",resistencia:"Nenhuma",custo:"1 PM",description:{value:'Esta magia conjura um monstro Pequeno que ataca seus inimigos. Voc√™ escolhe a apar√™ncia do monstro e o tipo de dano que ele pode causar (corte, impacto ou perfura√ß√£o). O monstro n√£o √© uma criatura real, mas sim um construto feito de energia. Se for destru√≠do ou quando a magia acabar, ele desaparece sem deixar nada para tr√°s. Voc√™ s√≥ pode ter um monstro conjurado por esta magia por vez. O monstro surge em um ponto escolhido por voc√™ dentro do alcance e pode agir no come√ßo do seu pr√≥ximo turno, sempre na sua Iniciativa. O monstro tem deslocamento de 9m e pode fazer uma a√ß√£o de movimento por rodada. Voc√™ pode usar uma a√ß√£o padr√£o para dar uma das seguintes ordens a ele: Mover: O monstro se movimenta o dobro do deslocamento nessa rodada. Atacar: O monstro ataca um alvo em alcance corpo a corpo. O ataque acerta automaticamente e causa 2d4+2 pontos de dano. Lan√ßar Magia: O monstro pode servir como ponto de origem para uma magia lan√ßada por voc√™ com execu√ß√£o de uma a√ß√£o padr√£o ou menor. Ele pode descarregar um Toque Chocante em um inimigo distante ou mesmo "cuspir" uma Bola de Fogo. Voc√™ gasta PM normalmente para lan√ßar a magia. O monstro conjurado tem For 14, Des 17 e todos os outros atributos nulos. Ele tem 20 pontos de vida, n√£o tem um valor de Defesa (ataques feitos contra ele acertam automaticamente) e usa o seu b√¥nus para teste de Reflexos. Ele √© imune a efeitos que pedem um teste de Fortitude ou Vontade.'}},aprimoramentos:[{custo:2,descricao:"aumenta os PV do monstro em +10 para cada categoria de tamanho a partir de Pequeno (+10 PV para Pequeno, +20 PV para M√©dio etc.).",aumenta:!0},{custo:2,descricao:"aumenta o tamanho do monstro para M√©dio. Ele tem For 4, Des 3, 45 PV, deslocamento 12m e seu ataque causa 2d6+6 pontos de dano.",aumenta:!1},{custo:2,descricao:"o monstro ganha resist√™ncia 5 contra dois tipos de dano (por exemplo, corte e frio).",aumenta:!1},{custo:4,descricao:"o monstro ganha uma nova ordem: Arma de Sopro. Para dar essa ordem voc√™ gasta 1 PM, e faz o monstro causar o dobro de seu dano de ataque em um cone de 6m a partir de si (Reflexos reduz √† metade).",aumenta:!1},{custo:5,descricao:"aumenta o tamanho do monstro para Grande. Ele tem For 7, Des 2, 75 PV, deslocamento 12m e seu ataque causa 4d6+10 pontos de dano com 3m de alcance. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:9,descricao:"o monstro ganha deslocamento de voo igual ao dobro do deslocamento.",aumenta:!1},{custo:9,descricao:"o monstro ganha imunidade contra dois tipos de dano.",aumenta:!1},{custo:9,descricao:"aumenta o tamanho do monstro para Enorme. Ele tem For 11, Des 1, 110 PV, deslocamento 15m e seu ataque causa 4d8+15 pontos de dano com 4,5m de alcance. Requer 4¬∫ c√≠rculo.",aumenta:!0},{custo:14,descricao:"aumenta o tamanho do monstro para Colossal. Ele tem For 15, Des 0, 180 PV, deslocamento 15m e seu ataque causa 4d12+20 pontos de dano com 9m de alcance. Requer 5¬∫ c√≠rculo.",aumenta:!0}]},teia:{name:"Teia",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_web.jpg",system:{circulo:"1",escola:"convocacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"cubo com 6m de lado",resistencia:"Reflexos anula",custo:"1 PM",description:{value:"Teia cria v√°rias camadas de fibras entrela√ßadas e pegajosas na √°rea. Qualquer criatura na √°rea que falhar na resist√™ncia fica Enredado. Uma v√≠tima pode se libertar com uma a√ß√£o padr√£o e um teste de Acrobacia ou Atletismo. A √°rea ocupada por Teia √© terreno dif√≠cil. A Teia √© inflam√°vel. Qualquer ataque que cause dano de fogo destr√≥i as teias por onde passar, libertando as criaturas enredadas mas deixando-as em chamas."}},aprimoramentos:[{custo:2,descricao:"al√©m do normal, no in√≠cio de seus turnos a magia afeta novamente qualquer criatura na √°rea, exigindo um novo teste de Reflexos. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:2,descricao:"aumenta a √°rea em +1 cubo de 1,5m.",aumenta:!0}]}},encantamento:{"adaga-mental":{name:"Adaga Mental",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_psychicscream.jpg",system:{circulo:"1",escola:"encantamento",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 criatura",resistencia:"Vontade parcial",custo:"1 PM",description:{value:"Voc√™ manifesta e dispara uma adaga imaterial contra a mente do alvo, que sofre 2d6 pontos de dano ps√≠quico e fica Atordoado por uma rodada. Se passar no teste de resist√™ncia, sofre apenas metade do dano e evita a condi√ß√£o. Uma criatura s√≥ pode ficar atordoada por esta magia uma vez por cena."}},aprimoramentos:[{custo:2,descricao:'muda a dura√ß√£o para 1 dia. Al√©m do normal, voc√™ "finca" a adaga na mente do alvo. Enquanto a magia durar, voc√™ sabe a dire√ß√£o e localiza√ß√£o do alvo, desde que ele esteja no mesmo mundo.',aumenta:!1},{custo:2,descricao:"aumenta o dano em +1d6.",aumenta:!0}]},enfeiticar:{name:"Enfeiti√ßar",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_charm.jpg",system:{circulo:"1",escola:"encantamento",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 human√≥ide",resistencia:"Vontade anula",custo:"1 PM",description:{value:"O alvo fica enfeiti√ßado (veja a p√°gina 394). Um alvo hostil ou que esteja envolvido em um combate recebe +5 em seu teste de resist√™ncia. Se voc√™ ou seus aliados tomarem qualquer a√ß√£o hostil contra o alvo, a magia √© dissipada e o alvo retorna √† atitude que tinha antes (ou piorada, de acordo com o mestre)."}},aprimoramentos:[{custo:2,descricao:"em vez do normal, voc√™ sugere uma a√ß√£o para o alvo e ele obedece. A sugest√£o deve ser feita de modo que pare√ßa aceit√°vel, a crit√©rio do mestre. Pedir ao alvo que pule de um precip√≠cio, por exemplo, dissipa a magia. J√° sugerir a um guarda que descanse um pouco, de modo que voc√™ e seus aliados passem por ele, √© aceit√°vel. Quando o alvo executa a a√ß√£o, a magia termina. Voc√™ pode determinar uma condi√ß√£o espec√≠fica para a sugest√£o: por exemplo, que um rico mercador doe suas moedas para o primeiro mendigo que encontrar.",aumenta:!1},{custo:5,descricao:"muda o alvo para 1 esp√≠rito ou monstro. Requer 3¬∫ c√≠rculo.",aumenta:!1},{custo:5,descricao:"afeta todos os alvos dentro do alcance.",aumenta:!1}]},hipnotismo:{name:"Hipnotismo",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_soothingkiss.jpg",system:{circulo:"1",escola:"encantamento",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",duracao:"1d4 Rodadas",alvo:"1 animal ou humanoide",resistencia:"Vontade anula",custo:"1 PM",description:{value:"Suas palavras e movimentos ritmados deixam o alvo fascinado. Esta magia s√≥ afeta criaturas que possam perceber voc√™. Se usar esta magia em combate, o alvo recebe +5 em seu teste de resist√™ncia. Se a criatura passar, fica imune a este efeito por um dia."}},aprimoramentos:[{custo:2,descricao:"muda o alvo para animais ou humanoides escolhidos.",aumenta:!1},{custo:2,descricao:"muda a dura√ß√£o para sustentada.",aumenta:!1},{custo:2,descricao:"tamb√©m afeta esp√≠ritos e monstros na √°rea. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:5,descricao:"tamb√©m afeta construtos, esp√≠ritos, monstros e mortos-vivos na √°rea. Requer 3¬∫ c√≠rculo.",aumenta:!1}]},sono:{name:"Sono",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_sleep.jpg",system:{circulo:"1",escola:"encantamento",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 humanoide",resistencia:"Vontade parcial",custo:"1 PM",description:{value:"Um cansa√ßo m√≠stico recai sobre o alvo. Se falhar na resist√™ncia, ele fica inconsciente e ca√≠do ou, se estiver envolvido em combate ou outra situa√ß√£o perigosa, fica Exausto por 1 rodada, depois fatigado. Em ambos os casos, se passar, o alvo fica Fatigado por 1d4 rodadas."}},aprimoramentos:[{custo:2,descricao:"alvos que falhem na resist√™ncia ficam exaustos por 1d4+1 rodadas, em vez de apenas 1.",aumenta:!1},{custo:2,descricao:"muda o alvo para criatura.",aumenta:!1},{custo:5,descricao:"afeta todos os alvos v√°lidos a sua escolha dentro do alcance.",aumenta:!1}]}},evocacao:{"explosao-de-chamas":{name:"Explos√£o de Chamas",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_fire_fireball.jpg",system:{circulo:"1",escola:"evocacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"Cone de 6m",resistencia:"Reflexos reduz √† metade",custo:"1 PM",description:{value:"Um leque de chamas irrompe de suas m√£os, causando 2d6 pontos de dano de fogo √†s criaturas na √°rea."}}},"seta-infalivel":{name:"Seta Infal√≠vel",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_arcane_arcane02.jpg",system:{circulo:"1",escola:"evocacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"at√© 2 criaturas",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Favorita entre arcanistas iniciantes, esta magia lan√ßa duas setas de energia que causam 1d4+1 pontos de dano de ess√™ncia cada. Voc√™ pode lan√ßar as setas em alvos diferentes ou concentr√°-las num mesmo alvo. Caso voc√™ possua um b√¥nus no dano de magias, como pelo poder Arcano de Batalha, ele √© aplicado em apenas uma seta (o b√¥nus vale para a magia, n√£o cada alvo)."}},aprimoramentos:[{custo:2,descricao:"muda as setas para lan√ßas de energia que surgem e caem do c√©u. Cada lan√ßa causa 1d8+1 pontos de dano de ess√™ncia. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:2,descricao:"muda o n√∫mero de setas/lan√ßas para tr√™s.",aumenta:!1},{custo:4,descricao:"muda o n√∫mero de setas/lan√ßas para cinco. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:9,descricao:"muda o n√∫mero de setas/lan√ßas para dez. Requer 4¬∫ c√≠rculo.",aumenta:!1}]},"toque-chocante":{name:"Toque Chocante",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_lightning.jpg",system:{circulo:"1",escola:"evocacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Fortitude reduz √† metade",custo:"1 PM",description:{value:"Arcos el√©tricos envolvem sua m√£o, causando 2d8+2 pontos de dano de eletricidade. Se o alvo usa armadura de metal (ou carrega muito metal, a crit√©rio do mestre), sofre uma penalidade de ‚Äì5 no teste de resist√™ncia."}},aprimoramentos:[{custo:2,descricao:"muda a resist√™ncias para nenhum. Como parte da execu√ß√£o da magia, voc√™ faz um ataque corpo a corpo contra o alvo. Se acertar, causa o dano do ataque e da magia.",aumenta:!1},{custo:2,descricao:"muda o alcance para pessoal e o alvo para √°rea: esfera com 6m de raio. Voc√™ dispara raios pelas pontas dos dedos que afetam todas as criaturas na √°rea.",aumenta:!1}]}},ilusao:{"criar-ilusao":{name:"Criar Ilus√£o",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_arcane_illusion.jpg",system:{circulo:"1",escola:"ilusao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",resistencia:"Vontade desacredita",custo:"1 PM",description:{value:"Esta magia cria uma ilus√£o visual (uma criatura, uma parede...) ou sonora (um grito de socorro, um uivo assustador...). A magia cria apenas imagens ou sons simples, com volume equivalente ao tom de voz normal para cada cubo de 1,5m no efeito. N√£o √© poss√≠vel criar cheiros, texturas ou temperaturas, nem sons complexos, como uma m√∫sica ou di√°logo. Criaturas e objetos atravessam uma ilus√£o sem sofrer dano, mas a magia pode, por exemplo, esconder uma armadilha ou inimigo. A magia √© dissipada se voc√™ sair do alcance."}},aprimoramentos:[{custo:2,descricao:"tamb√©m pode criar odores e sensa√ß√µes t√©rmicas, que s√£o percebidos a uma dist√¢ncia igual ao dobro do tamanho m√°ximo do efeito. Por exemplo, uma miragem de uma fogueira com 4 cubos de 1,5m poderia emanar calor e cheiro de queimado a at√© 12m.",aumenta:!1},{custo:2,descricao:"muda o alcance para longo e o efeito para esfera de 30m de raio. Em vez do normal, voc√™ cria um som muito alto, equivalente a uma multid√£o. Criaturas na √°rea lan√ßam magias como se estivessem em uma condi√ß√£o ruim e a CD de testes de Percep√ß√£o para ouvir aumenta em +10. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:2,descricao:"tamb√©m criar sensa√ß√µes t√°teis, como texturas; criaturas que n√£o saibam que √© uma ilus√£o n√£o conseguem atravess√°-la sem passar em um teste de Vontade (objetos ainda a atravessam). A ilus√£o ainda √© incapaz de causar ou sofrer dano. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:5,descricao:"muda a dura√ß√£o para sustentada. Al√©m do normal, voc√™ pode gastar uma a√ß√£o livre para modificar livremente a ilus√£o (mas n√£o pode acrescentar novos aprimoramentos ap√≥s lan√ß√°-la). Requer 3¬∫ c√≠rculo.",aumenta:!1}]},"disfarce-ilusorio":{name:"Disfarce Ilus√≥rio",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_disguise.jpg",system:{circulo:"1",escola:"ilusao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"Voc√™",resistencia:"Vontade desacredita",custo:"1 PM",description:{value:"Voc√™ muda a apar√™ncia do alvo, incluindo seu equipamento. Isso inclui altura, peso, tom de pele, cor de cabelo, timbre de voz etc. O alvo recebe +10 em testes de Engana√ß√£o para disfarce. O alvo n√£o recebe novas habilidades (voc√™ pode ficar parecido com outra ra√ßa, mas n√£o ganhar√° as habilidades dela), nem modifica o equipamento (uma espada longa disfar√ßada de bord√£o continua funcionando e causando dano como uma espada)."}},aprimoramentos:[{custo:2,descricao:"muda o alcance para curto e o alvo para 1 criatura. Uma criatura involunt√°ria pode anular o efeito com um teste de Vontade.",aumenta:!1},{custo:2,descricao:"a ilus√£o inclui odores e sensa√ß√µes. Isso muda o b√¥nus em testes de Engana√ß√£o para disfarce para +20.",aumenta:!1},{custo:3,descricao:"muda o alcance para curto e o alvo para criaturas escolhidas. Cada criatura pode ter uma apar√™ncia diferente. Criaturas involunt√°rias podem anular o efeito com um teste de Vontade. Requer 2¬∫ c√≠rculo.",aumenta:!1}]},"imagem-espelhada":{name:"Imagem Espelhada",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_arcane_mirrorimage.jpg",system:{circulo:"1",escola:"ilusao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"Voc√™",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Tr√™s c√≥pias ilus√≥rias suas aparecem. As duplicatas ficam ao seu redor e imitam suas a√ß√µes, tornando dif√≠cil para um inimigo saber quem atacar. Voc√™ recebe +6 na Defesa. Cada vez que um ataque contra voc√™ erra, uma das imagens desaparece e o b√¥nus na Defesa diminui em 2. Um oponente deve ver as c√≥pias para ser confundido. Se voc√™ estiver invis√≠vel, ou o atacante fechar os olhos, voc√™ n√£o recebe o b√¥nus (mas o atacante ainda sofre penalidades normais por n√£o enxergar)."}},aprimoramentos:[{custo:2,descricao:"aumenta o n√∫mero de c√≥pias em +1 (e o b√¥nus na Defesa em +2).",aumenta:!0},{custo:2,descricao:"al√©m do normal, toda vez que uma c√≥pia √© destru√≠da, emite um clar√£o de luz. A criatura que destruiu a c√≥pia fica ofuscada por uma rodada. Requer 2¬∫ c√≠rculo.",aumenta:!1}]},"leque-cromatico":{name:"Leque Crom√°tico",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_arcane_arcane03.jpg",system:{circulo:"1",escola:"ilusao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"cone de 4,5m",resistencia:"Vontade parcial",custo:"1 PM",description:{value:"Um cone de luzes brilhantes surge das suas m√£os, deixando os animais e humanoides na √°rea atordoados por 1 rodada (apenas uma vez por cena, Vontade anula) e ofuscados pela cena."}},aprimoramentos:[{custo:2,descricao:"al√©m do normal, as criaturas afetadas ficam vulner√°veis pela cena.",aumenta:!0},{custo:2,descricao:"tamb√©m afeta esp√≠ritos e monstros na √°rea. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:5,descricao:"tamb√©m afeta construtos, esp√≠ritos, monstros e mortos-vivos na √°rea. Requer 3¬∫ c√≠rculo.",aumenta:!1}]}},necromancia:{amedrontar:{name:"Amedrontar",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_deathscream.jpg",system:{circulo:"1",escola:"necromancia",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 animal ou humanoide",resistencia:"Vontade parcial",custo:"1 PM",description:{value:"O alvo √© envolvido por energias sombrias e assustadoras. Se falhar na resist√™ncia, fica Apavorado por 1 rodada, depois Abalado. Se passar, fica abalado por 1d4 rodadas."}},aprimoramentos:[{custo:2,descricao:"alvos que falhem na resist√™ncia ficam apavorados por 1d4+1 rodadas, em vez de apenas 1.",aumenta:!1},{custo:2,descricao:"muda o alvo para 1 criatura.",aumenta:!1},{custo:5,descricao:"afeta todos os alvos v√°lidos a sua escolha dentro do alcance.",aumenta:!1}]},"raio-do-enfraquecimento":{name:"Raio do Enfraquecimento",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_rayofweakness.jpg",system:{circulo:"1",escola:"necromancia",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 criatura",resistencia:"Fortitude parcial",custo:"1 PM",description:{value:"Voc√™ dispara um raio p√∫rpura que drena as for√ßas do alvo. Se falhar na resist√™ncia, o alvo fica Fatigado. Se passar, fica Vulner√°vel. Note que, como efeitos de magia n√£o acumulam, lan√ßar esta magia duas vezes contra o mesmo alvo n√£o ir√° deix√°-lo exausto."}},aprimoramentos:[{custo:2,descricao:"em vez do normal, se falhar na resist√™ncia o alvo fica exausto. Se passar, fica fatigado. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:5,descricao:"em vez do normal, se falhar na resist√™ncia o alvo fica exausto. Se passar, fica fatigado. Muda o alvo para criaturas escolhidas. Requer 3¬∫ c√≠rculo.",aumenta:!1}]},"vitalidade-fantasma":{name:"Vitalidade Fantasma",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_lifedrain.jpg",system:{circulo:"1",escola:"necromancia",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"voc√™",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Voc√™ suga energia vital da terra, recebendo 2d10 pontos de vida tempor√°rios. Os PV tempor√°rios desaparecem ao final da cena."}},aprimoramentos:[{custo:2,descricao:"aumenta os PV tempor√°rios recebidos em +1d10. Caso a magia cause dano, em vez disso aumenta o dano causado em +1d10.",aumenta:!0},{custo:5,descricao:"muda o alvo para √°rea: esfera com 6m de raio centrada em voc√™ e a resist√™ncia para Fortitude reduz √† metade. Em vez do normal, voc√™ suga energia das criaturas vivas na √°rea, causando 1d10 pontos de dano de trevas e recebendo PV tempor√°rios iguais ao dano total causado. Os PV tempor√°rios desaparecem ao final da cena. Requer 2¬∫ c√≠rculo.",aumenta:!1}]}},transmutacao:{"primor-atletico":{name:"Primor Atl√©tico",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_agility.jpg",system:{circulo:"1",escola:"transmutacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Voc√™ modifica os limites f√≠sicos do alvo, que recebe deslocamento +9m e +10 em testes de Atletismo."}},aprimoramentos:[{custo:3,descricao:"al√©m do normal, ao fazer testes de per√≠cias baseadas em For√ßa, Destreza ou Constitui√ß√£o, o alvo pode rolar dois dados e escolher o melhor. N√£o afeta testes de ataque ou resist√™ncia. Requer 2¬∫ c√≠rculo.",aumenta:!1}]},"queda-suave":{name:"Queda Suave",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_featherfall.jpg",system:{circulo:"1",escola:"transmutacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"reaction"},alcance:"curto",duracao:"at√© chegar ao solo ou cena, o que vier primeiro",alvo:"1 criatura ou objeto com at√© 200kg",resistencia:"Nenhuma",custo:"1 PM",description:{value:"O alvo cai lentamente. A velocidade da queda √© reduzida para 18m por rodada ‚Äî o suficiente para n√£o causar dano. Como lan√ßar esta magia √© uma rea√ß√£o, voc√™ pode lan√ß√°-la r√°pido o bastante para salvar a si ou um aliado de quedas inesperadas. Lan√ßada sobre um proj√©til ‚Äî como uma flecha ou uma rocha largada do alto de um penhasco ‚Äî, a magia faz com que ele cause metade do dano normal, devido √† lentid√£o. Queda Suave s√≥ funciona em criaturas e objetos em queda livre ou similar; a magia n√£o vai frear um golpe de espada ou o mergulho rasante de um atacante voador."}},aprimoramentos:[{custo:2,descricao:"muda o alvo para at√© 10 criaturas ou objetos.",aumenta:!1},{custo:2,descricao:"aumenta a categoria de tamanho do alvo em uma",aumenta:!1}]},"transmutar-objetos":{name:"Transmutar Objetos",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_arcane_arcane04.jpg",system:{circulo:"1",escola:"transmutacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"mat√©ria-prima, como madeira, rochas, ossos",resistencia:"Nenhuma",custo:"1 PM",description:{value:"A magia transforma mat√©ria bruta para moldar um novo objeto. Voc√™ pode usar mat√©ria-prima mundana para criar um objeto de tamanho Pequeno ou menor e pre√ßo m√°ximo de T$ 25, como um balde ou uma espada. O objeto reverte √† mat√©ria-prima no final da cena, ou se for tocado por um objeto feito de chumbo. Esta magia n√£o pode ser usada para criar objetos consum√≠veis, como alimentos ou itens alqu√≠micos, nem objetos com mecanismos complexos, como bestas ou armas de fogo. Transmutar Objetos anula Despeda√ßar."}},aprimoramentos:[{custo:2,descricao:"aumenta o limite de tamanho do objeto em uma categoria.",aumenta:!0},{custo:3,descricao:"aumenta o pre√ßo m√°ximo do objeto criado em um fator de x10 (+3 PM por T$ 250 de pre√ßo, +6 PM por T$ 2.500 de pre√ßo, e assim por diante).",aumenta:!0},{custo:5,descricao:"muda o alvo para 1 objeto mundano e a dura√ß√£o para instant√¢nea. Em vez do normal, voc√™ cura todos os PV do alvo, restaurando o objeto totalmente. Este aprimoramento est√° sujeito aos limites de tamanho e pre√ßo do objeto conforme a magia original e n√£o funciona se o objeto tiver sido completamente destru√≠do (queimado at√© virar cinzas ou desintegrado, por exemplo). Requer 3¬∫ c√≠rculo.",aumenta:!1},{custo:9,descricao:"como o aprimoramento anterior, mas passa a afetar itens m√°gicos.",aumenta:!1},{custo:2,descricao:"aumentar a cura em +1d8.",aumenta:!0}]}}},"2-circulo":{abjuracao:{"campo-de-forca":{name:"Campo de For√ßa",type:"magia",img:"systems/tormenta20/icons/magias/campo-de-forca.webp",system:{circulo:"2",escola:"abjuracao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"Voc√™",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Esta magia cria uma pel√≠cula protetora sobre voc√™. Voc√™ recebe 30 pontos de vida tempor√°rios."}},aprimoramentos:[{custo:1,descricao:"muda a execu√ß√£o para rea√ß√£o e a dura√ß√£o para instant√¢nea. Em vez do normal, voc√™ recebe redu√ß√£o 30 contra o pr√≥ximo dano que sofrer.",aumenta:!1},{custo:7,descricao:"muda o alcance para curto, o alvo para outra criatura ou objeto Enorme ou menor e a dura√ß√£o para sustentada. Em vez do normal, cria uma esfera im√≥vel e tremeluzente ao redor do alvo. Nenhuma criatura, objeto ou efeito de dano pode passar pela esfera, embora criaturas possam respirar normalmente. Criaturas na √°rea podem fazer um teste de Reflexos para evitar serem aprisionadas e sempre que voc√™ se concentrar. Requer 4¬∫ c√≠rculo.",aumenta:!1},{custo:9,descricao:"como o aprimoramento acima, mas tudo dentro da esfera fica praticamente sem peso. Uma vez por rodada, voc√™ pode gastar uma a√ß√£o livre para flutuar a esfera e seu conte√∫do 9m em uma dire√ß√£o. Requer 4¬∫ c√≠rculo.",aumenta:!1},{custo:7,descricao:"muda os PV tempor√°rios ou a RD para 70. Requer 4¬∫ c√≠rculo.",aumenta:!1}]},refugio:{name:"Ref√∫gio",type:"magia",img:"systems/tormenta20/icons/magias/refugio.webp",system:{circulo:"2",escola:"abjuracao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"curto",duracao:"1 dia",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Esta magia cria um domo im√≥vel e quase opaco por fora, mas transparente pelo lado de dentro. Ele protege contra calor, frio e for√ßas pequenas, mas n√£o contra qualquer coisa capaz de causar dano. Assim, o domo protege contra neve e vento comuns, mas n√£o contra uma flecha ou Bola de Fogo. Por√©m, como o domo √© quase opaco, qualquer criatura dentro dele tem camuflagem total contra ataques vindos de fora. Criaturas podem entrar e sair do domo livremente. Descansar dentro do Ref√∫gio concede recupera√ß√£o normal de PV e PM."}},aprimoramentos:[{custo:1,descricao:"al√©m do normal, os limites do domo s√£o envoltos por uma fuma√ßa escura e espessa, que impede criaturas do lado de fora de enxergar ou ouvir o que est√° dentro. Criaturas do lado de dentro enxergam e ouvem normalmente o que est√° do lado de fora. A fuma√ßa tamb√©m bloqueia magias de adivinha√ß√£o.",aumenta:!1},{custo:9,descricao:"em vez do normal, cria uma mans√£o extradimensional que comporta at√© 100 criaturas M√©dias, com quartos luxuosos, comida e bebida e dez servos fantasmag√≥ricos (como na magia Servos Invis√≠veis). Descansar na mans√£o concede recupera√ß√£o luxuosa (recupera PV e PM igual ao triplo do n√≠vel). A mans√£o tem uma √∫nica entrada, uma porta feita de luz. Voc√™ pode deix√°-la vis√≠vel ou invis√≠vel como uma a√ß√£o livre e apenas criaturas escolhidas por voc√™ podem passar. Requer 4¬∫ c√≠rculo.",aumenta:!1}]}},adivinhacao:{"ligacao-telepatica":{name:"Liga√ß√£o Telep√°tica",type:"magia",img:"systems/tormenta20/icons/magias/ligacao-telepatica.webp",system:{circulo:"2",escola:"adv",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",duracao:"1 dia",alvo:"2 criaturas volunt√°rias",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Voc√™ cria um elo mental entre duas criaturas com Intelig√™ncia -3 ou maior (voc√™ pode ser uma delas). As criaturas podem se comunicar independente de idioma ou dist√¢ncia, mas n√£o em mundos diferentes."}},aprimoramentos:[{custo:2,descricao:"aumenta o n√∫mero de alvos em +1.",aumenta:!0}]},localizacao:{name:"Localiza√ß√£o",type:"magia",img:"systems/tormenta20/icons/magias/localizacao.webp",system:{circulo:"2",escola:"adv",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"esfera com 90m de raio",resistencia:"Nenhuma",custo:"3 PM",description:{value:'Esta magia pode encontrar uma criatura ou objeto a sua escolha. Voc√™ pode pensar em termos gerais ("um elfo", "algo de metal") ou espec√≠ficos ("Gwen, a elfa", "uma espada longa"). A magia indica a dire√ß√£o e dist√¢ncia da criatura ou objeto mais pr√≥ximo desse tipo, caso esteja ao alcance. Voc√™ pode movimentar-se para continuar procurando. Procurar algo muito espec√≠fico ("a espada longa encantada do Bar√£o Rulyn") exige que voc√™ tenha em mente uma imagem precisa do objeto; caso a imagem n√£o seja muito pr√≥xima da verdade, a magia falha, mas voc√™ gasta os PM mesmo assim. Esta magia pode ser bloqueada por uma fina camada de chumbo.'}},aprimoramentos:[{custo:5,descricao:"aumenta a √°rea em um fator de 10 (90m para 900m, 900m para 9km e assim por diante).",aumenta:!0}]},mapear:{name:"Mapear",type:"magia",img:"systems/tormenta20/icons/magias/mapear.webp",system:{circulo:"2",escola:"adv",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"superf√≠cie ou objeto plano, como uma mesa ou pergaminho",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Uma fagulha percorre a superf√≠cie afetada, queimando-a enquanto esbo√ßa um mapa da regi√£o onde o conjurador est√°. Se voc√™ conhece o lugar, o mapa ser√° completo. Caso contr√°rio, apresentar√° apenas um esbo√ßo geral, al√©m de um ponto de refer√™ncia (para possibilitar localiza√ß√£o) e um lugar de interesse, ambos definidos pelo mestre. A regi√£o representada no mapa tem tamanho m√°ximo de um quadrado de 10km de lado. Caso voc√™ esteja dentro de uma constru√ß√£o, o mapa mostrar√° o andar no qual voc√™ se encontra."}}}},convocacao:{"amarras-etereas":{name:"Amarras Et√©reas",type:"magia",img:"systems/tormenta20/icons/magias/amarras-etereas.webp",system:{circulo:"2",escola:"convocacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"1 criatura",resistencia:"Reflexos anula",custo:"3 PM",description:{value:"Tr√™s la√ßos de energia surgem e se enroscam no alvo, deixando-o agarrado. A v√≠tima pode tentar se livrar, gastando uma a√ß√£o padr√£o para fazer um teste de Atletismo (CD igual √† da magia). Se passar, destr√≥i um la√ßo, mais um la√ßo adicional para cada 5 pontos pelos quais superou a CD. Os la√ßos tamb√©m podem ser atacados e destru√≠dos: cada um tem Defesa 10, 10 PV, RD 5 e imunidade a dano m√°gico. Se todos os la√ßos forem destru√≠dos, a magia √© dissipada. Por serem feitos de energia, os la√ßos afetam criaturas incorp√≥reas."}},aprimoramentos:[{custo:2,descricao:"aumenta o n√∫mero de alvos em +1.",aumenta:!0},{custo:2,descricao:"aumenta o n√∫mero de la√ßos em um alvo a sua escolha em +1. (b√¥nus m√°ximo limitado pelo c√≠rculo m√°ximo de magia que voc√™ pode lan√ßar)",aumenta:!0}]},"montaria-arcana":{name:"Montaria Arcana",type:"magia",img:"systems/tormenta20/icons/magias/montaria-arcana.webp",system:{circulo:"2",escola:"convocacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",duracao:"1 dia",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Esta magia convoca um parceiro cavalo (ou p√¥nei) de guerra veterano. Sua apar√™ncia √© de um animal negro com crina e cauda cinzentas e cascos feitos de fuma√ßa, mas voc√™ pode mud√°-la se quiser. Al√©m dos benef√≠cios normais, a Montaria Arcana pode atravessar terreno dif√≠cil sem redu√ß√£o em seu deslocamento.Voc√™ pode usar Misticismo no lugar de Cavalgar para efeitos desta montaria (incluindo ser considerado treinado)."}},aprimoramentos:[{custo:1,descricao:"al√©m do normal, criaturas do tipo animal em alcance curto da montaria devem fazer um teste de Vontade. Se passarem, ficam abaladas pela cena; se falharem, ficam apavoradas por 1d4 rodadas, depois abaladas pela cena.",aumenta:!1}]},"salto-dimensional":{name:"Salto Dimensional",type:"magia",img:"systems/tormenta20/icons/magias/salto-dimensional.webp",system:{circulo:"2",escola:"convocacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"voc√™",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Esta magia transporta voc√™ para outro lugar dentro do alcance. Voc√™ n√£o precisa perceber nem ter linha de efeito ao seu destino, podendo simplesmente imagin√°-lo. Por exemplo, pode se transportar 3m adiante para ultrapassar uma porta fechada. Uma vez transportadas, criaturas n√£o podem agir at√© a rodada seguinte. Esta magia n√£o permite que voc√™ apare√ßa dentro de um corpo s√≥lido; se o ponto de chegada n√£o tem espa√ßo livre, voc√™ ressurge na √°rea vazia mais pr√≥xima."}},aprimoramentos:[{custo:1,descricao:"muda o alcance para m√©dio.",aumenta:!1},{custo:1,descricao:"muda o alvo para voc√™ e uma criatura volunt√°ria. Voc√™ pode escolher este aprimoramento mais vezes para aumentar o n√∫mero de alvos adicionais em +1, mas deve estar tocando todos os alvos.",aumenta:!0},{custo:2,descricao:"muda a execu√ß√£o para rea√ß√£o. Em vez do normal, voc√™ salta para um espa√ßo adjacente (1,5m), recebendo +5 na Defesa e em testes de Reflexos contra um ataque ou efeito que esteja prestes a atingi-lo. Ap√≥s a resolu√ß√£o do efeito, salta para um espa√ßo adjacente (1,5m).",aumenta:!1}]},"servos-invisiveis":{name:"Servos Invis√≠veis",type:"magia",img:"systems/tormenta20/icons/magias/servos-invisiveis.webp",system:{circulo:"2",escola:"convocacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"longo",resistencia:"Nenhuma",custo:"3 PM",description:{value:'Voc√™ cria at√© tr√™s servos invis√≠veis e silenciosos, capazes de realizar tarefas simples como apanhar lenha, colher frutos, varrer o ch√£o ou alimentar um cavalo. Os servos podem ser usados para manter arrumada e organizada uma mans√£o ou pequena torre ou para preparar um acampamento nos ermos para voc√™ e seus aliados (veja a per√≠cia Sobreviv√™ncia, na p√°gina 123). Eles tamb√©m podem ajud√°-lo em tarefas mais complexas, como fazer uma pesquisa ou preparar uma po√ß√£o, mas isso consome sua energia m√°gica. Voc√™ pode "gastar" um servo para receber um b√¥nus n√£o cumulativo de +2 em um teste de per√≠cia (exceto testes de ataque e resist√™ncia). Os servos n√£o s√£o criaturas reais; n√£o podem lutar, nem resistir a qualquer dano ou efeito que exija um teste de resist√™ncia ou teste oposto ‚Äî falhar√£o automaticamente no teste e ser√£o destru√≠dos.'}},aprimoramentos:[{custo:2,descricao:"aumenta o n√∫mero de servos conjurados em 1.",aumenta:!0}]}},encantamento:{"desespero-esmagador":{name:"Desespero Esmagador",type:"magia",img:"systems/tormenta20/icons/magias/desespero-esmagador.webp",system:{circulo:"2",escola:"encantamento",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"Cone de 6m",resistencia:"Vontade parcial",custo:"3 PM",description:{value:"Humanoides na √°rea s√£o acometidos de grande tristeza, adquirindo as condi√ß√µes Fraco e Frustrado. Se passarem na resist√™ncia, adquirem essas condi√ß√µes por uma rodada."}},aprimoramentos:[{custo:2,descricao:"em vez do normal, as condi√ß√µes adquiridas s√£o debilitado e esmorecido.",aumenta:!1}]},"sussurros-insanos":{name:"Sussurros Insanos",type:"magia",img:"systems/tormenta20/icons/magias/sussurros-insanos.webp",system:{circulo:"2",escola:"encantamento",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 humanoide",resistencia:"Vontade anula",custo:"3 PM",description:{value:"Voc√™ murmura palavras desconexas que afetam a mente do alvo. O alvo fica Confuso."}},aprimoramentos:[{custo:2,descricao:"aumenta o n√∫mero de alvos em +1.",aumenta:!0},{custo:12,descricao:"muda o alvo para criaturas escolhidas. Requer 5¬∫ c√≠rculo.",aumenta:!1}]}},evocacao:{"bola-de-fogo":{name:"Bola de Fogo",type:"magia",img:"systems/tormenta20/icons/magias/bola-de-fogo.webp",system:{circulo:"2",escola:"evocacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"esfera com 6m de raio",resistencia:"Reflexos reduz √† metade",custo:"3 PM",description:{value:"Esta famosa magia de ataque cria uma poderosa explos√£o, causando 6d6 pontos de dano de fogo em todas as criaturas e objetos livres na √°rea."}},aprimoramentos:[{custo:2,descricao:"aumenta o dano em +2d6.",aumenta:!0},{custo:2,descricao:"muda a √°rea para efeito de esfera flamejante com tamanho M√©dio e a dura√ß√£o para cena. Em vez do normal, cria uma esfera flamejante com 1,5m de di√¢metro que causa 3d6 pontos de dano a qualquer criatura no mesmo espa√ßo. Voc√™ pode gastar uma a√ß√£o de movimento para fazer a esfera voar 9m em qualquer dire√ß√£o. Ela √© imune a dano, mas pode ser apagada com √°gua. Uma criatura s√≥ pode sofrer dano da esfera uma vez por rodada.",aumenta:!1}]},"flecha-acida":{name:"Flecha √Åcida",type:"magia",img:"systems/tormenta20/icons/magias/flecha-acida.webp",system:{circulo:"2",escola:"evocacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"1 criatura ou objeto",resistencia:"Reflexos parcial",custo:"3 PM",description:{value:"Voc√™ dispara um proj√©til que causa 4d6 pontos de dano de √°cido. Se falhar no teste de resist√™ncia, o alvo tamb√©m fica coberto por um muco corrosivo, sofrendo mais 2d6 de dano de √°cido no in√≠cio de seus dois pr√≥ximos turnos. Se lan√ßada contra um objeto que n√£o esteja em posse de uma criatura a magia causa dano dobrado e ignora a RD do objeto."}},aprimoramentos:[{custo:1,descricao:"al√©m do normal, se o alvo coberto pelo muco √°cido estiver usando armadura ou escudo, o item √© corro√≠do. Isso reduz o b√¥nus na Defesa do item em 1 ponto permanentemente. O item pode ser consertado, restaurando seu b√¥nus (veja Of√≠cio, na p√°gina 121).",aumenta:!1},{custo:2,descricao:"aumenta a redu√ß√£o na Defesa em +1.",aumenta:!0},{custo:2,descricao:"aumenta o dano inicial e o dano por rodada em +1d6.",aumenta:!0}]},relampago:{name:"Rel√¢mpago",type:"magia",img:"systems/tormenta20/icons/magias/relampago.webp",system:{circulo:"2",escola:"evocacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"linha",resistencia:"Reflexos reduz √† metade",custo:"3 PM",description:{value:"Voc√™ dispara um poderoso raio que causa 6d6 pontos de dano de eletricidade em todas as criaturas e objetos livres na √°rea."}},aprimoramentos:[{custo:2,descricao:"aumenta o dano em +2d6.",aumenta:!0}]},"sopro-das-uivantes":{name:"Sopro das Uivantes",type:"magia",img:"systems/tormenta20/icons/magias/sopro-das-uivantes.webp",system:{circulo:"2",escola:"evocacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"cone de 9m",resistencia:"Fortitude parcial",custo:"3 PM",description:{value:"Voc√™ sopra ar g√©lido que causa 4d6 pontos de dano de frio (Fortitude reduz √† metade). Criaturas de tamanho M√©dio ou menor que falhem na resist√™ncia ficam ca√≠das e s√£o empurradas 6m na dire√ß√£o oposta. Se houver uma parede ou outro objeto s√≥lido (mas n√£o uma criatura) no caminho, a criatura para de se mover, mas sofre +2d6 pontos de dano de impacto."}},aprimoramentos:[{custo:2,descricao:"aumenta o dano de frio em +2d6.",aumenta:!0}]}},ilusao:{"aparencia-perfeita":{name:"Apar√™ncia Perfeita",type:"magia",img:"systems/tormenta20/icons/magias/aparencia-perfeita.webp",system:{circulo:"2",escola:"ilusao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"Voc√™",resistencia:"Nenhuma",custo:"3 PM",description:{value:'Esta magia lhe concede um rosto idealizado, porte f√≠sico garboso, voz melodiosa e olhar sedutor, deixando-o mais atraente e confi√°vel. Enquanto a magia estiver ativa, seu Carisma torna-se 20 (ou recebe um b√¥nus de +4, caso seja 20 ou maior) e voc√™ recebe +5 nos testes de Diplomacia e Engana√ß√£o. Quando a magia acaba, quaisquer observadores percebem a mudan√ßa e tendem a suspeitar de voc√™. Da mesma maneira, pessoas que o viram sob o efeito da magia sentir√£o que "algo est√° errado" ao v√™-lo em condi√ß√µes normais. Quando a cena acabar, voc√™ pode gastar os PM da magia novamente como uma a√ß√£o livre para mant√™-la ativa. Este efeito n√£o fornece PV ou PM adicionais.'}},aprimoramentos:[{custo:1,descricao:"muda o alcance para toque e o alvo para 1 humanoide",aumenta:!1}]},"camuflagem-ilusoria":{name:"Camuflagem Ilus√≥ria",type:"magia",img:"systems/tormenta20/icons/magias/camuflagem-ilusoria.webp",system:{circulo:"2",escola:"ilusao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",custo:"3 PM",description:{value:"O alvo fica com sua imagem nublada, como se vista atrav√©s de um l√≠quido, recebendo os efeitos de camuflagem leve."}},aprimoramentos:[{custo:7,descricao:"muda o alcance para curto e o alvo para criaturas escolhidas. Requer 4¬∫ c√≠rculo.",aumenta:!1}]},"esculpir-sons":{name:"Esculpir Sons",type:"magia",img:"systems/tormenta20/icons/magias/esculpir-sons.webp",system:{circulo:"2",escola:"ilusao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"1 criatura ou objeto",resistencia:"Vontade anula",custo:"3 PM",description:{value:"Esta magia altera os sons emitidos pelo alvo. Ela n√£o √© capaz de criar sons, mas pode omiti-los (como fazer uma carro√ßa ficar silenciosa) ou transform√°-los (como fazer uma pessoa ficar com voz de passarinho). Voc√™ n√£o pode criar sons que n√£o conhece (n√£o pode fazer uma criatura falar num idioma que n√£o conhe√ßa). Uma vez que escolha a altera√ß√£o, ela n√£o pode ser mudada. Um conjurador que tenha a voz modificada drasticamente n√£o poder√° lan√ßar magias."}},aprimoramentos:[{custo:2,descricao:"aumenta o n√∫mero de alvos em +1. Todas as criaturas e objetos devem ser afetadas da mesma forma.",aumenta:!0}]},invisibilidade:{name:"Invisibilidade",type:"magia",img:"systems/tormenta20/icons/magias/invisibilidade.webp",system:{circulo:"2",escola:"ilusao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"free"},alcance:"pessoal",duracao:"1 rodada",alvo:"voc√™",resistencia:"Nenhuma",custo:"3 PM",description:{value:"O alvo fica invis√≠vel (incluindo seu equipamento). Um personagem invis√≠vel recebe camuflagem total, +10 em testes de Furtividade contra ouvir e criaturas que n√£o possam v√™-lo ficam desprevenidas contra seus ataques. A magia termina se o alvo faz uma a√ß√£o hostil contra uma criatura. A√ß√µes contra objetos livres n√£o dissipam a Invisibilidade (voc√™ pode tocar ou apanhar objetos que n√£o estejam sendo segurados por outras criaturas). Causar dano indiretamente ‚Äî por exemplo, acendendo o pavio de um barril de p√≥lvora que vai detonar mais tarde ‚Äî n√£o √© considerado um ataque. Objetos soltos pelo alvo voltam a ser vis√≠veis e objetos apanhados por ele ficam invis√≠veis. Qualquer parte de um item carregado que se estenda al√©m de seu alcance corpo a corpo natural se torna vis√≠vel. Uma luz nunca fica invis√≠vel (mesmo que sua fonte seja)."}},aprimoramentos:[{custo:1,descricao:"muda a execu√ß√£o para a√ß√£o padr√£o, o alcance para toque e o alvo para 1 criatura ou um objeto Grande ou menor.",aumenta:!1},{custo:7,descricao:"muda a execu√ß√£o para a√ß√£o padr√£o, o alcance para toque e o alvo para 1 criatura. A magia n√£o √© dissipada caso o alvo fa√ßa um a√ß√£o hostil. Requer 4¬∫ c√≠rculo.",aumenta:!1}]}},necromancia:{"cranio-voador":{name:"Cr√¢nio Voador",type:"magia",img:"systems/tormenta20/icons/magias/cranio-voador.webp",system:{circulo:"2",escola:"necromancia",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"1 criatura",resistencia:"Fortitude reduz √† metade",custo:"3 PM",description:{value:"Esta magia cria um cr√¢nio envolto em energia negativa. Quando atinge o alvo, causa 4d8+4 pontos de dano de trevas e se desfaz emitindo um som horrendo, deixando abalado o alvo e todos os inimigos num raio de 3m dele (criaturas j√° abaladas ficam apavoradas por 1d4 rodadas). Passar no teste de resist√™ncia diminui o dano √† metade e evita a condi√ß√£o (as demais criaturas na √°rea tamb√©m tem direito ao teste de resist√™ncia, para evitar a condi√ß√£o). Abalado Apavorado"}},aprimoramentos:[{custo:2,descricao:"aumenta o dano em +1d8+1.",aumenta:!0},{custo:2,descricao:"aumenta o n√∫mero de alvos em +1.",aumenta:!0}]},"toque-vampirico":{name:"Toque Vamp√≠rico",type:"magia",img:"systems/tormenta20/icons/magias/toque-vampirico.webp",system:{circulo:"2",escola:"necromancia",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Fortitude reduz √† metade",custo:"3 PM",description:{value:"Sua m√£o brilha com energia sombria, causando 6d6 pontos de dano de trevas. Voc√™ recupera pontos de vida iguais √† metade do dano causado (se causou algum dano)."}},aprimoramentos:[{custo:2,descricao:"muda a resist√™ncia para nenhum. Como parte da execu√ß√£o da magia, voc√™ pode fazer um ataque corpo a corpo contra o alvo. Se acertar, causa o dano do ataque e da magia, e recupera pontos de vida iguais √† metade do dano da magia.",aumenta:!1},{custo:2,descricao:"aumenta o dano em +2d6.",aumenta:!0},{custo:2,descricao:"muda o alcance para pessoal, o alvo para voc√™ e a dura√ß√£o para cena. Em vez do normal, a cada rodada voc√™ pode gastar uma a√ß√£o padr√£o para tocar 1 criatura e causar 3d6 pontos de dano. Voc√™ recupera pontos de vida iguais √† metade do dano causado. Requer 3¬∫ c√≠rculo.",aumenta:!1}]}},transmutacao:{"alterar-tamanho":{name:"Alterar Tamanho",type:"magia",img:"systems/tormenta20/icons/magias/alterar-tamanho.webp",system:{circulo:"2",escola:"transmutacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",duracao:"1 dia",alvo:"1 objeto",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Esta magia aumenta ou diminui o tamanho de um item mundano em at√© tr√™s categorias (um objeto Enorme vira Pequeno, por exemplo). Voc√™ tamb√©m pode mudar a consist√™ncia do item, deixando-o r√≠gido como pedra ou flex√≠vel como seda (isso n√£o altera sua RD ou PV, apenas suas propriedades f√≠sicas). Se lan√ßar a magia num objeto de uma criatura involunt√°ria, ela pode fazer um teste de Vontade para anul√°-la."}},aprimoramentos:[{custo:1,descricao:"aumenta o n√∫mero de alvos em +1.",aumenta:!0},{custo:2,descricao:"muda o alcance para toque e o alvo para 1 criatura. Em vez do normal, o alvo aumenta uma categoria de tamanho (seu equipamento se ajusta ao novo tamanho). O alvo tamb√©m recebe For√ßa +2. Um alvo involunt√°rio pode fazer um teste de Fortitude para negar o efeito.",aumenta:!1},{custo:7,descricao:"muda o alcance para toque, o alvo para 1 criatura, a dura√ß√£o para permanente e a resist√™ncia para Fortitude anula. Em vez do normal, se falhar na resist√™ncia o alvo e seu equipamento t√™m seu tamanho mudado para Min√∫sculo. O alvo tamb√©m tem seu valor de For√ßa reduzido a 1 e suas formas de deslocamento reduzidas a 3m. Requer 4o c√≠rculo.",aumenta:!1}]},metamorfose:{name:"Metamorfose",type:"magia",img:"systems/tormenta20/icons/magias/metamorfose.webp",system:{circulo:"2",escola:"transmutacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"voc√™",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Voc√™ muda sua apar√™ncia e forma ‚Äî incluindo seu equipamento ‚Äî para qualquer outra criatura, existente ou imaginada. Independentemente da forma escolhida, voc√™ recebe +20 em testes de Engana√ß√£o para disfarce. Caracter√≠sticas n√£o mencionadas n√£o mudam. Se mudar para uma forma humanoide, pode mudar o tipo de dano (entre corte, impacto e perfura√ß√£o) de suas armas (se usa uma ma√ßa e transform√°- la em espada longa, ela pode causar dano de corte, por exemplo). Se quiser, pode assumir uma forma humanoide com uma categoria de tamanho acima ou abaixo da sua; nesse caso aplique os modificadores em Furtividade e testes de manobra. Se mudar para outras formas, voc√™ pode escolher uma Forma Selvagem do druida (veja no Cap√≠tulo 1). Nesse caso voc√™ n√£o pode atacar com suas armas, falar ou lan√ßar magias at√© voltar ao normal, mas recebe uma ou mais armas naturais e os b√¥nus da forma selvagem escolhida."}},aprimoramentos:[{custo:1,descricao:"a forma escolhida recebe uma habilidade de sentidos entre faro, vis√£o na penumbra e vis√£o no escuro.",aumenta:!1},{custo:5,descricao:"se mudar para formas n√£o humanoides, pode escolher uma Forma Selvagem Aprimorada. Requer 3¬∫ c√≠rculo.",aumenta:!1},{custo:9,descricao:"se mudar para formas n√£o humanoides, pode escolher uma Forma Selvagem Superior. Requer 4¬∫ c√≠rculo.",aumenta:!1},{custo:12,descricao:"al√©m do normal, no in√≠cio de seus turnos o alvo pode mudar de forma novamente, como uma a√ß√£o livre, fazendo novas escolhas. Requer 5¬∫ c√≠rculo.",aumenta:!1}]},velocidade:{name:"Velocidade",type:"magia",img:"systems/tormenta20/icons/magias/velocidade.webp",system:{circulo:"2",escola:"transmutacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 criatura",resistencia:"Nenhuma",custo:"3 PM",description:{value:"O alvo pode realizar uma a√ß√£o padr√£o ou de movimento adicional por turno. Esta a√ß√£o n√£o pode ser usada para lan√ßar magias e ativar engenhocas."}},aprimoramentos:[{custo:7,descricao:"muda o alvo para criaturas escolhidas no alcance. Requer 4¬∫ c√≠rculo.",aumenta:!1},{custo:7,descricao:"muda o alcance para pessoal e o alvo para voc√™. Voc√™ acelera sua mente, al√©m de seu corpo. A a√ß√£o adicional pode ser usada para lan√ßar magias e ativar engenhocas. Requer 4¬∫ c√≠rculo.",aumenta:!1},{custo:0,descricao:"muda a dura√ß√£o para cena. A a√ß√£o adicional que voc√™ pode fazer √© apenas de movimento. Uma criatura s√≥ pode receber uma a√ß√£o adicional por turno como efeito de Velocidade.",aumenta:!1}]}}},"3-circulo":{abjuracao:{"ancora-dimensional":{name:"√Çncora Dimensional",type:"magia",img:"systems/tormenta20/icons/magias/ancora-dimensional.webp",system:{circulo:"3",escola:"abjuracao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 criatura ou objeto",resistencia:"Nenhuma",custo:"6 PM",description:{value:"O alvo √© envolvido por um campo de for√ßa cor de esmeralda que impede qualquer forma de movimento planar ou extradimensional. Isso inclui magias de teletransporte (como Salto Dimensional e Teletransporte), convoca√ß√£o que mova o alvo (como ser banido ou convocado), viagens astrais, movimento atrav√©s de portais dimensionais e a habilidade incorp√≥reo. O alvo n√£o pode deixar o plano atual por nenhum meio m√°gico, mas ainda pode se mover normalmente dentro do plano. Criaturas incorp√≥reas afetadas tornam-se temporariamente corp√≥reas enquanto durar o efeito."}},aprimoramentos:[{custo:2,descricao:"muda o alcance para m√©dio, a √°rea para esfera com 3m de raio e o alvo para criaturas escolhidas.",aumenta:!1},{custo:2,descricao:"muda o efeito para criar um fio de energia cor de esmeralda que prende o alvo a um ponto no espa√ßo dentro do alcance. O ponto precisa ser fixo, mas n√£o precisa de nenhum apoio ou superf√≠cie (pode simplesmente flutuar no ar). O alvo n√£o pode se afastar mais de 3m do ponto, nem fisicamente, nem com movimento planar. O fio possui 20 PV e resist√™ncia a dano 20 (mas pode ser dissipado por efeitos que libertam criaturas, como o Julgamento Divino: Liberta√ß√£o do paladino).",aumenta:!1},{custo:4,descricao:"muda o efeito para criar um fio de energia cor de esmeralda que prende o alvo a um ponto no espa√ßo dentro do alcance. O ponto precisa ser fixo, mas n√£o precisa de nenhum apoio ou superf√≠cie (pode simplesmente flutuar no ar). O alvo n√£o pode se afastar mais de 3m do ponto, nem fisicamente, nem com movimento planar. O fio possui 20 PV e redu√ß√£o de dano 40 (mas pode ser dissipado por efeitos que libertam criaturas, como o Julgamento Divino: Liberta√ß√£o do paladino).",aumenta:!1},{custo:4,descricao:"muda o alvo para √°rea de cubo de 9m, a dura√ß√£o para permanente e adiciona componente material (chave de esmeralda no valor de T$ 2.000). Em vez do normal, nenhum tipo de movimento planar pode ser feito para entrar ou sair da √°rea.",aumenta:!1},{custo:9,descricao:"muda o alcance para m√©dio, a √°rea para esfera de 3m de raio e o alvo para criaturas escolhidas. Cria um fio de energia (veja acima) que prende todos os alvos ao centro da √°rea.",aumenta:!1}]},"dificultar-deteccao":{name:"Dificultar Detec√ß√£o",type:"magia",img:"systems/tormenta20/icons/magias/dificultar-deteccao.webp",system:{circulo:"3",escola:"abjuracao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",duracao:"1 dia",alvo:"1 criatura ou objeto",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Esta magia oculta a presen√ßa do alvo contra qualquer meio m√°gico de detec√ß√£o, inclusive detectar magia. Um conjurador que lance uma magia de adivinha√ß√£o para detectar a presen√ßa ou localiza√ß√£o do alvo deve fazer um teste de Vontade. Se falhar, a magia n√£o funciona, mas os PM s√£o gastos mesmo assim. Se for lan√ßada sobre uma criatura, Dificultar Detec√ß√£o protege tanto a criatura quanto seu equipamento."}},aprimoramentos:[{custo:4,descricao:"muda o alvo para √°rea de cubo de 9m. Qualquer criatura ou objeto na √°rea recebe o efeito da magia enquanto estiver dentro dela.",aumenta:!1},{custo:4,descricao:"muda a dura√ß√£o para 1 semana.",aumenta:!1}]},"globo-de-invulnerabilidade":{name:"Globo de Invulnerabilidade",type:"magia",img:"systems/tormenta20/icons/magias/globo-de-invulnerabilidade.webp",system:{circulo:"3",escola:"abjuracao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"Voc√™",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Voc√™ √© envolto por uma esfera m√°gica brilhante com 3m de raio, que det√©m qualquer magia de 2¬∫ c√≠rculo ou menor. Nenhuma magia pode ser lan√ßada contra um alvo dentro do globo e magias de √°rea n√£o o penetram. No entanto, magias ainda podem ser lan√ßadas de dentro para fora. Uma magia que dissipa outras magias s√≥ dissipa o globo se for usada diretamente sobre voc√™, n√£o o afetando se usada em √°rea. Efeitos m√°gicos n√£o s√£o dissipados quando entram na esfera, apenas suprimidos (voltam a funcionar fora do globo, caso sua dura√ß√£o n√£o tenha acabado). O globo √© im√≥vel e n√£o tem efeito sobre criaturas ou objetos. Ap√≥s lan√ß√°-lo, voc√™ pode entrar ou sair livremente."}},aprimoramentos:[{custo:4,descricao:"muda o efeito para afetar magias de at√© 3¬∫ c√≠rculo. Requer 4¬∫ c√≠rculo.",aumenta:!1},{custo:9,descricao:"muda o efeito para afetar magias de at√© 4¬∫ c√≠rculo. Requer 5¬∫ c√≠rculo.",aumenta:!1}]}},adivinhacao:{"contato-extraplanar":{name:"Contato Extraplanar",type:"magia",img:"systems/tormenta20/icons/magias/contato-extraplanar.webp",system:{circulo:"3",escola:"adv",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"pessoal",duracao:"1 dia",alvo:"Voc√™",resistencia:"Nenhuma",custo:"6 PM",description:{value:'Sua mente viaja at√© outro plano de exist√™ncia, onde entra em contato com seres extraplanares como g√™nios e dem√¥nios. Voc√™ firma um contrato com uma dessas entidades para que o auxilie durante o dia, em troca de se alimentar de seu mana. Quando a magia √© lan√ßada, voc√™ recebe 6d6 dados de aux√≠lio. Enquanto a magia durar, sempre que for realizar um teste de per√≠cia, voc√™ pode gastar 1d6 (mais 1d6 para cada c√≠rculo de magias acima do 3¬∫ que puder lan√ßar) e adicionar o resultado como b√¥nus no teste. No entanto, sempre que rolar um "6" num desses dados, a entidade "suga" 1 PM de voc√™. A magia termina se voc√™ gastar todos os dados, ficar sem PM ou no fim do dia (o que acontecer primeiro).'}},aprimoramentos:[{custo:2,descricao:"aumenta o n√∫mero de dados de aux√≠lio em +1.",aumenta:!0},{custo:8,descricao:'Muda os dados de aux√≠lio para d12. Sempre que rolar um resultado 12 num desses d12, a entidade "suga" 2 PM de voc√™. Requer 4¬∫ c√≠rculo.',aumenta:!1}]}},convocacao:{"convocacao-instantanea":{name:"Convoca√ß√£o Instant√¢nea",type:"magia",img:"systems/tormenta20/icons/magias/convocacao-instantanea.webp",system:{circulo:"3",escola:"convocacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"any",alvo:"1 objeto de 2 espa√ßos",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Voc√™ invoca um objeto de qualquer lugar para sua m√£o. O item deve ter sido previamente preparado com uma runa ou marca pessoal sua (ao custo de T$ 5). A magia n√£o funciona se o objeto estiver com outra criatura, mas voc√™ saber√° onde ele est√° e quem o est√° carregando (ou sua descri√ß√£o f√≠sica, caso n√£o conhe√ßa a criatura)."}},aprimoramentos:[{custo:1,descricao:"al√©m do normal, at√© 1 hora ap√≥s ter lan√ßado a magia, voc√™ pode gastar uma a√ß√£o de movimento para enviar o objeto de volta para o local em que ele estava antes.",aumenta:!1},{custo:1,descricao:"muda o alvo para um ba√∫ M√©dio, a dura√ß√£o para permanente e adiciona sacrif√≠cio de 1 PM. Em vez do normal, voc√™ esconde o ba√∫ alvo no Et√©r Entre Mundos, com at√© 20 espa√ßos de equipamento. A magia faz com que qualquer objeto caiba no ba√∫, independentemente do seu tamanho. Uma vez escondido, voc√™ pode convocar o ba√∫ para um espa√ßo livre adjacente, ou de volta para o Et√©r, com uma a√ß√£o padr√£o. Componente material: ba√∫ constru√≠do com mat√©ria-prima da melhor qualidade (T$ 1.000). Voc√™ deve ter em m√£os uma miniatura do ba√∫, no valor de T$ 100, para invocar o ba√∫ verdadeiro.",aumenta:!1},{custo:2,descricao:"aumenta o n√∫mero de alvos em +1.",aumenta:!0},{custo:2,descricao:"muda o alvo para 1 objeto de at√© 10 espa√ßos. Um objeto muito grande ou pesado para aparecer em suas m√£os surge em um espa√ßo adjacente a sua escolha.",aumenta:!0}]},"enxame-rubro":{name:"Enxame Rubro",type:"magia",img:"systems/tormenta20/icons/magias/enxame-rubro.webp",system:{circulo:"3",escola:"convocacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",resistencia:"Reflexos reduz √† metade",custo:"6 PM",description:{value:"Voc√™ conjura um enxame de pequenas criaturas corrosivas da Tormenta que ocupa um quadrado de 3m de lado. O enxame pode passar pelo espa√ßo de outras criaturas e n√£o impede que outras criaturas entrem no espa√ßo dele, mas √© perigoso faz√™-lo. No final de cada um de seus turnos, o enxame causa 4d12 pontos de dano de √°cido a qualquer criatura que esteja ocupando o mesmo espa√ßo que ele. As criaturas afetadas podem fazer um teste de Reflexos para reduzir o dano √† metade. Voc√™ pode gastar uma a√ß√£o de movimento para mover o enxame at√© 12m em qualquer dire√ß√£o. O enxame persiste enquanto voc√™ mantiver concentra√ß√£o na magia."}},aprimoramentos:[{custo:1,descricao:"al√©m do normal, uma criatura que falhe no teste de Reflexos fica agarrada (o enxame escala e cobre o corpo dela). A criatura pode gastar uma a√ß√£o padr√£o e fazer um teste de Acrobacia ou Atletismo para escapar. Se voc√™ mover o enxame, a criatura fica livre.",aumenta:!1},{custo:2,descricao:"aumenta o dano em +1d12.",aumenta:!0},{custo:2,descricao:"muda o dano para trevas.",aumenta:!1},{custo:3,descricao:"o enxame vira Enorme (quadrado de 6m de lado).",aumenta:!1},{custo:3,descricao:"o enxame ganha deslocamento de voo 18m e passa a ocupar um cubo ao inv√©s de um quadrado.",aumenta:!1},{custo:4,descricao:"o enxame inclui parasitas inchados que explodem e criam novos enxames. No in√≠cio de cada um de seus turnos, role 1d6. Em um resultado 5 ou 6, um novo enxame surge adjacente a um j√° existente √† sua escolha. Voc√™ pode mover todos os enxames com uma √∫nica a√ß√£o de movimento, mas eles n√£o podem ocupar o mesmo espa√ßo. Requer 4¬∫ c√≠rculo.",aumenta:!1}]},teletransporte:{name:"Teletransporte",type:"magia",img:"systems/tormenta20/icons/magias/teletransporte.webp",system:{circulo:"3",escola:"convocacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"at√© 5 criaturas volunt√°rias",resistencia:"Nenhuma",custo:"6 PM",description:{value:'Esta magia transporta os alvos para um lugar a sua escolha a at√© 1.000km. Voc√™ precisa fazer um teste de Misticismo, com dificuldade que depende de seu conhecimento sobre o local de destino. CD 20. Um lugar familiar, que voc√™ visita com frequ√™ncia. CD 30. Um lugar conhecido, que voc√™ j√° visitou pelo menos uma vez. CD 40. Um que voc√™ nunca visitou e s√≥ conhece a partir da descri√ß√£o de outra pessoa que esteve l√°. Voc√™ n√£o pode se teletransportar para um lugar que nunca visitou sem a descri√ß√£o de algu√©m. Ou seja, n√£o pode se transportar para a "sala de tesouro do rei" se nunca esteve nela nem falou com algu√©m que esteve. Se passar no teste, os alvos chegam ao lugar desejado. Se falhar, os alvos surgem 1d10 x 10km afastados em qualquer dire√ß√£o (se o destino √© uma cidade costeira, voc√™ pode surgir em alto-mar). Se falhar por 5 ou mais, voc√™ chega em um lugar parecido, mas errado. E se voc√™ rolar 1 natural no teste a magia falha (mas voc√™ gasta os PM) e fica atordoado por 1d4 rodadas.'}},aprimoramentos:[{custo:2,descricao:"aumenta o n√∫mero de alvos em +5.",aumenta:!0},{custo:2,descricao:"em vez do normal, a magia teletransporta os alvos para seu santu√°rio - um local familiar e previamente preparado. A magia pode ser usada sem limite de dist√¢ncia ou necessidade de testes, mas apenas dentro do mesmo plano. Preparar um local como seu santu√°rio exige um ritual de um dia e o gasto de T$ 1.000. Voc√™ s√≥ pode ter um santu√°rio por vez.",aumenta:!1},{custo:9,descricao:"muda a execu√ß√£o para a√ß√£o completa, a dura√ß√£o para cena e adiciona sacrif√≠cio de 1 PM. Em vez do normal, voc√™ cria um c√≠rculo de 1,5m de di√¢metro no ch√£o, que transporta qualquer criatura que pisar nele. O destino √© escolhido quando a magia √© lan√ßada e pode ser qualquer lugar, em qualquer mundo, sem a necessidade de testes, desde que seja conhecido por voc√™. O c√≠rculo √© t√™nue e praticamente invis√≠vel. Voc√™ pode marc√°-lo de alguma forma (por exemplo, lan√ßando-o sobre uma plataforma elevada). Se n√£o fizer isso, algu√©m pode pisar nele por acidente. Junte isso a um destino hostil e voc√™ ter√° uma armadilha bastante eficaz! Requer 5¬∫ c√≠rculo.",aumenta:!1}]}},evocacao:{"erupcao-glacial":{name:"Erup√ß√£o Glacial",type:"magia",img:"systems/tormenta20/icons/magias/erupcao-glacial.webp",system:{circulo:"3",escola:"evocacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"quadrado de 6m de lado",resistencia:"Relfexos parcial",custo:"6 PM",description:{value:"Estacas de gelo irrompem do ch√£o. Criaturas na √°rea sofrem 4d6 de dano de corte, 4d6 de dano de frio e ficam ca√≠das. Passar no teste de Reflexos evita o dano de corte e a queda. As estacas duram pela cena, o que torna a √°rea afetada terreno dif√≠cil, e concedem cobertura leve para criaturas dentro da √°rea ou atr√°s dela. As estacas s√£o destru√≠das caso sofram qualquer quantidade de dano por fogo m√°gico."}},aprimoramentos:[{custo:3,descricao:"aumenta o dano de frio em +2d6 e o dano de corte em +2d6.",aumenta:!0},{custo:4,descricao:"muda a √°rea para cilindro com 6m de raio e 6m de altura e a dura√ß√£o para sustentada. Em vez do normal, a magia cria uma tempestade de granizo que causa 3d6 pontos de dano de impacto e 3d6 pontos de dano de frio em todas as criaturas na √°rea (sem teste de resist√™ncia). A tempestade fornece camuflagem leve as criaturas dentro dela e deixa o piso escorregadio. Piso escorregadio conta como terreno dif√≠cil e obriga criaturas na √°rea a fazer testes de Acrobacia para equil√≠brio (veja o Cap√≠tulo 2). Requer 4¬∫ c√≠rculo.",aumenta:!1}]},"lanca-ignea":{name:"Lan√ßa √çgnea",type:"magia",img:"systems/tormenta20/icons/magias/lanca-ignea.webp",system:{circulo:"3",escola:"evocacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"1 criatura",resistencia:"Reflexos parcial",custo:"6 PM",description:{value:"Esta magia foi desenvolvida por um mago imortal, um entusiasta dos estudos vulc√¢nicos. Ela dispara um proj√©til de magma contra o alvo, que sofre 4d6 pontos de dano de fogo e 4d6 pontos de dano de perfura√ß√£o e fica em chamas. As chamas causam 2d6 pontos de dano por rodada, em vez do dano normal. Se passar no teste de resist√™ncia, o alvo sofre metade do dano e n√£o fica em chamas. Respingos de rocha incandescente se espalham com a explos√£o, atingindo todas as criaturas adjacentes ao alvo, que devem fazer um teste de Reflexos. Se falharem, ficam em chamas, como descrito acima."}},aprimoramentos:[{custo:3,descricao:"aumenta o dano inicial em +2d6 e o dano do efeito em chamas em +1d6.",aumenta:!0},{custo:4,descricao:"muda a dura√ß√£o para cena ou at√© ser descarregada. Em vez do efeito normal, a magia cria quatro dardos de lava que flutuam ao lado do conjurador. Uma vez por rodada, como uma a√ß√£o livre, voc√™ pode disparar um dos dardos em uma criatura, causando o efeito normal da magia. Requer 4¬∫ C√≠rculo.",aumenta:!1}]},"muralha-elemental":{name:"Muralha Elemental",type:"magia",img:"systems/tormenta20/icons/magias/muralha-elemental.webp",system:{circulo:"3",escola:"evocacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",resistencia:"veja texto",custo:"6 PM",description:{value:"Cria uma muralha de um elemento a sua escolha. A muralha pode ser um muro de at√© 30m de comprimento e 3m de altura (ou o contr√°rio) ou uma c√∫pula de 3m de raio. Os efeitos variam conforme o elemento escolhido. Fogo. Faz surgir uma violenta cortina de chamas. Um lado da muralha (a sua escolha) emite ondas de calor, que causam 2d6 pontos de dano de fogo em criaturas a at√© 6m quando voc√™ lan√ßa a magia e no in√≠cio de seus turnos. Atravessar a muralha causa 8d6 pontos de dano de fogo. Caso seja criada em uma √°rea onde existem criaturas, elas sofrem dano como se estivessem atravessando a muralha, mas podem fazer um teste de Reflexos para reduzir o dano √† metade (a criatura escolhe para qual lado quer escapar, mas se escapar para o lado quente sofrer√° mais 2d6 pontos de dano). Gelo. Evoca uma parede grossa de gelo denso com 15cm de espessura. Na forma de c√∫pula, pode prender uma ou mais criaturas, mas elas t√™m direito a um teste de Reflexos para escapar antes que a c√∫pula se forme. Cada trecho de 3m da muralha tem Defesa 8, 40 PV e RD 5. Um trecho da muralha que atinja 0 PV ser√° rompido. Qualquer efeito de fogo causa dano dobrado √† muralha. Uma criatura que atravesse um trecho rompido da muralha sofre 4d6 pontos de dano de frio."}},aprimoramentos:[{custo:2,descricao:"aumenta o comprimento em +15m e altura em +3m, at√© 60m de comprimento e 9m de altura.",aumenta:!0},{custo:4,descricao:"muda a dura√ß√£o para sustentada e adiciona uma nova escolha, Ess√™ncia. A muralha √© invis√≠vel e indestrut√≠vel - imune a qualquer forma de dano e n√£o afetada por nenhuma magia. Ela n√£o pode ser atravessada nem mesmo por criaturas incorp√≥reas. No entanto, magias que teletransportam criaturas, como Salto Dimensional, podem atravess√°-la. Magias e efeitos de dano, como Bola de Fogo e o sopro de um drag√£o, n√£o vencem a muralha, mas magias lan√ßadas diretamente sobre uma criatura ou √°rea, como Sono, podem ser lan√ßadas contra alvos que estejam no outro lado como se tivessem linha de efeito. Requer 4¬∫ c√≠rculo.",aumenta:!1},{custo:2,descricao:"aumenta o dano por atravessar a muralha em +2d6.",aumenta:!0}]}},ilusao:{"ilusao-lacerante":{name:"Ilus√£o Lacerante",type:"magia",img:"systems/tormenta20/icons/magias/ilusao-lacerante.webp",system:{circulo:"3",escola:"ilusao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"cubo de 9m",resistencia:"Vontade anula",custo:"6 PM",description:{value:"Voc√™ cria uma ilus√£o de algum perigo mortal. Quando a magia √© lan√ßada, criaturas na √°rea devem fazer um teste de Vontade; uma falha significa que a criatura acredita que a ilus√£o √© real e sofre 3d6 pontos de dano ps√≠quico n√£o letal. Sempre que uma criatura iniciar seu turno dentro da √°rea, deve repetir o teste de Vontade. Se falhar, sofre o dano novamente. Somente criaturas que falham veem a ilus√£o, e racionalizam o efeito sempre que falham no teste (por exemplo, acredita que o mesmo teto pode cair sobre ela v√°rias vezes)."}},aprimoramentos:[{custo:3,descricao:"aumenta o dano em +2d6.",aumenta:!0},{custo:4,descricao:"muda a √°rea para um cubo de 90m. Requer 4¬∫ c√≠rculo.",aumenta:!0}]},miragem:{name:"Miragem",type:"magia",img:"systems/tormenta20/icons/magias/miragem.webp",system:{circulo:"3",escola:"ilusao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"longo",duracao:"1 dia",alvo:"cubo de at√© 90m de lado",resistencia:"Vontade desacredita",custo:"6 PM",description:{value:"Voc√™ faz um terreno parecer outro, incluindo sons e cheiros. Uma plan√≠cie pode parecer um p√¢ntano, uma floresta pode parecer uma montanha etc. Esta magia pode ser usada para criar armadilhas: areia movedi√ßa pode parecer terra firme ou um precip√≠cio pode parecer um lago. Voc√™ pode alterar, incluir e esconder estruturas dentro da √°rea, mas n√£o criaturas (embora elas possam se esconder nas estruturas ilus√≥rias)."}},aprimoramentos:[{custo:4,descricao:"al√©m do normal, pode alterar a apar√™ncia de criaturas escolhidas na √°rea, como se usando Disfarce Ilus√≥rio.",aumenta:!1},{custo:9,descricao:"muda a dura√ß√£o para permanente e adiciona componente material (p√≥ de diamante no valor de T$ 1.000). Requer 5¬∫ c√≠rculo.",aumenta:!1}]}},necromancia:{"ferver-sangue":{name:"Ferver Sangue",type:"magia",img:"systems/tormenta20/icons/magias/ferver-sangue.webp",system:{circulo:"3",escola:"necromancia",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 criatura",resistencia:"Fortitude parcial",custo:"6 PM",description:{value:"O sangue do alvo aquece rapidamente at√© entrar em ebuli√ß√£o. Quando a magia √© lan√ßada, e no in√≠cio de cada um de seus turnos, o alvo sofre 4d8 pontos de dano de fogo e fica Enjoado por uma rodada (Fortitude reduz o dano √† metade e evita a condi√ß√£o). Se o alvo passar em dois testes de Fortitude seguidos, dissipa a magia. Se o alvo for reduzido a 0 PV pelo dano desta magia, seu corpo explode, matando-o e causando 6d6 pontos de dano de fogo em todas as criaturas a at√© 3m (Reflexos reduz √† metade). Essa magia n√£o afeta criaturas sem sangue, como construtos ou mortos-vivos."}},aprimoramentos:[{custo:2,descricao:"aumenta o dano em +1d8.",aumenta:!0},{custo:9,descricao:"muda alvo para criaturas escolhidas. Requer 5¬∫ c√≠rculo.",aumenta:!1}]},"tentaculos-de-trevas":{name:"Tent√°culos de Trevas",type:"magia",img:"systems/tormenta20/icons/magias/tentaculos-de-trevas.webp",system:{circulo:"3",escola:"necromancia",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"esfera com 6m de raio",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Um c√≠rculo de energias sombrias se abre no ch√£o, de onde surgem tent√°culos feitos de treva viscosa. Ao lan√ßar a magia e no in√≠cio de cada um de seus turnos, voc√™ faz um teste da manobra agarrar (usando seu b√¥nus de Misticismo) contra cada criatura na √°rea. Se voc√™ passar, a criatura √© agarrada; se a v√≠tima j√° est√° agarrada, √© esmagada, sofrendo 4d6 pontos de dano de trevas. A √°rea conta como terreno dif√≠cil. Os tent√°culos s√£o imunes a dano. Agarrado"}},aprimoramentos:[{custo:2,descricao:"aumenta o raio da √°rea em +3m.",aumenta:!0},{custo:3,descricao:"aumenta o dano dos tent√°culos em +2d6.",aumenta:!0}]}},transmutacao:{telecinesia:{name:"Telecin√©sia",type:"magia",img:"systems/tormenta20/icons/magias/telecinesia.webp",system:{circulo:"3",escola:"transmutacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",duracao:"sustentada ou instant√¢nea (veja texto)",alvo:"veja texto;",resistencia:"Nenhuma",custo:"6 PM",description:{value:'Voc√™ move objetos ou criaturas se concentrando. Ao lan√ßar a magia, escolha uma das op√ß√µes a seguir. For√ßa Cont√≠nua: voc√™ move uma criatura ou objeto de at√© 10 espa√ßos, a at√© 6m por rodada. Uma criatura pode anular o efeito sobre ela, ou sobre um objeto que possua, passando num teste de Vontade. O alvo pode ser movido em qualquer dire√ß√£o dentro do alcance. Ele cai no ch√£o se sair do alcance ou a magia terminar. Dura√ß√£o: sustentada. Empurr√£o Violento: nesta vers√£o a energia m√°gica √© expelida de uma √∫nica vez e arremessa at√© 10 objetos (no m√°ximo 10 espa√ßos). Os objetos devem estar a at√© 3m uns dos outros e podem ser arremessados at√© o alcance da magia. Objetos arremessados podem atingir criaturas em seu caminho, causando de 1 ponto de dano de impacto por espa√ßo (objetos macios, sem pontas ou sem fio) at√© 1d6 pontos de dano por espa√ßo (objetos duros, pontudos ou afiados). Criaturas atingidas t√™m direito a um teste de Reflexos para reduzir o dano √† metade. Criaturas m√©dias ou menores podem ser arremessadas, mas t√™m direito a um teste de Vontade para evitar o efeito (em si mesmas ou em objetos que estejam segurando). Uma criatura arremessada contra uma superf√≠cie s√≥lida sofre 1d6 pontos de dano de impacto para cada 3m que "voou" no deslocamento (incluindo outras criaturas; nesse caso, ambas sofrem o dano). Dura√ß√£o: instant√¢nea.'}},aprimoramentos:[{custo:3,descricao:"aumenta o tamanho m√°ximo da criatura em uma categoria (para Grande, Enorme e Colossal) ou dobra a quantidade de espa√ßos do objeto.",aumenta:!0}]},"transformacao-de-guerra":{name:"Transforma√ß√£o de Guerra",type:"magia",img:"systems/tormenta20/icons/magias/transformacao-de-guerra.webp",system:{circulo:"3",escola:"transmutacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"voc√™",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Voc√™ se torna uma m√°quina de combate, ficando mais forte, r√°pido e resistente. Voc√™ recebe +6 na Defesa, testes de ataque e rolagens de dano corpo a corpo, e 30 PV tempor√°rios. Durante a Transforma√ß√£o de Guerra voc√™ n√£o pode lan√ßar magias, mas se torna proficiente em todas as armas."}},aprimoramentos:[{custo:2,descricao:"aumenta os b√¥nus na Defesa, testes de ataque e rolagens de dano corpo a corpo em +1, e os PV tempor√°rios em +10.",aumenta:!0},{custo:2,descricao:"adiciona componente material (uma barra de adamante no valor de T$ 100). Sua forma de combate ganha um aspecto met√°lico e sem express√µes. Al√©m do normal, voc√™ recebe resist√™ncia a dano 10 e imunidade a atordoamento e efeitos de cansa√ßo, encantamento, metabolismo, trevas e veneno, e n√£o precisa respirar.",aumenta:!1}]},voo:{name:"Voo",type:"magia",img:"systems/tormenta20/icons/magias/voo.webp",system:{circulo:"3",escola:"transmutacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"voc√™",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Voc√™ recebe deslocamento de voo 12m. Voar por meio desta magia √© simples como andar ‚Äî voc√™ pode atacar e lan√ßar magias normalmente enquanto voa. Quando a magia termina, voc√™ desce lentamente at√© o ch√£o, como se estivesse sob efeito de Queda Suave."}},aprimoramentos:[{custo:1,descricao:"muda o alcance para toque e o alvo para 1 criatura.",aumenta:!1},{custo:4,descricao:"muda a dura√ß√£o para 1 dia. Requer 4¬∫ c√≠rculo.",aumenta:!1},{custo:4,descricao:"muda o alcance para curto e o alvo para at√© 10 criaturas. Requer 4¬∞ c√≠rculo.",aumenta:!1}]}}},"4-circulo":{abjuracao:{"campo-antimagia":{name:"Campo Antimagia",type:"magia",img:"systems/tormenta20/icons/magias/campo-antimagia.webp",system:{circulo:"4",escola:"abjuracao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"Voc√™",resistencia:"Nenhuma",custo:"10 PM",description:{value:"Voc√™ √© cercado por uma barreira invis√≠vel com 3m de raio que acompanha seus movimentos. Qualquer magia ou habilidade m√°gica que entre na √°rea da barreira √© suprimida enquanto estiver l√°. Criaturas convocadas que entrem em um Campo Antimagia desaparecem. Elas reaparecem na mesma posi√ß√£o quando a dura√ß√£o do Campo termina ‚Äî supondo que a dura√ß√£o da magia que as convocou ainda n√£o tenha terminado. Criaturas m√°gicas, como elementais, ou construtos imbu√≠dos com magia durante sua cria√ß√£o, como golens, n√£o s√£o diretamente afetados pelo Campo Antimagia. Entretanto, como qualquer criatura, n√£o poder√£o usar magias ou habilidades m√°gicas dentro dele. Magias que dissipam outras magias, como Dissipar Magia, n√£odissipam um Campo Antimagia, e dois Campos na mesma √°rea n√£o se neutralizam. Artefatos e deuses maiores n√£o s√£o afetados por um Campo Antimagia"}}}},adivinhacao:{sonho:{name:"Sonho",type:"magia",img:"systems/tormenta20/icons/magias/sonho.webp",system:{circulo:"4",escola:"adv",ativacao:{custo:10,qtd:"10","condi√ß√£o":"",special:"",execucao:"minuto"},alcance:"any",duracao:"Veja Texto",alvo:"1 criatura viva",resistencia:"Nenhuma",custo:"10 PM",description:{value:"Voc√™ entra nos sonhos de uma criatura. Uma vez l√°, pode conversar com ela at√© que ela acorde. Se o alvo n√£o estiver dormindo quando voc√™ lan√ßar a magia, voc√™ pode permanecer em transe at√© que ele adorme√ßa. Durante o transe, voc√™ fica Indefeso e sem consci√™ncia dos arredores. Voc√™ pode sair do transe quando quiser, mas a magia termina."}},aprimoramentos:[{custo:2,descricao:"transforma o sonho do alvo em um pesadelo. A v√≠tima deve fazer um teste de Vontade. Se falhar, n√£o recupera PV ou PM pela noite, sofre 1d10 pontos de dano de trevas e acorda fatigada. A v√≠tima recebe b√¥nus ou penalidades em seu teste de resist√™ncia, dependendo do conhecimento que voc√™ tiver dela. Use os mesmos modificadores da magia Vid√™ncia.",aumenta:!1},{custo:1,descricao:"aumenta o n√∫mero de alvos em +1. Todos os alvos compartilham um mesmo sonho (ou pesadelo) entre si e com voc√™.",aumenta:!0}]}},convocacao:{"conjurar-elemental":{name:"Conjurar Elemental",type:"magia",img:"systems/tormenta20/icons/magias/conjurar-elemental.webp",system:{circulo:"4",escola:"convocacao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"medio",resistencia:"Nenhuma",custo:"10 PM",description:{value:"Esta magia transforma uma por√ß√£o de um elemento inerte em uma poderosa criatura elemental Grande do tipo correspondente ao elemento utilizado. Voc√™ deve ter acesso a uma quantidade significativa do elemento: uma fogueira ou tocha para fogo, uma po√ßa d'√°gua ou fonte para √°gua, terra solta ou rocha para terra, ou ar em movimento (como vento) para ar. O elemental criado √© uma entidade consciente que obedece completamente aos seus comandos mentais, mesmo √† dist√¢ncia. O elemental funciona como um parceiro mestre do tipo destruidor (cuja habilidade especial custa apenas 2 PM para ser usada) e possui um tipo adicional de parceiro √† sua escolha entre os listados abaixo, baseado em seu elemento. O elemental auxilia apenas voc√™ e n√£o conta em seu limite normal de parceiros. Tipos por elemento: Ar (assassino, perseguidor ou vigilante) - causa dano de eletricidade. √Ågua (ajudante, guardi√£o ou m√©dico) - causa dano de frio. Fogo (atirador, combatente ou fort√£o) - causa dano de fogo. Terra (combatente, guardi√£o ou montaria) - causa dano de impacto. O elemental persiste enquanto voc√™ mantiver concentra√ß√£o e possui intelig√™ncia suficiente para interpretar ordens complexas."}},aprimoramentos:[{custo:5,descricao:"o elemental muda para Enorme e recebe dois tipos de aliado indicados no seu elemento.",aumenta:!1},{custo:5,descricao:"voc√™ convoca um elemental de cada tipo. Quando lan√ßa a magia, voc√™ pode escolher se cada elemental vai auxiliar voc√™ ou um aliado no alcance. Requer 5¬∫ c√≠rculo.",aumenta:!1},{custo:0,descricao:"Elemental do Fogo Fort√£o",aumenta:!1}]},"mao-poderosa":{name:"M√£o Poderosa",type:"magia",img:"systems/tormenta20/icons/magias/mao-poderosa.webp",system:{circulo:"4",escola:"convocacao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",resistencia:"Nenhuma",custo:"10 PM",description:{value:"Esta magia cria uma m√£o flutuante de tamanho Grande que sempre se posiciona entre voc√™ e um oponente a sua escolha. A m√£o fornece cobertura leve (+5 na Defesa) contra esse oponente. Nada √© capaz de enganar a m√£o ‚Äî coisas como escurid√£o, invisibilidade, metamorfose e disfarces mundanos n√£o a impedem de proteg√™-lo. A m√£o tem Defesa 20 e PV e resist√™ncias iguais aos seus. Com uma a√ß√£o de movimento, voc√™ pode comandar a m√£o para que o proteja de outro oponente ou para que realize uma das a√ß√µes a seguir. Agarrar: a m√£o usa uma manobra agarrar contra o oponente, usando o seu Misticismo com um b√¥nus adicional de +10. A m√£o mant√©m o oponente agarrado, mas n√£o causa dano. Esmagar: a m√£o esmaga um oponente agarrado, causando 2d6+10 pontos de dano de impacto. Empurrar: a m√£o afasta o oponente (manobra empurrar usando o seu Misticismo com um b√¥nus adicional de +10). A m√£o acompanha o oponente para empurr√°-lo o m√°ximo que conseguir, dentro do alcance da magia."}},aprimoramentos:[{custo:3,descricao:"aumenta o dano de impacto em +1d6+5.",aumenta:!0},{custo:5,descricao:"muda o b√¥nus adicional em Misticismo para +20. Requer 5¬∫ c√≠rculo.",aumenta:!1}]}},encantamento:{"alterar-memoria":{name:"Alterar Mem√≥ria",type:"magia",img:"systems/tormenta20/icons/magias/alterar-memoria.webp",system:{circulo:"4",escola:"encantamento",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Vontade anula",custo:"10 PM",description:{value:"Voc√™ invade a mente do alvo e altera ou apaga suas mem√≥rias da √∫ltima hora."}},aprimoramentos:[{custo:2,descricao:"muda o alcance para pessoal e o alvo para √°rea cone de 4,5m.",aumenta:!1},{custo:5,descricao:"voc√™ pode alterar ou apagar as mem√≥rias das √∫ltimas 24 horas.",aumenta:!1}]},marionete:{name:"Marionete",type:"magia",img:"systems/tormenta20/icons/magias/marionete.webp",system:{circulo:"4",escola:"encantamento",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"1 criatura",resistencia:"Fortitude anula",custo:"10 PM",description:{value:"Esta magia sinistra manipula diretamente o sistema nervoso do alvo, transformando-o em uma marionete viva sob seu controle. Ao ser afetada pela magia, e no in√≠cio de cada um de seus turnos subsequentes, a v√≠tima deve fazer um teste de Fortitude. Se passar, a magia √© anulada e ela recupera o controle de seu corpo. Se falhar, todas as suas a√ß√µes f√≠sicas naquele turno ficam completamente sob seu controle. A v√≠tima mant√©m total consci√™ncia de tudo que acontece ao seu redor - pode ver, ouvir, pensar e at√© falar com certo esfor√ßo (mas n√£o pode lan√ßar magias que exijam gestos ou componentes verbais complexos). Contudo, seu corpo executa apenas os movimentos que voc√™ desejar. A v√≠tima pode ser for√ßada a se movimentar, atacar aliados, usar habilidades de combate, abrir portas, entregar itens - qualquer a√ß√£o f√≠sica de que seja capaz. Voc√™ deve manter linha de efeito visual para controlar a v√≠tima. Se perder o contato visual, n√£o poder√° dar novos comandos, mas ela ficar√° paralisada at√© que voc√™ recupere o controle ou a magia termine. Esta √© uma das magias de controle mental mais temidas e √©ticamente question√°veis."}}}},evocacao:{"raio-polar":{name:"Raio Polar",type:"magia",img:"systems/tormenta20/icons/magias/raio-polar.webp",system:{circulo:"4",escola:"evocacao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"1 criatura",resistencia:"Fortitude parcial",custo:"10 PM",description:{value:"Voc√™ dispara um raio azul esbranqui√ßado de gelo e ar congelante. O alvo sofre 10d8 pontos de dano de frio e fica preso em um bloco de gelo (Paralisado). Se passar no teste de resist√™ncia, sofre metade do dano e, em vez de paralisado, fica Lento por uma rodada. √© poss√≠vel quebrar o gelo para libertar uma criatura presa: o bloco tem 20 PV, resist√™ncia a dano 10 e √© vulner√°vel a fogo. Uma criatura presa pode usar uma a√ß√£o completa para fazer um teste de Atletismo (com a mesma CD para resistir √† magia) e tentar se libertar do gelo; cada vez que passar no teste causa 10 pontos de dano ao bloco, ignorando a RD."}},aprimoramentos:[{custo:3,descricao:"aumenta o dano em +2d8.",aumenta:!0},{custo:5,descricao:"muda o alvo para √°rea de esfera de 6m de raio. Em vez de um raio, voc√™ dispara uma esfera de gelo que explode, causando o efeito da magia em todas as criaturas na √°rea.",aumenta:!1}]},"relampago-flamejante":{name:"Rel√¢mpago Flamejante",type:"magia",img:"systems/tormenta20/icons/magias/relampago-flamejante.webp",system:{circulo:"4",escola:"evocacao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"Duas Rodadas",execucao:"especial"},alcance:"medio",resistencia:"Reflexos reduz √† metade",custo:"10 PM",description:{value:"Esta √© uma magia poderosa, desenvolvida por um met√≥dico e impass√≠vel arquimago. Voc√™ invoca as energias elementais do fogo e do rel√¢mpago, fazendo com que uma de suas m√£os fique em chamas e a outra m√£o eletrificada. Pela dura√ß√£o da magia, voc√™ pode gastar uma a√ß√£o de movimento para disparar uma bola de fogo (10d6 pontos de dano de fogo numa esfera com 6m de raio) ou um rel√¢mpago (10d6 pontos de dano de eletricidade numa linha). Voc√™ tamb√©m pode, como uma a√ß√£o padr√£o, usar as duas m√£os num ataque de energia mista (20d12 pontos de dano, metade de fogo e metade de eletricidade, numa esfera de 9m de raio). Voc√™ precisa estar com as duas m√£os livres para invocar o efeito misto e isso consome toda a energia da magia, terminando-a imediatamente. Por se tratar de um ritual complexo, o tempo de execu√ß√£o dessa magia n√£o pode ser reduzido."}},aprimoramentos:[{custo:3,descricao:"aumenta o dano das rajadas em +1d6.",aumenta:!0},{custo:3,descricao:"aumenta o dano da rajada mista em +2d12.",aumenta:!0}]},"talho-invisivel":{name:"Talho Invis√≠vel",type:"magia",img:"systems/tormenta20/icons/magias/talho-invisivel.webp",system:{circulo:"4",escola:"evocacao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"cone de 9m",resistencia:"Fortitude parcial",custo:"10 PM",description:{value:"Esta magia cruel foi desenvolvida por um mago de combate, quando ainda era um b√≠pede. Voc√™ faz um gesto r√°pido e dispara uma l√¢mina de ar em alta velocidade. Criaturas na √°rea sofrem 10d8 pontos de dano de corte e ficam sangrando. Alvos que passem no teste de resist√™ncia sofrem metade do dano e n√£o ficam sangrando."}},aprimoramentos:[{custo:2,descricao:"aumenta o dano em +2d8.",aumenta:!0},{custo:2,descricao:"muda o alvo para voc√™ e a dura√ß√£o para sustentada. Uma vez por rodada, como uma a√ß√£o padr√£o, voc√™ pode disparar uma l√¢mina de ar contra um alvo em alcance m√©dio, causando 6d8 pontos de dano de corte (Fortitude reduz √† metade).",aumenta:!1}]}},ilusao:{"duplicata-ilusoria":{name:"Duplicata Ilus√≥ria",type:"magia",img:"systems/tormenta20/icons/magias/duplicata-ilusoria.webp",system:{circulo:"4",escola:"ilusao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",resistencia:"Nenhuma",custo:"10 PM",description:{value:"Voc√™ cria uma c√≥pia ilus√≥ria semirreal de... voc√™ mesmo! Ela √© id√™ntica em apar√™ncia, som e cheiro, mas √© intang√≠vel. A cada turno, voc√™ escolhe se ver√° e ouvir√° atrav√©s da duplicata ou de seu corpo original. A c√≥pia reproduz todas as suas a√ß√µes, incluindo fala. Qualquer magia com alcance de toque ou maior que voc√™ lan√ßar pode se originar da duplicata, em vez do seu corpo original. As magias afetam outros alvos normalmente, com a √∫nica diferen√ßa de se originarem da c√≥pia, em vez de voc√™. Se quiser que a duplicata fa√ßa algo diferente de voc√™, voc√™ deve gastar uma a√ß√£o de movimento. Qualquer criatura que interagir com a c√≥pia tem direito a um teste de Vontade para perceber que √© uma ilus√£o. As magias que se originam dela, no entanto, s√£o reais. A c√≥pia desaparece se sair do alcance."}},aprimoramentos:[{custo:3,descricao:"cria uma c√≥pia adicional.",aumenta:!1}]},"explosao-caleidoscopica":{name:"Explos√£o Caleidosc√≥pica",type:"magia",img:"systems/tormenta20/icons/magias/explosao-caleidoscopica.webp",system:{circulo:"4",escola:"ilusao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"esfera com 6m de raio",resistencia:"Fortitude parcial",custo:"10 PM",description:{value:"Esta magia cria uma forte explos√£o de luzes estrobosc√≥picas e sons cacof√¥nicos que desorientam as criaturas atingidas. O efeito que cada criatura sofre depende do ND dela. ND 4 ou menor: se falhar no teste de resist√™ncia, fica inconsciente. Se passar, fica atordoada por 1d4 rodadas e enjoada pelo resto da cena. ND entre 5 e 9: se falhar no teste de resist√™ncia, fica atordoada por 1d4 rodadas e enjoada pelo resto da cena. Se passar, fica atordoada por 1 rodada e enjoada por 1d4 rodadas. ND 10 ou maior: se falhar no teste de resist√™ncia, fica atordoada por 1 rodada e enjoada por 1d4 rodadas. Se passar, fica desprevenida e enjoada por 1 rodada. Uma criatura s√≥ pode ser atordoada por esta magia uma vez por cena. Inconsciente Atordoado Enjoado"}}}},necromancia:{"assassino-fantasmagorico":{name:"Assassino Fantasmag√≥rico",type:"magia",img:"systems/tormenta20/icons/magias/assassino-fantasmagorico.webp",system:{circulo:"4",escola:"necromancia",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"longo",duracao:"cena, at√© ser descarregada",alvo:"1 criatura",resistencia:"Vontade Anula, Fortitude Parcial",custo:"10 PM",description:{value:"Usando os medos subconscientes do alvo, voc√™ cria uma imagem daquilo que ele mais teme. Apenas a pr√≥pria v√≠tima pode ver o Assassino Fantasmag√≥rico com nitidez; outras criaturas presentes (incluindo o conjurador) enxergam apenas um espectro sombrio. Quando voc√™ lan√ßa a magia, o espectro surge adjacente a voc√™ e a v√≠tima faz um teste de Vontade. Se ela passar, percebe que o espectro √© uma ilus√£o e a magia √© dissipada. Se falhar, acredita na exist√™ncia do espectro, que ent√£o flutua 18m por rodada em dire√ß√£o √† v√≠tima, sempre no fim do seu turno. Ele √© incorp√≥reo e imune a magias (exceto magias que dissipam outras). Se o espectro terminar seu turno adjacente √† v√≠tima, ela deve fazer um teste de Fortitude. Se passar, sofre 6d6 pontos de dano de trevas (este dano n√£o pode reduzir o alvo a menos de 0 PV e n√£o o deixa sangrando). Se falhar, sofre um colapso, ficando imediatamente com ‚Äì1 PV e sangrando. O espectro persegue o alvo implacavelmente. Ele desaparece se o alvo ficar inconsciente ou se afastar al√©m de alcance longo dele, ou se for dissipado."}}}},transmutacao:{"animar-objetos":{name:"Animar Objetos",type:"magia",img:"systems/tormenta20/icons/magias/animar-objetos.webp",system:{circulo:"4",escola:"transmutacao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"At√© 8 objetos Min√∫sculos ou Pequenos, 4 objetos M√©dios, 2 objetos Grandes ou 1 objeto Enorme",resistencia:"Nenhuma",custo:"10 PM",description:{value:"Voc√™ concede vida a objetos inanimados. Cada objeto se torna um parceiro sob seu controle. O tipo dele √© escolhido da lista de tamanho e ele n√£o conta em seu limite de parceiros. Com uma a√ß√£o de movimento, voc√™ pode comandar mentalmente qualquer objeto animado dentro do alcance para que auxilie voc√™ ou outra criatura. Outros usos criativos para os objetos ficam a cargo do mestre. Objetos animados s√£o construtos com valores de For√ßa, Destreza e PV de acordo com seu tamanho. Todos os outros atributos nulos, eles n√£o t√™m valor de Defesa ou testes de resist√™ncia e falham automaticamente em qualquer teste oposto. Diferente de parceiros comuns, um objeto pode ser alvo de um ataque direto. Esta magia n√£o afeta itens m√°gicos, nem objetos que estejam sendo carregados por outra criatura. Esta magia n√£o afeta itens m√°gicos, nem objetos que estejam sendo carregados por outra criatura. Estat√≠sticas de objetos animados Min√∫sculo: For -3, Des 4, 5 PV; Assassino ou Combatente Iniciante. Pequeno: For -2, Des 2, 10 PV; Combatente ou Guardi√£o Iniciante. M√©dio: For 0, Des 1, 20 PV; Combatente ou Guardi√£o Veterano. Grande: For 2, Des 0, 40 PV; Fort√£o, Guardi√£o ou Montaria (cavalo) Veterano. Enorme: For 4, Des -2, 60 PV; Fort√£o, Guardi√£o ou Montaria (cavalo) Mestre."}},aprimoramentos:[{custo:5,descricao:"muda a dura√ß√£o para permanente e adiciona componente material (prataria no valor de T$ 1.000). Voc√™ pode ter um m√°ximo de objetos animados igual √† metade do seu n√≠vel.",aumenta:!1},{custo:0,descricao:"Assassino Iniciante",aumenta:!1},{custo:0,descricao:"Combatente Iniciante",aumenta:!1},{custo:0,descricao:"Combatente Veterano",aumenta:!1},{custo:0,descricao:"Fort√£o Veterano",aumenta:!1},{custo:0,descricao:"Fort√£o Mestre",aumenta:!1}]},"controlar-a-gravidade":{name:"Controlar a Gravidade",type:"magia",img:"systems/tormenta20/icons/magias/controlar-gravidade.webp",system:{circulo:"4",escola:"transmutacao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"cubo de 12m de lado",resistencia:"Nenhuma",custo:"10 PM",description:{value:'Voc√™ controla os efeitos da gravidade dentro da √°rea. Ao lan√ßar a magia, escolha um dos efeitos abaixo. Enquanto a magia durar, voc√™ pode usar uma a√ß√£o padr√£o para mudar o efeito. Aumentar: a gravidade fica mais forte. No in√≠cio de seus turnos, cada criatura na √°rea deve fazer um teste de Atletismo. Se passar, fica fatigada. Se falhar, fica fatigada e ca√≠da. Inverter: inverte a gravidade da √°rea, fazendo com que criaturas e objetos "caiam" para cima, atingindo o topo (12m) em uma rodada. Se um obst√°culo (como um teto) impedir o movimento das criaturas, elas sofrem 1d6 pontos de dano de impacto para cada 1,5m de "queda". Elas podem ent√£o se levantar e caminhar no obst√°culo, de cabe√ßa para baixo. Se n√£o houver obst√°culo, as criaturas e objetos ficam flutuando no topo da √°rea afetada, sem poder sair do lugar. Criaturas voadoras podem se movimentar normalmente. Algu√©m adjacente a algo que possa agarrar tem direito a um teste de Reflexos para evitar a "queda". A criatura deve permanecer presa pela dura√ß√£o da magia; caso contr√°rio "cair√°". Reduzir: a gravidade fica mais leve. Criaturas ou objetos livres com at√© 100kg flutuam para cima e para baixo conforme sua vontade, com deslocamento de voo 6m. Criaturas na √°rea recebem +20 de b√¥nus em testes de Atletismo para escalar e saltar. Uma criatura levitando fica inst√°vel, sofrendo ‚Äì2 de penalidade em testes de ataque. Fatigado Ca√≠do'}}},desintegrar:{name:"Desintegrar",type:"magia",img:"systems/tormenta20/icons/magias/desintegrar.webp",system:{circulo:"4",escola:"transmutacao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"1 criatura ou objeto",resistencia:"Fortitude parcial",custo:"10 PM",description:{value:"Voc√™ dispara um raio fino e esverdeado de energia desintegradora que causa 10d12 pontos de dano de ess√™ncia. Este dano ignora qualquer resist√™ncia ou redu√ß√£o de dano, pois ataca diretamente a estrutura molecular do alvo. Se o alvo passar no teste de resist√™ncia de Fortitude, em vez disso sofre apenas 2d12 pontos de dano. Independentemente do resultado do teste de resist√™ncia, se os pontos de vida do alvo forem reduzidos a 0 ou menos por esta magia, ele ser√° completamente desintegrado, restando apenas uma pequena pilha de p√≥ fino. Criaturas desintegradas n√£o podem ser ressuscitadas por magias normais, apenas por Desejo ou interven√ß√£o divina direta."}},aprimoramentos:[{custo:4,descricao:"aumenta o dano total em +2d12 e o dano m√≠nimo em +1d12.",aumenta:!0}]},"forma-eterea":{name:"Forma Et√©rea",type:"magia",img:"systems/tormenta20/icons/magias/forma-eterea.webp",system:{circulo:"4",escola:"transmutacao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"pessoal",alvo:"Voc√™",resistencia:"Nenhuma",custo:"10 PM",description:{value:"Voc√™ e todo o equipamento que est√° com voc√™ s√£o transportados para o plano et√©reo, que existe paralelamente ao plano material (o mundo f√≠sico). Na pr√°tica, √© como ser transformado em um fantasma (mas voc√™ ainda √© considerado uma criatura viva). Uma criatura et√©rea √© invis√≠vel (pode alterar entre vis√≠vel e invis√≠vel como a√ß√£o livre), incorp√≥rea e capaz de se mover em qualquer dire√ß√£o, inclusive para cima e para baixo. Ela enxerga o plano material, mas tudo parece cinza e insubstancial, reduzindo o alcance da vis√£o e audi√ß√£o para 18m. Magias de abjura√ß√£o e ess√™ncia afetam criaturas et√©reas, mas outras magias, n√£o. Da mesma forma, uma criatura et√©rea n√£o pode atacar nem lan√ßar magias contra criaturas no plano material. Duas criaturas et√©reas podem se afetar normalmente. Uma criatura afetada pode se materializar como uma a√ß√£o de movimento, encerrando a magia. Uma criatura et√©rea que se materialize em um espa√ßo ocupado √© jogada para o espa√ßo n√£o ocupado mais pr√≥ximo e sofre 1d6 pontos de dano de impacto para cada 1,5m de deslocamento."}},aprimoramentos:[{custo:5,descricao:"muda o alcance para toque e o alvo para at√© 5 criaturas volunt√°rias que estejam de m√£os dadas. Depois que a magia √© lan√ßada, as criaturas podem soltar as m√£os. Requer 5¬∫ c√≠rculo.",aumenta:!1}]}}},"5-circulo":{abjuracao:{"alterar-destino":{name:"Alterar Destino",type:"magia",img:"systems/tormenta20/icons/magias/alterar-destino.webp",system:{circulo:"5",escola:"abjuracao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"reaction"},alcance:"pessoal",alvo:"Voc√™",resistencia:"Nenhuma",custo:"15 PM",description:{value:"Sua mente visualiza todas as possibilidades de um evento, permitindo a voc√™ escolher o melhor curso de a√ß√£o. Voc√™ pode rolar novamente um teste de resist√™ncia com um b√¥nus de +10 ou um inimigo deve rolar novamente um ataque contra voc√™ com uma penalidade de ‚Äì10"}}},aprisionamento:{name:"Aprisionamento",type:"magia",img:"systems/tormenta20/icons/magias/aprisionamento.webp",system:{circulo:"5",escola:"abjuracao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"curto",alvo:"1 criatura",resistencia:"Vontade anula",custo:"15 PM",description:{value:"Voc√™ cria uma pris√£o m√°gica para aprisionar uma criatura. Se falhar no testede resist√™ncia, o alvo sofre o efeito da magia; se passar, fica imune a esta magia por uma semana. Enquanto estiver aprisionada, a criatura n√£o precisa respirar e alimentar-se, e n√£o envelhece. Magias de adivinha√ß√£o n√£o conseguem localizar ou perceber o alvo. Ao lan√ßar a magia, voc√™ escolhe uma das seguintes formas de pris√£o. O componente material varia, mas todos custam T$ 1.000. Acorrentamento: o alvo √© preso por correntes firmemente enraizadas no ch√£o, que o mant√©m no lugar. O alvo fica paralisado e n√£o pode se mover ou ser movido por qualquer meio. Componente Material: uma fina corrente de mitral. Conten√ß√£o M√≠nima: o alvo diminui para 2 cm de altura e √© preso dentro de uma pedra preciosa ou objeto semelhante. Luz passa atrav√©s da pedra, permitindo que o alvo veja o lado de fora e seja visto, mas nada mais pode passar, nem por meio de teletransporte ou viagem planar. A pedra n√£o pode ser quebrada enquanto o alvo estiver dentro. Componente Material: uma pedra preciosa, como um diamante ou rubi. Pris√£o Dimensional: o alvo √© transportado para um semiplano protegido contra teletransporte e viagens planares. Pode ser um labirinto, uma gaiola, uma torre ou qualquer estrutura ou √°rea confinada e pequena a sua escolha. Componente Material: uma representa√ß√£o em miniatura da pris√£o, feita de jade. Sepultamento: o alvo √© sepultado nas profundezas da terra, em uma esfera m√°gica. Nada pode destruir ou atravessar a esfera, nem mesmo teletransporte ou viagens planares. Componente Material: um pequeno orbe de adamante. Sono Eterno: o alvo adormece e n√£o pode ser acordado. Componente Material: fruta preparada com ervas son√≠feras raras. Quando a magia √© lan√ßada, voc√™ deve especificar uma condi√ß√£o que far√° com que ela termine e solte o alvo. A condi√ß√£o pode ser t√£o espec√≠fica ou elaborada quanto voc√™ quiser, mas deve ser poss√≠vel de acontecer. As condi√ß√µes podem se basear no nome, identidade ou divindade padroeira de uma criatura, ou em a√ß√µes ou qualidades observ√°veis, mas nunca em estat√≠sticas intang√≠veis, como n√≠vel, classe ou pontos de vida. O mestre tem a palavra final sobre se uma condi√ß√£o √© v√°lida ou n√£o. Paralisado"}}}},convocacao:{"chuva-de-meteoros":{name:"Chuva de Meteoros",type:"magia",img:"systems/tormenta20/icons/magias/chuva-de-meteoros.webp",system:{circulo:"5",escola:"convocacao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"longo",alvo:"quadrado com 18m de lado",resistencia:"Reflexos parcial",custo:"15 PM",description:{value:"Esta √© uma das magias de destrui√ß√£o em massa mais devastadoras conhecidas. Voc√™ rasga um portal no espa√ßo e convoca uma chuva literal de meteoros flamejantes que descem dos c√©us como punhos dos deuses. O c√©u escurece momentaneamente antes de dezenas de rochas incandescentes, cada uma do tamanho de uma carro√ßa, despencarem sobre a √°rea alvo em uma exibi√ß√£o apocal√≠ptica de poder. EFEITOS DEVASTADORES: Todas as criaturas na √°rea de 18m x 18m sofrem 15d6 pontos de dano de impacto (pelo impacto brutal das rochas) e 15d6 pontos de dano de fogo (pelo calor extremo), al√©m de ficarem Ca√≠das e Agarradas pelos escombros pesados. Criaturas que passem no teste de Reflexos sofrem apenas metade do dano total e conseguem evitar ficar ca√≠das e agarradas. EFEITOS DURADOUROS: A √°rea fica permanentemente alterada - coberta de crateras fumegantes, escombros de meteoros e uma densa nuvem de poeira que concede camuflagem leve a todas as criaturas. Todo o terreno torna-se dif√≠cil devido aos destro√ßos. Criaturas agarradas pelos escombros podem escapar gastando uma a√ß√£o padr√£o e passando em um teste de Atletismo (CD igual √† da magia). LIMITA√á√ïES: Esta magia s√≥ pode ser lan√ßada a c√©u aberto - tetos, cavernas ou estruturas cobertas impedem a convoca√ß√£o dos meteoros. A magia √© t√£o poderosa que pode ser vista e ouvida a quil√¥metros de dist√¢ncia, atraindo aten√ß√£o indesejada. Estruturas na √°rea s√£o automaticamente destru√≠das, e o terreno pode ficar permanentemente alterado."}},aprimoramentos:[{custo:2,descricao:"aumenta o n√∫mero de meteoros que atingem a √°rea, o que aumenta o dano em +2d6 de impacto e +2d6 de fogo.",aumenta:!0}]},semiplano:{name:"Semiplano",type:"magia",img:"systems/tormenta20/icons/magias/semiplano.webp",system:{circulo:"5",escola:"convocacao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"curto",duracao:"1 dia",resistencia:"Nenhuma",custo:"15 PM",description:{value:"Voc√™ cria uma dimens√£o particular. Voc√™ pode entrar no semiplano gastando uma a√ß√£o padr√£o e 10 PM, desaparecendo do plano material como se tivesse se teletransportado. Voc√™ pode levar criaturas volunt√°rias que esteja tocando, ao custo de 1 PM por criatura extra. Voc√™ tamb√©m pode levar objetos que esteja tocando, ao custo de 1 PM por objeto M√©dio ou menor, 2 PM por objeto Grande, 5 PM por Enorme e 10 PM por Colossal. Uma vez no semiplano, pode gastar uma a√ß√£o completa para voltar ao plano material, no mesmo local onde estava. Caso conhe√ßa a magia Viagem Planar, pode lan√ß√°-la para voltar ao plano material em outro local. Voc√™ escolhe a forma e a apar√™ncia do semiplano ‚Äî uma caverna, um asteroide que singra o √©ter, um palacete de cristal etc. Ele cont√©m ar, luz e calor, mas al√©m disso √© vazio. Entretanto, voc√™ pode levar itens (mob√≠lia, ferramentas etc.) a cada viagem."}},aprimoramentos:[{custo:2,descricao:"adiciona alvo (1 criatura). Voc√™ cria uma semiplano labir√≠ntico e expulsa o alvo para ele. A cada rodada, a v√≠tima tem direito a um teste de Investiga√ß√£o ou Sobreviv√™ncia (CD da magia), com b√¥nus cumulativo de +1 para cada teste j√° realizado, para escapar do labirinto. Quando o alvo escapa, a magia termina e o alvo reaparece no plano material no mesmo local onde estava quando a magia foi lan√ßada. Magias como Salto Dimensional e\nTeletransporte n√£o ajudam a escapar do\nlabirinto, mas Viagem Planar, sim.",aumenta:!1},{custo:5,descricao:"muda a dura√ß√£o para permanente e adiciona componente material (maquete do semiplano feito de materiais preciosos no valor de T$ 5.000). Voc√™ pode lan√ßar a magia diversas vezes para aumentar as dimens√µes do semiplano em +30m de lado a cada vez.",aumenta:!1}]}},encantamento:{legiao:{name:"Legi√£o",type:"magia",img:"systems/tormenta20/icons/magias/legiao.webp",system:{circulo:"5",escola:"encantamento",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"at√© 10 criaturas na √°rea",resistencia:"Vontade parcial",custo:"15 PM",description:{value:"Voc√™ domina a mente dos alvos. Os alvos obedecem cegamente a seus comandos, exceto ordens claramente suicidas. Um alvo tem direito a um teste no final de cada um de seus turnos para se livrar do efeito. Alvos que passarem no teste ficam Abalado por 1 rodada enquanto recuperam a consci√™ncia."}},aprimoramentos:[{custo:1,descricao:"aumenta o n√∫mero de alvos em +1.",aumenta:!0}]},possessao:{name:"Possess√£o",type:"magia",img:"systems/tormenta20/icons/magias/possessao.webp",system:{circulo:"5",escola:"encantamento",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"longo",duracao:"1 dia",alvo:"1 criatura",resistencia:"Vontade anual",custo:"15 PM",description:{value:"Voc√™ projeta sua consci√™ncia no corpo do alvo. Enquanto possuir uma criatura, voc√™ assume o controle total do corpo dela. O seu pr√≥prio corpo fica inconsciente e a consci√™ncia do alvo fica inerte. Em termos de jogo, voc√™ continua usando a sua ficha, mas com os atributos f√≠sicos e deslocamento da criatura. Se o alvo passar no teste de resist√™ncia, sabe que voc√™ tentou possu√≠-lo e fica imune a esta magia por um dia. Caso o corpo da criatura morra enquanto voc√™ a possui, a criatura morre e voc√™ deve fazer um teste de Vontade contra a CD da sua pr√≥pria magia. Se passar, sua consci√™ncia retorna para o seu corpo (contanto que esteja dentro do alcance). Do contr√°rio, voc√™ tamb√©m morre. Retornar para o seu corpo voluntariamente √© uma a√ß√£o livre."}},aprimoramentos:[{custo:5,descricao:"voc√™ ganha acesso √†s habilidades de ra√ßa e classe da criatura.",aumenta:!1},{custo:5,descricao:'enquanto a magia durar e voc√™ estiver dentro do alcance do seu corpo original, pode "saltar" de uma criatura possu√≠da para outra. O novo alvo tem direito a um teste de Vontade. Se falhar, voc√™ assume o controle do corpo dele e o alvo anterior recobra a consci√™ncia.',aumenta:!1},{custo:5,descricao:"muda a dura√ß√£o para permanente, mas destr√≥i seu corpo original no processo. Uma criatura possu√≠da pode fazer um teste de Vontade no come√ßo do dia para retomar seu corpo. Se passar, recobra a consci√™ncia (e a sua pr√≥pria consci√™ncia fica inerte). O teste se repete no in√≠cio de cada dia. Se o corpo de uma criatura possu√≠da morrer e houver outra criatura em alcance curto, voc√™ pode tentar possu√≠-la como uma rea√ß√£o. Enquanto houver novos corpos para possuir, voc√™ √© imortal!",aumenta:!1}]}},evocacao:{"barragem-elemental":{name:"Barragem Elemental",type:"magia",img:"systems/tormenta20/icons/magias/barragem-elemental.webp",system:{circulo:"5",escola:"evocacao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"longo",resistencia:"Reflexos parcial",custo:"15 PM",description:{value:"Criada por um arquimago, esta magia produz quatro esferas elementais (√°cido, eletricidade, fogo e frio) que voam at√© um ponto a sua escolha. Quando atingem o ponto escolhido, explodem causando 6d6 pontos de dano do seu respectivo tipo numa √°rea com 12m de raio. Um teste de Reflexos reduz o dano √† metade. Voc√™ pode mirar cada esfera em uma criatura ou ponto diferente. Uma criatura ao alcance da explos√£o de mais de uma esfera deve fazer um teste de resist√™ncia para cada uma. Al√©m disso, as esferas causam os seguintes efeitos em criaturas que falharem em seus respectivos testes de resist√™ncia: ‚Ä¢ √°cido: Vulner√°vel at√© o fim da cena. ‚Ä¢ El√©trica: Atordoado por uma rodada. (apenas uma vez por cena). ‚Ä¢ Fogo: Em Chamas. ‚Ä¢ Frio: Lentoat√© o fim da cena."}},aprimoramentos:[{custo:5,descricao:"aumenta o dano de cada esfera em +2d6.",aumenta:!0},{custo:5,descricao:"muda o tipo de dano de todas as esferas para ess√™ncia (mas elas ainda causam os outros efeitos como se seu tipo de dano n√£o mudasse).",aumenta:!1}]},"deflagracao-de-mana":{name:"Deflagra√ß√£o de Mana",type:"magia",img:"systems/tormenta20/icons/magias/deflagracao-de-mana.webp",system:{circulo:"5",escola:"evocacao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"pessoal",alvo:"esfera de 15m de raio",resistencia:"Fortitude parcial",custo:"15 PM",description:{value:"Ap√≥s concentrar seu mana, voc√™ emana energia, como uma estrela em plena terra. Todas as criaturas na √°rea sofrem 150 pontos de dano de ess√™ncia e todos os itens m√°gicos (exceto artefatos) tornam-se mundanos. Voc√™ n√£o √© afetado pela magia. Alvos que passem no teste de Fortitude sofrem metade do dano e seus itens m√°gicos voltam a funcionar ap√≥s um dia."}},aprimoramentos:[{custo:1,descricao:"aumenta o dano em 10.",aumenta:!0},{custo:5,descricao:"afeta apenas criaturas a sua escolha.",aumenta:!1}]},"mata-dragao":{name:"Mata-Drag√£o",type:"magia",img:"systems/tormenta20/icons/magias/mata-dragao.webp",system:{circulo:"5",escola:"evocacao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"2 Rodadas",execucao:"especial"},alcance:"pessoal",alvo:"cone de 30m",resistencia:"Reflexos reduz √† metade",custo:"15 PM",description:{value:"Esta √© uma das mais poderosas magias de destrui√ß√£o existentes. Ap√≥s entoar longos c√¢nticos, o conjurador dispara uma carga de energia que varre uma enorme √°rea √† sua frente, causando 20d12 pontos de dano de ess√™ncia em todas as criaturas, constru√ß√µes e objetos livres atingidos. Sempre que rola um resultado 12 em um dado de dano, a magia causa +1d12 pontos de dano. Apesar de seu poder destrutivo, esta magia √© lenta, tornando seu uso dif√≠cil em combate."}},aprimoramentos:[{custo:1,descricao:"aumenta o dano em 1d12.",aumenta:!0}]}},ilusao:{requiem:{name:"R√©quiem",type:"magia",img:"systems/tormenta20/icons/magias/requiem.webp",system:{circulo:"5",escola:"ilusao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"curto",alvo:"criaturas escolhidas",resistencia:"Vontade anula",custo:"15 PM",description:{value:"Esta magia cria uma ilus√£o particular para cada uma das criaturas que atingir. Enquanto a magia durar, no in√≠cio de cada um de seus turnos, cada criatura afetada deve fazer um teste de Vontade; se falhar, acha que n√£o tomou as a√ß√µes que realmente fez no turno anterior e √© obrigada a repetir as mesmas a√ß√µes neste turno, com uma penalidade cumulativa de ‚Äì5 em todos os testes para cada vez que se repetir (a penalidade n√£o se aplica ao teste de Vontade contra esta magia). Por exemplo, se a criatura se aproximou de um alvo e o atacou, precisa se aproximar desse mesmo alvo e atacar novamente. A a√ß√£o repetida consome PM e recursos normalmente e, caso exija um teste de resist√™ncia, qualquer alvo faz esse teste com um b√¥nus igual ao da penalidade desta magia."}}},"sombra-assassina":{name:"Sombra Assassina",type:"magia",img:"systems/tormenta20/icons/magias/sombra-assassina.webp",system:{circulo:"5",escola:"ilusao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 criatura",resistencia:"Vontade parcial",custo:"15 PM",description:{value:"Esta magia cria uma duplicata ilus√≥ria do alvo na forma de uma silhueta, ligada a ele como se fosse uma manifesta√ß√£o s√≥lida de sua pr√≥pria sombra. A duplicata de sombras segue automaticamente o alvo. Sempre que o alvo faz uma a√ß√£o hostil ‚Äî fazer um ataque, usar uma habilidade, lan√ßar uma magia ‚Äî a sombra imediatamente realiza a mesma a√ß√£o contra o alvo, usando as mesmas estat√≠sticas e rolagens. A sombra pode ser atacada, tem as mesmas estat√≠sticas do alvo e √© destru√≠da quando chega a 0 PV. Se o alvo passar no teste de resist√™ncia, a sombra desaparece no final do turno do alvo, depois de copiar sua a√ß√£o dessa rodada."}},aprimoramentos:[{custo:10,descricao:"muda o alvo para criaturas escolhidas na √°rea.",aumenta:!1}]}},transmutacao:{"controlar-o-tempo":{name:"Controlar o Tempo",type:"magia",img:"systems/tormenta20/icons/magias/controlar-tempo.webp",system:{circulo:"5",escola:"transmutacao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",duracao:"veja texto",alvo:"veja texto",resistencia:"Nenhuma",custo:"15 PM",description:{value:'"Aquele que controla o tempo controla o mundo." Esta magia lend√°ria manipula o fluxo temporal ao seu redor, permitindo feitos que desafiam as leis da realidade. Escolha um dos tr√™s efeitos devastadores: CONGELAR O TEMPO: Voc√™ cria uma bolha temporal onde o tempo flui diferentemente. Para todas as outras criaturas, a bolha surge e desaparece instantaneamente, mas para voc√™ ela dura 3 rodadas completas. Durante esse per√≠odo, voc√™ pode agir livremente enquanto o mundo permanece congelado - proj√©teis param no ar, chamas ficam im√≥veis, criaturas ficam como est√°tuas. Voc√™ n√£o √© afetado por efeitos cont√≠nuos (fogo, veneno, sangramento) durante essas rodadas. LIMITA√á√ÉO: Voc√™ e todos os efeitos que gerar ficam confinados √† √°rea que ocupava ao lan√ßar a magia. Efeitos de √°rea com dura√ß√£o maior que a bolha voltam a funcionar normalmente quando ela termina. SALTAR NO TEMPO: Voc√™ e at√© 5 criaturas volunt√°rias desaparecem em um brilho dourado e s√£o transportadas de 1 a 24 horas para o futuro (voc√™ escolhe). Voc√™s ressurgem no mesmo local, com a mesma velocidade e orienta√ß√£o - do ponto de vista de voc√™s, nenhum tempo passou. Se objetos s√≥lidos agora ocupam o espa√ßo de alguma criatura, ela ressurge na √°rea vazia mais pr√≥xima. Esta √© uma forma de viagem temporal unidirecional. VOLTAR NO TEMPO: Voc√™ revive os √∫ltimos segundos, desfazendo completamente a rodada anterior. Todas as a√ß√µes s√£o anuladas (incluindo perda de PV e PM), tudo retorna √†s posi√ß√µes do in√≠cio do seu turno anterior, e apenas voc√™ mant√©m a mem√≥ria do que aconteceu. Todos os outros personagens devem repetir exatamente as mesmas a√ß√µes - a menos que voc√™ interfira ativamente (alertando aliados, mudando sua pr√≥pria a√ß√£o, etc.). Esta √© a forma mais perigosa de manipula√ß√£o temporal.'}}},desejo:{name:"Desejo",type:"magia",img:"systems/tormenta20/icons/magias/desejo.webp",system:{circulo:"5",escola:"transmutacao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"especial",duracao:"veja texto",alvo:"veja texto",resistencia:"veja texto",custo:"15 PM",description:{value:"Esta √© a mais poderosa e temida das magias arcanas, capaz de alterar a pr√≥pria realidade atrav√©s da for√ßa de vontade pura. Ao pronunciar seu desejo, voc√™ canaliza energias primordiais para remodelar o mundo. EFEITOS SEGUROS (sem custo adicional): ‚Ä¢ Dissipar instantaneamente os efeitos de qualquer magia de 4¬∫ c√≠rculo ou menor em qualquer criatura ou √°rea. ‚Ä¢ Transportar at√© 10 criaturas volunt√°rias em alcance longo para qualquer local conhecido, em qualquer plano de exist√™ncia. ‚Ä¢ Desfazer um acontecimento recente, permitindo que um teste realizado por qualquer criatura em alcance longo na √∫ltima rodada seja refeito. Por exemplo, se um aliado morreu devido a um ataque cr√≠tico, voc√™ pode for√ßar o inimigo a rolar o ataque novamente. EFEITOS PODEROSOS (custam 2 PM adicionais): ‚Ä¢ Criar permanentemente um item mundano n√£o-m√°gico de at√© T$ 30.000. ‚Ä¢ Duplicar perfeitamente os efeitos de qualquer magia de at√© 4¬∫ c√≠rculo (componentes materiais ainda s√£o necess√°rios). ‚Ä¢ Aumentar permanentemente um atributo de uma criatura em +1 (cada atributo pode ser aumentado apenas uma vez por Desejo). ‚Ä¢ Curar completamente todas as feridas, doen√ßas, maldi√ß√µes e condi√ß√µes negativas de uma criatura. EFEITOS EXTRAORDIN√ÅRIOS: Desejo pode realizar feitos ainda mais impressionantes, mas com riscos proporcionais. Desejar riqueza pode transport√°-lo para o tesouro de um drag√£o furioso; desejar imortalidade pode transform√°-lo em um lich; desejar poder supremo pode atrair a aten√ß√£o de deuses hostis. O mestre tem total autoridade sobre esses efeitos e suas consequ√™ncias imprevistas. Lembre-se: quanto maior o desejo, maior o pre√ßo a pagar."}}}}}},divina:{"1-circulo":{abjuracao:{"escudo-da-fe":{name:"Escudo da F√©",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_powerwordshield.jpg",system:{circulo:"1",escola:"abjuracao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"reaction"},alcance:"curto",duracao:"1 turn",alvo:"1 criatura",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Um escudo m√≠stico se manifesta momentaneamente para bloquear um golpe. O alvo recebe +2 na Defesa."}},aprimoramentos:[{custo:2,descricao:"aumenta o b√¥nus na Defesa em +1.",aumenta:!0},{custo:2,descricao:"muda a execu√ß√£o para a√ß√£o padr√£o, o alcance para toque e a dura√ß√£o para cena. A magia cria uma conex√£o m√≠stica entre voc√™ e o alvo. Al√©m do efeito normal, o alvo sofre metade do dano por ataques e efeitos; a outra metade do dano √© transferida a voc√™. Se o alvo sair de alcance curto de voc√™, a magia √© dissipada. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:3,descricao:"muda a dura√ß√£o para 1 dia. Requer 2¬∫ c√≠rculo.",aumenta:!1}]},"protecao-divina":{name:"Prote√ß√£o Divina",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_divineprotection.jpg",system:{circulo:"1",escola:"abjuracao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Esta magia cria uma barreira m√≠stica invis√≠vel que fornece ao alvo +2 em testes de resist√™ncia."}},aprimoramentos:[{custo:2,descricao:"aumenta o b√¥nus concedido em +1.",aumenta:!0},{custo:2,descricao:"muda a execu√ß√£o para rea√ß√£o, o alcance para curto e a dura√ß√£o para 1 rodada. Em vez do normal, o alvo recebe +5 no pr√≥ximo teste de resist√™ncia que fizer.",aumenta:!1},{custo:2,descricao:"muda o alvo para √°rea de esfera com 3m de raio. Todos os aliados dentro da esfera recebem o b√¥nus da magia. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:5,descricao:"tamb√©m torna o alvo imune a efeitos mentais e de medo. Requer 3¬∫ c√≠rculo.",aumenta:!1}]},santuario:{name:"Santu√°rio",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_sanctuary.jpg",system:{circulo:"1",escola:"abjuracao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Vontade anula",custo:"1 PM",description:{value:"Qualquer criatura que tente fazer uma a√ß√£o hostil contra o alvo deve fazer um teste de Vontade. Se falhar, n√£o consegue, perde a a√ß√£o e n√£o pode tentar novamente at√© o fim da cena. Santu√°rio n√£o protege o alvo de efeitos de √°rea. Al√©m disso, o pr√≥prio alvo tamb√©m n√£o pode fazer a√ß√µes hostis (incluindo for√ßar outras criaturas a atac√°-lo), ou a magia √© dissipada ‚Äî mas pode usar habilidades e magias de cura e suporte como Curar Ferimentos e B√™n√ß√£o."}},aprimoramentos:[{custo:9,descricao:"tamb√©m protege o alvo contra efeitos de √°rea. Uma criatura que tente atacar uma √°rea que inclua o alvo deve fazer o teste de Vontade; se falhar, n√£o consegue e perde a a√ß√£o. Ela s√≥ pode tentar novamente se o alvo sair da √°rea.",aumenta:!1}]},"suporte-ambiental":{name:"Suporte Ambiental",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_protectionformnature.jpg",system:{circulo:"1",escola:"abjuracao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",duracao:"1 dia",alvo:"1 criatura",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Esta magia garante a sobreviv√™ncia em ambientes hostis. O alvo fica imune aos efeitos de calor e frio extremos, pode respirar na √°gua se respirar ar (ou vice-versa) e n√£o sufoca em fuma√ßa densa."}},aprimoramentos:[{custo:5,descricao:"muda o alcance para curto e o alvo para criaturas escolhidas.",aumenta:!1}]}},adivinhacao:{"detectar-ameacas":{name:"Detectar Amea√ßas",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_detectevil.jpg",system:{circulo:"1",escola:"adv",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",duracao:"Cena, at√© ser descarregada",alvo:"Esfera de 18m de raio",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Voc√™ recebe uma intui√ß√£o agu√ßada sobre perigos ao seu redor. Quando uma criatura hostil ou armadilha entra na √°rea do efeito, voc√™ faz um teste de Percep√ß√£o (CD determinada pelo mestre de acordo com a situa√ß√£o). Se passar, sabe a origem (criatura ou armadilha), dire√ß√£o e dist√¢ncia do perigo. Se falhar, sabe apenas que o perigo existe."}},aprimoramentos:[{custo:2,descricao:"al√©m do normal, voc√™ n√£o fica surpreso e desprevenido contra perigos detectados com sucesso e recebe +5 em testes de resist√™ncia contra armadilhas. Requer 2¬∫ c√≠rculo.",aumenta:!1}]},orientacao:{name:"Orienta√ß√£o",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_guidance.jpg",system:{circulo:"1",escola:"adv",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",duracao:"1 rodada",alvo:"1 criatura",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Em seu pr√≥ximo teste de per√≠cia, o alvo pode rolar dois dados e ficar com o melhor resultado"}},aprimoramentos:[{custo:2,descricao:"muda a dura√ß√£o para cena. Em vez do normal, escolha um atributo. Sempre que o alvo fizer um teste de per√≠cia baseado no atributo escolhido, pode rolar dois dados e ficar com o melhor resultado. N√£o se aplica a testes de ataque ou resist√™ncia.\nRequer 2¬∫ c√≠rculo.",aumenta:!1},{custo:5,descricao:"muda a dura√ß√£o para cena. Escolha entre atributos f√≠sicos (For√ßa, Destreza e Constitui√ß√£o) ou mentais (Intelig√™ncia, Sabedoria e Carisma). Sempre que o alvo fizer um teste de per√≠cia, pode rolar dois dados e ficar com o melhor resultado. N√£o se aplica a testes de ataque ou resist√™ncia. Requer 3¬∫ c√≠rculo.",aumenta:!1},{custo:5,descricao:"muda o alvo para criaturas escolhidas. Requer 3¬∫ c√≠rculo.",aumenta:!1}]}},convocacao:{"arma-espiritual":{name:"Arma Espiritual",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_spiritualguidence.jpg",system:{circulo:"1",escola:"convocacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"Voc√™",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Voc√™ invoca a arma preferida de sua divindade (se tiver uma), que surge flutuando a seu lado. Uma vez por rodada, quando voc√™ sofre um ataque corpo a corpo, pode usar uma rea√ß√£o para que a arma cause automaticamente 2d6pontos de dano do tipo da arma ‚Äî por exemplo, uma espada longa causa dano de corte ‚Äî no oponente que fez o ataque. Esta magia se dissipa se voc√™ morrer."}},aprimoramentos:[{custo:2,descricao:"aumenta o b√¥nus na Defesa em +1.",aumenta:!0},{custo:2,descricao:"muda a dura√ß√£o para sustentada. Al√©m do normal, uma vez por rodada, voc√™ pode gastar uma a√ß√£o livre para fazer a arma acertar automaticamente um alvo adjacente. Se a arma atacar, n√£o poder√° contra-atacar at√© seu pr√≥ximo turno. Requer 2o c√≠rculo.",aumenta:!1},{custo:2,descricao:"muda o tipo do dano para ess√™ncia. Requer 2o c√≠rculo.",aumenta:!1},{custo:5,descricao:"invoca duas armas, permitindo que voc√™ contra-ataque (ou ataque, se usar o aprimoramento acima) duas vezes por rodada. Requer 3o c√≠rculo.",aumenta:!1},{custo:2,descricao:"aumenta o dano causado pela arma em +1d6, limitado pelo c√≠rculo m√°ximo de magia que voc√™ pode lan√ßar.",aumenta:!0}]},"caminhos-da-natureza":{name:"Caminhos da Natureza",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_naturepath.jpg",system:{circulo:"1",escola:"convocacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",duracao:"1 dia",alvo:"criaturas escolhidas",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Voc√™ invoca esp√≠ritos da natureza, pedindo que eles abram seu caminho. As criaturas afetadas recebem deslocamento +3m e ignoram penalidades por terreno dif√≠cil em terrenos naturais."}},aprimoramentos:[{custo:2,descricao:"aumenta o b√¥nus de deslocamento em +3m.",aumenta:!0}]},"criar-elementos":{name:"Criar Elementos",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_elementalprecision_01.jpg",system:{circulo:"1",escola:"convocacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Voc√™ cria uma pequena por√ß√£o de um elemento, a sua escolha. Os elementos criados s√£o reais, n√£o m√°gicos. Elementos f√≠sicos devem surgir em uma superf√≠cie. Em vez de um cubo, pode-se criar objetos simples (sem partes m√≥veis) feitos de gelo, terra ou pedra.√Ågua: enche um recipiente de tamanho Min√∫sculo (como um odre) com √°gua pot√°vel ou cria um cubo de gelo de tamanho Min√∫sculo.Ar: cria um vento fraco em um quadrado de 1,5m. Isso purifica a √°rea de qualquer g√°s ou fuma√ßa, ou remove n√©voa por uma rodada.Fogo: cria uma chama que ilumina como uma tocha. Voc√™ pode segur√°-la na palma de sua m√£o sem se queimar, ou faz√™-la surgir em um quadrado de 1,5m. Se uma criatura ou objeto estiver no quadrado, sofre 1d6 pontos de dano de fogo; se falhar num teste de Reflexos, pega fogo.Terra: cria um cubo de tamanho Min√∫sculo feito de terra, argila ou pedra."}},aprimoramentos:[{custo:2,descricao:"se escolheu fogo, aumenta o dano inicial de cada chama em +1d6.",aumenta:!0}]}},encantamento:{"acalmar-animal":{name:"Acalmar Animal",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_calmanimal.jpg",system:{circulo:"1",escola:"encantamento",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 animal",resistencia:"Vontade anula",custo:"1 PM",description:{value:"O animal fica prestativo em rela√ß√£o a voc√™. Ele n√£o fica sob seu controle, mas percebe suas palavras e a√ß√µes da maneira mais favor√°vel poss√≠vel. Voc√™ recebe +10 nos testes de Adestramento e Diplomacia que fizer contra o animal. Um alvo hostil ou que esteja envolvido em um combate recebe +5 em seu teste de resist√™ncia. Se voc√™ ou seus aliados tomarem qualquer a√ß√£o hostil contra o alvo, a magia √© dissipada e ele retorna √† atitude que tinha antes (ou piorada, de acordo com o mestre). Se tratar bem o alvo, a atitude pode permanecer mesmo ap√≥s o t√©rmino da magia."}},aprimoramentos:[{custo:2,descricao:"aumenta o n√∫mero de alvos em +1.",aumenta:!0},{custo:5,descricao:"muda o alvo para 1 monstro ou esp√≠rito. Requer 3o c√≠rculo.",aumenta:!1}]},bencao:{name:"B√™n√ß√£o",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_blessing.jpg",system:{circulo:"1",escola:"encantamento",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"Aliados",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Aben√ßoa os alvos, que recebem +1 em testes de ataque e rolagens de dano. B√™n√ß√£o anula Perdi√ß√£o."}},aprimoramentos:[{custo:2,descricao:"aumenta os b√¥nus em +1, limitado pelo c√≠rculo m√°ximo de magia que voc√™ pode lan√ßar.",aumenta:!0}]},comando:{name:"Comando",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_command.jpg",system:{circulo:"1",escola:"encantamento",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",duracao:"1 rodada",alvo:"1 human√≥ide",resistencia:"Vontade anula",custo:"1 PM",description:{value:"Esta magia permite que voc√™ d√™ uma ordem irresist√≠vel a um humanoide dentro do alcance. O alvo deve ser capaz de ouvir a ordem, mas n√£o precisa entend√™-la. Se falhar no teste de resist√™ncia de Vontade, ele obedecer√° ao comando no seu pr√≥ximo turno da melhor maneira poss√≠vel. Voc√™ pode escolher entre os seguintes comandos: Fuja: O alvo gasta seu turno se afastando de voc√™, utilizando todas as suas a√ß√µes. Largue: O alvo solta quaisquer itens que esteja segurando e n√£o pode peg√°-los novamente at√© o in√≠cio de seu pr√≥ximo turno. Como esta √© uma a√ß√£o livre, ele ainda pode executar outras a√ß√µes, exceto pegar o que largou. Pare: O alvo fica pasmo (apenas uma vez por cena). Sente: Com uma a√ß√£o livre, o alvo senta no ch√£o (se estava pendurado ou voando, desce at√© o ch√£o). Ele pode fazer outras a√ß√µes, mas n√£o se levantar at√© o in√≠cio de seu pr√≥ximo turno. Venha: O alvo gasta seu turno se aproximando de voc√™, utilizando todas as suas a√ß√µes."}},aprimoramentos:[{custo:2,descricao:"aumenta a quantidade de alvos em +1",aumenta:!0}]},tranquilidade:{name:"Tranquilidade",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_tranquility.jpg",system:{circulo:"1",escola:"encantamento",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 animal ou human√≥ide",resistencia:"Vontade parcial",custo:"1 PM",description:{value:"Voc√™ emana ondas de serenidade. Se falhar na resist√™ncia, o alvo tem sua atitude mudada para indiferente (veja a p√°gina 259) e n√£o pode atacar ou realizar qualquer a√ß√£o agressiva. Se passar, sofre ‚Äì2 em testes de ataque. Qualquer a√ß√£o hostil contra o alvo ou seus aliados dissipa a magia e faz ele retornar √† atitude que tinha antes (ou pior, de acordo com o mestre)."}},aprimoramentos:[{custo:5,descricao:"muda o alcance para m√©dio e o alvo para criaturas escolhidas. Requer 3¬∫ c√≠rculo.",aumenta:!1}]}},evocacao:{consagrar:{name:"Consagrar",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_consecration.jpg",system:{circulo:"1",escola:"evocacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"longo",duracao:"1 dia",alvo:"esfera com 9m de raio",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Voc√™ enche a √°rea com energia positiva. Pontos de vida curados por efeitos de luz s√£o maximizados dentro da √°rea. Isso tamb√©m afeta dano causado em mortos-vivos por esses efeitos. Por exemplo, Curar Ferimentos cura automaticamente 18 PV. Esta magia n√£o pode ser lan√ßada em uma √°rea contendo um s√≠mbolo vis√≠vel dedicado a uma divindade que n√£o a sua. Consagrar anula Profanar."}},aprimoramentos:[{custo:2,descricao:"aumenta as penalidades para mortos-vivos em -1.",aumenta:!0},{custo:9,descricao:"muda a execu√ß√£o para 1 hora, a dura√ß√£o para permanente e adiciona componente material (incenso e √≥leos no valor de T$ 1.000). Requer 4¬∫ c√≠rculo.",aumenta:!1}]},"curar-ferimentos":{name:"Curar Ferimentos",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_heal.jpg",system:{circulo:"1",escola:"evocacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Voc√™ canaliza energia positiva que recupera 2d8+2 pontos de vida na criatura tocada."}},aprimoramentos:[{custo:2,descricao:"tamb√©m remove uma condi√ß√£o de fadiga do alvo.",aumenta:!1},{custo:2,descricao:"muda o alcance para curto.",aumenta:!1},{custo:5,descricao:"muda o alcance para curto e o alvo para criaturas escolhidas.",aumenta:!1}]},despedacar:{name:"Despeda√ßar",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_smite.jpg",system:{circulo:"1",escola:"evocacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 criatura ou objeto mundano pequeno",resistencia:"Fortitude parcial ou Reflexos anula",custo:"1 PM",description:{value:"Esta magia emite um som alto e agudo. O alvo sofre 1d8+2 pontos de dano de impacto (ou o dobro disso e ignora RD se for um construto ou objeto mundano) e fica Atordoado por uma rodada (apenas uma vez por cena). Um teste de Fortitude reduz o dano √† metade e evita o atordoamento."}},aprimoramentos:[{custo:2,descricao:"aumenta o dano em +1d8+2.",aumenta:!0},{custo:2,descricao:"muda o alvo para objeto mundano M√©dio. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:5,descricao:"muda o alvo para objeto mundano Grande. Requer 3¬∫ c√≠rculo.",aumenta:!1},{custo:9,descricao:"muda o alvo para objeto mundano Enorme. Requer 4¬∫ c√≠rculo.",aumenta:!1},{custo:14,descricao:"muda o alvo para objeto mundano Colossal. Requer 5¬∫ c√≠rculo.",aumenta:!1},{custo:5,descricao:"muda o alcance para pessoal e a √°rea para esfera de 6m de raio. Todas as criaturas e objetos na √°rea s√£o afetados.",aumenta:!1}]}},necromancia:{"infligir-ferimentos":{name:"Infligir Ferimentos",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_inflictpain.jpg",system:{circulo:"1",escola:"necromancia",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Fortitude reduz √† metade",custo:"1 PM",description:{value:"Voc√™ canaliza energia negativa contra um alvo, causando 2d8+2 pontos de dano de trevas (ou curando 2d8+2 PV, se for um morto-vivo). Infligir Ferimentos anula Curar Ferimentos."}},aprimoramentos:[{custo:2,descricao:"aumenta o dano em 1d8+1.",aumenta:!0},{custo:2,descricao:"muda a resist√™ncia para nenhum. Como parte da execu√ß√£o da magia, voc√™ pode fazer um ataque corpo a corpo contra o alvo. Se acertar, causa o dano do ataque e o efeito da magia.",aumenta:!1},{custo:5,descricao:"muda o alcance para curto e o alvo para criaturas escolhidas.",aumenta:!1}]},perdicao:{name:"Perdi√ß√£o",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_curse.jpg",system:{circulo:"1",escola:"necromancia",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"Criaturas Escolhidas",resistencia:"nenhuma",custo:"1 PM",description:{value:"Amaldi√ßoa os alvos, que recebem ‚Äì1 em testes de ataque e rolagens de dano. Perdi√ß√£o anula B√™n√ß√£o."}},aprimoramentos:[{custo:2,descricao:"aumenta as penalidades em -1, limitado pelo c√≠rculo m√°ximo de magia que voc√™ pode lan√ßar.",aumenta:!0}]},profanar:{name:"Profanar",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_desecration.jpg",system:{circulo:"1",escola:"necromancia",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"longo",duracao:"1 dia",alvo:"esfera com 9m de raio",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Voc√™ enche a √°rea com energia negativa. Dano causado por efeitos de trevas √© maximizado dentro da √°rea. Isso tamb√©m afeta PV curados em mortos-vivos por esses efeitos. Esta magia n√£o pode ser lan√ßada em uma √°rea contendo um s√≠mbolo vis√≠vel dedicado a uma divindade que n√£o a sua. Profanar anula Consagrar."}},aprimoramentos:[{custo:2,descricao:"aumenta os b√¥nus para mortos-vivos em +1.",aumenta:!0},{custo:9,descricao:"muda a execu√ß√£o para 1 hora, a dura√ß√£o para permanente e adiciona componente material (incenso e √≥leos no valor de T$ 1.000). Requer 4¬∫ c√≠rculo.",aumenta:!1}]}},transmutacao:{"abencoar-alimentos":{name:"Aben√ßoar Alimentos",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_blessingoffood.jpg",system:{circulo:"1",escola:"transmutacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"Alimento para 1 criatura",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Voc√™ purifica e aben√ßoa uma por√ß√£o de comida ou dose de bebida. Isso torna um alimento sujo, estragado ou envenenado pr√≥prio para consumo. Al√©m disso, se for consumido at√© o final da dura√ß√£o, o alimento oferece 5 PV tempor√°rios ou 1 PM tempor√°rio (al√©m de quaisquer b√¥nus que j√° oferecesse). B√¥nus de alimenta√ß√£o duram um dia e cada personagem s√≥ pode receber um b√¥nus de alimenta√ß√£o por dia."}}},"armamento-da-natureza":{name:"Armamento da Natureza",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_natureweapon.jpg",system:{circulo:"1",escola:"transmutacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 arma (veja texto)",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Voc√™ fortalece uma arma mundana primitiva (sem custo em T$, como bord√£o, clava, funda ou tacape), uma arma natural ou um ataque desarmado. O dano da arma aumenta em um passo e ela √© considerada m√°gica. Ao lan√ßar a magia, voc√™ pode mudar o tipo de dano da arma (escolhendo entre corte, impacto ou perfura√ß√£o)."}},aprimoramentos:[{custo:2,descricao:"muda a execu√ß√£o para a√ß√£o de movimento.",aumenta:!1},{custo:3,descricao:"aumenta o b√¥nus nos testes de ataque em +1.",aumenta:!0},{custo:5,descricao:"aumenta o dano da arma em mais um passo.",aumenta:!0}]},"controlar-plantas":{name:"Controlar Plantas",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_controlplants.jpg",system:{circulo:"1",escola:"transmutacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"quadrado com 9m de lado",resistencia:"Reflexos anula",custo:"1 PM",description:{value:"Esta magia s√≥ pode ser lan√ßada em uma √°rea com vegeta√ß√£o. As plantas se enroscam nas criaturas da √°rea. Aquelas que falharem na resist√™ncia ficam Enredado. Uma v√≠tima pode se libertar com uma a√ß√£o padr√£o e um teste de Acrobacia ou Atletismo. Al√©m disso, a √°rea √© considerada terreno dif√≠cil. No in√≠cio de seus turnos, a vegeta√ß√£o tenta enredar novamente qualquer criatura na √°rea, exigindo um novo teste de Reflexos."}},aprimoramentos:[{custo:2,descricao:"muda o alcance para pessoal, a √°rea para alvo (voc√™) e a resist√™ncia para nenhuma. Em vez do normal, voc√™ consegue se comunicar com plantas, que come√ßam com atitude prestativa em rela√ß√£o a voc√™. Al√©m disso, voc√™ pode fazer testes de Diplomacia com plantas. Em geral, plantas t√™m uma percep√ß√£o limitada de seus arredores e normalmente fornecem respostas simpl√≥rias.",aumenta:!1}]}}},"2-circulo":{abjuracao:{"circulo-da-justica":{name:"C√≠rculo da Justi√ßa",type:"magia",img:"systems/tormenta20/icons/magias/circulo-da-justica.webp",system:{circulo:"2",escola:"abjuracao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"curto",duracao:"1 dia",alvo:"cubo com 9m de lado;",resistencia:"Vontade parcial",custo:"3 PM",description:{value:"Tamb√©m conhecida como L√°grimas do Deus da Trapa√ßa, esta magia √© usada em tribunais e para proteger √°reas sens√≠veis. Criaturas na √°rea sofrem ‚Äì10 em testes de Acrobacia, Engana√ß√£o, Furtividade e Ladinagem e n√£o podem mentir deliberadamente ‚Äî mas podem tentar evitar perguntas que normalmente responderiam com uma mentira (sendo evasivas ou cometendo omiss√µes, por exemplo). Uma criatura que passe na resist√™ncia tem as penalidades reduzidas para ‚Äì5 e pode mentir."}},aprimoramentos:[{custo:1,descricao:"muda a execu√ß√£o para a√ß√£o padr√£o, o alcance para pessoal, o alvo para voc√™, a dura√ß√£o para cena e a resist√™ncia para nenhuma. Em vez do normal, qualquer criatura ou objeto invis√≠vel em alcance curto se torna vis√≠vel. Isso n√£o dissipa o efeito m√°gico; se sair do seu alcance, a criatura ou objeto voltam a ficar invis√≠veis.",aumenta:!1},{custo:7,descricao:"muda a dura√ß√£o para permanente e adiciona componente material (balan√ßa de prata no valor de T$ 5.000).",aumenta:!1}]},"vestimenta-da-fe":{name:"Vestimenta da F√©",type:"magia",img:"systems/tormenta20/icons/magias/vestimenta-da-fe.webp",system:{circulo:"2",escola:"abjuracao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",duracao:"1 dia",alvo:"1 armadura, escudo ou vestimenta",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Voc√™ fortalece um item, aumentando o b√¥nus de Defesa de uma armadura ou escudo em +2. No caso de um vestu√°rio, ele passa a oferecer +2 na Defesa (n√£o cumulativo com armadura). Os efeitos desta magia s√£o uma melhoria no item, portanto s√£o cumulativos com outras magias, mas n√£o com b√¥nus por encantos nesse item."}},aprimoramentos:[{custo:4,descricao:"aumenta o b√¥nus em +1.",aumenta:!0},{custo:7,descricao:"o objeto tamb√©m oferece resist√™ncia a dano 5. Requer 4¬∫ c√≠rculo.",aumenta:!1},{custo:0,descricao:"Aumenta o b√¥nus em resist√™ncia em +1 (relativo ao efeito de +4 PM, que aumenta o b√¥nus fornecido pela magia).",aumenta:!0}]}},adivinhacao:{augurio:{name:"Aug√∫rio",type:"magia",img:"systems/tormenta20/icons/magias/augurio.webp",system:{circulo:"2",escola:"adv",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"pessoal",alvo:"Voc√™",resistencia:"Nenhuma",custo:"3 PM",description:{value:'Esta magia diz se uma a√ß√£o que voc√™ tomar√° em breve ‚Äî no m√°ximo uma hora no futuro ‚Äî trar√° resultados bons ou ruins. O mestre rola 1d6 em segredo; com um resultado de 2 a 6, a magia funciona e voc√™ recebe uma das seguintes respostas: "felicidade" (a a√ß√£o trar√° bons resultados); "mis√©ria" (a a√ß√£o trar√° maus resultados); "felicidade e mis√©ria" (para ambos) ou "nada" (para a√ß√µes que n√£o trar√£o resultados bons ou ruins). Com um resultado 1, a magia falha e oferece o resultado "nada". N√£o h√° como saber se esse resultado foi dado porque a magia falhou ou n√£o. Lan√ßar esta magia m√∫ltiplas vezes sobre o mesmo assunto gera sempre o primeiro resultado. Por exemplo, se o grupo est√° prestes a entrar em uma c√¢mara, o aug√∫rio dir√° "felicidade" se a c√¢mara cont√©m um tesouro desprotegido, "mis√©ria" se cont√©m um monstro, "felicidade e mis√©ria" se houver um tesouro e um monstro ou "nada" se a c√¢mara estiver vazia.'}},aprimoramentos:[{custo:7,descricao:'muda a execu√ß√£o para 10 minutos e a dura√ß√£o para 1 minuto. Em vez do normal, voc√™ consulta uma divindade, podendo fazer uma pergunta por rodada, desde que ela possa ser respondida com "sim", "n√£o" ou "n√£o sei" (embora poderosos, os deuses n√£o s√£o oniscientes). O mestre rola a chance de falha para cada pergunta. Em caso de falha, a resposta tamb√©m √© "n√£o sei". Requer 4¬∫ c√≠rculo.',aumenta:!1},{custo:7,descricao:"o mestre rola 1d12; a magia s√≥ falha em um resultado 1.",aumenta:!1},{custo:12,descricao:"o mestre rola 1d20; a magia s√≥ falha em um resultado 1.",aumenta:!1}]},condicao:{name:"Condi√ß√£o",type:"magia",img:"systems/tormenta20/icons/magias/condicao.webp",system:{circulo:"2",escola:"adv",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"at√© 5 criaturas",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Pela dura√ß√£o da magia, voc√™ sabe a posi√ß√£o e status (PV atuais, se est√£o sob efeito de magia...) dos alvos. Depois de lan√ßada, a dist√¢ncia entre voc√™ e os alvos n√£o importa ‚Äî a magia s√≥ deixa de detectar um alvo se ele morrer ou for para outro plano."}},aprimoramentos:[{custo:1,descricao:"aumenta o n√∫mero de alvos em +1.",aumenta:!0},{custo:1,descricao:"aumenta a dura√ß√£o para 1 dia.",aumenta:!0}]},"globo-da-verdade":{name:"Globo da Verdade",type:"magia",img:"systems/tormenta20/icons/magias/globo-da-verdade.webp",system:{circulo:"2",escola:"adv",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Cria um globo flutuante e intang√≠vel, com 50cm de di√¢metro. O globo mostra uma cena vista at√© uma semana atr√°s por voc√™ ou por uma criatura que voc√™ toque ao lan√ßar a magia (mediante uma pergunta; a criatura pode fazer um teste de Vontade para anular o efeito), permitindo que outras pessoas a vejam."}},aprimoramentos:[{custo:1,descricao:"o globo mostra uma cena vista at√© um m√™s atr√°s.",aumenta:!1},{custo:2,descricao:"o globo mostra uma cena vista at√© um ano atr√°s.",aumenta:!1},{custo:2,descricao:"ao lan√ßar a magia, voc√™ pode tocar um cad√°ver. O globo mostra a √∫ltima cena vista por essa criatura.",aumenta:!1},{custo:4,descricao:"muda o alcance para longo e o efeito para 10 globos. Todos mostram a mesma cena.",aumenta:!1}]},"mente-divina":{name:"Mente Divina",type:"magia",img:"systems/tormenta20/icons/magias/mente-divina.webp",system:{circulo:"2",escola:"adv",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Voc√™ fortalece a mente do alvo. Ele recebe +2 em Intelig√™ncia, Sabedoria ou Carisma, a sua escolha. Esse aumento n√£o oferece PV, PM ou per√≠cias adicionais."}},aprimoramentos:[{custo:7,descricao:"em vez do normal, o alvo recebe +4 no atributo escolhido. Requer 4¬∫ c√≠rculo.",aumenta:!1},{custo:0,descricao:"+2 Intelig√™ncia",aumenta:!0},{custo:0,descricao:"+2 Sabedoria",aumenta:!0},{custo:0,descricao:"+2 Carisma",aumenta:!0},{custo:15,descricao:"em vez do normal, o alvo recebe +4 nos tr√™s atributos mentais. Requer 5¬∫ c√≠rculo.",aumenta:!1}]},"voz-divina":{name:"Voz Divina",type:"magia",img:"systems/tormenta20/icons/magias/voz-divina.webp",system:{circulo:"2",escola:"adv",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"voc√™",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Voc√™ pode conversar com criaturas de qualquer ra√ßa e tipo: animal, construto, esp√≠rito, humanoide, monstro ou morto-vivo. Pode fazer perguntas e entende suas respostas, mesmo sem um idioma em comum ou se a criatura n√£o for capaz de falar, mas respeitando os limites da Intelig√™ncia dela. A atitude dessas criaturas n√£o √© alterada, mas voc√™ pode usar a per√≠cia Diplomacia para tentar mudar sua atitude."}},aprimoramentos:[{custo:1,descricao:"voc√™ concede um pouco de vida a um cad√°ver, suficiente para que ele responda a suas perguntas. O conhecimento do corpo √© limitado ao que ele tinha enquanto vivo e suas respostas s√£o curtas e enigm√°ticas. Um corpo s√≥ pode ser alvo desta magia uma vez. Ela tamb√©m n√£o funciona em um corpo cuja cabe√ßa tenha sido destru√≠da.",aumenta:!1},{custo:1,descricao:"voc√™ pode falar com plantas (normais ou monstruosas) e rochas. Plantas e rochas t√™m percep√ß√£o limitada de seus arredores e normalmente fornecem respostas simpl√≥rias.",aumenta:!1}]}},convocacao:{"enxame-de-pestes":{name:"Enxame de Pestes",type:"magia",img:"systems/tormenta20/icons/magias/enxame-de-pestes.webp",system:{circulo:"2",escola:"convocacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"medio",resistencia:"Fortitude reduz √† metade",custo:"3 PM",description:{value:"Voc√™ conjura um enxame de criaturas a sua escolha, como besouros, gafanhotos, ratos, morcegos ou serpentes. O enxame pode passar pelo espa√ßo de outras criaturas e n√£o impede que outras criaturas entrem no espa√ßo dele. No final de seus turnos, o enxame causa 2d12 pontos de dano de corte a qualquer criatura em seu espa√ßo (Fortitude reduz √† metade). Voc√™ pode gastar uma a√ß√£o de movimento para mover o enxame 12m."}},aprimoramentos:[{custo:2,descricao:"aumenta o dano em +1d12.",aumenta:!0},{custo:5,descricao:"aumenta o n√∫mero de enxames em +1. Eles n√£o podem ocupar o mesmo espa√ßo. Requer 3¬∫ c√≠rculo.",aumenta:!0},{custo:7,descricao:"muda a resist√™ncia para Reflexos reduz √† metade e o enxame para criaturas elementais. Ele causa 5d12 pontos do dano (a sua escolha entre √°cido, eletricidade, fogo ou frio). O resto da magia segue normal. Requer 4¬∫ c√≠rculo.",aumenta:!1}]},"soco-do-mestre":{name:"Soco do Mestre",type:"magia",img:"systems/tormenta20/icons/magias/soco-do-mestre.webp",system:{circulo:"2",escola:"convocacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"1 criatura",resistencia:"Fortitude parcial",custo:"3 PM",description:{value:"Ningu√©m sabe se Mestre foi realmente o criador desta magia ‚Äî mas ele foi o primeiro a utiliz√°-la. Voc√™ fecha o punho e gesticula como se estivesse golpeando o alvo, causando dano de impacto igual a 4d6 + sua For√ßa. A v√≠tima √© empurrada 3m na dire√ß√£o oposta √† sua. Passar no teste de resist√™ncia reduz o dano √† metade e evita o empurr√£o."}},aprimoramentos:[{custo:1,descricao:"muda o alcance para pessoal, o alvo para voc√™, a dura√ß√£o para cena e a resist√™ncia para nenhuma. Em vez do normal, seus ataques corpo a corpo passam a acertar inimigos distantes. Seu alcance natural aumenta em 3m; uma criatura M√©dia pode atacar advers√°rios a at√© 4,5m, por exemplo.",aumenta:!1},{custo:2,descricao:"aumenta o dano em +1d6.",aumenta:!0},{custo:4,descricao:"aumenta o empurr√£o em +3m.",aumenta:!0},{custo:5,descricao:"muda o tipo do dano para ess√™ncia.",aumenta:!1}]}},encantamento:{"aliado-animal":{name:"Aliado Animal",type:"magia",img:"systems/tormenta20/icons/magias/aliado-animal.webp",system:{circulo:"2",escola:"encantamento",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 animal prestativo",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Voc√™ cria um v√≠nculo mental com um animal prestativo em rela√ß√£o a voc√™. O Aliado Animal obedece a voc√™ no melhor de suas capacidades, mesmo que isso arrisque a vida dele. Ele funciona como um parceiro veterano, de um tipo a sua escolha entre ajudante, combatente, fort√£o, guardi√£o, montaria ou perseguidor."}},aprimoramentos:[{custo:1,descricao:"muda o alvo para 1 animal Min√∫sculo e a dura√ß√£o para 1 semana. Em vez do normal, o animal se desloca no melhor de suas capacidades at√© um local designado por voc√™ - em geral, para levar um item, carta ou similar. Quando o animal chega ao destino, fica esperando at√© o fim da magia, permitindo apenas que uma ou mais criaturas escolhidas por voc√™ se aproximem e peguem o que ele estiver carregando.",aumenta:!1},{custo:7,descricao:"muda o parceiro para mestre. Requer 3¬∫ c√≠rculo.",aumenta:!1},{custo:12,descricao:"muda o alvo para 2 animais prestativos. Cada animal funciona como um parceiro de um tipo diferente, e voc√™ pode receber a ajuda de ambos (mas ainda precisa seguir o limite de parceiros de acordo com o seu n√≠vel de personagem). Requer 4¬∫ c√≠rculo.",aumenta:!1}]},oracao:{name:"Ora√ß√£o",type:"magia",img:"systems/tormenta20/icons/magias/oracao.webp",system:{circulo:"2",escola:"encantamento",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"todas as criaturas (veja texto)",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Voc√™ e todos os seus aliados no alcance recebem +2 em testes de per√≠cia e rolagens de dano, e todos os seus inimigos no alcance sofrem ‚Äì2 em testes de per√≠cia e rolagens de dano. Esse efeito √© cumulativo com outras magias. Componente Material: T$ 25por PM gastos em incensos ou outras oferendas."}},aprimoramentos:[{custo:2,descricao:"aumenta os b√¥nus em +1 (b√¥nus m√°ximo limitado pelo c√≠rculo m√°ximo de magia que voc√™ pode lan√ßar).",aumenta:!0},{custo:2,descricao:"aumenta as penalidades em -1, limitado pelo c√≠rculo m√°ximo de magia que voc√™ pode lan√ßar.",aumenta:!0},{custo:7,descricao:"muda o alcance para m√©dio. Requer 3¬∫ c√≠rculo.",aumenta:!1},{custo:12,descricao:"muda a dura√ß√£o para cena. Requer 4¬∫ c√≠rculo",aumenta:!1}]}},evocacao:{"controlar-fogo":{name:"Controlar Fogo",type:"magia",img:"systems/tormenta20/icons/magias/controlar-fogo.webp",system:{circulo:"2",escola:"evocacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"veja texto",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Voc√™ pode criar, moldar, mover ou extinguir chamas e emana√ß√µes de calor. Ao lan√ßar a magia, escolha um dos efeitos. Chamejar: o alvo √© armas escolhidas. Elas causam +1d6 de dano de fogo. Tamb√©m afeta armas naturais e ataques desarmados. Esquentar: o alvo √© 1 objeto, que come√ßa a esquentar. Ele sofre 1d6 pontos de dano de fogo por rodada e causa o mesmo dano a qualquer criatura que o esteja segurando ou vestindo. A crit√©rio do mestre, o objeto ou a criatura vestindo-o tamb√©m podem fica em chamas. Uma criatura pode gastar uma a√ß√£o completa para resfriar o objeto (jogando areia ou se jogando numa fonte de √°gua pr√≥xima, por exemplo) e cancelar o efeito da magia. Extinguir: o alvo √© 1 chama de tamanho Grande ou menor, que √© apagada. Isso cria uma nuvem de fuma√ßa que ocupa uma esfera de 3m de raio centrada onde estava a chama. Dentro da fuma√ßa, criaturas t√™m camuflagem leve. Modelar: o alvo √© 1 chama de tamanho Grande ou menor. A cada rodada, voc√™ pode gastar uma a√ß√£o livre para moviment√°-la 9m em qualquer dire√ß√£o. Se atravessar o espa√ßo ocupado por uma criatura, causa 2d6 pontos de dano de fogo. Uma criatura s√≥ pode receber dano dessa maneira uma vez por rodada."}},aprimoramentos:[{custo:1,descricao:"muda a dura√ß√£o para sustentada e a resist√™ncia para Reflexos reduz √† metade. Em vez do normal, voc√™ deve escolher o seguinte efeito. Labaredas: a cada rodada, voc√™ pode gastar uma a√ß√£o de movimento para projetar uma labareda, acertando um alvo em alcance curto a partir da chama. O alvo sofre 4d6 pontos de dano de fogo (Reflexos reduz √† metade).",aumenta:!1},{custo:2,descricao:"aumenta o dano em +1d6 (exceto Chamejar).",aumenta:!0}]},purificacao:{name:"Purifica√ß√£o",type:"magia",img:"systems/tormenta20/icons/magias/purificacao.webp",system:{circulo:"2",escola:"evocacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Voc√™ purifica a criatura tocada, removendo uma condi√ß√£o dela entre abalado, Apavorado, Alquebrado, Atordoado, Cego, Confuso, Debilitado, Enjoado, Envenenado, Esmorecido, Exausto, Fascinado, Fatigado,Fraco, Frustrado, Lento, Ofuscado, Paralisado, Pasmo ou Surdo."}},aprimoramentos:[{custo:2,descricao:"tamb√©m cura todos os PV perdidos por veneno.",aumenta:!1},{custo:2,descricao:"em vez de uma, remove todas as condi√ß√µes listadas.",aumenta:!1},{custo:7,descricao:"tamb√©m dissipa magias e efeitos prejudiciais de encantamento, necromancia e transmuta√ß√£o afetando o alvo. Requer 3¬∫ c√≠rculo.",aumenta:!1}]},"raio-solar":{name:"Raio Solar",type:"magia",img:"systems/tormenta20/icons/magias/raio-solar.webp",system:{circulo:"2",escola:"evocacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"linha",resistencia:"Reflexos (veja texto)",custo:"3 PM",description:{value:"Voc√™ canaliza uma poderosa rajada de energia positiva que ilumina o campo de batalha. Criaturas na √°rea sofrem 4d8 pontos de dano de luz (ou 4d12, se forem mortos-vivos) e ficam Ofuscado por uma rodada. Se passarem na resist√™ncia, sofrem metade do dano e n√£o ficam ofuscadas. Cego"}},aprimoramentos:[{custo:2,descricao:"aumenta o dano ou cura em +1d8 (ou +1d12 em mortos-vivos).",aumenta:!0}]},"tempestade-divina":{name:"Tempestade Divina",type:"magia",img:"systems/tormenta20/icons/magias/tempestade-divina.webp",system:{circulo:"2",escola:"evocacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"longo",alvo:"cilindro com 15m de raio e 15m de altura",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Esta magia s√≥ pode ser usada em ambientes abertos. A √°rea fica sujeita a um vendaval ‚Äî ataques √† dist√¢ncia sofrem penalidade de ‚Äì5, chamas s√£o apagadas e n√©voas s√£o dissipadas. Voc√™ tamb√©m pode gerar chuva (‚Äì5 em testes de Percep√ß√£o), neve (como chuva, e a √°rea se torna terreno dif√≠cil) ou granizo (como chuva, mais 1 ponto de dano de impacto por rodada, no in√≠cio de seus turnos)."}},aprimoramentos:[{custo:1,descricao:"muda a dura√ß√£o para sustentada. Al√©m do normal, uma vez por rodada voc√™ pode gastar uma a√ß√£o padr√£o para fazer um raio cair sobre um alvo na √°rea, causando 3d8 pontos de dano de eltricidade (Reflexos reduz √† metade).",aumenta:!1},{custo:2,descricao:"aumenta o dano de raios (veja acima) em +1d8.",aumenta:!0}]}},ilusao:{silencio:{name:"Sil√™ncio",type:"magia",img:"systems/tormenta20/icons/magias/silencio.webp",system:{circulo:"2",escola:"ilusao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"esfera com 6m de raio",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Um sil√™ncio sepulcral recai sobre a √°rea e nenhum som √© produzido nela. Enquanto estiverem na √°rea, todas as criaturas ficam Surdo. Al√©m disso, como lan√ßar magias exige palavras m√°gicas, normalmente nenhuma magia pode ser lan√ßada dentro da √°rea."}},aprimoramentos:[{custo:1,descricao:"muda a √°rea para alvo de 1 objeto. Em vez do normal, o alvo emana uma √°rea de sil√™ncio com 3m de raio. Se lan√ßar a magia num objeto de uma criatura involunt√°ria, ela tem direito a um teste de Vontade para anul√°-la.",aumenta:!1},{custo:2,descricao:"muda a dura√ß√£o para cena. Em vez do normal, nenhum som pode deixar a √°rea, mas criaturas dentro da √°rea podem falar, ouvir e lan√ßar magias com palavras m√°gicas normalmente.",aumenta:!1}]}},necromancia:{"miasma-mefitico":{name:"Miasma Mef√≠tico",type:"magia",img:"systems/tormenta20/icons/magias/miasma-mefitico.webp",system:{circulo:"2",escola:"necromancia",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"nuvem com 6m de raio",resistencia:"Fortitude (veja texto)",custo:"3 PM",description:{value:"A √°rea √© coberta por emana√ß√µes letais. Criaturas na √°rea sofrem 5d6 pontos de dano de √°cido e ficam Enjoado por 1 rodada. Se passarem na resist√™ncia, sofrem metade do dano e n√£o ficam enjoadas."}},aprimoramentos:[{custo:2,descricao:"aumenta o dano em +1d6.",aumenta:!0}]},"rogar-maldicao":{name:"Rogar Maldi√ß√£o",type:"magia",img:"systems/tormenta20/icons/magias/rogar-maldicao.webp",system:{circulo:"2",escola:"necromancia",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 criatura",resistencia:"Fortitude anula",custo:"3 PM",description:{value:"Voc√™ entoa c√¢nticos mal√©ficos que amaldi√ßoam uma v√≠tima, criando efeitos variados. Ao lan√ßar a magia, escolha entre os seguintes. Debilidade: o alvo fica Esmorecido e n√£o pode se comunicar ou lan√ßar magias. Ainda reconhece seus aliados e pode segui-los e ajud√°-los, mas sempre de maneira simpl√≥ria. Doen√ßa: muda a dura√ß√£o para instant√¢nea. O alvo contrai uma doen√ßa a sua escolha, que o afeta imediatamente (sem per√≠odo de incuba√ß√£o). Fraqueza: o alvo fica Debilitadoe Lento. Isolamento: o alvo perde o uso de um de seus cinco sentidos a sua escolha. Se perder a vis√£o, fica Cego. Se perder a audi√ß√£o, fica Surdo. Se perder o olfato ou paladar, n√£o pode usar a habilidade faro. Se perder o tato, fica Ca√≠do e n√£o pode se levantar. Voc√™ tamb√©m pode inventar sua pr√≥pria maldi√ß√£o, usando esses exemplos como sugest√µes, mas o mestre tem a palavra final sobre o efeito."}},aprimoramentos:[{custo:7,descricao:"muda a dura√ß√£o para permanente e resist√™ncia para Fortitude parcial. Se passar, a criatura ainda sofre os efeitos da maldi√ß√£o, mas por 1 rodada. Requer 4¬∫ c√≠rculo.",aumenta:!1}]}},transmutacao:{"controlar-ar":{name:"Controlar Ar",type:"magia",img:"icons/magic/air/wind-tornado-cyclone-white.webp",system:{circulo:"2",escola:"transmutacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"varia",resistencia:"veja texto",custo:"3 PM",description:{value:'ERRATA DO ALMANAQUE DRAG√£O BRASIL (jamboeditora.com.br) Voc√™ pode controlar os movimentos e comportamentos de massas de ar. Ao lan√ßar a magia, escolha um dos efeitos abaixo. Ascender:cria uma corrente de ar ascendente capaz de erguer do ch√£o uma criatura ou objeto m√©dio, fazendo o alvo Ô¨Çutuar para cima e para baixo conforme sua vontade. Voc√™ pode gastar uma a√ß√£o de movimento para subir ou descer o alvo at√© 6m por rodada, at√© um m√°ximo de 30m de altura. Voc√™ n√£o pode mover o alvo horizontalmente ‚Äî mas o alvo pode, por exemplo, escalar uma colina ou se apoiar no teto para mover-se lateralmente (com metade de seu deslocamento normal). Uma criatura levitando fica vulner√°vel e sofre ‚Äì2 nas jogadas de ataque. Alvos involunt√°rios tem direito a um teste de Fortitude no in√≠cio de seu turno para negar o efeito. Derrubar um alvo flutuando (simplesmente parando a corrente de ar) causa o dano normal de queda, mas um alvo que passe no teste pode "nadar" para o ch√£o contra a corrente. Voc√™ pode usar essa op√ß√£o para fazer uma manobra derrubar contra uma criatura voadora dentro do alcance, usando seu atributo-chave no lugar de For√ßa. Sopro:cria uma lufada de vento a partir de suas m√£os, que empurra qualquer criatura M√©dia ou menor em um cone de 4,5m ‚Äî fa√ßa uma manobraempurrarusando seu atributo-chave ao inv√©s de for√ßa, usando o mesmo resultado de sua rolagem para todos os alvos. A lufada de vento tamb√©m faz qualquer coisa que um vento forte e s√∫bito faria, como levantar p√≥, dispersar vapores, apagar chamas, espalhar pap√©is ou mover uma embarca√ß√£o. Manter o sopro ativo exige uma a√ß√£o padr√£o. Vento:cria uma √°rea de vento forte (Tormenta20 p√°gina 253) dentro do alcance da magia. Se lan√ßada numa √°rea que j√° esteja com algum efeito de vento, aumenta esse efeito em um passo. Manter o vento ativo requer uma a√ß√£o de movimento. Voc√™ tamb√©m pode usar essa op√ß√£o para reduzir os efeitos de vento em uma √°rea.'}},aprimoramentos:[{custo:2,descricao:"aumenta o limite de tamanho de criaturas e objetos afetados em um passo.",aumenta:!0}]},"controlar-madeira":{name:"Controlar Madeira",type:"magia",img:"systems/tormenta20/icons/magias/controlar-madeira.webp",system:{circulo:"2",escola:"transmutacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"1objeto de madeira grande ou menor",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Voc√™ molda, retorce, altera ou repele madeira. Se lan√ßar esta magia num objeto de uma criatura involunt√°ria, ela tem direito a um teste de Vontade para anul√°-la. Ao lan√ßar a magia, escolha. Fortalecer: deixa o alvo mais resistente. Armas t√™m seu dano aumentado em um passo. Escudos t√™m seu b√¥nus de Defesa aumentado em +2 (isso √© uma melhoria no item, portanto √© cumulativa com outras magias). Esses e outros itens de madeira recebem +5 na RD e dobram seus PV. Modelar: muda a forma do alvo. Pode transformar um galho em espada, criar uma porta onde antes havia apenas uma parede, transformar um tronco em uma caixa... Mas n√£o pode criar mecanismos complexos (como uma besta) ou itens consum√≠veis. Repelir: o alvo √© repelido por voc√™. Se for uma arma, ataques feitos com ela contra voc√™ falham automaticamente. Se for uma porta ou outro objeto que possa ser aberto, ele vai se abrir quando voc√™ se aproximar, mesmo que esteja trancado. Um objeto que v√° atingi-lo, como uma carro√ßa, tronco ou barril, vai desviar ou parar adjacente a voc√™, sem lhe causar dano. Os efeitos de regras em outros objetos de madeira ficam a cargo do mestre. Retorcer: estraga o alvo. Uma porta retorcida emperra (exigindo um teste de For√ßa contra CD 25 para ser aberta). Armas e itens retorcidos imp√µem ‚Äì5 em testes de per√≠cia. Escudos retorcidos deixam de oferecer b√¥nus (mas ainda imp√µem penalidades). Um barco retorcido come√ßa a afundar e naufraga ao final da cena. Os efeitos de regras em outros objetos de madeira ficam a cargo do mestre."}},aprimoramentos:[{custo:1,descricao:"muda o alcance para pessoal, o alvo para voc√™ e a dura√ß√£o para 1 dia. Voc√™ e seu equipamento se transformam em uma √°rvore de tamanho Grande. Nessa forma, voc√™ n√£o pode falar ou fazer a√ß√µes f√≠sicas, mas consegue perceber seus arredores normalmente. Se for atacado nessa forma, a magia √© dissipada. Um teste de Sobreviv√™ncia (CD 30) revela que voc√™ n√£o √© uma √°rvore verdadeira.",aumenta:!1},{custo:7,descricao:"muda o alvo para Enorme ou menor. Requer 3¬∫ c√≠rculo.",aumenta:!1},{custo:12,descricao:"muda o alvo para Colossal ou menor. Requer 4¬∫ c√≠rculo.",aumenta:!1}]},"fisico-divino":{name:"F√≠sico Divino",type:"magia",img:"systems/tormenta20/icons/magias/fisico-divino.webp",system:{circulo:"2",escola:"transmutacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Voc√™ fortalece o corpo do alvo. Ele recebe +2 em For√ßa, Destreza ou Constitui√ß√£o, a sua escolha. Esse aumento n√£o oferece PV ou PM adicionais."}},aprimoramentos:[{custo:7,descricao:"em vez do normal, o alvo recebe +4 no atributo escolhido. Requer 4¬∫ c√≠rculo.",aumenta:!1},{custo:15,descricao:"em vez do normal, o alvo recebe +4 nos tr√™s atributos f√≠sicos. Requer 5¬∫ c√≠rculo.",aumenta:!1},{custo:0,descricao:"+2 em For√ßa",aumenta:!0},{custo:0,descricao:"+2 em Destreza",aumenta:!0},{custo:0,descricao:"+2 em Constitui√ß√£o",aumenta:!0}]}}},"3-circulo":{abjuracao:{banimento:{name:"Banimento",type:"magia",img:"systems/tormenta20/icons/magias/banimento.webp",system:{circulo:"3",escola:"abjuracao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"1d3+1 rodadas",execucao:"especial"},alcance:"curto",alvo:"1 criatura",resistencia:"Vontade parcial",custo:"6 PM",description:{value:"Voc√™ expulsa uma criatura n√£o nativa de Arton. Um alvo nativo de outro mundo (como muitos esp√≠ritos), √© teletransportado de volta para um lugar aleat√≥rio de seu mundo de origem. J√° um alvo morto-vivo tem sua conex√£o com as energias negativas rompidas, sendo reduzido a 0 PV. Se passar na resist√™ncia, em vez dos efeitos acima, o alvo fica enjoado por 1d4 rodadas. Se voc√™ tiver um ou mais itens que se oponham ao alvo de alguma maneira, a CD do teste de resist√™ncia aumenta em +2 por item. Por exemplo, se lan√ßar a magia contra dem√¥nios do frio (vulner√°veis a √°gua benta e que odeiam luz e calor) enquanto segura um frasco de √°gua benta e uma tocha acesa, a CD aumenta em +4. O mestre decide se determinado item √© forte o bastante contra a criatura para isso."}},aprimoramentos:[{custo:0,descricao:"muda a resist√™ncia para nenhum. Em vez do normal, devolve automaticamente uma criatura conjurada (como por uma magia de convoca√ß√£o) para seu plano de origem.",aumenta:!1}]},"protecao-contra-magia":{name:"Prote√ß√£o Contra Magia",type:"magia",img:"systems/tormenta20/icons/magias/protecao-contra-magia.webp",system:{circulo:"3",escola:"abjuracao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Voc√™ protege o alvo contra efeitos m√°gicos nocivos. O alvo recebe +5 em testes de resist√™ncia contra magias."}},aprimoramentos:[{custo:4,descricao:"muda o b√¥nus para +10. Requer 4¬∫ c√≠rculo.",aumenta:!1},{custo:4,descricao:"em vez do normal, o alvo fica imune a uma escola de magia a sua escolha. Requer 4¬∫ C√≠rculo.",aumenta:!1},{custo:9,descricao:"em vez do normal, o alvo fica imune a duas escolas de magia a sua escolha. Requer 5¬∫ C√≠rculo.",aumenta:!1}]}},adivinhacao:{"comunhao-com-a-natureza":{name:"Comunh√£o com a Natureza",type:"magia",img:"systems/tormenta20/icons/magias/comunhao-com-a-natureza.webp",system:{circulo:"3",escola:"adv",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"pessoal",duracao:"1 dia",alvo:"Voc√™",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Ap√≥s uma breve uni√£o com a natureza local, voc√™ obt√©m informa√ß√µes e intui√ß√µes sobre a regi√£o em que est√°, numa dist√¢ncia equivalente a um dia de viagem. Voc√™ recebe 6d4 dados de aux√≠lio. Enquanto a magia durar, sempre que for realizar um teste de per√≠cia em √°reas naturais, voc√™ pode gastar 2d4 (mais 2d4 para cada c√≠rculo de magias acima do 3¬∫ que puder lan√ßar) e adicionar o resultado rolado como b√¥nus no teste. A magia termina se voc√™ ficar sem dados."}},aprimoramentos:[{custo:1,descricao:"muda a execu√ß√£o para 1 minuto e a dura√ß√£o para instant√¢nea. Em vez do normal, voc√™ descobre 1d4+1 informa√ß√µes sobre os seguintes temas: terreno, animais, vegetais, minerais, cursos d'√°gua e presen√ßa de criaturas antinaturais numa regi√£o natural em que voc√™ esteja. Voc√™ pode, por exemplo, descobrir a quantidade de cavernas (terreno), se uma planta rara existe (vegetais) e se h√° mortos-vivos (criaturas antinaturais) na regi√£o.",aumenta:!1},{custo:3,descricao:"aumenta o n√∫mero de dados de aux√≠lio em +2.",aumenta:!0},{custo:4,descricao:"muda o tipo dos dados de aux√≠lio para d6.",aumenta:!1},{custo:8,descricao:"muda o tipo dos dados de aux√≠lio para d8.",aumenta:!1}]}},convocacao:{"servo-divino":{name:"Servo Divino",type:"magia",img:"systems/tormenta20/icons/magias/servo-divino.webp",system:{circulo:"3",escola:"convocacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",duracao:"Cena ou at√© ser descarregada",resistencia:"Nenhuma",custo:"6 PM",description:{value:'Voc√™ pede a sua divindade que envie um esp√≠rito para ajud√°-lo. Esse esp√≠rito realiza uma tarefa a sua escolha que possa ser cumprida em at√© uma hora ‚Äî desde algo simples como "use suas asas para nos levar at√© o topo da montanha" at√© algo complexo como "escolte esses camponeses at√© o castelo". A magia √© descarregada quando a criatura cumpre a tarefa, retornando a seu plano natal. O tipo de criatura √© escolhido pelo mestre, de acordo com as necessidades da tarefa.Componente material: um pagamento de T$ 100 ao esp√≠rito. A forma de pagamento varia ‚Äî doa√ß√µes a um templo, um item m√°gico ou mesmo dinheiro.'}},aprimoramentos:[{custo:4,descricao:"muda a dura√ß√£o para 1 dia ou at√© ser descarregada. O esp√≠rito realiza uma tarefa a sua escolha que exija at√© um dia. O custo do pagamento aumenta para T$ 500. O resto segue normal.",aumenta:!1},{custo:9,descricao:"muda a dura√ß√£o para 1 semana ou at√© ser descarregada. O esp√≠rito realiza uma tarefa que exija at√© uma semana. O custo do pagamento aumenta para T$ 1.000. O resto segue normal.",aumenta:!1}]},"viagem-arborea":{name:"Viagem Arb√≥rea",type:"magia",img:"systems/tormenta20/icons/magias/viagem-arborea.webp",system:{circulo:"3",escola:"convocacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"pessoal",alvo:"voc√™",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Como parte da execu√ß√£o, voc√™ entra em uma √°rvore adjacente que seja maior do que voc√™. Voc√™ pode permanecer dentro da √°rvore, percebendo os arredores de forma normal (mas sem poder fazer a√ß√µes). Voc√™ pode gastar uma a√ß√£o de movimento para sair da mesma √°rvore, ou de qualquer outra dentro de 1km. Se estiver dentro de uma √°rvore que seja destru√≠da, a magia termina e voc√™ sofre 10d6 pontos de dano de impacto. Enquanto a magia durar voc√™ pode gastar uma a√ß√£o de movimento e 1 PM para entrar em outras √°rvores."}},aprimoramentos:[{custo:2,descricao:'muda o alcance para toque, o alvo para at√© cinco criaturas e a dura√ß√£o para instant√¢nea. Os alvos entram em uma planta (de tamanho M√©dio ou maior) e saem em outra planta do mesmo tamanho a at√© 100km de dist√¢ncia, especificada em dire√ß√£o e dist√¢ncia aproximadas (como "50km ao norte").',aumenta:!1}]}},encantamento:{"despertar-consciencia":{name:"Despertar Consci√™ncia",type:"magia",img:"systems/tormenta20/icons/magias/despertar-consciencia.webp",system:{circulo:"3",escola:"encantamento",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"toque",duracao:"1 dia",alvo:"1 animal ou planta",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Voc√™ desperta a consci√™ncia de um animal ou planta. O alvo se torna um parceiro veterano de um tipo a sua escolha entre ajudante, combatente, fort√£o, guardi√£o, m√©dico, perseguidor ou vigilante. Se usar esta magia em um parceiro que j√° possua, o n√≠vel de poder de um de seus tipos aumenta em um passo (iniciante para veterano, veterano para mestre). Se j√° for um parceiro mestre, recebe o b√¥nus de outro tipo de parceiro iniciante (entre as escolhas acima). O alvo se torna uma criatura racional, com Intelig√™ncia ‚Äì1, e pode falar"}},aprimoramentos:[{custo:4,descricao:"muda o alvo para 1 escultura mundana inanimada. Al√©m do normal, o alvo tem as mesmas caracter√≠sticas de um construto.",aumenta:!1},{custo:4,descricao:"muda a dura√ß√£o para permanente e adiciona penalidade de -3 PM.",aumenta:!1}]},heroismo:{name:"Hero√≠smo",type:"magia",img:"systems/tormenta20/icons/magias/heroismo.webp",system:{circulo:"3",escola:"encantamento",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Esta magia imbui uma criatura com coragem e valentia sobrenaturais. O alvo fica imune a medo e recebe 40 pontos de vida tempor√°rios. Al√©m disso, recebe +4 em testes de ataque e rolagens de dano contra o inimigo de maior ND na cena. Se houver m√∫ltiplos inimigos com o mesmo ND mais alto, voc√™ escolhe qual ser√° o alvo dos b√¥nus. Os b√¥nus se aplicam a todos os tipos de ataque (corpo a corpo, √† dist√¢ncia e magias de ataque)."}},aprimoramentos:[{custo:2,descricao:"muda o b√¥nus para +6.",aumenta:!1}]},"missao-divina":{name:"Miss√£o Divina",type:"magia",img:"systems/tormenta20/icons/magias/missao-divina.webp",system:{circulo:"3",escola:"encantamento",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",duracao:"1 semana ou at√© ser descarregada",alvo:"1 criatura",resistencia:"Vontade anula (veja texto)",custo:"6 PM",description:{value:"Esta magia obriga o alvo a cumprir uma tarefa a sua escolha. Ela dura uma semana ou at√© o alvo cumprir a tarefa, o que vier primeiro. O alvo pode recusar a miss√£o ‚Äî mas, no fim de cada dia em que n√£o se esfor√ßar para cumprir a tarefa, deve fazer um teste de Vontade; se falhar, sofre uma penalidade cumulativa de ‚Äì2 em todos os testes e rolagens. A Miss√£o Divina n√£o pode for√ßar uma criatura a um ato suicida, nem designar uma miss√£o imposs√≠vel (como matar uma criatura que n√£o existe)."}},aprimoramentos:[{custo:2,descricao:"muda o alcance para toque, a\ndura√ß√£o para permanente e adiciona\npenalidade de -1 PM. Em vez do normal,\nvoc√™ inscreve uma marca (como uma tatuagem) na pele do alvo e escolhe um tipo de a√ß√£o que ativar√° a marca. Normalmente, ser√° cometer um crime (roubar, matar...) ou outra coisa contr√°ria √†s Obriga√ß√µes & Restri√ß√µes de sua divindade. Sempre que a marca √© ativada, o alvo recebe uma penalidade cumulativa de -2 em todos os testes. Muitas vezes, portar essa marca √© um estigma por si s√≥, j√° que esta magia normalmente √© lan√ßada em criminosos ou traidores. Uma magia que dissipe outras suprime a marca e suas penalidades por um dia; elas s√≥ podem ser totalmente removidas pelo conjurador original ou pela magia Purifica√ß√£o.",aumenta:!1},{custo:4,descricao:"aumenta a dura√ß√£o para 1 ano ou at√© ser descarregada.",aumenta:!0}]}},evocacao:{"coluna-de-chamas":{name:"Coluna de Chamas",type:"magia",img:"systems/tormenta20/icons/magias/coluna-de-chamas.webp",system:{circulo:"3",escola:"evocacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"longo",alvo:"cilindro com 3m de raio e 30m de altura",resistencia:"Reflexos reduz √† metade",custo:"6 PM",description:{value:"Um pilar de fogo sagrado desce dos c√©us, causando 6d6 pontos de dano de fogo mais 6d6 pontos de dano de luz nas criaturas e objetos livres na √°rea."}},aprimoramentos:[{custo:1,descricao:"aumenta o dano de fogo em +1d6.",aumenta:!0},{custo:1,descricao:"aumenta o dano de luz em +1d6.",aumenta:!0}]},"dispersar-as-trevas":{name:"Dispersar as Trevas",type:"magia",img:"systems/tormenta20/icons/magias/dispersar-trevas.webp",system:{circulo:"3",escola:"evocacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",duracao:"veja texto",alvo:"Esfera de 6m de raio",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Esta magia cria um forte brilho (multicolorido ou de uma cor que remeta a sua divindade) que causa diversos efeitos. Todas as magias de 3¬∫ c√≠rculo ou menor ativas na √°rea s√£o dissipadas se voc√™ passar num teste de Religi√£o contra a CD de cada magia. Seus aliados na √°rea recebem +4 em testes de resist√™ncia e redu√ß√£o de trevas 10 at√© o fim da cena, protegidos por uma aura sutil da mesma cor. Inimigos na √°rea ficam Cego por 1d4 rodadas (apenas uma vez pela magia). Dispersar as Trevas anula Anular a Luz (este efeito tem dura√ß√£o instant√¢nea)."}},aprimoramentos:[{custo:2,descricao:"aumenta o b√¥nus nas resist√™ncias em +1.",aumenta:!0},{custo:4,descricao:"muda o alcance para curto, a √°rea para alvo 1 criatura e a dura√ß√£o para cena. O alvo fica imune a efeitos de necromancia e trevas.",aumenta:!1},{custo:4,descricao:"muda o c√≠rculo m√°ximo de magias dissipadas para 4¬∫. Requer 4¬∫ c√≠rculo.",aumenta:!1},{custo:9,descricao:"muda o c√≠rculo m√°ximo de magias dissipadas para 5¬∫. Requer 5¬∫ c√≠rculo.",aumenta:!1}]},"sopro-da-salvacao":{name:"Sopro da Salva√ß√£o",type:"magia",img:"systems/tormenta20/icons/magias/sopro-da-salvacao.webp",system:{circulo:"3",escola:"evocacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"cone de 9m",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Voc√™ enche seus pulm√µes de energia positiva e sopra um cone de poeira reluzente. O sopro afeta apenas seus aliados na √°rea, curando 2d8+4 pontos de vida e removendo uma das seguintes condi√ß√µes de todos os alvos: Abalado, Atordoado, Apavorado, Alquebrado, Cego, Confuso, Debilitado, Enjoado, Esmorecido, Exausto, Fascinado, Fatigado, Fraco, Frustrado, Lento, Paralisado, Pasmo e Surdo."}},aprimoramentos:[{custo:2,descricao:"aumenta a quantidade de cura em 1d8+2.",aumenta:!0},{custo:4,descricao:"al√©m do normal, se um aliado estiver com PV negativos, seus PV s√£o levados a 0 e ent√£o a cura √© aplicada.",aumenta:!1},{custo:4,descricao:"remove todas as condi√ß√µes listadas, em vez de apenas uma.",aumenta:!1}]}},necromancia:{"anular-a-luz":{name:"Anular a Luz",type:"magia",img:"systems/tormenta20/icons/magias/anular-luz.webp",system:{circulo:"3",escola:"necromancia",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",duracao:"Ver Texto",alvo:"esfera de 6m de raio",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Esta magia cria uma onda de escurid√£o que causa diversos efeitos. Todas as magias de 3¬∫ c√≠rculo ou menor ativas na √°rea s√£o dissipadas se voc√™ passar num teste de Religi√£o contra a CD de cada magia. Seus aliados na √°rea s√£o protegidos por uma aura sombria e recebem +4 na Defesa at√© o fim da cena. Inimigos na √°rea ficam Enjoadopor 1d4 rodadas (apenas uma vez por cena). Anular a Luz anula Dispersar as Trevas (este efeito tem dura√ß√£o instant√¢nea)."}},aprimoramentos:[{custo:2,descricao:"aumenta o b√¥nus na Defesa em +1.",aumenta:!0},{custo:4,descricao:"muda o c√≠rculo m√°ximo de magias dissipadas para 4¬∫. Requer 4¬∫ C√≠rculo.",aumenta:!1},{custo:9,descricao:"muda o c√≠rculo m√°ximo de magias dissipadas para 5¬∫. Requer 5¬∫ C√≠rculo.",aumenta:!1}]},"poeira-da-podridao":{name:"Poeira da Podrid√£o",type:"magia",img:"systems/tormenta20/icons/magias/poeira-da-podridao.webp",system:{circulo:"3",escola:"necromancia",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"nuvem com 6m de raio",resistencia:"Fortitude (veja texto)",custo:"6 PM",description:{value:"Voc√™ manifesta uma nuvem de poeira carregada de energia negativa, que apodrece lentamente as criaturas na √°rea. Ao lan√ßar a magia, e no in√≠cio de seus turnos, criaturas na √°rea sofrem 2d8+8 pontos de dano de trevas (Fortitude reduz √† metade). Alvos que falharem no teste n√£o podem recuperar PV por uma rodada."}},aprimoramentos:[{custo:2,descricao:"aumenta o dano em 1d8+4.",aumenta:!0}]}},transmutacao:{"controlar-agua":{name:"Controlar √Ågua",type:"magia",img:"systems/tormenta20/icons/magias/controlar-agua.webp",system:{circulo:"3",escola:"transmutacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"longo",alvo:"esfera com 30m de raio",resistencia:"Veja texto",custo:"6 PM",description:{value:"Voc√™ controla os movimentos e comportamentos da √°gua. Ao lan√ßar a magia, escolha um dos efeitos abaixo. Congelar: toda a √°gua mundana na √°rea √© congelada. Criaturas nadando na √°rea ficam im√≥veis; escapar exige gastar uma a√ß√£o padr√£o e passar num teste de Atletismo ou Acrobacia. Derreter: gelo mundano na √°rea vira √°gua e a magia termina. A crit√©rio do mestre, isso pode criar terreno dif√≠cil. Enchente: eleva o n√≠vel da √°gua mundana na √°rea em at√© 4,5m. A sua escolha, muda √°rea para alvo: uma embarca√ß√£o. O alvo recebe +3m em seu deslocamento pela dura√ß√£o do efeito. Evaporar: toda a √°gua e gelo mundano na √°rea evaporam instantaneamente e a magia termina. Elementais da √°gua, plantas monstruosas e criaturas com imunidade a frio na √°rea sofrem 10d8 pontos de dano de fogo; outras criaturas vivas recebem metade desse dano (Fortitude reduz √† metade). Partir: diminui o n√≠vel de toda √°gua mundana na √°rea em at√© 4,5m. Em um corpo d'√°gua raso, isso abre um caminho seco, que pode ser atravessado a p√©. Em um corpo d'√°gua profundo, cria um redemoinho que pode prender barcos (um teste de Pilotagem com CD igual √† da magia permite ao piloto livrar a embarca√ß√£o). Elementais da √°gua na √°rea ficam lentos."}},aprimoramentos:[{custo:2,descricao:"aumenta o dano em +2d8.",aumenta:!0}]},"controlar-terra":{name:"Controlar Terra",type:"magia",img:"systems/tormenta20/icons/magias/controlar-terra.webp",system:{circulo:"3",escola:"transmutacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"longo",alvo:"9 cubos com 1,5m de lado",resistencia:"Veja texto",custo:"6 PM",description:{value:"Voc√™ manipula a densidade e a forma de toda terra, pedra, lama, argila ou areia na √°rea. Ao lan√ßar a magia, escolha.Amolecer: se afetar o teto, uma coluna ou suporte, provoca um desabamento que causa 10d6 pontos de dano de impacto √†s criaturas na √°rea (Reflexos reduz √† metade). Se afetar um piso de terra ou pedra, cria terreno dif√≠cil de areia ou argila, respectivamente.Modelar: pode usar pedra ou argila para criar um ou mais objetos simples de tamanho Enorme ou menor (sem mecanismos ou partes m√≥veis). Por exemplo, pode transformar um tijolo em uma ma√ßa, criar uma passagem onde antes havia apenas uma parede ou levantar uma ou mais paredes que oferecem cobertura total (RD 8 e 50 PV para cada 3m).Solidificar: transforma lama ou areia em terra ou pedra. Criaturas com os p√©s na superf√≠cie ficam agarradas. Elas podem se soltar com uma a√ß√£o padr√£o e um teste de Acrobacia ou Atletismo."}},aprimoramentos:[{custo:1,descricao:"aumenta o n√∫mero de cubos de 1,5m em +2.",aumenta:!0},{custo:1,descricao:"muda o alcance para pessoal, o alvo para voc√™ e a dura√ß√£o para 1 dia. Voc√™ e seu equipamento fundem-se a uma superf√≠cie ou objeto adjacente feito de pedra, terra, argila ou areia que possa acomod√°-lo. Voc√™ pode voltar ao espa√ßo adjacente como uma a√ß√£o livre, dissipando a magia. Enquanto mesclado, voc√™ n√£o pode falar ou fazer a√ß√µes f√≠sicas, mas consegue perceber seus arredores normalmente. Pequenos danos n√£o o afetam, mas se o objeto (ou o trecho onde voc√™ est√° imerso) for destru√≠do, a magia √© dissipada, voc√™ volta a um espa√ßo livre adjacente e sofre 10d6 pontos de dano de impacto.",aumenta:!1}]},"potencia-divina":{name:"Pot√™ncia Divina",type:"magia",img:"systems/tormenta20/icons/magias/potencia-divina.webp",system:{circulo:"3",escola:"transmutacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"voc√™",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Voc√™ canaliza o poder de sua divindade. Voc√™ aumenta uma categoria de tamanho (seu equipamento muda de acordo) e recebe For√ßa +4 e RD 10. Voc√™ n√£o pode lan√ßar magias enquanto estiver sob efeito de Pot√™ncia Divina."}},aprimoramentos:[{custo:2,descricao:"aumenta o b√¥nus de For√ßa em +1.",aumenta:!0},{custo:5,descricao:"aumenta a resist√™ncia a dano em +5.",aumenta:!0},{custo:2,descricao:"muda o alcance para toque e o alvo para 1 criatura. A magia falha se voc√™ e o alvo n√£o forem devotos da mesma divindade.",aumenta:!1}]}}},"4-circulo":{abjuracao:{"cupula-de-repulsao":{name:"C√∫pula de Repuls√£o",type:"magia",img:"systems/tormenta20/icons/magias/cupula-de-repulsao.webp",system:{circulo:"4",escola:"abjuracao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"Voc√™",resistencia:"Vontade Anula",custo:"10 PM",description:{value:"Uma c√∫pula de energia invis√≠vel o cerca, impedindo a aproxima√ß√£o de certas criaturas. Escolha um tipo de criatura (animais, esp√≠ritos, monstros...) ou uma ra√ßa de humanoides (elfos, goblins, minotauros..). Criaturas do grupo escolhido que tentem se aproximar a menos de 3m de voc√™ (ou seja, que tentem ficar adjacentes a voc√™) devem fazer um teste de Vontade. Se falharem, n√£o conseguem, gastam a a√ß√£o e s√≥ podem tentar novamente na rodada seguinte. Isso impede ataques corpo a corpo, mas n√£o ataques ou outros efeitos √† dist√¢ncia. Se voc√™ tentar se aproximar al√©m do limite de 3m, rompe a c√∫pula e a magia √© dissipada."}},aprimoramentos:[{custo:2,descricao:"a c√∫pula impede criaturas de se aproximarem a menos de 4,5m de voc√™ (ou seja, deve haver dois quadrados entre voc√™ e as criaturas).",aumenta:!1},{custo:5,descricao:"al√©m do normal, criaturas afetadas tamb√©m precisam fazer o teste de resist√™ncia se fizerem um ataque ou efeito √† dist√¢ncia voc√™. Se falharem, o efeito √© desviado pela c√∫pula. Requer 5¬∫ c√≠rculo.",aumenta:!1}]}},adivinhacao:{premonicao:{name:"Premoni√ß√£o",type:"magia",img:"systems/tormenta20/icons/magias/premonicao.webp",system:{circulo:"4",escola:"adv",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"voc√™",resistencia:"Nenhuma",custo:"10 PM",description:{value:"Vislumbres do futuro permitem que voc√™ reavalie suas a√ß√µes. Uma vez por rodada, voc√™ pode rolar novamente um teste rec√©m realizado, mas deve aceitar o resultado da nova rolagem."}},aprimoramentos:[{custo:3,descricao:"muda a execu√ß√£o para rea√ß√£o, o alcance para curto, o alvo para 1 criatura e a dura√ß√£o para instant√¢nea. Esta magia s√≥ pode ser usada em uma criatura que tenha acabado de fazer um teste. Obriga a criatura a fazer uma nova rolagem de dados e aceitar o novo resultado, seja ele um sucesso ou falha. Criaturas involunt√°rias t√™m direito a um teste de Vontade para negar o efeito.",aumenta:!1}]}},convocacao:{"guardiao-divino":{name:"Guardi√£o Divino",type:"magia",img:"systems/tormenta20/icons/magias/guardiao-divino.webp",system:{circulo:"4",escola:"convocacao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",duracao:"Cena ou at√© ser descarregado",resistencia:"Nenhuma",custo:"10 PM",description:{value:"A magia invoca um elemental Pequeno, com a forma de um orbe feito de luz divina. A criatura √© incorp√≥rea, imune a dano e ilumina como uma tocha. O elemental tem 100 pontos de luz.Uma vez por rodada, durante o seu turno, o elemental pode se movimentar (deslocamento de voo 18m) e gastar quantos pontos de luz quiser para curar dano ou condi√ß√µes de criaturas em alcance curto, √† taxa de 1 PV por 1 ponto de luz ou uma condi√ß√£o por 3 pontos de luz (entre abalado, apavorado, alquebrado, atordoado, cego, confuso, debilitado, enjoado, esmorecido, exausto, fascinado, fatigado, fraco, frustrado, ofuscado, pasmo, sangrando, surdo ou vulner√°vel). A magia √© encerrada quando o elemental fica sem pontos de luz."}}}},encantamento:{"conceder-milagre":{name:"Conceder Milagre",type:"magia",img:"systems/tormenta20/icons/magias/conceder-milagre.webp",system:{circulo:"4",escola:"encantamento",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",duracao:"permanente ou at√© ser descarregada",alvo:"1 criatura",resistencia:"Nenhuma",custo:"10 PM",description:{value:"Voc√™ transfere um pouco de seu poder divino a outra criatura. Escolha uma magia de at√© 2¬∫ c√≠rculo que voc√™ conhe√ßa; o alvo pode lan√ßar essa magia uma vez, sem pagar o custo base dela em PM (aprimoramentos podem ser usados, mas o alvo deve gastar seus pr√≥prios PM). Voc√™ sofre uma penalidade de ‚Äì3 PM at√© que o alvo lance a magia."}},aprimoramentos:[{custo:4,descricao:"muda o c√≠rculo da magia concedida para 3¬∫ e a penalidade de PM para -6.",aumenta:!1}]}},evocacao:{"circulo-da-restauracao":{name:"C√≠rculo da Restaura√ß√£o",type:"magia",img:"systems/tormenta20/icons/magias/circulo-da-restauracao.webp",system:{circulo:"4",escola:"evocacao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",duracao:"5 rodada",alvo:"esfera de 3m de raio",resistencia:"Nenhuma",custo:"10 PM",description:{value:"Voc√™ evoca um c√≠rculo de luz que emana uma energia poderosa. Qualquer criatura viva que termine o turno dentro do c√≠rculo recupera 3d8+3 PV e 1 PM. Mortos-vivos e criaturas que sofrem dano por luz perdem PV e PM na mesma quantidade. Uma criatura pode recuperar no m√°ximo 5 PM por dia com esta magia."}},aprimoramentos:[{custo:2,descricao:"aumenta a regenera√ß√£o de PV em 1d8+1.",aumenta:!0}]},"colera-do-deus-sol":{name:"C√≥lera do Deus-Sol",type:"magia",img:"systems/tormenta20/icons/magias/colera-do-deus-sol.webp",system:{circulo:"4",escola:"evocacao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",duracao:"5 instantanea",alvo:"esfera com 6m de raio",resistencia:"Reflexos Parcial",custo:"10 PM",description:{value:"Voc√™ cria uma explos√£o de luz dourada e intensa. Criaturas na √°rea ficam Cego por 1d4 rodadas e Em Chamas , e sofrem 10d6 pontos de dano de fogo (mortos-vivos sofrem 10d8 pontos de dano). Uma criatura que passe no teste de resist√™ncia n√£o fica cega, nem em chamas e sofre metade do dano."}},aprimoramentos:[{custo:2,descricao:"aumenta o dano em +2d6 (+2d8 contra mortos-vivos).",aumenta:!0},{custo:2,descricao:"aumenta a √°rea em +6m de raio.",aumenta:!0},{custo:5,descricao:"a luz purificadora do Deus-Sol dissipa todas as magias de necromancia ativas na √°rea. Requer 5¬∫ c√≠rculo",aumenta:!1}]},"manto-do-cruzado":{name:"Manto do Cruzado",type:"magia",img:"systems/tormenta20/icons/magias/manto-do-cruzado.webp",system:{circulo:"4",escola:"evocacao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"voc·∫Ω",resistencia:"Nenhuma",custo:"10 PM",description:{value:"Voc√™ invoca o poder de sua divindade na forma de um manto de energia que reveste seu corpo. Esta magia tem duas vers√µes. Voc√™ escolhe qual vers√£o pode lan√ßar quando aprende esta magia. Ela n√£o pode ser mudada. Manto de Luz: um manto dourado e luminoso. No in√≠cio de cada um de seus turnos, voc√™ e todos os seus aliados em alcance curto recuperam 2d8 PV. Voc√™ recebe imunidade a dano de trevas e seus ataques corpo a corpo causam +2d8 pontos de dano de luz. Manto de Trevas: um manto negro como a noite. No in√≠cio de cada um de seus turnos, todos os inimigos em alcance curto sofrem 4d8 pontos de dano de trevas. Voc√™ cura metade de todo o dano causado pela magia."}}},terremoto:{name:"Terremoto",type:"magia",img:"systems/tormenta20/icons/magias/terremoto.webp",system:{circulo:"4",escola:"evocacao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"longo",duracao:"1 rodada",alvo:"esfera com 30m de raio",resistencia:"veja texto",custo:"10 PM",description:{value:"Esta magia devastadora invoca o poder da terra para criar um tremor s√≠smico que rasga o solo em uma √°rea de 30m de raio. O terremoto dura uma rodada completa, durante a qual todas as criaturas sobre o solo ficam atordoadas pela vibra√ß√£o intensa. Barreiras f√≠sicas n√£o interrompem a √°rea do Terremoto - a energia s√≠smica passa atrav√©s de paredes e obst√°culos. O efeito exato varia drasticamente conforme o terreno: CAVERNA/SUBTERR√ÇNEO: O teto desmorona, causando 12d6 pontos de dano de impacto e deixando todas as criaturas agarradas pelos escombros. Reflexos reduz o dano √† metade e evita ficar agarrado. CONSTRU√á√ïES: Estruturas sofrem 200 pontos de dano, suficiente para derrubar constru√ß√µes de madeira ou alvenaria simples (mas n√£o alvenaria refor√ßada). Criaturas em constru√ß√µes que desmoronem sofrem o mesmo efeito de cavernas. ESPA√áO ABERTO: Fendas profundas se abrem aleatoriamente. Role 1d6 para cada criatura - em resultado √≠mpar, uma fenda se abre sob ela. Reflexos evita cair na fenda. Criaturas que ca√≠rem podem escapar com a√ß√£o completa + teste de Atletismo (CD da magia). No in√≠cio do seu pr√≥ximo turno, as fendas se fecham, matando quem estiver dentro. PENHASCOS: Criam desmoronamento horizontal igual √† altura (penhasco de 30m = desmoronamento de 30m). Criaturas no caminho: 12d6 dano de impacto + agarrado (Reflexos reduz dano √† metade e evita agarramento). CORPOS D'√ÅGUA: Fissuras drenam a √°gua, criando lama√ßal. Reflexos evita afundar e ficar agarrado. Fissuras se fecham no pr√≥ximo turno, podendo afogar quem ficou preso. CRIATURAS AGARRADAS sofrem 1d6 dano/rodada at√© serem libertadas (a√ß√£o completa + Atletismo da v√≠tima ou aliado adjacente)."}}}},necromancia:{"ligacao-sombria":{name:"Liga√ß√£o Sombria",type:"magia",img:"systems/tormenta20/icons/magias/ligacao-sombria.webp",system:{circulo:"4",escola:"necromancia",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"longo",duracao:"1 dia",alvo:"1 criatura",resistencia:"Fortitude anula",custo:"10 PM",description:{value:"Cria uma conex√£o entre seu corpo e o da criatura alvo, deixando uma marca id√™ntica na pele de ambos. Enquanto a magia durar, sempre que voc√™ sofrer qualquer dano ou condi√ß√£o, o alvo desta magia deve fazer um teste de Fortitude; se falhar, sofre o mesmo dano que voc√™ ou adquire a mesma condi√ß√£o. A magia termina se o alvo chegar a 0 pontos de vida."}},aprimoramentos:[{custo:5,descricao:"al√©m do normal, o alvo tamb√©m pode morrer por perda de PV ou se voc√™ morrer (um teste de Fortitude anula a morte).",aumenta:!1}]}},transmutacao:{"controlar-o-clima":{name:"Controlar o Clima",type:"magia",img:"systems/tormenta20/icons/magias/controlar-clima.webp",system:{circulo:"4",escola:"transmutacao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"km",duracao:"4d12 horas",alvo:"esfera com 2km de raio",resistencia:"Nenhuma",custo:"10 PM",description:{value:"Voc√™ muda o clima da √°rea onde se encontra, podendo criar qualquer condi√ß√£o clim√°tica: chuva, neve, ventos, n√©voas... Veja o Cap√≠tulo 6: O Mestre para os efeitos em jogo do clima."}},aprimoramentos:[{custo:1,descricao:"(Apenas Druidas): muda o raio da √°rea para 3km e dura√ß√£o para 1d4 dias.",aumenta:!1}]}}},"5-circulo":{abjuracao:{"aura-divina":{name:"Aura Divina",type:"magia",img:"systems/tormenta20/icons/magias/aura-divina.webp",system:{circulo:"5",escola:"abjuracao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"esfera com 9m de raio",resistencia:"Vontade parcial",custo:"15 PM",description:{value:"Voc√™ se torna um condu√≠te da energia de sua divindade, emanando uma aura brilhante. Voc√™ e aliados devotos da mesma divindade ficam imunes a encantamento e recebem +10 na Defesa e em testes de resist√™ncia. Aliados n√£o devotos da mesma divindade recebem+5 na Defesa e em testes de resist√™ncia. Al√©m disso, inimigos que entrem na √°rea afetada devem fazer um teste de Vontade; em caso de falha, recebem uma condi√ß√£o a sua escolha entre Esmorecido, Debilitadoou Lento at√© o fim da cena. O teste deve ser refeito cada vez que a criatura entrar novamente na √°rea."}},aprimoramentos:[{custo:2,descricao:"aumenta os b√¥nus na Defesa e em testes de resist√™ncia em +1.",aumenta:!0}]},"engenho-de-mana":{name:"Engenho de Mana",type:"magia",img:"systems/tormenta20/icons/magias/engenho-de-mana.webp",system:{circulo:"5",escola:"abjuracao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",resistencia:"Nenhuma",custo:"15 PM",description:{value:"Voc√™ cria um disco de energia que lembra uma roda de engenho e flutua no ponto em que foi conjurado. O disco √© imune a dano, n√£o pode ser movido e faz uma contram√°gica autom√°tica contra qualquer magia lan√ßada em alcance m√©dio dele (exceto as suas), usando seu teste de Misticismo. Caso ven√ßa o teste, o engenho n√£o s√≥ anula a magia como absorve os PM usados para lan√ß√°-la, acumulando PM tempor√°rios. No seu turno, se estiver ao alcance do disco, voc√™ pode gastar PM nele para lan√ßar magias."}},aprimoramentos:[{custo:1,descricao:"em vez de flutuar no ponto em que foi conjurado, o disco flutua atr√°s de voc√™, mantendo-se sempre adjacente.",aumenta:!1},{custo:4,descricao:"muda a dura√ß√£o para 1 dia.",aumenta:!1}]},"lagrimas-da-deusa-da-magia":{name:"L√°grimas da Deusa da Magia",type:"magia",img:"systems/tormenta20/icons/magias/lagrimas-da-deusa-da-magia.webp",system:{circulo:"5",escola:"abjuracao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 criatura",resistencia:"Vontade parcial",custo:"15 PM",description:{value:"Se falhar no teste de resist√™ncia, o alvo perde a habilidade de lan√ßar magias arcanas at√© o fim da cena. Se passar, perde a habilidade por uma rodada."}},aprimoramentos:[{custo:2,descricao:"muda a √°rea para esfera de 6m de raio e o alvo para criaturas escolhidas.",aumenta:!1},{custo:5,descricao:"muda a execu√ß√£o para 1 dia e adiciona custo adicional (sacrif√≠cio de 1 PM). O alvo da magia precisa ser mantido em alcance curto do conjurador durante toda a execu√ß√£o. Ao t√©rmino, faz um teste de Vontade. Se falhar, perde a habilidade de lan√ßar magias arcanas permanentemente. Se passar, resiste, mas ainda pode ser alvo da magia no dia seguinte. Nenhum poder mortal √© capaz de reverter essa perda. Os cl√©rigos da deusa da Magia dizem que a deusa chora cada vez que este ritual √© realizado.",aumenta:!1}]}},adivinhacao:{"projetar-consciencia":{name:"Projetar Consci√™ncia",type:"magia",img:"systems/tormenta20/icons/magias/projetar-consciencia.webp",system:{circulo:"5",escola:"adv",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"any",alvo:"local ou criatura conhecidos",resistencia:"Nenhuma",custo:"15 PM",description:{value:"Esta magia faz com que sua consci√™ncia deixe seu corpo e se transporte instantaneamente para um local ou para perto de uma criatura alvo. Se escolher um local, ele precisa ser conhecido por voc√™. Se escolher uma criatura, voc√™ transporta sua consci√™ncia at√© onde a criatura estiver, contanto que estejam no mesmo plano. Voc√™ adquire uma forma fantasmag√≥rica invis√≠vel, mas pode se mostrar sando uma a√ß√£o de movimento. Pode se mover em qualquer dire√ß√£o com deslocamento de voo 18m e, por ser incorp√≥reo, √© capaz de atravessar objetos s√≥lidos, mas fica limitado a se mover dentro dos limites do local, ou dentro de alcance curto da criatura alvo. Voc√™ pode ver e ouvir como se estivesse presente no local e pode falar mentalmente com qualquer criatura que possa ver, contanto que tenham um idioma em comum."}},aprimoramentos:[{custo:10,descricao:"al√©m do normal, sua proje√ß√£o √© capaz de lan√ßar magias que n√£o precisem de componentes materiais e tenham dura√ß√£o diferente de sustentada. Sua forma fantasmag√≥rica funciona como na magia Forma Et√©rea, sendo afetada por magias de abjura√ß√£o e ess√™ncia, mas as magias que ela lan√ßa podem afetar criaturas corp√≥reas.",aumenta:!1}]}},convocacao:{"intervencao-divina":{name:"Interven√ß√£o Divina",type:"magia",img:"systems/tormenta20/icons/magias/intervencao-divina.webp",system:{circulo:"5",escola:"convocacao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"especial",alvo:"veja texto",resistencia:"veja texto",custo:"15 PM",description:{value:"Esta √© a manifesta√ß√£o suprema da f√©, um pedido direto √† sua divindade para que ela intervenha pessoalmente na realidade mortal. Os c√©us se abrem, uma presen√ßa divina desce, e milagres acontecem diante dos olhos de todos. A pr√≥pria divindade responde ao seu chamado, alterando a realidade conforme sua vontade divina. MILAGRES MENORES (sem custo adicional): ‚Ä¢ CURA DIVINA: At√© 10 criaturas em alcance longo s√£o instantaneamente curadas de todos os pontos de vida perdidos e de todas as condi√ß√µes negativas. Uma luz dourada os envolve, restaurando-os completamente. Curiosamente, este poder divino tamb√©m cura mortos-vivos em vez de destru√≠-los, demonstrando a natureza transcendente da interven√ß√£o. ‚Ä¢ BANIMENTO M√ÅGICO: Todos os efeitos de magias de 4¬∫ c√≠rculo ou menor em uma √°rea ampla s√£o instantaneamente dissipados pela presen√ßa divina. MILAGRES MAIORES (custam 2 PM adicionais): ‚Ä¢ CRIA√á√ÉO DIVINA: Sua divindade materializa um item mundano de at√© T$ 30.000 do nada, criado pela vontade divina. ‚Ä¢ DUPLICA√á√ÉO M√ÅGICA: A divindade replica perfeitamente qualquer magia de at√© 4¬∫ c√≠rculo (componentes materiais ainda s√£o necess√°rios). ‚Ä¢ PROTE√á√ÉO CELESTIAL: Uma cidade inteira √© protegida de desastres naturais - vulc√µes param de entrar em erup√ß√£o, enchentes recuam, terremotos cessam. ‚Ä¢ RESSURREI√á√ÉO MILAGROSA: Uma criatura que morreu h√° at√© uma rodada √© trazida de volta √† vida com 1 PV, sua alma sendo literalmente arrancada das garras da morte. MILAGRES EXTRAORDIN√ÅRIOS: Sua divindade pode realizar feitos ainda mais impressionantes, mas sempre de acordo com sua natureza, dom√≠nios e objetivos. Khalmyr pode forjar armas lend√°rias, Marah pode curar pragas inteiras, Wynna pode revelar segredos c√≥smicos. O mestre tem autoridade final sobre esses efeitos, que devem sempre refletir a personalidade e poder da divindade invocada. Lembre-se: voc√™ est√° pedindo a um deus para agir - seja respeitoso e esteja preparado para as consequ√™ncias."}}}},evocacao:{"furia-do-panteao":{name:"F√∫ria do Pante√£o",type:"magia",img:"systems/tormenta20/icons/magias/furia-do-panteao.webp",system:{circulo:"5",escola:"evocacao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"longo",alvo:"cubo de 90m",resistencia:"veja texto",custo:"15 PM",description:{value:"Voc√™ cria uma nuvem de tempestade violenta. Os ventos tornam ataques √† dist√¢ncia imposs√≠veis e fazem a √°rea contar como condi√ß√£o terr√≠vel para lan√ßar magia. Al√©m disso, inimigos na √°rea t√™m a visibilidade reduzida (como a magia N√©voa). Uma vez por turno, voc√™ pode gastar uma a√ß√£o de movimento para gerar um dos efeitosa seguir. Nevasca. Inimigos na √°rea sofrem 10d6 pontos de dano de frio (Fortitude reduz √† metade). A √°rea fica coberta de neve, virando terreno dif√≠cil at√© o fim da cena ou at√© voc√™ usar siroco. Raios. At√© 6 inimigos a sua escolha na √°rea sofrem 10d8 pontos de dano de eletricidade (Reflexos reduz √† metade). Siroco. Transforma a chuva em uma tempestade de areia escaldante. Inimigos na √°rea sofrem 10d6 pontos de dano (metade corte, metade fogo) e ficam Sangrando (Fortitude reduz o dano √† metade e evita a condi√ß√£o). Trov√µes. Inimigos sofrem 10d6 pontos de dano de impacto e ficam Desprevenido por uma rodada (Fortitude reduz o dano √† metade e evita a condi√ß√£o)."}}},"segunda-chance":{name:"Segunda Chance",type:"magia",img:"systems/tormenta20/icons/magias/segunda-chance.webp",system:{circulo:"5",escola:"evocacao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",custo:"15 PM",description:{value:"Um brilho alaranjado, na forma de asas de f√™nix, emana do alvo. Ele recupera 200 pontos de vida e se cura de qualquer das seguintes condi√ß√µes: abalado, apavorado, alquebrado, atordoado, cego, confuso, debilitado, enjoado, envenenado, esmorecido, exausto, fascinado, fatigado, fraco, frustrado, lento, ofuscado, paralisado, pasmo ou surdo."}},aprimoramentos:[{custo:1,descricao:"aumenta a cura em +20 PV.",aumenta:!0},{custo:2,descricao:"muda o alcance para curto e o alvo para at√© 5 criaturas.",aumenta:!1},{custo:5,descricao:"muda o alvo para uma criatura que tenha morrido h√° at√© uma rodada. Esta magia pode cur√°-la.",aumenta:!1}]}},necromancia:{"reanimacao-impura":{name:"Reanima√ß√£o Impura",type:"magia",img:"systems/tormenta20/icons/magias/reanimacao-impura.webp",system:{circulo:"5",escola:"necromancia",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",custo:"15 PM",description:{value:"Voc√™ reanima uma criatura morta recentemente (dentro da mesma cena), trazendo sua alma de volta ao corpo de forma for√ßada. O tipo da criatura muda para morto-vivo, mas ela ret√©m suas mem√≥rias e habilidades de quando estava viva, podendo inclusive lan√ßar magias. A criatura pode pensar e falar livremente, mas obedece cegamente a seus comandos. Quando a cena termina, a criatura volta a ficar morta, mas muitos cl√©rigos malignos usam meios para guardar e preservar o corpo de criaturas poderosas para serem reanimadas dessa forma quando necess√°rio. Se for destru√≠da, a criatura n√£o pode ser reanimada novamente com esta magia."}}},"roubar-a-alma":{name:"Roubar a Alma",type:"magia",img:"systems/tormenta20/icons/magias/roubar-alma.webp",system:{circulo:"5",escola:"necromancia",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 criatura",resistencia:"Vontade parcial",custo:"15 PM",description:{value:'Voc√™ rouba a alma da v√≠tima, armazenando-a em um objeto. Se o alvo passar no teste de resist√™ncia, sente o impacto de sua alma ser puxada para fora do corpo e fica Abaladopor 1 rodada. Se falhar, seu corpo fica ca√≠do, Inconscientee inerte, enquanto sua alma √© transportada para dentro do objeto. O corpo n√£o envelhece nem se decomp√µe, permanecendo em estase. Ele pode ser atacado e destru√≠do normalmente. O objeto escolhido deve custar T$ 1.000 por n√≠vel ou ND da criatura e n√£o possuir uma alma presa ou se quebrar√° quando a magia for lan√ßada (embora personagens n√£o conhe√ßam o conceito de "n√≠vel" dentro do mundo de jogo, podem ter no√ß√£o do poder geral de uma criatura, estimando assim o valor do objeto). Se o objeto for destru√≠do, a magia se esvai. Se o corpo ainda estiver dispon√≠vel, a alma retorna para ele. Caso contr√°rio, escapa para os Mundos dos Deuses. Custo adicional: sacrif√≠cio de 1 PM.'}},aprimoramentos:[{custo:5,descricao:"o objeto que abriga a alma det√©m os mesmos PM totais que o alvo. Se estiver empunhando o objeto, voc√™ pode usar esses PM para lan√ßar magias no lugar dos seus. O objeto recupera PM por dia como se o personagem estivesse em descanso normal.",aumenta:!1},{custo:10,descricao:"como uma rea√ß√£o ao lan√ßar esta magia, voc√™ possui o corpo sem alma do alvo, como na magia Possess√£o (mesmo que n√£o conhe√ßa a magia).",aumenta:!1}]}}}},universal:{"1-circulo":{abjuracao:{"resistencia-a-energia":{name:"Resist√™ncia √† Energia",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_resistnature.jpg",system:{circulo:"1",escola:"abjuracao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Ao lan√ßar esta magia, escolha entre √°cido, eletricidade, fogo, frio, luz ou trevas. O alvo recebe redu√ß√£o de dano 10 contra o tipo de dano escolhido."}},aprimoramentos:[{custo:2,descricao:"muda a dura√ß√£o para 1 dia. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:5,descricao:"muda o alcance para curto e o alvo para criaturas escolhidas. Requer 3¬∫ c√≠rculo.",aumenta:!1},{custo:5,descricao:"muda o efeito para redu√ß√£o de dano contra todos os tipos listados na magia. Requer 3¬∫ c√≠rculo.",aumenta:!1},{custo:9,descricao:"muda o efeito para imunidade a um tipo listado na magia. Requer 4¬∫ c√≠rculo",aumenta:!1},{custo:0,descricao:"Resist√™ncia a √Åcido",aumenta:!1},{custo:0,descricao:"Resist√™ncia a Eletricidade",aumenta:!1},{custo:0,descricao:"Resist√™ncia a Fogo",aumenta:!1},{custo:0,descricao:"Resist√™ncia a Frio",aumenta:!1},{custo:0,descricao:"Resist√™ncia a Luz",aumenta:!1},{custo:0,descricao:"Resist√™ncia a Trevas",aumenta:!1},{custo:2,descricao:"aumenta a resist√™ncia a √°cido em +5.",aumenta:!0},{custo:2,descricao:"aumenta a resist√™ncia a eletricidade em +5",aumenta:!0},{custo:2,descricao:"aumenta a resist√™ncia a fogo em +5",aumenta:!0},{custo:2,descricao:"aumenta a resist√™ncia a frio em +5",aumenta:!0},{custo:2,descricao:"aumenta a resist√™ncia a luz em +5",aumenta:!0},{custo:2,descricao:"aumenta a resist√™ncia a trevas em +5",aumenta:!0}]}},adivinhacao:{aviso:{name:"Aviso",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_arcane_arcane05.jpg",system:{circulo:"1",escola:"adv",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"move"},alcance:"longo",alvo:"1 criatura",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Envia um aviso telep√°tico para uma criatura, mesmo que n√£o possa v√™-la nem tenha linha de efeito. Escolha um: Alerta: o alvo recebe +5 em seu pr√≥ximo teste de Iniciativa e de Percep√ß√£o dentro da cena. Mensagem: o alvo recebe uma mensagem sua de at√© 25 palavras. Voc√™s devem ter um idioma em comum para o alvo poder entend√™-lo. Localiza√ß√£o: o alvo sabe onde voc√™ est√° naquele momento. Se voc√™ mudar de posi√ß√£o, ele n√£o saber√°."}},aprimoramentos:[{custo:2,descricao:"se escolher localiza√ß√£o, muda a dura√ß√£o para cena. O alvo sabe onde voc√™ est√° mesmo que voc√™ mude de posi√ß√£o.",aumenta:!1},{custo:3,descricao:"aumenta o n√∫mero de alvos em +1.",aumenta:!0}]},compreensao:{name:"Compreens√£o",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_arcane_arcane06.jpg",system:{circulo:"1",escola:"adv",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura ou texto",resistencia:"Vontade anula (veja descri√ß√£o)",custo:"1 PM",description:{value:"Esta magia confere a voc√™ uma compreens√£o sobrenatural. Voc√™ pode tocar um texto e entender as palavras, mesmo que n√£o conhe√ßa o idioma. Se tocar uma criatura inteligente, pode se comunicar com ela, mesmo que n√£o tenham um idioma em comum. Se tocar uma criatura n√£o inteligente, como um animal, pode perceber seus sentimentos. Al√©m disso, voc√™ pode gastar uma a√ß√£o de movimento para ouvir os pensamentos de uma criatura tocada. Um alvo involunt√°rio tem direito a um teste de Vontade para proteger seus pensamentos e evitar este efeito."}},aprimoramentos:[{custo:2,descricao:"muda o alcance para curto e o alvo para criaturas escolhidas. Voc√™ pode entender todas as criaturas afetadas, mas s√≥ pode ouvir os pensamentos de uma por vez.",aumenta:!1},{custo:2,descricao:"muda o alvo para 1 criatura. Em vez do normal, pode vasculhar os pensamentos do alvo para extrair informa√ß√µes. O alvo tem direito a um teste de Vontade para anular este efeito. O mestre decide se a criatura sabe ou n√£o a informa√ß√£o que voc√™ procura. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:5,descricao:"muda o alcance para pessoal e o alvo para voc√™. Em vez do normal, voc√™ pode falar, entender e escrever qualquer idioma. Requer 3¬∫ c√≠rculo.",aumenta:!1}]},"visao-mistica":{name:"Vis√£o M√≠stica",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_arcane_arcane07.jpg",system:{circulo:"1",escola:"adv",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"voc√™",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Seus olhos brilham com uma luz azul e passam a enxergar auras m√°gicas. Este efeito √© similar ao uso de Misticismo para detectar magia, mas voc√™ detecta todas as auras m√°gicas em alcance m√©dio e recebe todas as informa√ß√µes sobre elas sem gastar a√ß√µes. Al√©m disso, voc√™ pode gastar uma a√ß√£o de movimento para descobrir se uma criatura que possa perceber em alcance m√©dio √© capaz de lan√ßar magias e qual a aura gerada pelas magias de c√≠rculo mais alto que ela pode lan√ßar."}},aprimoramentos:[{custo:2,descricao:"muda a dura√ß√£o para 1 dia.",aumenta:!1},{custo:2,descricao:"tamb√©m pode enxergar objetos e criaturas invis√≠veis. Eles aparecem como formas transl√∫cidas.",aumenta:!1}]}},convocacao:{nevoa:{name:"N√©voa",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_fog.jpg",system:{circulo:"1",escola:"convocacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",resistencia:"Nenhuma",custo:"1 PM",description:{value:"Uma n√©voa espessa eleva-se de um ponto a sua escolha, obscurecendo toda a vis√£o ‚Äî criaturas a at√© 1,5m t√™m camuflagem e criaturas a partir de 3m t√™m camuflagem total. Um vento forte dispersa a n√©voa em 4 rodadas e um vendaval a dispersa em 1 rodada. Esta magia n√£o funciona sob a √°gua."}},aprimoramentos:[{custo:2,descricao:"voc√™ pode escolher criaturas no alcance ao lan√ßar a magia; elas enxergam atrav√©s do efeito. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:2,descricao:"a nuvem tem um cheiro horr√≠vel. No in√≠cio de seus turnos, qualquer criatura dentro dela, ou qualquer criatura com faro em alcance curto da nuvem, deve fazer um teste de Fortitude. Se falhar, fica enjoada por uma rodada.",aumenta:!1},{custo:2,descricao:"a nuvem tem um tom esverdeado e se torna c√°ustica. No in√≠cio de seus turnos, criaturas dentro dela sofrem 2d4 pontos de dano de √°cido.",aumenta:!1},{custo:3,descricao:"aumenta o dano de √°cido em +2d4.",aumenta:!0},{custo:5,descricao:"al√©m do normal, a nuvem fica espessa, quase s√≥lida. Qualquer criatura dentro dela tem seu deslocamento reduzido para 3m (independentemente de seu deslocamento normal) e sofre -2 em testes de ataque e rolagens de dano.",aumenta:!1}]}},evocacao:{luz:{name:"Luz",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_light.jpg",system:{circulo:"1",escola:"evocacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 objeto",resistencia:"Vontade anula (veja texto)",custo:"1 PM",description:{value:"O alvo emite luz (mas n√£o produz calor) em uma √°rea com 6m de raio. O objeto pode ser guardado (em um bolso, por exemplo) para interromper a luz, que voltar√° a funcionar caso o objeto seja revelado. Se lan√ßar a magia num objeto de uma criatura involunt√°ria, ela tem direito a um teste de Vontade para anul√°-la. Luz anula Escurid√£o."}},aprimoramentos:[{custo:2,descricao:"muda a dura√ß√£o para 1 dia.",aumenta:!1},{custo:2,descricao:"muda a dura√ß√£o para permanente e adiciona componente material (p√≥ de rubi no valor de T$ 50). Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:0,descricao:"(Apenas Arcanos): muda o alvo para 1 criatura. Voc√™ lan√ßa a magia nos olhos do alvo, que fica ofuscado pela cena. N√£o afeta criaturas cegas.",aumenta:!1},{custo:2,descricao:"(Apenas Arcanos): muda o alcance para longo e o efeito para cria 4 pequenos globos flutuantes de pura luz. Voc√™ pode posicionar os globos onde quiser dentro do alcance. Voc√™ pode enviar um √† frente, outra para tr√°s, outra para cima e manter um perto de voc√™, por exemplo. Uma vez por rodada, voc√™ pode mover os globos com uma a√ß√£o livre. Cada um ilumina como uma tocha, mas n√£o produz calor. Se um globo ocupar o espa√ßo de uma criatura, ela fica ofuscada e sua silhueta pode ser vista claramente (ela n√£o recebe camuflagem por escurid√£o ou invisibilidade). Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:2,descricao:"(Apenas Divinos): a luz √© c√°lida como a do sol. Criaturas que sofrem penalidades e dano pela luz solar sofrem seus efeitos como se estivessem expostos √† luz solar real. Seus aliados na √°rea estabilizam automaticamente e ficam imunes √† condi√ß√£o sangrando, e seus inimigos ficam ofuscados. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:5,descricao:"(Apenas Divinos): muda o alcance para toque e o alvo para 1 criatura. Em vez do normal, o alvo √© envolto por um halo de luz, recebendo +10 em testes de Diplomacia e resist√™ncia a trevas 10. Requer 2¬∫ c√≠rculo.",aumenta:!1}]}},necromancia:{escuridao:{name:"Escurid√£o",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_darkness.jpg",system:{circulo:"1",escola:"necromancia",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 objeto",resistencia:"Vontade anula (veja texto)",custo:"1 PM",description:{value:"O alvo emana sombras em uma √°rea com 6m de raio. Criaturas dentro da √°rea recebem camuflagem leve por escurid√£o leve. As sombras n√£o podem ser iluminadas por nenhuma fonte de luz natural. O objeto pode ser guardado (em um bolso, por exemplo) para interromper a escurid√£o, que voltar√° a funcionar caso o objeto seja revelado. Se lan√ßar a magia num objeto de uma criatura involunt√°ria, ela tem direito a um teste de Vontade para anul√°-la. Escurid√£o anula Luz."}},aprimoramentos:[{custo:2,descricao:"muda o efeito para fornecer camuflagem total por escurid√£o total. As sombras bloqueiam a vis√£o na √°rea e atrav√©s dela.",aumenta:!1},{custo:3,descricao:"muda a dura√ß√£o para 1 dia.",aumenta:!1},{custo:2,descricao:"muda o alvo para 1 criatura e a resist√™ncia para Fortitude parcial. Voc√™ lan√ßa a magia nos olhos do alvo, que fica cego pela cena. Se passar na resist√™ncia, fica cego por 1 rodada. Requer 2¬∫ c√≠rculo.",aumenta:!1},{custo:5,descricao:"muda o alcance para pessoal e o alvo para voc√™. Em vez do normal, voc√™ √© coberto por sombras, recebendo +10 em testes de Furtividade e camuflagem leve. Requer 2¬∫ c√≠rculo.",aumenta:!1}]}},transmutacao:{"arma-magica":{name:"Arma M√°gica",type:"magia",img:"https://wow.zamimg.com/images/wow/icons/large/spell_arcane_arcane08.jpg",system:{circulo:"1",escola:"transmutacao",ativacao:{custo:1,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 arma empunhada",resistencia:"Nenhuma",custo:"1 PM",description:{value:"A arma fornece um b√¥nus de +1 nos testes de ataque e rolagens de dano e √© considerada m√°gica (n√£o cumulativo com b√¥nus de encantos). Caso voc√™ esteja empunhando a arma, pode usar seu atributo-chave de magias em vez do atributo original nos testes de ataque (n√£o cumulativo com efeitos que somam este atributo)."}},aprimoramentos:[{custo:2,descricao:"aumenta o b√¥nus em +1 (b√¥nus m√°ximo limitado pelo c√≠rculo m√°ximo de magia que voc√™ pode lan√ßar).",aumenta:!0},{custo:2,descricao:"a arma passa a causar +1d6 de dano de √°cido, eletricidade, fogo ou frio, escolhido no momento em que a magia √© lan√ßada. Este aprimoramento s√≥ pode ser usado uma vez.",aumenta:!1},{custo:5,descricao:"muda o b√¥nus de dano do aprimoramento elemental para +2d6. (Custo do aprimoramento incluso)",aumenta:!1},{custo:0,descricao:"Arma M√°gica",aumenta:!1}]}}},"2-circulo":{abjuracao:{"dissipar-magia":{name:"Dissipar Magia",type:"magia",img:"systems/tormenta20/icons/magias/dissipar-magia.webp",system:{circulo:"2",escola:"abjuracao",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",alvo:"1 criatura ou 1 objeto m√°gico",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Voc√™ dissipa outras magias que estejam ativas, como se sua dura√ß√£o tivesse acabado. Note que efeitos de magias instant√¢neas n√£o podem ser dissipados (n√£o se pode dissipar uma Bola de Fogo ou Rel√¢mpago depois que j√° causaram dano...). Se lan√ßar essa magia em uma criatura ou √°rea, fa√ßa um teste de Misticismo; voc√™ dissipa as magias com CD igual ou menor que o resultado do teste. Se lan√ßada contra um item m√°gico, o transforma em um item mundano por 1d6 rodadas (Vontade anula)."}},aprimoramentos:[{custo:12,descricao:"muda a √°rea para esfera com 9m de raio. Em vez do normal, cria um\nefeito de disjun√ß√£o. Todas as magias na √°rea s√£o automaticamente dissipadas e todos os itens m√°gicos na √°rea, exceto aqueles que voc√™ estiver carregando, viram itens mundanos por uma cena (com direito a um teste de Vontade para evitar esse efeito). Requer 5¬∫ c√≠rculo.",aumenta:!1}]},"runa-de-protecao":{name:"Runa de Prote√ß√£o",type:"magia",img:"systems/tormenta20/icons/magias/runa-de-protecao.webp",system:{circulo:"2",escola:"abjuracao",ativacao:{custo:3,qtd:"1","condi√ß√£o":"",special:"",execucao:"hora"},alcance:"toque",duracao:"permanente at√© ser descarregada",alvo:"uma √°rea com 6m de raio",resistencia:"varia (veja o texto)",custo:"3 PM",description:{value:"Voc√™ escreve uma runa pessoal em uma superf√≠cie fixa, como uma parede ou o ch√£o, que protege uma pequena √°rea ao redor. Quando uma criatura entra na √°rea afetada a runa explode, causando 6d6 pontos de dano em todos os alvos a at√© 6m. A criatura que ativa a runa n√£o tem direito a teste de resist√™ncia; outras criaturas na √°rea t√™m direito a um teste de Reflexos para reduzir o dano √† metade. Quando lan√ßa a magia, voc√™ escolhe o tipo de dano, entre √°cido, eletricidade, fogo, frio, luz ou trevas. Voc√™ pode determinar que a runa se ative apenas em condi√ß√µes espec√≠ficas ‚Äî por exemplo, apenas por goblins ou apenas por mortos-vivos. Voc√™ tamb√©m pode criar uma palavra m√°gica que impe√ßa a runa de se ativar. Um personagem pode encontrar a runa com um teste de Investiga√ß√£o e desarm√°-la com um teste de Ladinagem (CD da magia). Componente material: p√≥ de diamante no valor de T$ 200, com o qual o conjurador desenha a runa, que brilha por alguns instantes e depois se torna praticamente invis√≠vel."}},aprimoramentos:[{custo:1,descricao:"aumenta o dano em +2d6.",aumenta:!0},{custo:1,descricao:'muda o alvo para "voc√™" e o alcance para "pessoal". Ao inv√©s do normal, escolha uma magia de 1¬∫ c√≠rculo que voc√™ conhece e pode lan√ßar, com tempo de execu√ß√£o de uma a√ß√£o padr√£o ou menor. Voc√™ escreve a runa em seu corpo e especifica uma condi√ß√£o de ativa√ß√£o como, por exemplo, "quando eu for alvo de um ataque" ou "quando for alvo de uma magia". Quando a condi√ß√£o for cumprida, voc√™ pode ativar a runa e lan√ßar a magia escolhida como uma rea√ß√£o. Voc√™ s√≥ pode escrever uma runa em seu corpo ao mesmo tempo.',aumenta:!1}]}},convocacao:{"preparacao-de-batalha":{name:"Prepara√ß√£o de Batalha",type:"magia",img:"systems/tormenta20/icons/magias/preparacao-de-batalha.webp",system:{circulo:"2",escola:"convocacao",ativacao:{custo:3,qtd:"","condi√ß√£o":"Custo Adicional: penalidade de 1 PM",special:"",execucao:"acao"},alcance:"toque",duracao:"Permanente at√© ser descarregada",alvo:"at√© dois itens que voc√™ possua, entre armas, armaduras e escudos",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Custo Adicional: penalidade de 1 PM Essa magia √© muito utilizada por cl√©rigos e bardos que n√£o precisam (ou n√£o podem) estar sempre com suas armas ou armaduras. A magia √© lan√ßada sobre at√© dois itens que voc√™ possua. A partir da√≠, em qualquer momento, voc√™ pode usar uma a√ß√£o completa para convocar os itens, que aparecem sobre seu corpo e em suas m√£os. O efeito √© espalhafatoso, sendo praticamente imposs√≠vel utiliz√°-lo sem chamar aten√ß√£o. A magia funciona independentemente da dist√¢ncia dos itens, contanto que estejam no mesmo plano, mas termina se voc√™ perder a posse deles."}},aprimoramentos:[{custo:1,descricao:"Aumenta o n√∫mero de alvos em dois e o custo adicional em 1 PM.",aumenta:!1}]}},encantamento:{"marca-da-obediencia":{name:"Marca da Obedi√™ncia",type:"magia",img:"systems/tormenta20/icons/magias/marca-da-obediencia.webp",system:{circulo:"2",escola:"encantamento",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Vontade anula",custo:"3 PM",description:{value:'Voc√™ toca uma criatura, gravando uma marca m√≠stica no corpo dela enquanto profere uma ordem, como "n√£o ataque a mim ou meus aliados", "siga-me" ou "n√£o saia desta sala". A criatura deve seguir essa ordem, gastando todas as a√ß√µes de seu turno para isso. A ordem n√£o pode ser gen√©rica demais (como "ajude-me", por exemplo), nem for√ßar o alvo a atos suicidas. A cada rodada, o alvo pode fazer um teste de Vontade. Se passar, a magia √© dissipada.'}}}},necromancia:{"conjurar-mortos-vivos":{name:"Conjurar Mortos-Vivos",type:"magia",img:"systems/tormenta20/icons/magias/conjurar-mortos-vivos.webp",system:{circulo:"2",escola:"necromancia",ativacao:{custo:3,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"curto",resistencia:"Nenhuma",custo:"3 PM",description:{value:"Voc√™ conjura seis esqueletos capangas de tamanho M√©dio feitos de energia negativa em espa√ßos desocupados dentro do alcance. Voc√™ pode gastar uma a√ß√£o de movimento para fazer os mortos-vivos andarem (eles t√™m deslocamento 9m) ou uma a√ß√£o padr√£o para faz√™-los causar dano a criaturas adjacentes (1d6+2 pontos de dano de trevas cada). Os esqueletos t√™m For 2, Des 2, Defesa 18 e todos os outros atributos nulos; eles t√™m 1 PV e falham automaticamente em qualquer teste de resist√™ncia ou oposto, mas s√£o imunes a atordoamento, dano n√£o letal, doen√ßa, encantamento, fadiga, frio, ilus√£o, paralisia, sono e veneno. Eles desaparecem quando s√£o reduzidos a 0 PV ou no fim da cena. Os mortos- -vivos n√£o agem sem receber uma ordem. Usos criativos para capangas fora de combate ficam a crit√©rio do mestre. Carni√ßal: como esqueletos, mas t√™m For 3, Des 3, Defesa 27 e causam 1d8+3 pontos de dano de trevas mais perda de 1d8 PV por veneno. Al√©m disso, criaturas atingidas por um carni√ßal devem passar num teste de Fortitude ou ficam Paralisado por 1 rodada. Uma criatura que passe no teste de resist√™ncia fica imune √† paralisia dos carni√ßais por um dia. Sombra: como esqueletos, mas t√™m Des 4, Defesa 35, a habilidade incorp√≥reo e causam 2d10 pontos de dano de trevas. Al√©m disso, criaturas vivas atingidas por uma sombra devem passar num teste de Fortitude ou perdem 1d4 PM. Sombras perdem a habilidade incorp√≥reo quando expostas √† luz do sol."}},aprimoramentos:[{custo:2,descricao:"aumenta o n√∫mero de mortos-vivos conjurados em +1.",aumenta:!0},{custo:7,descricao:"em vez de esqueletos, conjura sombras. Requer 4¬∫ c√≠rculo.",aumenta:!1}]}}},"3-circulo":{adivinhacao:{"lendas-e-historias":{name:"Lendas e Hist√≥rias",type:"magia",img:"systems/tormenta20/icons/magias/lendas-historias.webp",system:{circulo:"3",escola:"adv",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 craitura, objeto ou local",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Voc√™ descobre informa√ß√µes sobre uma criatura, objeto ou local que esteja tocando. O que exatamente voc√™ descobre depende do mestre: talvez voc√™ n√£o descubra tudo que h√° para saber, mas ganhe pistas para continuar a investiga√ß√£o. A cada rodada que mantiver a magia, voc√™ descobre: Todas as informa√ß√µes sobre o alvo, como se tivesse passado em todos os testes de Conhecimento para tal. Todas as habilidades do alvo. Se for uma criatura, voc√™ sabe suas estat√≠sticas de jogo como ra√ßa, classe, n√≠vel, atributos, magias, resist√™ncias e fraquezas. Se for um item m√°gico, aprende seu efeito e funcionamento. Se o alvo est√° sob influ√™ncia de alguma magia e todas as informa√ß√µes sobre as magias ativas, se houver alguma."}},aprimoramentos:[{custo:4,descricao:"muda a execu√ß√£o para 1 dia, o alcance para ilimitado e adiciona componente material (cuba de ouro cheia d'√°gua e ingredientes m√°gicos, no valor de T$ 1.000). Voc√™ ainda precisa ter alguma informa√ß√£o sobre o alvo, como um nome, descri√ß√£o ou localiza√ß√£o.",aumenta:!1}]},videncia:{name:"Vid√™ncia",type:"magia",img:"systems/tormenta20/icons/magias/videncia.webp",system:{circulo:"3",escola:"adv",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"any",alvo:"1 criatura",resistencia:"Vontade anula",custo:"6 PM",description:{value:"Atrav√©s de uma superf√≠cie reflexiva (bacia de √°gua benta para cl√©rigos, lago para druidas, bola de cristal para magos, espelho para feiticeiros etc.) voc√™ pode ver e ouvir uma criatura escolhida e seus arredores (cerca de 6m em qualquer dire√ß√£o), mesmo que ela se mova. O alvo pode estar a qualquer dist√¢ncia, mas se passar em um teste de Vontade, a magia falha. A v√≠tima recebe b√¥nus ou penalidades em seu teste de resist√™ncia, dependendo do conhecimento que voc√™ tiver dela.N√£o conhece o alvo: +10.Ouviu falar do alvo: +5.O alvo est√° em outro plano ou mundo: +5.J√° encontrou o alvo pessoalmente: +0.Tem uma pintura, escultura ou outra representa√ß√£o do alvo: ‚Äì2.Conhece bem o alvo: ‚Äì5.Tem um pertence pessoal ou pe√ßa de roupa do alvo: ‚Äì5.Tem uma parte do corpo do alvo (unhas, cabelos...): ‚Äì10."}}}},encantamento:{imobilizar:{name:"Imobilizar",type:"magia",img:"systems/tormenta20/icons/magias/imobilizar.webp",system:{circulo:"3",escola:"encantamento",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 human√≥ide ou animal",resistencia:"Vontade parcial",custo:"6 PM",description:{value:"Esta magia paralisa o alvo com energia m√°gica. Se falhar no teste de resist√™ncia, o alvo fica com a condi√ß√£o Paralisado (n√£o pode realizar a√ß√µes, fica indefeso e automaticamente falha em testes de Reflexos). Se passar no teste de resist√™ncia, em vez disso fica com a condi√ß√£o Lento (pode realizar apenas uma a√ß√£o padr√£o ou de movimento por turno, n√£o ambas). A cada rodada, o alvo pode gastar uma a√ß√£o completa para fazer um novo teste de Vontade. Se passar, se liberta completamente do efeito."}},aprimoramentos:[{custo:1,descricao:"muda o alvo para 1 esp√≠rito.",aumenta:!1},{custo:2,descricao:"aumenta o n√∫mero de alvos em +1.",aumenta:!0},{custo:3,descricao:"muda o alvo para 1 criatura. Requer 4¬∫ c√≠rculo",aumenta:!1}]},"selo-de-mana":{name:"Selo de Mana",type:"magia",img:"systems/tormenta20/icons/magias/selo-de-mana.webp",system:{circulo:"3",escola:"encantamento",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Vontade Parcial",custo:"6 PM",description:{value:"Seu toque manifesta um selo m√°gico na pele do alvo, que atrapalha o fluxo de mana. Pela dura√ß√£o da magia, sempre que o alvo realizar qualquer a√ß√£o que gaste PM, deve fazer um teste de Vontade; se passar, faz a a√ß√£o normalmente. Se falhar, a a√ß√£o n√£o tem efeito (mas os PM s√£o gastos mesmo assim)."}},aprimoramentos:[{custo:4,descricao:"muda o alcance para curto e o alvo para criaturas escolhidas dentro do alcance. Requer 4¬∫ c√≠rculo.",aumenta:!1}]}},ilusao:{"manto-de-sombras":{name:"Manto de Sombras",type:"magia",img:"systems/tormenta20/icons/magias/manto-de-sombras.webp",system:{circulo:"3",escola:"ilusao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"voc√™",resistencia:"Nenhuma",custo:"6 PM",description:{value:'Voc√™ fica coberto por um manto de energia sombria. Nesta forma, torna-se incorp√≥reo (inclui seu equipamento): s√≥ pode ser afetado por armas m√°gicas, ou por outras criaturas incorp√≥reas e pode atravessar objetos s√≥lidos, mas n√£o manipul√°-los. Tamb√©m n√£o pode atacar criaturas normais (mas ainda pode lan√ßar magias nelas). Al√©m disso, se torna vulner√°vel √† luz direta: se exposto a uma fonte de luz, sofre 1 ponto de dano por rodada. Voc√™ pode gastar uma a√ß√£o de movimento e 1 PM para "entrar" em uma sombra do seu tamanho ou maior e se teletransportar para outra sombra, tamb√©m do seu tamanho ou maior, em alcance m√©dio.'}},aprimoramentos:[{custo:4,descricao:"muda o alcance para toque e o alvo para 1 criatura. Requer 4¬∫ c√≠rculo.",aumenta:!1}]}},necromancia:{"servo-morto-vivo":{name:"Servo Morto-Vivo",type:"magia",img:"systems/tormenta20/icons/magias/servo-morto-vivo.webp",system:{circulo:"3",escola:"necromancia",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"toque",alvo:"1 cad√°ver",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Esta magia transforma o cad√°ver de um humanoide, animal ou monstro em um morto-vivo sob seu controle. Se o corpo estiver bem preservado, torna-se um zumbi; se estiver em decomposi√ß√£o avan√ßada ou for apenas ossos, torna-se um esqueleto. O morto-vivo criado obedece a todos os seus comandos mentais, mesmo ordens suicidas, e n√£o precisa de descanso, comida ou ar. Se desejar que o morto-vivo o acompanhe em aventuras, ele funciona como um aliado iniciante, de um tipo √† sua escolha entre ajudante, atirador, combatente, fort√£o, guardi√£o ou montaria. Uma vez por rodada, quando voc√™ sofrer dano, pode sacrificar um servo morto-vivo sob seu controle para evitar completamente esse dano. O servo √© destru√≠do no processo e n√£o pode ser reanimado novamente. Voc√™ pode controlar um n√∫mero de servos mortos-vivos igual ao seu modificador de atributo-chave. Componente material: um √¥nix negro (T$ 100), que deve ser inserido na boca ou olho do cad√°ver durante o ritual."}},aprimoramentos:[{custo:3,descricao:"muda o componente material para p√≥ de √¥nix negro (T$ 500). Em vez de um zumbi ou esqueleto, cria um carni√ßal. Ele pode funcionar como um aliado veterano, escolhido entre ajudante, atirador, combatente, fort√£o ou guardi√£o. O resto segue normal.",aumenta:!1},{custo:3,descricao:"muda o componente material para p√≥ de √¥nix negro (T$ 500). Em vez de um zumbi ou esqueleto, cria uma sombra. Ela pode funcionar como um aliado veterano, escolhido entre assassino, combatente ou perseguidor. O restante da magia segue normal.",aumenta:!1},{custo:7,descricao:"muda o componente material para ferramentas de embalsamar (T$ 1.000). Em vez de um zumbi ou esqueleto, cria uma m√∫mia. Ela pode funcionar como um aliado mestre, escolhido entre ajudante, destruidor, guardi√£o ou m√©dico. O restante da magia segue normal. Requer 4¬∫ c√≠rculo.",aumenta:!1}]}},transmutacao:{"pele-de-pedra":{name:"Pele de Pedra",type:"magia",img:"systems/tormenta20/icons/magias/pele-de-pedra.webp",system:{circulo:"3",escola:"transmutacao",ativacao:{custo:6,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"voc√™",resistencia:"Nenhuma",custo:"6 PM",description:{value:"Sua pele ganha aspecto e dureza de rocha, tornando-se mais resistente a ferimentos. Voc√™ recebe redu√ß√£o de dano 5, reduzindo em 5 pontos todo dano f√≠sico (corte, impacto e perfura√ß√£o) que sofrer. Esta redu√ß√£o n√£o se aplica a dano de energia (fogo, frio, eletricidade, √°cido, trevas, luz) ou dano mental."}},aprimoramentos:[{custo:1,descricao:"muda o alcance para toque e o alvo para 1 criatura.",aumenta:!1},{custo:4,descricao:"muda a dura√ß√£o para 1 dia.",aumenta:!1},{custo:4,descricao:"sua pele ganha aspecto e dureza de a√ßo. Voc√™ recebe resist√™ncia a dano 10. Requer 4¬∫ c√≠rculo.",aumenta:!1},{custo:4,descricao:"muda o alcance para toque, o alvo para 1 criatura, a dura√ß√£o para 1d4 rodadas e adiciona Resist√™ncia: Fortitude anula. Em vez do efeito normal, a magia transforma o alvo e seu equipamento em uma est√°tua inerte e sem consci√™ncia. A est√°tua possui os mesmos PV da criatura e resist√™ncia a dano 8; se for quebrada, a criatura morrer√°. Requer 4¬∫ c√≠rculo.",aumenta:!1},{custo:9,descricao:"como acima, mas com dura√ß√£o permanente. Requer 5¬∫ c√≠rculo.",aumenta:!1}]}}},"4-circulo":{abjuracao:{libertacao:{name:"Liberta√ß√£o",type:"magia",img:"systems/tormenta20/icons/magias/libertacao.webp",system:{circulo:"4",escola:"abjuracao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",alvo:"1 criatura",resistencia:"Nenhuma",custo:"10 PM",description:{value:"O alvo fica imune a efeitos de movimento e ignora qualquer efeito que impe√ßa ou restrinja seu deslocamento. Por fim, pode usar habilidades que exigem liberdade de movimentos mesmo se estiver usando armadura ou escudo."}},aprimoramentos:[{custo:2,descricao:"al√©m do normal, o alvo pode caminhar sobre a √°gua ou outros l√≠quidos com seu deslocamento normal. Entretanto, isso n√£o protege contra qualquer efeito que o l√≠quido possa causar (o alvo pode andar sobre lava, mas ainda vai sofrer dano).",aumenta:!1},{custo:2,descricao:"al√©m do normal, o alvo pode escolher 20 em todos os testes de Atletismo.",aumenta:!1},{custo:2,descricao:"al√©m do normal, o alvo pode escolher 20 em todos os testes de Acrobacia e pode fazer todas as manobras desta per√≠cia mesmo sem treinamento.",aumenta:!1},{custo:5,descricao:"muda o alcance para curto e o alvo para at√© 5 criaturas.",aumenta:!1},{custo:5,descricao:"pode dissipar Aprisionamento.",aumenta:!1}]}},adivinhacao:{"visao-da-verdade":{name:"Vis√£o da Verdade",type:"magia",img:"systems/tormenta20/icons/magias/visao-da-verdade.webp",system:{circulo:"4",escola:"adv",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"move"},alcance:"pessoal",alvo:"voc√™",resistencia:"Nenhuma",custo:"10 PM",description:{value:"Seus olhos brilham com uma luz dourada sutil e voc√™ passa a enxergar a forma real de todas as coisas. Esta vis√£o m√≠stica permite que voc√™ veja atrav√©s de camuflagem e escurid√£o (tanto normais quanto m√°gicas), assim como todos os efeitos de ilus√£o e transmuta√ß√£o. Quando olha para algo afetado por magia de ilus√£o ou transmuta√ß√£o, voc√™ v√™ tanto a apar√™ncia falsa quanto a verdadeira forma, sendo a verdadeira mais n√≠tida. Voc√™ automaticamente detecta criaturas invis√≠veis, polimorfadas, disfar√ßadas magicamente ou escondidas por ilus√µes. Al√©m disso, pode identificar a verdadeira natureza de construtos, mortos-vivos e criaturas extraplanares, vendo uma aura caracter√≠stica ao redor delas. Esta magia tamb√©m revela a presen√ßa de magias ativas em objetos e criaturas, mostrando-as como uma t√™nue aura colorida."}},aprimoramentos:[{custo:1,descricao:"muda o alcance para toque e o alvo para 1 criatura.",aumenta:!1},{custo:1,descricao:"al√©m do normal, o alvo fica com sentidos apurados; ele recebe +10 em todos os testes de Percep√ß√£o.",aumenta:!1},{custo:2,descricao:"al√©m do normal, o alvo escuta falsidades; ele recebe +10 em todos os testes de Intui√ß√£o.",aumenta:!1},{custo:4,descricao:"al√©m do normal, o alvo enxerga atrav√©s de paredes e barreiras com 30cm de espessura ou menos (as paredes e barreiras parecem transl√∫cidas).",aumenta:!1}]}},convocacao:{"viagem-planar":{name:"Viagem Planar",type:"magia",img:"systems/tormenta20/icons/magias/viagem-planar.webp",system:{circulo:"4",escola:"convocacao",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"toque",alvo:"pessoal",resistencia:"Nenhuma",custo:"10 PM",description:{value:"Voc√™ e os alvos viajam instantaneamente para outro plano da Cria√ß√£o atrav√©s de um portal dimensional tempor√°rio. No plano de destino, voc√™s chegam de 10 a 1.000km do local pretendido (role 1d100 e multiplique por 10km). A precis√£o da chegada depende do seu conhecimento sobre o destino: locais bem conhecidos tendem a ter menos varia√ß√£o na dist√¢ncia. Esta magia n√£o funciona se voc√™ estiver em um local protegido contra viagem planar (como sob efeito de √Çncora Dimensional). Componente material: um bast√£o de metal precioso em forma de forquilha (no valor de T$ 1.000), que √© consumido pela magia. O tipo espec√≠fico de metal determina para qual plano de exist√™ncia voc√™ ser√° enviado - diferentes planos requerem diferentes metais, e alguns podem ser extremamente raros ou dif√≠ceis de encontrar, a crit√©rio do mestre. Exemplos incluem prata para o Plano Astral, ferro frio para o Reino das Fadas, ou ouro para planos celestiais."}},aprimoramentos:[{custo:2,descricao:"muda o alvo para at√© cinco criaturas volunt√°rias que voc√™ esteja tocando.",aumenta:!1}]}},necromancia:{"muralha-de-ossos":{name:"Muralha de Ossos",type:"magia",img:"systems/tormenta20/icons/magias/muralha-de-ossos.webp",system:{circulo:"4",escola:"necromancia",ativacao:{custo:10,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"medio",resistencia:"Nenhuma",custo:"10 PM",description:{value:"Uma parede de ossos se eleva da terra. A parede tem 15m de comprimento, 9m de altura e 1,5m de espessura. Ela pode ter qualquer forma ‚Äî n√£o precisa ser uma linha reta ‚Äî, mas sua base precisa estar sempre tocando o solo. Quando a parede surge, criaturas na √°rea ocupada ou adjacentes sofrem 4d8 pontos de dano de corte e precisam fazer um teste de Reflexos para n√£o ficarem presas no emaranhado de ossos. Uma criatura presa dessa maneira fica Agarrado, e pode usar uma a√ß√£o padr√£o para fazer um teste de Atletismo (CD da magia) para se soltar. Se passar no teste, sai da muralha para um dos lados adjacentes. Se falhar, sofre 4d8 pontos de dano de corte. √© poss√≠vel destruir o muro para atravess√°-lo ou libertar uma criatura agarrada. Cada trecho de 3m do muro tem Defesa 8, 40 PV e redu√ß√£o de corte, frio e perfura√ß√£o 10. Tamb√©m √© poss√≠vel escalar a parede. Isso exige um teste de Atletismo (CD da magia) e causa 4d8 pontos de dano de corte para cada 3m escalados."}},aprimoramentos:[{custo:3,descricao:"aumenta o comprimento em +15m e altura em +3m.",aumenta:!0},{custo:5,descricao:"o muro √© feito de uma massa de esqueletos animados. Sempre que uma criatura iniciar seu turno adjacente ou escalando a muralha, deve fazer um teste de Reflexos. Se falhar fica agarrada, sofrendo os feitos normais de estar agarrada pela magia.",aumenta:!1}]}}},"5-circulo":{abjuracao:{"buraco-negro":{name:"Buraco Negro",type:"magia",img:"systems/tormenta20/icons/magias/buraco-negro.webp",system:{circulo:"5",escola:"abjuracao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"completa"},alcance:"longo",duracao:"3 rodada",resistencia:"Fortitude parcial",custo:"15 PM",description:{value:"Esta magia cria um v√°cuo capaz de sugar tudo nas proximidades. Escolha um espa√ßo desocupado para o buraco negro. No in√≠cio de cada um de seus tr√™s turnos seguintes, todas as criaturas a at√© alcance longo do buraco negro, incluindo voc√™, devem fazer um teste de Fortitude. Em caso de falha, ficam ca√≠das e s√£o puxadas 30m na dire√ß√£o do buraco. Objetos soltos tamb√©m s√£o puxados. Criaturas podem gastar uma a√ß√£o de movimento para se segurar em algum objeto fixo, recebendo +2 em seus testes de resist√™ncia. Criaturas e objetos que toquem o buraco negro s√£o sugadas, desaparecendo para sempre.Criaturas e objetos que iniciem seu turno no espa√ßo do buraco negro devem gastar uma a√ß√£o de movimento e fazer um teste de Fortitude. Se passarem, podem escapar se arrastando (metade de seu deslocamento) para longe dele. Se falharem, perdem a a√ß√£o (mas podem gastar outra para tentar novamente). Se terminarem seu turno no espa√ßo do buraco negro, s√£o sugadas, desaparecendo para sempre. N√£o se conhece o destino das coisas sugadas pelo buraco negro, uma vez que jamais retornam. Alguns estudiosos sugerem que podem ser enviadas para outros mundos. Muitos cl√©rigos da Noite acreditam que esta magia abre um portal para Sombria, o lar de sua deusa, e sonham um dia poder realizar essa jornada."}},aprimoramentos:[{custo:5,descricao:"muda o efeito para que voc√™ n√£o seja afetado.",aumenta:!1}]},invulnerabilidade:{name:"Invulnerabilidade",type:"magia",img:"systems/tormenta20/icons/magias/invulnerabilidade.webp",system:{circulo:"5",escola:"abjuracao",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"pessoal",alvo:"Voc√™",resistencia:"Nenhuma",custo:"15 PM",description:{value:"Esta magia suprema cria uma barreira m√°gica absolutamente impenetr√°vel ao seu redor, manifestando-se como uma aura cintilante que repele amea√ßas espec√≠ficas. Voc√™ deve escolher um dos dois tipos de prote√ß√£o ao lan√ßar a magia: PROTE√á√ÉO MENTAL: Uma aura prateada envolve sua mente, tornando-a uma fortaleza inexpugn√°vel. Voc√™ fica completamente imune √†s condi√ß√µes abalado, alquebrado, apavorado, atordoado, confuso, esmorecido, fascinado, frustrado e pasmo. Al√©m disso, torna-se imune a todos os efeitos de encantamento e ilus√£o, independentemente de sua origem ou poder. Sua mente n√£o pode ser lida, controlada, influenciada ou enganada por qualquer meio m√°gico. PROTE√á√ÉO F√çSICA: Uma aura dourada fortalece seu corpo contra todos os males f√≠sicos. Voc√™ fica completamente imune √†s condi√ß√µes atordoado, cego, debilitado, enjoado, envenenado, exausto, fatigado, fraco, lento, ofuscado e paralisado. Al√©m disso, torna-se imune a acertos cr√≠ticos (todos os ataques contra voc√™ causam dano normal), ataques furtivos (que falham automaticamente) e todas as doen√ßas (naturais ou m√°gicas). Seu corpo torna-se um templo inviol√°vel contra afli√ß√µes f√≠sicas. IMPORTANTE: Esta prote√ß√£o n√£o impede dano direto - voc√™ ainda pode ser ferido por espadas, magias de dano, quedas, etc. A magia protege contra condi√ß√µes e efeitos especiais, n√£o contra dano bruto. A escolha entre prote√ß√£o mental ou f√≠sica deve ser feita no momento do lan√ßamento e n√£o pode ser alterada durante a dura√ß√£o da magia."}},aprimoramentos:[{custo:5,descricao:"muda o alcance para curto e o alvo para 1 criatura.",aumenta:!1}]}},encantamento:{"palavra-primordial":{name:"Palavra Primordial",type:"magia",img:"systems/tormenta20/icons/magias/palavra-primordial.webp",system:{circulo:"5",escola:"encantamento",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"curto",duracao:"instant√¢nea ou veja texto",alvo:"1 criatura com menos n√≠veis que voc√™",resistencia:"Vontade parcial",custo:"15 PM",description:{value:'Voc√™ pronuncia uma √∫nica palavra no idioma primordial da Cria√ß√£o - a linguagem que os deuses usaram para moldar a realidade. Esta palavra ressoa com poder c√≥smico, capaz de alterar a ess√™ncia de uma criatura com menos n√≠veis que voc√™. O som ecoa atrav√©s de dimens√µes, e mesmo criaturas surdas s√£o afetadas, pois a palavra atinge diretamente a alma. Escolha um dos tr√™s efeitos devastadores: ATORDOAR: A palavra "KETH" paralisa a mente do alvo. A criatura fica Atordoada por 2d4 rodadas, completamente incapaz de agir. Se passar no teste de resist√™ncia de Vontade, fica apenas Desprevenida por 1d4 rodadas e torna-se imune ao efeito de atordoamento desta magia at√© o final da cena. CEGAR: A palavra "NETH" queima os olhos da criatura com luz primordial. O alvo fica permanentemente Cego, perdendo completamente a vis√£o. Se passar no teste de resist√™ncia, fica apenas Ofuscado por 1d4 rodadas. A cegueira permanente s√≥ pode ser curada por magias de cura poderosas ou Desejo. MATAR: A palavra "DEATH" ordena que a alma se separe do corpo. A criatura morre instantaneamente, independentemente de seus pontos de vida atuais. Al√©m do teste normal de Vontade, criaturas com mais da metade de seus PV t√™m direito a um teste adicional de Fortitude. Se passar em qualquer um dos testes, em vez de morrer, perde 10d8 pontos de vida e fica Sangrando. Esta √© uma das magias mais temidas de todo o multiverso, pois representa o poder bruto da cria√ß√£o falando atrav√©s de um mortal.'}}}},necromancia:{"toque-da-morte":{name:"Toque da Morte",type:"magia",img:"systems/tormenta20/icons/magias/toque-da-morte.webp",system:{circulo:"5",escola:"necromancia",ativacao:{custo:15,qtd:"","condi√ß√£o":"",special:"",execucao:"acao"},alcance:"toque",alvo:"1 criatura",resistencia:"Veja texto",custo:"15 PM",description:{value:"Esta √© uma das magias necrom√¢nticas mais temidas, canalizando a pr√≥pria ess√™ncia da morte atrav√©s de seu toque. Sua m√£o fica envolta em uma aura negra crepitante, emanando frio sobrenatural e o cheiro de t√∫mulos antigos. Ao tocar uma criatura, voc√™ drena diretamente sua for√ßa vital. EFEITO NORMAL: A criatura sofre 10d8+10 pontos de dano de trevas conforme sua energia vital √© sugada. Este dano representa o envelhecimento acelerado, o enfraquecimento dos √≥rg√£os vitais e a corros√£o da alma. EFEITO LETAL: Se o alvo estiver com menos da metade de seus pontos de vida (j√° ferido ou enfraquecido), a magia torna-se potencialmente letal. Em vez de causar dano normal, a criatura deve fazer um teste de Fortitude contra a CD da magia. Se PASSAR no teste, sofre apenas o dano normal (10d8+10). Se FALHAR no teste, sua for√ßa vital √© completamente drenada e seus pontos de vida s√£o imediatamente reduzidos a -10, colocando-a em estado de morte iminente. NATUREZA SINISTRA: Esta magia n√£o apenas fere - ela corrompe. Criaturas mortas por Toque da Morte frequentemente se levantam como mortos-vivos menores, e o local onde a magia foi lan√ßada pode ficar permanentemente amaldi√ßoado. Usar esta magia repetidamente pode atrair a aten√ß√£o de entidades das trevas ou causar pesadelos ao conjurador. A energia necrom√¢ntica deixa uma marca sombria tanto no alvo quanto no usu√°rio."}},aprimoramentos:[{custo:2,descricao:"muda o alcance para curto. Em vez de tocar no alvo, voc√™ dispara um raio p√∫rpura da ponta de seu dedo indicador.",aumenta:!1},{custo:10,descricao:"muda o alcance para curto e o alvo para inimigos no alcance. Em vez de tocar no alvo, voc√™ dispara raios p√∫rpuras da ponta de seus dedos.",aumenta:!1}]}}}}};for(const r in s)for(const n in s[r])for(const i in s[r][n])for(const c in s[r][n][i]){const d=s[r][n][i][c];d.system&&d.system.circulo&&e.push({...d,tradition:r,escola:a[d.system.escola]||d.system.escola,execucao:o[d.system.ativacao?.execu√ß√£o]||d.system.ativacao?.execu√ß√£o||"",circulo:d.system.circulo,circuloDisplay:t[d.system.circulo]||`${d.system.circulo}¬∫ C√≠rculo`})}return g.log(`Carregadas ${e.length} magias do arquivo JSON`),e}function re(e,a="grimoire"){const o=document.createElement("div");o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.background="rgba(0,0,0,0.5)",o.style.zIndex="10001";const t=document.createElement("div");function s(){o.remove(),t.remove()}t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.background="rgba(30, 30, 40, 0.98)",t.style.border="2px solid #9c27b0",t.style.borderRadius="12px",t.style.padding="24px",t.style.zIndex="10002",t.style.maxWidth="600px",t.style.maxHeight="80vh",t.style.overflowY="auto",t.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)";const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="center",r.style.marginBottom="20px";const n=document.createElement("div");n.style.display="flex",n.style.alignItems="center",n.style.flex="1";const i=document.createElement("img");i.style.width="48px",i.style.height="48px",i.style.borderRadius="6px",i.style.marginRight="16px",i.style.border="2px solid #9c27b0",async function(e,a){const o=function(){try{const e=localStorage.getItem(l);if(e){const a=JSON.parse(e);if(a.version===m)return a.data||{}}}catch(e){console.warn("Erro ao carregar cache de √≠cones de magias:",e)}return{}}(),t=`spell_${e}`;if(o[t])return o[t];let s=p;try{if(a&&a.startsWith("systems/tormenta20/icons/magias/")&&a.endsWith(".webp")){const o=a.replace("systems/tormenta20/icons/magias/","").replace(".webp",""),t=`${u}${o}.webp`;if(await b(t))s=t;else{const a=y(e);await b(a)&&(s=a)}}else if(a&&a!==p)if(await b(a))s=a;else{const a=y(e);await b(a)&&(s=a)}else{const a=y(e);await b(a)&&(s=a)}o[t]=s,function(e){try{localStorage.setItem(l,JSON.stringify({version:m,data:e,timestamp:Date.now()}))}catch(e){console.warn("Erro ao salvar cache de √≠cones de magias:",e)}}(o)}catch(a){console.warn(`Erro ao carregar √≠cone para magia "${e}":`,a)}return s}(e.name,e.img).then(e=>{i.src=e}).catch(a=>{console.warn(`Erro ao carregar √≠cone para "${e.name}":`,a),i.src=p});const c=document.createElement("h3");c.textContent=e.name,c.style.color="#9c27b0",c.style.margin="0",c.style.fontSize="24px",c.style.fontWeight="bold",n.appendChild(i),n.appendChild(c);const f=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#9c27b0",onClick:s});r.appendChild(n),r.appendChild(f.render());const v=document.createElement("div");v.style.display="flex",v.style.gap="8px",v.style.marginBottom="16px",v.style.flexWrap="wrap";const h=document.createElement("span");h.textContent=e.circuloDisplay||`${e.circulo}¬∫ C√≠rculo`,h.style.background="#9c27b0",h.style.color="#fff",h.style.padding="6px 12px",h.style.borderRadius="16px",h.style.fontSize="14px",h.style.fontWeight="bold";const x=document.createElement("span");x.textContent=e.escola,x.style.background="#4caf50",x.style.color="#fff",x.style.padding="6px 12px",x.style.borderRadius="16px",x.style.fontSize="14px",x.style.fontWeight="bold";const C=document.createElement("span");C.textContent=e.system?.ativacao?.execucao||"N/A",C.style.background="#ff9800",C.style.color="#fff",C.style.padding="6px 12px",C.style.borderRadius="16px",C.style.fontSize="14px",C.style.fontWeight="bold",v.appendChild(h),v.appendChild(x),v.appendChild(C);const w=document.createElement("div");w.style.marginBottom="20px";const q=document.createElement("div");if(q.style.display="grid",q.style.gridTemplateColumns="repeat(auto-fit, minmax(200px, 1fr))",q.style.gap="12px",q.style.marginBottom="16px",e.system?.alcance){const a=k("Alcance",e.system.alcance);q.appendChild(a)}if(e.system?.duracao){const a=k("Dura√ß√£o",e.system.duracao);q.appendChild(a)}if(e.system?.alvo){const a=k("Alvo/√Årea",e.system.alvo);q.appendChild(a)}if(e.system?.resistencia){const a=k("Resist√™ncia",e.system.resistencia);q.appendChild(a)}if(e.system?.custo){const a=k("Custo PM",e.system.custo);q.appendChild(a)}const E=k("Tradi√ß√£o",e.tradition.charAt(0).toUpperCase()+e.tradition.slice(1));q.appendChild(E),w.appendChild(q);const z=document.createElement("div"),S=(e.system?.description?.value||"Descri√ß√£o n√£o dispon√≠vel").split("\n\n").map(e=>`<p>${e.replace(/\n/g,"<br>").replace(/\*(.*?)\*/g,"<em>$1</em>")}</p>`).join("");function k(e,a){const o=document.createElement("div");o.style.background="rgba(35, 36, 58, 0.8)",o.style.border="1px solid #9c27b0",o.style.borderRadius="8px",o.style.padding="12px";const t=document.createElement("div");t.textContent=e,t.style.color="#9c27b0",t.style.fontSize="12px",t.style.fontWeight="bold",t.style.marginBottom="4px",t.style.textTransform="uppercase";const s=document.createElement("div");return s.textContent=a,s.style.color="#fff",s.style.fontSize="14px",o.appendChild(t),o.appendChild(s),o}if(z.innerHTML=S,z.style.color="#fff",z.style.fontSize="16px",z.style.lineHeight="1.6",z.style.marginBottom="16px",z.querySelectorAll("p").forEach(e=>{e.style.margin="0 0 12px 0",e.style.padding="0"}),t.appendChild(r),t.appendChild(v),t.appendChild(w),t.appendChild(z),e.aprimoramentos&&e.aprimoramentos.length>0){const a=document.createElement("div");a.setAttribute("data-aprimoramentos-section","true"),a.style.marginBottom="20px";const o=document.createElement("h4");o.textContent="Aprimoramentos",o.style.color="#ff9800",o.style.fontSize="18px",o.style.fontWeight="bold",o.style.marginBottom="12px",o.style.borderBottom="2px solid #ff9800",o.style.paddingBottom="8px",a.appendChild(o);const s=document.createElement("div");s.style.marginBottom="16px";const r=parseInt(e.system?.ativacao?.custo)||0,n=document.createElement("div");n.style.background="rgba(35, 36, 58, 0.8)",n.style.border="2px solid #ff9800",n.style.borderRadius="8px",n.style.padding="12px",n.style.marginBottom="16px",n.style.textAlign="center",n.style.fontWeight="bold",n.style.fontSize="16px",n.style.color="#ff9800",n.textContent=`Custo Total: ${r} PM`,s.appendChild(n);const i=[];e.aprimoramentos.forEach(e=>{const a=document.createElement("div");a.style.background="rgba(35, 36, 58, 0.8)",a.style.border="1px solid #ff9800",a.style.borderRadius="8px",a.style.padding="12px",a.style.marginBottom="8px",a.style.cursor="pointer",a.style.transition="all 0.2s ease";const o=document.createElement("div");o.style.display="flex",o.style.justifyContent="space-between",o.style.alignItems="center",o.style.marginBottom="8px";const t=document.createElement("span");t.textContent=`+${e.custo} PM`,t.style.background="#ff9800",t.style.color="#fff",t.style.padding="4px 8px",t.style.borderRadius="12px",t.style.fontSize="12px",t.style.fontWeight="bold";const c=document.createElement("span");c.textContent=e.aumenta?"Aumenta Custo":"Modifica Efeito",c.style.background=e.aumenta?"#e91e63":"#2196f3",c.style.color="#fff",c.style.padding="4px 8px",c.style.borderRadius="12px",c.style.fontSize="11px",c.style.fontWeight="bold",o.appendChild(t),o.appendChild(c);const d=document.createElement("div");d.textContent=e.descricao,d.style.color="#fff",d.style.fontSize="14px",d.style.lineHeight="1.4",a.appendChild(o),a.appendChild(d),a.addEventListener("click",()=>{const o=i.findIndex(a=>a===e);o>-1?i.splice(o,1):i.push(e),i.includes(e)?(a.style.border="2px solid #4caf50",a.style.background="rgba(76, 175, 80, 0.1)",a.style.boxShadow="0 0 10px rgba(76, 175, 80, 0.3)"):(a.style.border="1px solid #ff9800",a.style.background="rgba(35, 36, 58, 0.8)",a.style.boxShadow="none"),(()=>{const e=i.reduce((e,a)=>e+a.custo,0),a=r+e;n.textContent=`Custo Total: ${a} PM`})()}),a.addEventListener("mouseenter",()=>{i.includes(e)||(a.style.border="1px solid #4caf50",a.style.background="rgba(76, 175, 80, 0.05)")}),a.addEventListener("mouseleave",()=>{i.includes(e)||(a.style.border="1px solid #ff9800",a.style.background="rgba(35, 36, 58, 0.8)")}),s.appendChild(a)}),a.selectedAprimoramentos=i,a.custoBase=r,a.appendChild(s),t.appendChild(a)}const j=(P=e.name,Q().includes(P));var P;if(j&&"learned-list"===a){const a=document.createElement("div");a.style.marginBottom="20px";const o=document.createElement("h4");o.textContent="Imagem Customizada",o.style.color="#9c27b0",o.style.fontSize="18px",o.style.fontWeight="bold",o.style.marginBottom="12px",o.style.borderBottom="2px solid #9c27b0",o.style.paddingBottom="8px",a.appendChild(o);const s=document.createElement("div");s.style.background="rgba(35, 36, 58, 0.8)",s.style.border="2px solid #9c27b0",s.style.borderRadius="8px",s.style.padding="16px";const r=document.createElement("input");r.type="url",r.placeholder="Cole aqui a URL da imagem ou GIF...",r.value=O(e.name),r.style.width="100%",r.style.padding="8px 12px",r.style.border="1px solid #9c27b0",r.style.borderRadius="4px",r.style.background="#23243a",r.style.color="#fff",r.style.fontSize="14px",r.style.marginBottom="12px",r.style.boxSizing="border-box";const n=document.createElement("div");n.style.marginTop="12px",n.style.textAlign="center";const i=()=>{n.innerHTML="";const e=r.value.trim();if(e){const a=document.createElement("img");a.src=e,a.style.maxWidth="100%",a.style.maxHeight="200px",a.style.borderRadius="8px",a.style.border="2px solid #9c27b0",a.onerror=()=>{n.innerHTML='<div style="color: #f44336; font-size: 12px;">‚ùå Erro ao carregar imagem</div>'},n.appendChild(a)}else n.innerHTML='<div style="color: #666; font-size: 12px;">Nenhuma imagem definida</div>'};r.addEventListener("input",i),r.addEventListener("blur",()=>{N(e.name,r.value)});const c=document.createElement("button");c.textContent="Limpar Imagem",c.style.background="#f44336",c.style.color="#fff",c.style.border="none",c.style.borderRadius="4px",c.style.padding="8px 16px",c.style.fontSize="12px",c.style.cursor="pointer",c.style.marginTop="8px",c.style.transition="all 0.2s ease",c.onmouseover=()=>{c.style.background="#d32f2f"},c.onmouseout=()=>{c.style.background="#f44336"},c.onclick=()=>{r.value="",N(e.name,""),i()},i(),s.appendChild(r),s.appendChild(n),s.appendChild(c),a.appendChild(s),t.appendChild(a)}const I=document.createElement("div");I.style.display="flex",I.style.gap="10px",I.style.marginTop="20px";const T=document.createElement("button");T.textContent=j?"Esquecer":"Aprender",T.style.background=j?"#f44336":"#2196f3",T.style.color="#fff",T.style.border="none",T.style.borderRadius="8px",T.style.padding="12px 20px",T.style.fontSize="14px",T.style.fontWeight="bold",T.style.cursor="pointer",T.style.flex="1",T.style.transition="all 0.2s ease",T.onmouseover=()=>{T.style.background=j?"#d32f2f":"#1976d2",T.style.transform="translateY(-1px)"},T.onmouseout=()=>{T.style.background=j?"#f44336":"#2196f3",T.style.transform="translateY(0)"},T.onclick=()=>{(function(e){const a=Q(),o=a.indexOf(e);o>-1?(a.splice(o,1),_(`Magia "${e}" removida da lista de aprendidas.`)):(a.push(e),A(`Magia "${e}" adicionada √† lista de aprendidas!`)),function(e){try{localStorage.setItem(d,JSON.stringify(e))}catch(e){g.log("Erro ao salvar magias aprendidas:",e)}}(a)})(e.name),s()};const D=document.createElement("button");D.textContent="Compartilhar",D.style.background="#4caf50",D.style.color="#fff",D.style.border="none",D.style.borderRadius="8px",D.style.padding="12px 20px",D.style.fontSize="14px",D.style.fontWeight="bold",D.style.cursor="pointer",D.style.flex="1",D.style.transition="all 0.2s ease",D.onmouseover=()=>{D.style.background="#45a049",D.style.transform="translateY(-1px)"},D.onmouseout=()=>{D.style.background="#4caf50",D.style.transform="translateY(0)"},D.onclick=()=>{let a=[];const o=t.querySelector("div[data-aprimoramentos-section]");o&&o.selectedAprimoramentos&&(a=o.selectedAprimoramentos),g.log("aprimoramentosSectionElement",o),g.log("selectedAprimoramentos",a),function(e,a=[]){try{const o=$(),t=parseInt(e.system?.ativacao?.custo)||0,s=a.reduce((e,a)=>e+a.custo,0),r=t+s;let n=e.system?.description?.value||"Descri√ß√£o n√£o dispon√≠vel";const i=Q().includes(e.name)?O(e.name):"";i&&(n=`[Capa](${i}) %NEWLINE% ${n}`),a.length>0&&(n+="%NEWLINE%%NEWLINE%**Aprimoramentos aplicados:**",a.forEach(e=>{n+=`%NEWLINE%    +${e.custo} PM: ${e.descricao}`}),n+=`%NEWLINE%%NEWLINE%**Custo Total: ${r} PM**`);const c={name:e.name,type:e.tradition.charAt(0).toUpperCase()+e.tradition.slice(1),execution:e.system?.ativacao?.type||"Padr√£o",duration:e.system?.duracao||"Cena",range:e.system?.alcance||"Curto",target:e.system?.alvo||"1 Alvo",resistance:e.system?.resistencia||"Nenhuma",description:n};g.dir({spellData:c,selectedAprimoramentos:a,custoTotal:r,custoBase:t,custoAprimoramentos:s}),Z(`&{template:spell}{{character=@{${o}|character_name}}}{{spellname=${c.name}}}{{type=${c.type}}}{{execution=${c.execution}}}{{duration=${c.duration}}}{{range=${c.range}}}{{targetarea=${c.target}}}{{resistance=${c.resistance}}}{{description=${c.description}}}{{cd=[[@{${o}|cdtotal}+0]]}}`);const d=document.querySelector('button[onclick*="shareSpellToChat"]');if(d){const e=d.textContent;d.textContent="‚úÖ Enviado!",d.style.background="#4caf50",setTimeout(()=>{d.textContent=e},2e3)}}catch(e){console.error("Erro ao compartilhar magia:",e),alert("Erro ao compartilhar magia no chat. Verifique o console para mais detalhes.")}finally{Ce()}}(e,a)},I.appendChild(T),I.appendChild(D),t.appendChild(I),o.onclick=s,document.body.appendChild(o),document.body.appendChild(t)}async function ne(){const e=document.getElementById("grimorio-popup");e&&e.remove();const a=document.getElementById("grimorio-overlay");if(a&&a.remove(),!window.grimorioSpellsCache){g.log("Carregando todas as magias...");const e=document.createElement("div");e.id="grimorio-loading",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.background="rgba(30, 30, 40, 0.98)",e.style.border="2px solid #9c27b0",e.style.borderRadius="12px",e.style.padding="40px",e.style.zIndex="10003",e.style.textAlign="center",e.style.color="#9c27b0",e.style.fontSize="18px",e.style.fontWeight="bold",e.innerHTML='\n                <div style="margin-bottom: 20px;">üîÑ</div>\n                <div>Carregando Grim√≥rio de Magias...</div>\n                <div style="font-size: 14px; margin-top: 10px; color: #ccc;">Isso pode levar alguns segundos</div>\n            ',document.body.appendChild(e);try{window.grimorioSpellsCache=await se(),g.log(`Carregadas ${window.grimorioSpellsCache.length} magias no total`)}catch(e){console.error("Erro ao carregar magias:",e),window.grimorioSpellsCache=[]}finally{const e=document.getElementById("grimorio-loading");e&&e.remove()}}const o=document.createElement("div");o.id="grimorio-overlay",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.background="rgba(0,0,0,0.5)",o.style.zIndex="10000",o.onclick=()=>{o.remove(),t.remove()},document.body.appendChild(o);const t=document.createElement("div");t.id="grimorio-popup",t.className="roll20-popup roll20-popup-purple",t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.background="rgba(30,30,40,0.98)",t.style.border="2px solid #9c27b0",t.style.borderRadius="12px",t.style.padding="20px",t.style.zIndex="10001",t.style.maxWidth="800px",t.style.maxHeight="700px",t.style.overflowY="auto",t.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="stretch";const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="space-between",s.style.alignItems="center",s.style.marginBottom="20px",s.style.width="100%";const r=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#9c27b0",onClick:()=>{t.remove();const e=document.getElementById("grimorio-overlay");e&&e.remove()}}),n=document.createElement("h3");n.textContent="Grim√≥rio de Magias",n.style.color="#9c27b0",n.style.margin="0",n.style.fontSize="20px",n.style.fontWeight="bold",n.title="Atalho: Ctrl + G";const i=document.createElement("div");i.style.display="flex",i.style.flexDirection="column",i.style.alignItems="flex-start";const c=document.createElement("div");c.textContent="Atalho: Ctrl + G",c.style.color="#666",c.style.fontSize="12px",c.style.marginTop="2px",i.appendChild(n),i.appendChild(c),s.appendChild(i),s.appendChild(r.render()),t.appendChild(s);const d=x({placeholder:"Filtrar magias por nome...",theme:"purple",marginBottom:"15px",onInput:e=>{!function(e){g.log(`Filtrando magias por: ${e}`);const a=window.grimorioSpellsCache||[];if(a&&a.length>0){let o=[...a];if(u&&"todas"!==u&&(o=o.filter(e=>e.tradition===u)),e){const a=e.toLowerCase();o=o.filter(e=>e.name.toLowerCase().includes(a)||e.escola.toLowerCase().includes(a)||e.system?.description?.value&&e.system.description.value.toLowerCase().includes(a))}o.sort((e,a)=>e.name.localeCompare(a.name));const t=window.grimorioSpellsCache;window.grimorioSpellsCache=o,v(),window.grimorioSpellsCache=t}else v()}(e)}});t.appendChild(d.container);const l=document.createElement("div");l.style.display="flex",l.style.marginBottom="20px",l.style.borderBottom="2px solid #9c27b0";const m=[{id:"todas",name:"Todas",color:"#ffffff"},{id:"arcana",name:"Arcana",color:"#9c27b0"},{id:"divina",name:"Divina",color:"#4caf50"},{id:"universal",name:"Universal",color:"#ff9800"}];let u="todas";m.forEach(e=>{const a=document.createElement("div");a.id=`tab-${e.id}`,a.textContent=e.name,a.style.padding="12px 20px",a.style.cursor="pointer",a.style.borderBottom="3px solid transparent",a.style.color=e.id===u?e.color:"#666",a.style.fontWeight=e.id===u?e.color:"normal",a.style.transition="all 0.2s",a.style.borderRadius="6px 6px 0 0",a.onclick=()=>{m.forEach(e=>{const a=document.getElementById(`tab-${e.id}`);a&&(a.style.color="#666",a.style.fontWeight="normal",a.style.borderBottom="3px solid transparent")}),a.style.color=e.color,a.style.fontWeight="bold",a.style.borderBottom=`3px solid ${e.color}`,u=e.id,f(e.id)},e.id===u&&(a.style.color=e.color,a.style.fontWeight="bold",a.style.borderBottom=`3px solid ${e.color}`),l.appendChild(a)}),t.appendChild(l);const p=document.createElement("div");function f(e){g.log(`Atualizando conte√∫do da aba: ${e}`);const a=p;a.innerHTML="";const o=window.grimorioSpellsCache||[];if(!o||0===o.length){const e=document.createElement("div");e.style.display="flex",e.style.flexDirection="column",e.style.alignItems="center",e.style.justifyContent="center",e.style.padding="40px 20px",e.style.color="#666",e.style.textAlign="center";const o=document.createElement("div");o.textContent="üìö",o.style.fontSize="48px",o.style.marginBottom="15px";const t=document.createElement("div");t.textContent="Nenhuma magia registrada ainda",t.style.fontSize="18px",t.style.fontWeight="bold",t.style.marginBottom="8px";const s=document.createElement("div");return s.textContent="As magias desta tradi√ß√£o ser√£o exibidas aqui quando forem adicionadas ao sistema.",s.style.fontSize="14px",s.style.lineHeight="1.4",e.appendChild(o),e.appendChild(t),e.appendChild(s),void a.appendChild(e)}let t;if("todas"===e?(t=o,g.log(`Encontradas ${t.length} magias no total`)):(t=o.filter(a=>a.tradition===e),g.log(`Encontradas ${t.length} magias para tradi√ß√£o ${e}`)),0===t.length){const o=document.createElement("div");o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.justifyContent="center",o.style.padding="40px 20px",o.style.color="#666",o.style.textAlign="center";const t=document.createElement("div");t.textContent="üîÆ",t.style.fontSize="48px",t.style.marginBottom="15px";const s=document.createElement("div");s.textContent="Nenhuma magia nesta tradi√ß√£o",s.style.fontSize="18px",s.style.fontWeight="bold",s.style.marginBottom="8px";const r=document.createElement("div");return r.textContent=`N√£o h√° magias registradas para a tradi√ß√£o ${e}.`,r.style.fontSize="14px",r.style.lineHeight="1.4",o.appendChild(t),o.appendChild(s),o.appendChild(r),void a.appendChild(o)}const s=document.createElement("div");s.style.color="#9c27b0",s.style.fontSize="14px",s.style.fontWeight="bold",s.style.marginBottom="15px",s.style.textAlign="center",s.textContent=`${t.length} magia${1!==t.length?"s":""} encontrada${1!==t.length?"s":""}`,a.appendChild(s);const r=document.createElement("div");r.style.display="flex",r.style.flexDirection="column",r.style.gap="10px",t.forEach(e=>{const a=function(e){const a=document.createElement("div");a.style.background="rgba(35, 36, 58, 0.8)",a.style.border="1px solid #9c27b0",a.style.borderRadius="8px",a.style.padding="16px",a.style.cursor="pointer",a.style.transition="all 0.2s",a.style.marginBottom="8px",a.onmouseover=()=>{a.style.background="rgba(45, 46, 74, 0.9)",a.style.borderColor="#ba68c8",a.style.transform="translateY(-2px)"},a.onmouseout=()=>{a.style.background="rgba(35, 36, 58, 0.8)",a.style.borderColor="#9c27b0",a.style.transform="translateY(0)"},a.onclick=()=>{re(e)};const o=document.createElement("div");o.style.display="flex",o.style.alignItems="center",o.style.marginBottom="12px";const t=document.createElement("div");t.textContent=e.name,t.style.color="#fff",t.style.fontSize="16px",t.style.fontWeight="bold",t.style.flex="1",o.appendChild(t);const s=document.createElement("div");s.style.display="flex",s.style.gap="8px",s.style.marginBottom="8px",s.style.flexWrap="wrap";const r=document.createElement("span");r.textContent=e.circuloDisplay||`${e.circulo}¬∫ C√≠rculo`,r.style.background="#9c27b0",r.style.color="#fff",r.style.padding="4px 8px",r.style.borderRadius="12px",r.style.fontSize="12px",r.style.fontWeight="bold";const n=document.createElement("span");n.textContent=e.escola,n.style.background="#4caf50",n.style.color="#fff",n.style.padding="4px 8px",n.style.borderRadius="12px",n.style.fontSize="12px",n.style.fontWeight="bold";const i=document.createElement("span");i.textContent=e.system?.ativacao?.execucao||"N/A",i.style.background="#ff9800",i.style.color="#fff",i.style.padding="4px 8px",i.style.borderRadius="12px",i.style.fontSize="12px",i.style.fontWeight="bold",s.appendChild(r),s.appendChild(n),s.appendChild(i);const c=document.createElement("div"),d=e.system?.description?.value||"Descri√ß√£o n√£o dispon√≠vel";if(c.textContent=d.length>150?d.substring(0,150)+"...":d,c.style.color="#ccc",c.style.fontSize="14px",c.style.lineHeight="1.4",e.aprimoramentos&&e.aprimoramentos.length>0){const t=document.createElement("div");t.style.display="flex",t.style.alignItems="center",t.style.gap="6px",t.style.marginTop="8px",t.style.padding="6px 10px",t.style.background="rgba(255, 152, 0, 0.1)",t.style.border="1px solid rgba(255, 152, 0, 0.3)",t.style.borderRadius="6px";const r=document.createElement("span");r.textContent="‚ö°",r.style.fontSize="14px";const n=document.createElement("span");n.textContent=`${e.aprimoramentos.length} aprimoramento${e.aprimoramentos.length>1?"s":""} dispon√≠vel${e.aprimoramentos.length>1?"eis":""}`,n.style.color="#ff9800",n.style.fontSize="12px",n.style.fontWeight="bold",t.appendChild(r),t.appendChild(n),a.appendChild(o),a.appendChild(s),a.appendChild(c),a.appendChild(t)}else a.appendChild(o),a.appendChild(s),a.appendChild(c);return a}(e);r.appendChild(a)}),a.appendChild(r)}function v(){g.log("üîÑ Recarregando conte√∫do do grim√≥rio..."),f(u)}p.id="grimorio-tab-content",p.style.flex="1",p.style.overflowY="auto",f(u),t.appendChild(p),document.body.appendChild(t),S(t,"purple")}function ie(){const e=document.getElementById("spells-popup");e&&e.remove();const o=document.getElementById("spells-overlay");o&&o.remove();const t=document.createElement("div");t.id="spells-overlay",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0,0,0,0.5)",t.style.zIndex="10000",t.onclick=()=>{t.remove(),s.remove()},document.body.appendChild(t);const s=document.createElement("div");s.id="spells-popup",s.className="roll20-popup roll20-popup-purple",s.style.position="fixed",s.style.top="50%",s.style.left="50%",s.style.transform="translate(-50%, -50%)",s.style.background="rgba(30,30,40,0.98)",s.style.border="2px solid #6ec6ff",s.style.borderRadius="12px",s.style.padding="18px 20px 16px 20px",s.style.zIndex="10001",s.style.maxWidth="340px",s.style.maxHeight="480px",s.style.overflowY="auto",s.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="stretch";const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="center",r.style.marginBottom="15px",r.style.width="100%";const n=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{s.remove();const e=document.getElementById("spells-overlay");e&&e.remove()}}),i=document.createElement("h3");i.textContent="Magias",i.style.color="#ecf0f1",i.style.margin="0",i.style.fontSize="17px",i.style.fontWeight="bold",r.appendChild(i),r.appendChild(n.render()),s.appendChild(r);const c=x({placeholder:"Filtrar magias...",theme:"blue",onInput:()=>{u()},onClear:()=>{u()}});s.appendChild(c.container);const d=z("spell");s.appendChild(d);const l=[oe({nome:"Sombras Profanas",comando:`&{template:spell}{{character=@{${I()}|character_name}}}{{spellname=Sombras Profanas}}{{type=Universal}}{{execution=Padr√£o}}{{duration=Cena}}{{range=Curto}}{{targetarea=1 Objeto}}{{resistance=Vontade}}{{description=O alvo emana sombras em uma √°rea com 6m de raio. Criaturas dentro da √°rea recebem camuflagem leve por escurid√£o leve. As sombras n√£o podem ser iluminadas por nenhuma fonte de luz natural. O objeto pode ser guardado (em um bolso, por exemplo) para interromper a escurid√£o, que voltar√° a funcionar caso o objeto seja revelado. Se lan√ßar a magia num objeto de uma criatura involunt√°ria, ela tem direito a um teste de Vontade para anul√°-la. Escurid√£o anula Luz.\n\n    +1 PM: aumenta a √°rea da escurid√£o em +1,5m de raio.\n\n    +2 PM: muda o efeito para fornecer camuflagem total por escurid√£o total. As sombras bloqueiam a vis√£o na √°rea e atrav√©s dela.\n\n    +2 PM: muda o alvo para 1 criatura e a resist√™ncia para Fortitude parcial. Voc√™ lan√ßa a magia nos olhos do alvo, que fica cego pela cena. Se passar na resist√™ncia, fica cego por 1 rodada. Requer 2¬∫ c√≠rculo.\n\n    +3 PM: muda a dura√ß√£o para um dia.\n\n    +5 PM: muda o alcance para pessoal e o alvo para voc√™. Em vez do normal, voc√™ √© coberto por sombras, recebendo +10 em testes de Furtividade e camuflagem leve. Requer 2¬∫ c√≠rculo.\n\n    JdA:193}}{{cd=[[@{${I()}|cdtotal}+0]]}}`}),oe({nome:"Luz Sagrada",comando:`&{template:spell}{{character=@{${I()}|character_name}}}{{spellname=Luz Sagrada}}{{type=Universal}}{{execution=Padr√£o}}{{duration=Cena}}{{range=Curto}}{{targetarea=1 Objeto}}{{resistance=Vontade}}{{description=O alvo emite luz (mas n√£o produz calor) em uma √°rea com 6m de raio. O objeto pode ser guardado (em um bolso, por exemplo) para interromper a luz, que voltar√° a funcionar caso o objeto seja revelado. Se lan√ßar a magia num objeto de uma criatura involunt√°ria, ela tem direito a um teste de Vontade para anul√°-la. Luz anula Escurid√£o.\n\n    +1 PM: aumenta a √°rea iluminada em +3m de raio.\n\n    +2 PM: muda a dura√ß√£o para um dia.\n    +2 PM: muda a dura√ß√£o para permanente e adiciona componente material (p√≥ de rubi no valor de T$ 50). N√£o pode ser usado em conjunto com outros aprimoramentos. Requer 2¬∫ c√≠rculo.\n    +0 PM (Apenas Arcanos): muda o alvo para 1 criatura. Voc√™ lan√ßa a magia nos olhos do alvo, que fica ofuscado pela cena. N√£o afeta criaturas cegas.\n    +2 PM (Apenas Arcanos): muda o alcance para longo e o efeito para cria 4 pequenos globos flutuantes de pura luz. Voc√™ pode posicionar os globos onde quiser dentro do alcance. Uma vez por rodada, voc√™ pode mover os globos com uma a√ß√£o livre. Cada um ilumina como uma tocha, mas n√£o produz calor. Se um globo ocupar o espa√ßo de uma criatura, ela fica ofuscada e sua silhueta pode ser vista claramente (ela n√£o recebe camuflagem por escurid√£o ou invisibilidade). Requer 2¬∫ c√≠rculo.\n    +2 PM (Apenas Divinos): a luz √© c√°lida como a do sol. Criaturas que sofrem penalidades e dano pela luz solar sofrem seus efeitos como se estivessem expostas √† luz solar real. Seus aliados na √°rea estabilizam automaticamente e ficam imunes √† condi√ß√£o sangrando, e seus inimigos ficam ofuscados. Requer 2¬∫ c√≠rculo.\n    +5 PM (Apenas Divinos): muda o alcance para toque e o alvo para 1 criatura. Em vez do normal, o alvo √© envolto por um halo de luz, recebendo +10 em testes de Diplomacia e redu√ß√£o de trevas 10. Requer 2¬∫ c√≠rculo.\n    JdA:193}}{{cd=[[@{${I()}|cdtotal}+0]]}}`})],m=document.createElement("div");async function u(){const e=c.getValue().trim().toLowerCase();m.innerHTML="";const o=Q();let t=window.grimorioSpellsCache||[];if(0===t.length&&o.length>0)try{window.grimorioSpellsCache=await se(),t=window.grimorioSpellsCache}catch(e){g.log("Erro ao carregar cache de magias:",e),t=[]}const s=o.map(e=>{const a=t.find(a=>a.name===e);if(a){const e=O(a.name);let o=a.system?.description?.value||"Descri√ß√£o n√£o dispon√≠vel";return e&&(o=`[Cover](${e}) %NEWLINE% ${o}`),{nome:a.name,comando:`&{template:spell}{{character=@{${I()}|character_name}}}{{spellname=${a.name}}}{{type=${a.tradition.charAt(0).toUpperCase()+a.tradition.slice(1)}}}{{execution=${a.execucao||"Padr√£o"}}}{{duration=${a.system?.duracao||"Cena"}}}{{range=${a.system?.alcance||"Curto"}}}{{targetarea=${a.system?.alvo||"1 Alvo"}}}{{resistance=${a.system?.resistencia||"Nenhuma"}}}{{description=${o}}}{{cd=[[@{${I()}|cdtotal}+0]]}}`,onClick:()=>re(a,"learned-list")}}return null}).filter(e=>null!==e),r=[...l.filter(e=>"Sombras Profanas"===e.nome?Fe("Sombras Profanas"):"Luz Sagrada"===e.nome&&Fe("Luz Sagrada")),...s],n=V(),i=r.sort((e,a)=>{const o=n.includes(e.nome),t=n.includes(a.nome);return o&&!t?-1:!o&&t?1:e.nome.localeCompare(a.nome)}).filter(a=>a.nome.toLowerCase().includes(e));if(0===i.length){const a=document.createElement("div");if(a.style.textAlign="center",a.style.padding="20px",a.style.color="#999",a.style.fontSize="14px",a.style.fontStyle="italic",e.length>0){const a=ye(e,"magia","blue");return void m.appendChild(a)}{const e=Ve(),t=Ne();a.style.background="rgba(110, 198, 255, 0.1)",a.style.border="1px solid rgba(110, 198, 255, 0.3)",a.style.borderRadius="8px",a.style.marginTop="10px",a.style.color="#6ec6ff",e||0!==o.length?t||0!==o.length?0===o.length?a.innerHTML="üîÆ<br/>Nenhuma magia dispon√≠vel<br><small>Use o grim√≥rio para aprender magias</small>":a.innerHTML="üîÆ<br/>Nenhuma magia dispon√≠vel<br><small>Esta ra√ßa n√£o possui magias especiais</small>":a.innerHTML="üîÆ<br/>Nenhuma magia dispon√≠vel<br><small>Defina o tipo da sua ra√ßa para obter magias especiais ou aprenda magias no grim√≥rio</small>":a.innerHTML="üîÆ<br/>Nenhuma magia dispon√≠vel<br><small>Selecione uma ra√ßa para obter magias especiais ou aprenda magias no grim√≥rio</small>"}return void m.appendChild(a)}i.forEach(e=>{const o=V().includes(e.nome),t=document.createElement("div");t.style.display="flex",t.style.alignItems="center",t.style.gap="8px",t.style.background=o?"rgba(110, 198, 255, 0.1)":"transparent",t.style.borderRadius="6px",t.style.padding="2px";const s=document.createElement("button"),r=document.createElement("div");r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.width="100%",r.style.padding="0 8px";const n=document.createElement("span");n.textContent=e.nome,n.style.textAlign="center",n.style.fontWeight="bold",r.appendChild(n),s.appendChild(r),s.style.flex="1",s.style.background="#23243a",s.style.color="#fff",s.style.border="1px solid #6ec6ff",s.style.borderRadius="6px",s.style.padding="8px 0",s.style.fontSize="15px",s.style.fontWeight="bold",s.style.cursor="pointer",s.style.transition="all 0.2s",s.onmouseover=()=>{s.style.background="#6ec6ff",s.style.color="#23243a"},s.onmouseout=()=>{s.style.background="#23243a",s.style.color="#fff"},s.onclick=a=>{a.ctrlKey?e.onClick():(Z(e.comando),Ce())};const i=document.createElement("button");i.innerHTML=o?"üìå":"üìç",i.style.background="none",i.style.border="none",i.style.color=o?"#6ec6ff":"#666",i.style.fontSize="14px",i.style.cursor="pointer",i.style.padding="4px",i.style.borderRadius="4px",i.style.transition="all 0.2s",i.style.minWidth="24px",i.style.height="24px",i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="center",i.title=o?"Remover dos favoritos":"Adicionar aos favoritos",i.onmouseover=()=>{i.style.background="rgba(110, 198, 255, 0.2)",i.style.color="#6ec6ff"},i.onmouseout=()=>{i.style.background="none",i.style.color=o?"#6ec6ff":"#666"},i.onclick=o=>{o.stopPropagation(),function(e){const o=V(),t=o.indexOf(e);t>-1?(o.splice(t,1),_(`Magia "${e}" removida dos favoritos.`)):(o.push(e),A(`Magia "${e}" adicionada aos favoritos!`)),function(e){try{localStorage.setItem(a,JSON.stringify(e))}catch(e){g.log("Erro ao salvar magias favoritas:",e)}}(o)}(e.nome),u()},t.appendChild(s),t.appendChild(i),m.appendChild(t)})}m.id="spells-list",m.style.display="flex",m.style.flexDirection="column",m.style.gap="6px",m.style.marginTop="2px",s.appendChild(m),u(),document.body.appendChild(s),S(s,"blue")}function ce(){return JSON.parse(localStorage.getItem("tormenta-20-hotbars-pratos-favoritos")||"[]")}function de(){return JSON.parse(localStorage.getItem("tormenta-20-hotbars-bebidas-favoritas")||"[]")}function le(){return JSON.parse(localStorage.getItem("tormenta-20-hotbars-pocoes-favoritas")||"[]")}function me(){try{return[{nome:"Granada de Bola de Fogo (10d6)",preco:"T$ 1470",efeito:"10d6",descricao:"Esta famosa magia de ataque cria uma poderosa explos√£o, causando 6d6 pontos de dano de fogo em todas as criaturas e objetos livres na √°rea.",tipo:"Granada",icone:"üî•",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_fire_fireball02.jpg",system:{alcance:"medio",alvo:"esfera com 6m de raio",resistencia:"Reflexos reduz √† metade",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 182"}},{nome:"Granada de Bola de Fogo",preco:"T$ 270",efeito:"6d6",descricao:"Esta famosa magia de ataque cria uma poderosa explos√£o, causando 6d6 pontos de dano de fogo em todas as criaturas e objetos livres na √°rea.",tipo:"Granada",icone:"üî•",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_fire_fireball02.jpg",system:{alcance:"medio",alvo:"esfera com 6m de raio",resistencia:"Reflexos reduz √† metade",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 182"}},{nome:"Granada de N√©voa",preco:"T$ 30",efeito:"",descricao:"Uma n√©voa espessa eleva-se de um ponto a sua escolha, obscurecendo toda a vis√£o ‚Äî criaturas a at√© 1,5m t√™m camuflagem leve e criaturas a partir de 3m t√™m camuflagem total. Um vento forte dispersa a n√©voa em 4 rodadas e um vendaval a dispersa em 1 rodada. Esta magia n√£o funciona sob a √°gua.",tipo:"Granada",icone:"üå´Ô∏è",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_fogwalking.jpg",system:{alcance:"curto",alvo:"nuvem com 6m de raio e 6m de altura",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 200"}},{nome:"Granada de √Årea Escorregadia",preco:"T$ 30",efeito:"ou",descricao:"Esta magia recobre uma superf√≠cie com uma subst√¢ncia gordurosa e escorregadia. Criaturas na √°rea devem passar na resist√™ncia para n√£o cair. Nas rodadas seguintes, criaturas que tentem movimentar- se pela √°rea devem fazer testes de Acrobacia para equil√≠brio (CD 10). √Årea Escorregadia pode tornar um item escorregadio. Uma criatura segurando um objeto afetado deve passar na resist√™ncia para n√£o deixar o item cair cada vez que us√°-lo.",tipo:"Granada",icone:"üí£",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_earthbind.jpg",system:{alcance:"curto",alvo:"Quadrado de 3m ou 1 objeto",resistencia:"Reflexos (veja texto)",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 180"}},{nome:"Po√ß√£o de Apar√™ncia Perfeita",preco:"T$ 270",efeito:"",descricao:"Esta magia lhe concede um rosto idealizado, porte f√≠sico garboso, voz melodiosa e olhar sedutor. Caso seu Carisma seja 5 ou mais, voc√™ recebe +2 neste atributo. Do contr√°rio, ele se torna 5 (isso conta como um b√¥nus). Al√©m disso, voc√™ recebe +5 em Diplomacia e Engana√ß√£o. Quando a magia acaba, quaisquer observadores percebem a mudan√ßa e tendem a suspeitar de voc√™. Da mesma maneira, pessoas que o viram sob o efeito da magia sentir√£o que &ldquo;algo est√° errado&rdquo; ao v√™-lo em condi√ß√µes normais. Quando a cena acabar, voc√™ pode gastar os PM da magia novamente como uma a√ß√£o livre para mant√™-la ativa. Este efeito n√£o fornece PV ou PM adicionais.",tipo:"Po√ß√£o",icone:"üé≠",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_polymorph.jpg",system:{alcance:"toque",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 180"}},{nome:"Po√ß√£o de Camuflagem Ilus√≥ria",preco:"T$ 270",efeito:"",descricao:"O alvo fica com sua imagem nublada, como se vista atrav√©s de um l√≠quido, recebendo os efeitos de camuflagem leve.",tipo:"Po√ß√£o",icone:"ü•∑",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_invisibility.jpg",system:{alcance:"none",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 183"}},{nome:"Po√ß√£o de Compreens√£o",preco:"T$ 30",efeito:"",descricao:"Essa magia lhe confere compreens√£o sobrenatural. Voc√™ pode tocar um texto e entender as palavras mesmo que n√£o conhe√ßa o idioma. Se tocar numa criatura inteligente, pode se comunicar com ela mesmo que n√£o tenham um idioma em comum. Se tocar uma criatura n√£o inteligente, como um animal, pode perceber seus sentimentos. Voc√™ tamb√©m pode gastar uma a√ß√£o de movimento para ouvir os pensamentos de uma criatura tocada (voc√™ &ldquo;ouve&rdquo; o que o alvo est√° pensando), mas um alvo involunt√°rio tem direito a um teste de Vontade para proteger seus pensamentos e evitar este efeito.",tipo:"Po√ß√£o",icone:"üß†",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_invisibilitytotem.jpg",system:{alcance:"toque",alvo:"1 criatura ou texto",resistencia:"Vontade anula (veja descri√ß√£o).",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 184"}},{nome:"Po√ß√£o de Concentra√ß√£o de Combate (cena)",preco:"T$ 270",efeito:"",descricao:"Voc√™ amplia sua percep√ß√£o, antecipando movimentos dos inimigos e achando brechas em sua defesa. Quando faz um ataque, voc√™ rola dois dados e usa o melhor resultado.",tipo:"Po√ß√£o",icone:"üéØ",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_blessedrecovery.jpg",system:{alcance:"toque",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5}},{nome:"Po√ß√£o de Curar Ferimentos (11d8+11 PV)",preco:"T$ 3000",efeito:"11d8+11",descricao:"Voc√™ canaliza energia positiva que recupera 11d8+11 pontos de vida na criatura tocada.",tipo:"Po√ß√£o",icone:"‚ù§Ô∏è",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_potion_54.jpg",system:{alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 189"}},{nome:"Po√ß√£o de Curar Ferimentos (2d8+2 PV)",preco:"T$ 30",efeito:"2d8+2",descricao:"Voc√™ canaliza energia positiva que recupera 2d8+2 pontos de vida na criatura tocada.",tipo:"Po√ß√£o",icone:"‚ù§Ô∏è",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_potion_54.jpg",system:{alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 189"}},{nome:"Po√ß√£o de Curar Ferimentos (4d8+4 PV)",preco:"T$ 270",efeito:"2d8+2",descricao:"Voc√™ canaliza energia positiva que recupera 2d8+2 pontos de vida na criatura tocada.",tipo:"Po√ß√£o",icone:"‚ù§Ô∏è",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_potion_54.jpg",system:{alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 189"}},{nome:"Po√ß√£o de Curar Ferimentos (7d8+7 PV)",preco:"T$ 1080",efeito:"2d8+2",descricao:"Voc√™ canaliza energia positiva que recupera 7d8+7 pontos de vida na criatura tocada.",tipo:"Po√ß√£o",icone:"‚ù§Ô∏è",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_potion_54.jpg",system:{alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 189"}},{nome:"Po√ß√£o de Disfarce Ilus√≥rio",preco:"T$ 30",efeito:"",descricao:"Voc√™ muda a apar√™ncia do alvo, incluindo seu equipamento. Isso inclui altura, peso, tom de pele, cor de cabelo, timbre de voz etc. O alvo recebe +10 em testes de Engana√ß√£o para disfarce. O alvo n√£o recebe novas habilidades (voc√™ pode ficar parecido com outra ra√ßa, mas n√£o ganhar√° as habilidades dela), nem modifica o equipamento (uma espada longa disfar√ßada de bord√£o continua funcionando e causando dano como uma espada).",tipo:"Po√ß√£o",icone:"üé≠",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_polymorph.jpg",system:{alcance:"self",alvo:"Voc√™",resistencia:"Vontade desacredita",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 191"}},{nome:"Po√ß√£o de Enfeiti√ßar",preco:"T$ 30",efeito:"",descricao:"O alvo da po√ß√£o fica enfeiti√ßado pela primeira criatura que enxergar.Esta magia torna o alvo prestativo (veja a p√°gina 118). Ele n√£o fica sob seu controle, mas percebe suas palavras e a√ß√µes da maneira mais favor√°vel poss√≠vel. Voc√™ recebe um b√¥nus de +10 em testes de Diplomacia com a v√≠tima. Um alvo hostil ou que esteja envolvido em um combate recebe +5 em seu teste de resist√™ncia. Se voc√™ ou seus aliados tomarem qualquer a√ß√£o hostil contra o alvo, a magia √© dissipada e o alvo retorna √† atitude que tinha antes (ou piorada, de acordo com o mestre).",tipo:"Po√ß√£o",icone:"üß™",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_potion_54.jpg",system:{alcance:"self",alvo:"1 humanoide",resistencia:"Vontade anula",ativacao:"action",peso:.5,espacos:.5}},{nome:"Po√ß√£o de Escudo da F√© (cena)",preco:"T$ 30",efeito:"",descricao:"Um escudo m√≠stico se manifesta momentaneamente para bloquear um golpe. O alvo recebe +2 na Defesa.",tipo:"Po√ß√£o",icone:"‚úùÔ∏è",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_powerwordshield.jpg",system:{alcance:"toque",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5}},{nome:"Po√ß√£o de F√≠sico Divino (3 atributos)",preco:"T$ 1080",efeito:"",descricao:"O alvo se torna uma vers√£o mais poderosa de si mesmo. O alvo recebe +2 em For√ßa, Destreza e Constitui√ß√£o. Esse aumento n√£o oferece PV ou PM adicionais.",tipo:"Po√ß√£o",icone:"üí™",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_fistofjustice.jpg",system:{alcance:"toque",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5}},{nome:"Po√ß√£o de F√≠sico Divino",preco:"T$ 270",efeito:"",descricao:"O alvo se torna uma vers√£o mais poderosa de si mesmo. O alvo recebe +2 em For√ßa, Destreza ou Constitui√ß√£o, a sua escolha. Esse aumento n√£o oferece PV ou PM adicionais.",tipo:"Po√ß√£o",icone:"üí™",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_fistofjustice.jpg",system:{alcance:"toque",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5}},{nome:"Po√ß√£o de Invisibilidade (cena)",preco:"T$ 1080",efeito:"",descricao:"O alvo fica invis√≠vel, incluindo seu equipamento. Ele recebe camuflagem total e +20 em testes de Furtividade. Como o normal, criaturas que n√£o possam v√™-lo ficam desprevenidas contra seus ataques.\n\nA magia termina se o alvo faz um ataque ou usa uma habilidade hostil. A√ß√µes contra objetos livres n√£o dissipam a Invisibilidade (voc√™ pode tocar ou apanhar objetos que n√£o estejam sendo segurados por outras criaturas). Causar dano indiretamente ‚Äî por exemplo, acendendo o pavio de um barril de p√≥lvora que vai detonar mais tarde ‚Äî n√£o √© considerado um ataque.\n\nObjetos soltos pelo alvo voltam a ser vis√≠veis e objetos apanhados por ele ficam invis√≠veis. Uma luz transportada pelo alvo nunca fica invis√≠vel (mesmo que sua fonte seja). Qualquer parte de um item carregado que se estenda al√©m de seu alcance corpo a corpo natural se torna vis√≠vel.",tipo:"Po√ß√£o",icone:"üëª",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_magic_lesserinvisibilty.jpg",system:{alcance:"toque",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5}},{nome:"Po√ß√£o de Mente Divina",preco:"T$ 270",efeito:"",descricao:"Voc√™ traz inspira√ß√£o divina √† mente do alvo. Escolha entre Intelig√™ncia, Sabedoria ou Carisma. O alvo recebe +4 no atributo escolhido. Esse aumento n√£o oferece PV, PM ou per√≠cias adicionais.",tipo:"Po√ß√£o",icone:"üß†",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_arcane_arcane01.jpg",system:{alcance:"toque",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5}},{nome:"Po√ß√£o de Metamorfose",preco:"T$ 270",efeito:"",descricao:"Voc√™ muda sua apar√™ncia e forma ‚Äî incluindo seu equipamento ‚Äî para qualquer outra criatura, existente ou imaginada. Independentemente da forma escolhida, voc√™ recebe +20 em testes de Engana√ß√£o para disfarce. Caracter√≠sticas n√£o mencionadas n√£o mudam.\n\nSe mudar para uma forma humanoide, pode mudar o tipo de dano f√≠sico de suas armas (se usa uma ma√ßa e transform√°- la em espada longa, ela pode causar dano de corte, por exemplo). Se quiser, pode assumir uma forma humanoide com uma categoria de tamanho acima ou abaixo da sua; nesse caso aplique os modificadores em Furtividade e testes de manobra.\n\nSe mudar para outras formas, voc√™ pode escolher uma Forma Selvagem do druida (veja no Cap√≠tulo 1). Nesse caso voc√™ n√£o pode atacar com suas armas, falar ou lan√ßar magias at√© voltar ao normal, mas recebe uma ou mais armas naturais e os b√¥nus da forma selvagem escolhida.",tipo:"Po√ß√£o",icone:"ü¶ã",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_polymorph.jpg",system:{alcance:"toque",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5}},{nome:"Po√ß√£o de Primor Atl√©tico",preco:"T$ 30",efeito:"",descricao:"Voc√™ modifica os limites f√≠sicos do alvo, que recebe deslocamento +9m e +10 em testes de Atletismo.",tipo:"Po√ß√£o",icone:"üèÉ",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_swiftness.jpg",system:{alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 201"}},{nome:"Po√ß√£o de Prote√ß√£o Divina",preco:"T$ 30",efeito:"",descricao:"Esta magia cria uma barreira m√≠stica invis√≠vel que fornece ao alvo +2 em testes de resist√™ncia.",tipo:"Po√ß√£o",icone:"üõ°Ô∏è",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_barrier.jpg",system:{alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 202"}},{nome:"Po√ß√£o de Purifica√ß√£o",preco:"T$ 270",efeito:"",descricao:"Seu toque purifica a criatura tocada. Esta magia remove uma das seguintes condi√ß√µes: abalado, apavorado, alquebrado, atordoado, cego, confuso, debilitado, enjoado, envenenado, esmorecido, exausto, fascinado, fatigado, fraco, frustrado, lento, ofuscado, paralisado, pasmo ou surdo.",tipo:"Po√ß√£o",icone:"üßπ",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_purify.jpg",system:{alcance:"toque",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 202"}},{nome:"Po√ß√£o de Resist√™ncia a Energia",preco:"T$ 30",efeito:"",descricao:"Ao lan√ßar esta magia, escolha entre √°cido, eletricidade, fogo, frio, luz ou trevas. O alvo recebe redu√ß√£o de dano 10 contra o tipo de dano escolhido.",tipo:"Po√ß√£o",icone:"üî•",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_frost_frostresistancetotem_01.jpg",system:{alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 204"}},{nome:"Po√ß√£o de Sono",preco:"T$ 30",efeito:"",descricao:"Um cansa√ßo m√≠stico recai sobre o alvo. Se falhar na resist√™ncia, ele fica inconsciente e ca√≠do ou, se estiver envolvido em combate ou outra situa√ß√£o perigosa, fica exausto por 1 rodada, depois fatigado. Em ambos os casos, se passar, o alvo fica fatigado por 1d4 rodadas.",tipo:"Po√ß√£o",icone:"üò¥",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_sleep.jpg",system:{alcance:"toque",alvo:"1 criatura de ND 2 ou menor",resistencia:"Vontade parcial",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 207"}},{nome:"Po√ß√£o de Suporte Ambiental",preco:"T$ 30",efeito:"",descricao:"Esta magia garante a sobreviv√™ncia em ambientes hostis. O alvo fica imune aos efeitos de calor e frio extremos, pode respirar na √°gua se respirar ar (ou vice-versa) e n√£o sufoca em fuma√ßa densa.",tipo:"Po√ß√£o",icone:"üåä",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_ancestralguardian.jpg",system:{alcance:"toque",alvo:"1 criatura",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 207"}},{nome:"Po√ß√£o de Velocidade",preco:"T$ 270",efeito:"",descricao:"O alvo pode realizar uma a√ß√£o padr√£o ou de movimento adicional por turno. Esta a√ß√£o n√£o pode ser usada para lan√ßar magias e ativar engenhocas.",tipo:"Po√ß√£o",icone:"‚ö°",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_swiftness.jpg",system:{alcance:"toque",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5}},{nome:"Po√ß√£o de Vis√£o M√≠stica",preco:"T$ 30",efeito:"",descricao:"Seus olhos brilham com uma luz azul e passam a enxergar auras m√°gicas. Este efeito √© similar ao uso de Misticismo para detectar magia, mas voc√™ detecta todas as auras m√°gicas em alcance m√©dio e recebe todas as informa√ß√µes sobre elas sem gastar a√ß√µes. Al√©m disso, voc√™ pode gastar uma a√ß√£o de movimento para descobrir se uma criatura que possa perceber em alcance m√©dio √© capaz de lan√ßar magias e qual a aura gerada pelas magias de c√≠rculo mais alto que ela pode lan√ßar.",tipo:"Po√ß√£o",icone:"üëÅÔ∏è",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_searinglightpriest.jpg",system:{alcance:"toque",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5}},{nome:"Po√ß√£o de Vitalidade Fantasma",preco:"T$ 30",efeito:"2d8",descricao:"Voc√™ suga energia vital da terra, recebendo 2d8 pontos de vida tempor√°rios. Os PV tempor√°rios desaparecem ao final da cena.",tipo:"Po√ß√£o",icone:"üëª",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_deathknight_ghoulfrenzy.jpg",system:{alcance:"toque",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5}},{nome:"Po√ß√£o de Voz Divina",preco:"T$ 270",efeito:"",descricao:"Voc√™ pode conversar com criaturas de qualquer ra√ßa e tipo: animal, construto, esp√≠rito, humanoide, monstro ou morto-vivo. Pode fazer perguntas e entende suas respostas, mesmo sem um idioma em comum ou se a criatura n√£o for capaz de falar, mas respeitando os limites da Intelig√™ncia dela. A atitude dessas criaturas n√£o √© alterada, mas voc√™ pode usar a per√≠cia Diplomacia para tentar mudar sua atitude.",tipo:"Po√ß√£o",icone:"üó£Ô∏è",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_divinespirit.jpg",system:{alcance:"toque",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5}},{nome:"√ìleo de Aben√ßoar Alimentos",preco:"T$ 30",efeito:"",descricao:"Voc√™ purifica e aben√ßoa uma por√ß√£o de comida ou dose de bebida. Isso torna um alimento sujo, estragado ou envenenado pr√≥prio para consumo. Al√©m disso, se for consumido at√© o final da dura√ß√£o, o alimento oferece 5 PV tempor√°rios ou 1 PM tempor√°rio (al√©m de quaisquer b√¥nus que j√° oferecesse). B√¥nus de alimenta√ß√£o duram um dia e cada personagem s√≥ pode receber um b√¥nus de alimenta√ß√£o por dia.",tipo:"√ìleo",icone:"üõ¢Ô∏è",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_blessingofstrength.jpg",system:{alcance:"toque",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 178"}},{nome:"√ìleo de Alterar Tamanho",preco:"T$ 270",efeito:"",descricao:"Esta magia aumenta ou diminui o tamanho de um item mundano em at√© tr√™s categorias (um objeto Enorme vira Pequeno, por exemplo). Voc√™ tamb√©m pode mudar a consist√™ncia do item, deixando-o r√≠gido como pedra ou flex√≠vel como seda (isso n√£o altera sua RD ou PV, apenas suas propriedades f√≠sicas). Se lan√ßar a magia num objeto de uma criatura involunt√°ria, ela pode fazer um teste de Vontade para anul√°-la.",tipo:"√ìleo",icone:"üõ¢Ô∏è",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_blessingofstrength.jpg",system:{alcance:"toque",alvo:"1 objeto",duracao:"1 dia",resistencia:"Vontade",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 179"}},{nome:"√ìleo de Arma M√°gica (+3)",preco:"T$ 750",efeito:"",descricao:"A arma fornece +3 nos testes de ataque e rolagens de dano e √© considerada m√°gica (n√£o cumulativo com b√¥nus de encantos). Caso voc√™ esteja empunhando a arma, pode usar seu atributo-chave de magias em vez do atributo original nos testes de ataque (n√£o cumulativo com efeitos que somam este atributo).",tipo:"√ìleo",icone:"‚öîÔ∏è",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_sword_30.jpg",system:{alcance:"toque",alvo:"1 arma",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 181"}},{nome:"√ìleo de Arma M√°gica",preco:"T$ 30",efeito:"",descricao:"A arma fornece +1 nos testes de ataque e rolagens de dano e √© considerada m√°gica (n√£o cumulativo com b√¥nus de encantos). Caso voc√™ esteja empunhando a arma, pode usar seu atributo-chave de magias em vez do atributo original nos testes de ataque (n√£o cumulativo com efeitos que somam este atributo).",tipo:"√ìleo",icone:"‚öîÔ∏è",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_sword_30.jpg",system:{alcance:"toque",alvo:"1 arma",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 181"}},{nome:"√ìleo de Armamento da Natureza",preco:"T$ 270",efeito:"",descricao:"Voc√™ fortalece uma arma mundana primitiva (sem custo em T$, como bord√£o, clava, funda ou tacape), uma arma natural ou um ataque desarmado. O dano da arma aumenta em um passo e ela √© considerada m√°gica. Ao lan√ßar a magia, voc√™ pode mudar o tipo de dano da arma (escolhendo entre corte, impacto ou perfura√ß√£o).",tipo:"√ìleo",icone:"‚öîÔ∏è",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_sword_30.jpg",system:{alcance:"self",alvo:"1 arma (veja texto)",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 181"}},{nome:"√ìleo de Escurid√£o",preco:"T$ 30",efeito:"",descricao:"O alvo emana sombras em uma √°rea com 6m de raio. Criaturas dentro da √°rea recebem camuflagem leve por escurid√£o leve. As sombras n√£o podem ser iluminadas por nenhuma fonte de luz natural. O objeto pode ser guardado (em um bolso, por exemplo) para interromper a escurid√£o, que voltar√° a funcionar caso o objeto seja revelado. Se lan√ßar a magia num objeto de uma criatura involunt√°ria, ela tem direito a um teste de Vontade para anul√°-la. Escurid√£o anula Luz.",tipo:"√ìleo",icone:"üåë",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_shadowbolt.jpg",system:{alcance:"toque",alvo:"1 alvo",resistencia:"Vontade anula (veja texto)",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 193"}},{nome:"√ìleo de Luz",preco:"T$ 30",efeito:"",descricao:"O alvo emite luz (mas n√£o produz calor) em uma √°rea com 6m de raio. O objeto pode ser guardado (em um bolso, por exemplo) para interromper a luz, que voltar√° a funcionar caso o objeto seja revelado. Se lan√ßar a magia num objeto de uma criatura involunt√°ria, ela tem direito a um teste de Vontade para anul√°-la. Luz anula Escurid√£o.",tipo:"√ìleo",icone:"üí°",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_flashheal.jpg",system:{alcance:"curto",alvo:"1 objeto",resistencia:"Vontade anula (veja texto)",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 197"}},{nome:"√ìleo de Tranca Arcana",preco:"T$ 30",efeito:"",descricao:"Esta magia tranca uma porta ou outro item que possa ser aberto ou fechado (como um ba√∫, caixa etc.), aumentando a CD de testes de For√ßa ou Ladinagem para abri-lo em +10. Voc√™ pode abrir livremente sua pr√≥pria tranca sem problemas.",tipo:"√ìleo",icone:"üîí",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/ability_rogue_sprint.jpg",system:{alcance:"toque",alvo:"1 objeto Grande ou menor",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 209"}},{nome:"√ìleo de Vestimenta da F√©",preco:"T$ 270",efeito:"",descricao:"Voc√™ fortalece uma indument√°ria com o poder de sua f√©. Isso aumenta o b√¥nus de Defesa de uma armadura ou escudo em +2 (isso √© uma melhoria no item, portanto √© cumulativa com outras magias). No caso de um traje, ele passa a oferecer +2 na Defesa e continua contando como se voc√™ n√£o estivesse usando armadura.",tipo:"√ìleo",icone:"üõ°Ô∏è",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_holy_sealofprotection.jpg",system:{alcance:"toque",resistencia:"Nenhuma",ativacao:"action",peso:.5,espacos:.5,source:"Tormenta20 ‚Äî Edi√ß√£o Jogo do Ano, p. 210"}}]}catch{return console.warn("Generated potions data not available, using hardcoded data"),[]}}function ue(e){const a=document.getElementById("prato-detail-modal");a&&a.remove();const o=document.getElementById("prato-detail-overlay");o&&o.remove();const t=document.createElement("div");t.id="prato-detail-overlay",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0,0,0,0.7)",t.style.zIndex="10002",t.onclick=()=>{t.remove(),s.remove()},document.body.appendChild(t);const s=document.createElement("div");s.id="prato-detail-modal",s.style.position="fixed",s.style.top="50%",s.style.left="50%",s.style.transform="translate(-50%, -50%)",s.style.background="rgba(30,30,40,0.98)",s.style.border="2px solid #ffb86c",s.style.borderRadius="12px",s.style.padding="20px",s.style.zIndex="10003",s.style.maxWidth="500px",s.style.maxHeight="80vh",s.style.overflowY="auto",s.style.boxShadow="0 8px 32px rgba(0,0,0,0.8)";const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="flex-start",r.style.marginBottom="15px";const n=document.createElement("div");if(n.style.display="flex",n.style.alignItems="center",n.style.gap="12px",n.style.flex="1",e.iconeUrl){const a=document.createElement("div");a.style.position="relative",a.style.width="3rem",a.style.height="3rem",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.border="2px solid #ffb86c",a.style.borderRadius="8px",a.style.padding="2px",a.style.backgroundColor="#23243a";const o=ua(e.iconeUrl,e.nome,e.icone||"üç≤",{width:"100%",height:"100%",borderRadius:"6px",objectFit:"cover",showSkeleton:!0});a.appendChild(o),n.appendChild(a)}const i=document.createElement("div");i.style.display="flex",i.style.flexDirection="column",i.style.gap="4px";const c=document.createElement("div");c.textContent=e.nome,c.style.color="#ffb86c",c.style.fontSize="18px",c.style.fontWeight="bold",i.appendChild(c);const d=document.createElement("div");d.textContent=`Raridade: ${e.raridade||"Comum"}`,d.style.color="#6ec6ff",d.style.fontSize="14px",i.appendChild(d),n.appendChild(i),r.appendChild(n);const l=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{s.remove(),t.remove()}});r.appendChild(l.render()),s.appendChild(r);const m=document.createElement("div");m.style.marginBottom="15px";const u=document.createElement("h3");u.textContent="Descri√ß√£o",u.style.color="#6ec6ff",u.style.fontSize="16px",u.style.margin="0 0 8px 0",m.appendChild(u);const p=document.createElement("p");p.textContent=e.descricao,p.style.color="#ecf0f1",p.style.fontSize="14px",p.style.margin="0",p.style.lineHeight="1.4",m.appendChild(p),s.appendChild(m);const g=document.createElement("div");g.style.marginBottom="15px";const f=document.createElement("h3");f.textContent="Benef√≠cio",f.style.color="#6ec6ff",f.style.fontSize="16px",f.style.margin="0 0 8px 0",g.appendChild(f);const v=document.createElement("p");v.textContent=e.bonus,v.style.color="#ffb86c",v.style.fontSize="14px",v.style.fontWeight="bold",v.style.margin="0",g.appendChild(v),s.appendChild(g);const y=document.createElement("div");y.style.marginBottom="15px";const b=document.createElement("h3");b.textContent="Dura√ß√£o do Efeito",b.style.color="#6ec6ff",b.style.fontSize="16px",b.style.margin="0 0 8px 0",y.appendChild(b);const h=document.createElement("p");let x="1 dia (24 horas)";"Batata Valkariana"===e.nome&&(x="At√© o b√¥nus ser aplicado (consum√≠vel)"),h.textContent=x,h.style.color="#27ae60",h.style.fontSize="14px",h.style.fontWeight="bold",h.style.margin="0",h.style.padding="8px 12px",h.style.background="#1a1a2e",h.style.border="1px solid #27ae60",h.style.borderRadius="6px",y.appendChild(h),s.appendChild(y);const C=document.createElement("div");C.style.marginBottom="20px";const w=document.createElement("h3");w.textContent="Informa√ß√µes de Culin√°ria",w.style.color="#6ec6ff",w.style.fontSize="16px",w.style.margin="0 0 8px 0",C.appendChild(w);const q=document.createElement("div");q.style.display="grid",q.style.gridTemplateColumns="1fr 1fr",q.style.gap="10px",[{label:"Pre√ßo",value:e.preco,color:"#ffb86c"},{label:"CD do Teste",value:e.cdTeste,color:"#ffb86c"},{label:"Ingredientes",value:e.ingredientes,color:"#ecf0f1"},{label:"Custo dos Ingredientes",value:e.custoIngredientes,color:"#ecf0f1"}].forEach(e=>{const a=document.createElement("div");a.style.background="#23243a",a.style.padding="8px 10px",a.style.borderRadius="6px",a.style.border="1px solid #444";const o=document.createElement("div");o.textContent=e.label,o.style.color="#888",o.style.fontSize="12px",o.style.marginBottom="2px",a.appendChild(o);const t=document.createElement("div");t.textContent=e.value,t.style.color=e.color,t.style.fontSize="13px",t.style.fontWeight="bold",a.appendChild(t),q.appendChild(a)}),C.appendChild(q),s.appendChild(C);const E=document.createElement("div");E.style.display="flex",E.style.gap="10px",E.style.marginTop="20px";const z=document.createElement("button");z.textContent="Compartilhar",z.style.flex="1",z.style.padding="10px 15px",z.style.background="#2c3e50",z.style.border="1px solid #34495e",z.style.borderRadius="6px",z.style.color="#ecf0f1",z.style.cursor="pointer",z.style.fontSize="14px",z.onclick=()=>{Z(`&{template:t20-info}{{infoname=${e.nome}}}{{description=${e.descricao} ${e.bonus}}}`),A(`Prato "${e.nome}" compartilhado no chat!`),Ce()},E.appendChild(z);const S=document.createElement("button");S.textContent="Consumir Prato",S.style.flex="1",S.style.padding="10px 15px",S.style.background="#27ae60",S.style.border="1px solid #2ecc71",S.style.borderRadius="6px",S.style.color="#ecf0f1",S.style.cursor="pointer",S.style.fontSize="14px",S.onclick=()=>{const a="prato_"+e.nome.toLowerCase().replace(/[^a-z0-9]+/g,"_"),o={name:e.nome,description:e.descricao+" "+e.bonus,type:"Comida",effectKey:a};let t=Je();if(t.includes(a))_(`Prato "${e.nome}" j√° est√° ativo nos efeitos!`);else{let s=JSON.parse(localStorage.getItem("tormenta-20-hotbars-comida-effects")||"[]");s=s.filter(e=>e.effectKey!==a),s.push(o),localStorage.setItem("tormenta-20-hotbars-comida-effects",JSON.stringify(s)),t.push(a),ia(a,"food"),A(`Prato "${e.nome}" consumido! Efeito ativo por 1 dia (24 horas).`),Ge(t),Ye(),pa(),Z(`/em ${$()} consumiu **${e.nome}** ${e.icone||"üçΩÔ∏è"}`)}Ce()},E.appendChild(S),s.appendChild(E),document.body.appendChild(s)}function pe(e){const a=document.getElementById("bebida-detail-modal");a&&a.remove();const o=document.getElementById("bebida-detail-overlay");o&&o.remove();const t=document.createElement("div");t.id="bebida-detail-overlay",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0,0,0,0.7)",t.style.zIndex="10002",t.onclick=()=>{t.remove(),s.remove()},document.body.appendChild(t);const s=document.createElement("div");s.id="bebida-detail-modal",s.style.position="fixed",s.style.top="50%",s.style.left="50%",s.style.transform="translate(-50%, -50%)",s.style.background="rgba(30,30,40,0.98)",s.style.border="2px solid #ffb86c",s.style.borderRadius="12px",s.style.padding="20px",s.style.zIndex="10003",s.style.maxWidth="500px",s.style.maxHeight="80vh",s.style.overflowY="auto",s.style.boxShadow="0 8px 32px rgba(0,0,0,0.8)";const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="flex-start",r.style.marginBottom="15px";const n=document.createElement("div");if(n.style.display="flex",n.style.alignItems="center",n.style.gap="12px",n.style.flex="1",e.iconeUrl){const a=document.createElement("div");a.style.position="relative",a.style.width="3rem",a.style.height="3rem",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.border="2px solid #ffb86c",a.style.borderRadius="8px",a.style.padding="2px",a.style.backgroundColor="#23243a";const o=ua(e.iconeUrl,e.nome,e.icone||"üç∫",{width:"100%",height:"100%",borderRadius:"6px",objectFit:"cover",showSkeleton:!0});a.appendChild(o),n.appendChild(a)}const i=document.createElement("div");i.style.display="flex",i.style.flexDirection="column",i.style.gap="4px";const c=document.createElement("div");c.textContent=e.nome,c.style.color="#ffb86c",c.style.fontSize="18px",c.style.fontWeight="bold",i.appendChild(c);const d=document.createElement("div");d.textContent=`Tipo: ${e.tipo}`,d.style.color="#6ec6ff",d.style.fontSize="14px",i.appendChild(d),n.appendChild(i),r.appendChild(n);const l=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{s.remove(),t.remove()}});r.appendChild(l.render()),s.appendChild(r);const m=document.createElement("div");m.style.marginBottom="15px";const u=document.createElement("h3");u.textContent="Descri√ß√£o",u.style.color="#6ec6ff",u.style.fontSize="16px",u.style.margin="0 0 8px 0",m.appendChild(u);const p=document.createElement("p");p.textContent=e.descricao,p.style.color="#ecf0f1",p.style.fontSize="14px",p.style.margin="0",p.style.lineHeight="1.4",m.appendChild(p),s.appendChild(m);const g=document.createElement("div");g.style.marginBottom="15px";const f=document.createElement("h3");f.textContent="Efeito",f.style.color="#6ec6ff",f.style.fontSize="16px",f.style.margin="0 0 8px 0",g.appendChild(f);const v=document.createElement("p");v.textContent=e.efeito,v.style.color="#ffb86c",v.style.fontSize="14px",v.style.fontWeight="bold",v.style.margin="0",g.appendChild(v),s.appendChild(g);const y=document.createElement("div");y.style.marginBottom="15px";const b=document.createElement("h3");b.textContent="Dura√ß√£o do Efeito",b.style.color="#6ec6ff",b.style.fontSize="16px",b.style.margin="0 0 8px 0",y.appendChild(b);const h=document.createElement("p");let x="1 dia (24 horas)";"Baba de Troll"===e.nome&&(x="At√© o b√¥nus ser aplicado (consum√≠vel)"),h.textContent=x,h.style.color="#27ae60",h.style.fontSize="14px",h.style.fontWeight="bold",h.style.margin="0",h.style.padding="8px 12px",h.style.background="#1a1a2e",h.style.border="1px solid #27ae60",h.style.borderRadius="6px",y.appendChild(h),s.appendChild(y);const C=document.createElement("div");C.style.marginBottom="20px";const w=document.createElement("h3");w.textContent="Informa√ß√µes da Bebida",w.style.color="#6ec6ff",w.style.fontSize="16px",w.style.margin="0 0 8px 0",C.appendChild(w);const q=document.createElement("div");q.style.display="grid",q.style.gridTemplateColumns="1fr 1fr",q.style.gap="10px";const E=[{label:"CD Fortitude",value:e.cd,color:"#ffb86c"}];e.observacao&&E.push({label:"Observa√ß√£o",value:e.observacao,color:"#ecf0f1"}),E.forEach(e=>{const a=document.createElement("div");a.style.background="#23243a",a.style.padding="8px 10px",a.style.borderRadius="6px",a.style.border="1px solid #444";const o=document.createElement("div");o.textContent=e.label,o.style.color="#888",o.style.fontSize="12px",o.style.marginBottom="2px",a.appendChild(o);const t=document.createElement("div");t.textContent=e.value,t.style.color=e.color,t.style.fontSize="13px",t.style.fontWeight="bold",a.appendChild(t),q.appendChild(a)}),C.appendChild(q),s.appendChild(C);const z=document.createElement("div");z.style.display="flex",z.style.gap="10px",z.style.marginTop="20px";const S=document.createElement("button");S.textContent="Compartilhar",S.style.flex="1",S.style.padding="10px 15px",S.style.background="#2c3e50",S.style.border="1px solid #34495e",S.style.borderRadius="6px",S.style.color="#ecf0f1",S.style.cursor="pointer",S.style.fontSize="14px",S.onclick=()=>{Z(`&{template:t20-info}{{infoname=${e.nome}}}{{description=${e.descricao} ${e.efeito}}}`),A(`Bebida "${e.nome}" compartilhada no chat!`),Ce()},z.appendChild(S);const k=document.createElement("button");k.textContent="Consumir Bebida",k.style.flex="1",k.style.padding="10px 15px",k.style.background="#27ae60",k.style.border="1px solid #2ecc71",k.style.borderRadius="6px",k.style.color="#ecf0f1",k.style.cursor="pointer",k.style.fontSize="14px",k.onclick=()=>{const a="bebida_"+e.nome.toLowerCase().replace(/[^a-z0-9]+/g,"_"),o={name:e.nome,description:e.descricao+" "+e.efeito,type:"Bebida",effectKey:a};let t=Je();if(t.includes(a))_(`Bebida "${e.nome}" j√° est√° ativa nos efeitos!`);else{let s=JSON.parse(localStorage.getItem("tormenta-20-hotbars-bebida-effects")||"[]");s=s.filter(e=>e.effectKey!==a),s.push(o),localStorage.setItem("tormenta-20-hotbars-bebida-effects",JSON.stringify(s)),t.push(a),ia(a,"drink");let r=`Bebida "${e.nome}" consumida! Efeito ativo por 1 dia (24 horas).`;"Baba de Troll"===e.nome&&(r=`Bebida "${e.nome}" consumida! B√¥nus dispon√≠vel para uso.`),A(r),Ge(t),Ye(),pa(),Z(`/em ${$()} consumiu **${e.nome}** ${e.icone||"üç∫"}`)}Ce()},z.appendChild(k),s.appendChild(z),document.body.appendChild(s)}function ge(e){const a=document.getElementById("pocao-detail-modal");a&&a.remove();const o=document.getElementById("pocao-detail-overlay");o&&o.remove();const t=document.createElement("div");t.id="pocao-detail-overlay",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0,0,0,0.7)",t.style.zIndex="10002",t.onclick=()=>{t.remove(),s.remove()},document.body.appendChild(t);const s=document.createElement("div");s.id="pocao-detail-modal",s.style.position="fixed",s.style.top="50%",s.style.left="50%",s.style.transform="translate(-50%, -50%)",s.style.background="rgba(30,30,40,0.98)",s.style.border="2px solid #ffb86c",s.style.borderRadius="12px",s.style.padding="20px",s.style.zIndex="10003",s.style.maxWidth="600px",s.style.maxHeight="85vh",s.style.overflowY="auto",s.style.boxShadow="0 8px 32px rgba(0,0,0,0.8)";const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="flex-start",r.style.marginBottom="20px";const n=document.createElement("div");if(n.style.display="flex",n.style.alignItems="center",n.style.gap="12px",n.style.flex="1",e.iconeUrl){const a=document.createElement("div");a.style.position="relative",a.style.width="3rem",a.style.height="3rem",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.border="2px solid #ffb86c",a.style.borderRadius="8px",a.style.padding="2px",a.style.backgroundColor="#23243a";const o=ua(e.iconeUrl,e.nome,e.icone||"üß™",{width:"100%",height:"100%",borderRadius:"6px",objectFit:"cover",showSkeleton:!0});a.appendChild(o),n.appendChild(a)}const i=document.createElement("div");i.style.display="flex",i.style.flexDirection="column",i.style.gap="4px";const c=document.createElement("div");c.textContent=e.nome,c.style.color="#ffb86c",c.style.fontSize="18px",c.style.fontWeight="bold",i.appendChild(c);const d=document.createElement("div");d.textContent=`Tipo: ${e.tipo}`,d.style.color="#6ec6ff",d.style.fontSize="14px",i.appendChild(d),n.appendChild(i),r.appendChild(n);const l=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{s.remove(),t.remove()}});r.appendChild(l.render()),s.appendChild(r);const m=document.createElement("div");m.style.display="flex",m.style.flexWrap="wrap",m.style.gap="8px",m.style.marginBottom="20px";const u=(e,a,o)=>{const t=document.createElement("div");return t.textContent=e,t.style.padding="4px 8px",t.style.borderRadius="12px",t.style.fontSize="12px",t.style.fontWeight="bold",t.style.color=a,t.style.backgroundColor=o,t.style.border=`1px solid ${a}`,t};if(e.preco&&m.appendChild(u(e.preco,"#ffb86c","rgba(255,184,108,0.1)")),e.system?.alcance&&m.appendChild(u(`Alcance: ${e.system.alcance}`,"#6ec6ff","rgba(110,198,255,0.1)")),e.system?.alvo&&m.appendChild(u(`Alvo: ${e.system.alvo}`,"#a78bfa","rgba(167,139,250,0.1)")),e.system?.duracao&&m.appendChild(u(`Dura√ß√£o: ${e.system.duracao}`,"#27ae60","rgba(39,174,96,0.1)")),e.system?.resistencia&&"Nenhuma"!==e.system.resistencia&&m.appendChild(u(`Resist√™ncia: ${e.system.resistencia}`,"#e74c3c","rgba(231,76,60,0.1)")),e.system?.ativacao&&m.appendChild(u(`Ativa√ß√£o: ${e.system.ativacao}`,"#f39c12","rgba(243,156,18,0.1)")),s.appendChild(m),e.efeito){const a=document.createElement("div");a.style.marginBottom="20px",a.style.padding="15px",a.style.background="rgba(255,184,108,0.05)",a.style.border="1px solid rgba(255,184,108,0.2)",a.style.borderRadius="8px";const o=document.createElement("h3");o.textContent="üéØ Efeito Principal",o.style.color="#ffb86c",o.style.fontSize="16px",o.style.margin="0 0 10px 0",o.style.fontWeight="bold",a.appendChild(o);const t=document.createElement("div"),r=e.efeito.split("\n\n").map(e=>`<p>${e.replace(/\n/g,"<br>").replace(/\*(.*?)\*/g,"<em>$1</em>")}</p>`).join("");t.innerHTML=r,t.style.color="#ecf0f1",t.style.fontSize="15px",t.style.fontWeight="bold",t.style.lineHeight="1.4",t.querySelectorAll("p").forEach(e=>{e.style.margin="0 0 8px 0",e.style.padding="0"}),a.appendChild(t),s.appendChild(a)}if(e.descricao){const a=document.createElement("div");a.style.marginBottom="20px";const o=document.createElement("h3");o.textContent="üìñ Descri√ß√£o",o.style.color="#6ec6ff",o.style.fontSize="16px",o.style.margin="0 0 10px 0",o.style.fontWeight="bold",a.appendChild(o);const t=document.createElement("div"),r=e.descricao.split("\n\n").map(e=>`<p>${e.replace(/\n/g,"<br>").replace(/\*(.*?)\*/g,"<em>$1</em>")}</p>`).join("");t.innerHTML=r,t.style.color="#ecf0f1",t.style.fontSize="14px",t.style.lineHeight="1.5",t.querySelectorAll("p").forEach(e=>{e.style.margin="0 0 8px 0",e.style.padding="0"}),a.appendChild(t),s.appendChild(a)}const p=[];if(e.system?.peso&&p.push({label:"Peso",value:`${e.system.peso} kg`}),e.system?.espacos&&p.push({label:"Espa√ßos",value:e.system.espacos}),e.system?.source&&p.push({label:"Fonte",value:e.system.source}),p.length>0){const e=document.createElement("div");e.style.marginBottom="20px";const a=document.createElement("h3");a.textContent="‚öôÔ∏è Informa√ß√µes T√©cnicas",a.style.color="#6ec6ff",a.style.fontSize="16px",a.style.margin="0 0 10px 0",a.style.fontWeight="bold",e.appendChild(a);const o=document.createElement("div");o.style.display="grid",o.style.gridTemplateColumns="repeat(auto-fit, minmax(150px, 1fr))",o.style.gap="10px",p.forEach(e=>{const a=document.createElement("div");a.style.background="#23243a",a.style.padding="8px 12px",a.style.borderRadius="6px",a.style.border="1px solid #444";const t=document.createElement("div");t.textContent=e.label,t.style.color="#888",t.style.fontSize="12px",t.style.marginBottom="2px",a.appendChild(t);const s=document.createElement("div");s.textContent=e.value,s.style.color="#ecf0f1",s.style.fontSize="13px",s.style.fontWeight="bold",a.appendChild(s),o.appendChild(a)}),e.appendChild(o),s.appendChild(e)}const g=document.createElement("div");g.style.display="flex",g.style.gap="10px",g.style.marginTop="20px";const f=document.createElement("button");f.textContent="üì§ Compartilhar",f.style.flex="1",f.style.padding="12px 15px",f.style.background="#2c3e50",f.style.border="1px solid #34495e",f.style.borderRadius="6px",f.style.color="#ecf0f1",f.style.cursor="pointer",f.style.fontSize="14px",f.style.fontWeight="bold",f.onclick=()=>{Z(`&{template:t20-info}{{infoname=${e.nome}}}{{description=${e.descricao} ${e.efeito}}}`),A(`Po√ß√£o "${e.nome}" compartilhada no chat!`),Ce()},g.appendChild(f);const v=document.createElement("button");v.textContent="üß™ Usar Po√ß√£o",v.style.flex="1",v.style.padding="12px 15px",v.style.background="#27ae60",v.style.border="1px solid #2ecc71",v.style.borderRadius="6px",v.style.color="#ecf0f1",v.style.cursor="pointer",v.style.fontSize="14px",v.style.fontWeight="bold",v.onclick=()=>{const a="pocao_"+e.nome.toLowerCase().replace(/[^a-z0-9]+/g,"_"),o={name:e.nome,description:e.descricao+" "+e.efeito,type:"Po√ß√£o",effectKey:a};let t=Je();if(t.includes(a))_(`Po√ß√£o "${e.nome}" j√° est√° ativa nos efeitos!`);else{let s=JSON.parse(localStorage.getItem("tormenta-20-hotbars-pocao-effects")||"[]");s=s.filter(e=>e.effectKey!==a),s.push(o),localStorage.setItem("tormenta-20-hotbars-pocao-effects",JSON.stringify(s)),t.push(a),ia(a,"potion"),A(`Po√ß√£o "${e.nome}" usada! Efeito ativo por cena.`),Ge(t),Ye(),pa(),Z(`/em ${$()} usou **${e.nome}** ${e.icone||"üß™"}`)}Ce()},g.appendChild(v),s.appendChild(g),document.body.appendChild(s)}function fe(e,a=25){if(!e)return"";const o=e.trim().split(/\s+/);return o.length<=a?e:o.slice(0,a).join(" ")+"..."}function ve(e,a,o){const t="food"===a?"food":"drink"===a?"drink":"potion"===a?"potion":"condition";let s=fe(e.descricao),r=null;if("potion"===a){const a=[];e.preco&&a.push({text:e.preco,color:"#ffb86c"}),e.system?.alcance&&a.push({text:`Alcance: ${e.system.alcance}`,color:"#6ec6ff"}),e.system?.duracao&&a.push({text:`Dura√ß√£o: ${e.system.duracao}`,color:"#27ae60"}),e.system?.resistencia&&"Nenhuma"!==e.system.resistencia&&a.push({text:`Resist√™ncia: ${e.system.resistencia}`,color:"#e74c3c"}),a.length>0&&(r=a)}var n,i,c;return window.Roll20Components.createFavoritableCardWithPreset(t,{title:e.nome,summary:s,bonus:"food"===a?e.bonus:void 0,efeito:"drink"===a||"potion"===a?e.efeito:void 0,efeitos:"condition"===a?e.efeitos:void 0,additionalInfo:r,isFavorite:"food"===a?(c=e.nome,ce().includes(c)):"drink"===a?(i=e.nome,de().includes(i)):"potion"===a&&(n=e.nome,le().includes(n)),onClick:()=>{"food"===a?ue(e):"drink"===a?pe(e):"potion"===a&&ge(e)},onFavoriteToggle:()=>{"food"===a?function(e){let a=ce();const o=a.indexOf(e);o>-1?(a.splice(o,1),_(`Prato "${e}" removido dos favoritos.`)):(a.push(e),A(`Prato "${e}" adicionado aos favoritos!`)),function(e){localStorage.setItem("tormenta-20-hotbars-pratos-favoritos",JSON.stringify(e))}(a)}(e.nome):"drink"===a?function(e){let a=de();const o=a.indexOf(e);o>-1?(a.splice(o,1),_(`Bebida "${e}" removida dos favoritos.`)):(a.push(e),A(`Bebida "${e}" adicionada aos favoritos!`)),function(e){localStorage.setItem("tormenta-20-hotbars-bebidas-favoritas",JSON.stringify(e))}(a)}(e.nome):"potion"===a&&function(e){let a=le();const o=a.indexOf(e);o>-1?(a.splice(o,1),_(`Po√ß√£o "${e}" removida dos favoritos.`)):(a.push(e),A(`Po√ß√£o "${e}" adicionada aos favoritos!`)),function(e){localStorage.setItem("tormenta-20-hotbars-pocoes-favoritas",JSON.stringify(e))}(a)}(e.nome),o&&o()}}).render()}function ye(e,a,o="blue"){const t={blue:"#6ec6ff",orange:"#ffb86c",purple:"#9c27b0",green:"#4caf50",red:"#ff6b6b",brown:"#8B4513"},s=t[o]||t.blue,r=document.createElement("div");return r.style.textAlign="center",r.style.padding="20px",r.style.color="#999",r.style.fontSize="14px",r.style.fontStyle="italic",r.innerHTML=`\n                <div style="margin-bottom: 8px;">üîç</div>\n                <div>Nenhum ${a} encontrado para "<strong style="color: ${s};">${e}</strong>"</div>\n                <div style="margin-top: 8px; font-size: 12px;">Tente um termo diferente ou limpe o filtro</div>\n            `,r}function be(){try{const e=new(window.AudioContext||window.webkitAudioContext),a=e.createOscillator(),o=e.createGain();a.connect(o),o.connect(e.destination),a.frequency.setValueAtTime(800,e.currentTime),a.type="sine",o.gain.setValueAtTime(.3,e.currentTime),o.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),a.start(e.currentTime),a.stop(e.currentTime+.5)}catch(e){g.log("Erro ao tocar som de fallback:",e)}}function he(e){Z("/fx splatter-blood @{target|token_id}"),setTimeout(()=>{Z(e),setTimeout(()=>{!function(){try{const e=new Audio("https://wow.zamimg.com/sound-ids/live/enus/107/567915/m2hSwordHitFlesh1c.ogg");e.volume=.6,e.preload="auto",e.play()}catch(e){g.log("Erro ao criar √°udio de ataque:",e),be()}}()},100)},200)}const xe={Acrobacia:{descricao:"Voc√™ consegue fazer proezas acrob√°ticas.",usos:[{titulo:"Amortecer Queda",descricao:"Reduz o dano de queda (rea√ß√£o). Reduz 1d6 + 1d6 por 5 pontos acima da CD. Se reduzir a 0, cai de p√©.",cd:"CD 15, Apenas Treinado"},{titulo:"Equil√≠brio",descricao:"Andar sobre superf√≠cies prec√°rias (CD 10 a 20). Pode avan√ßar total com ‚Äì5. Se sofrer dano, deve fazer novo teste ou cai.",cd:"CD 10 para piso escorregadio, CD 15 para superf√≠cie estreita, CD 20 para superf√≠cie muito estreita"},{titulo:"Escapar",descricao:"Fugir de amarras (corda, rede, algemas; CD 20 a 30). A√ß√£o completa.",cd:"CD 20 para redes, CD 30 para algemas"},{titulo:"Levantar-se Rapidamente",descricao:"Levanta como a√ß√£o livre com sucesso. Se falhar, gasta a a√ß√£o e continua ca√≠do.",cd:"CD 20, Apenas Treinado"},{titulo:"Passar por Espa√ßo Apertado",descricao:"A√ß√£o completa. Move-se por espa√ßos para criaturas uma categoria menor.",cd:"CD 25, Apenas Treinado"},{titulo:"Passar por Inimigo",descricao:"Teste oposto (Acrobacia/Iniciativa/Luta). Se vencer, atravessa espa√ßo ocupado (terreno dif√≠cil).",cd:"Teste oposto"}]},Adestramento:{descricao:"Voc√™ sabe lidar com animais.",usos:[{titulo:"Acalmar Animal",descricao:"A√ß√£o completa. Acalma um animal nervoso/agressivo.",cd:"CD 25"},{titulo:"Manejar Animal",descricao:"Faz um animal executar tarefa treinada. Tamb√©m usado como Pilotagem para ve√≠culos de tra√ß√£o animal. A√ß√£o de movimento.",cd:"CD 15"}]},Atletismo:{descricao:"Voc√™ pode realizar fa√ßanhas atl√©ticas.",usos:[{titulo:"Corrida",descricao:"A√ß√£o completa. Move 1,5m por ponto no teste. Modificador ¬±2 por cada 1,5m de deslocamento acima/abaixo de 9m. Pode correr por (1 + Constitui√ß√£o) rodadas. Depois, teste de Fortitude por rodada (CD crescente) ou fica fatigado.",cd:"CD baseada na dist√¢ncia"},{titulo:"Escalar",descricao:"A√ß√£o de movimento. CD 10 (apoios), 15 (√°rvore), 20 (ru√≠na), 25 (muro liso). Falha por 5+ = queda. Pode sofrer ‚Äì5 para avan√ßar total. Se sofrer dano ou aliado cair pr√≥ximo, novo teste.",cd:"CD 10 para superf√≠cies com apoios, CD 15 para √°rvore, CD 20 para muro com reentr√¢ncias, CD 25 para muro liso"},{titulo:"Nata√ß√£o",descricao:"A√ß√£o de movimento. CD 10 (calma), 15 (agitada), 20+ (tempestuosa). Falha por 5+ = afunda. Pode fazer segundo teste com nova a√ß√£o de movimento.",cd:"CD 10 para √°gua calma, CD 15 para agitada, CD 20 ou mais para tempestuosa"},{titulo:"Saltar",descricao:"Longo (CD 5 por 1,5m) ou altura (CD 15 por 1,5m). Sem impulso (6m), +10 na CD. Parte do movimento.",cd:"CD 5 por 1,5m para salto longo, CD 15 por 1,5m para salto em altura"}]},"Atua√ß√£o":{descricao:"Voc√™ sabe fazer apresenta√ß√µes art√≠sticas, como m√∫sica, dan√ßa ou teatro.",usos:[{titulo:"Apresenta√ß√£o",descricao:"Teste para ganhar dinheiro (T$ 1d6 + 1d6 por 5 pontos acima). Leva um dia. Lugar prop√≠cio (festival) dobra valor; inadequado (rua) reduz pela metade.",cd:"CD 20"},{titulo:"Impress√£o",descricao:"Teste oposto contra Vontade. Sucesso = +2 em Carisma contra o alvo. Falha = ‚Äì2. N√£o pode repetir no mesmo dia. Se m√∫ltiplos alvos, o mestre faz teste √∫nico.",cd:"Teste oposto contra Vontade"}]},Cavalgar:{descricao:"Voc√™ sabe conduzir animais de montaria (como cavalos, trobos e grifos).",usos:[{titulo:"Conduzir",descricao:"Teste para obst√°culos. CD 15 (ruins), 25 (perigosos). Falha = queda e 1d6 dano.",cd:"CD 15 para obst√°culos ruins, CD 25 para perigosos"},{titulo:"Galopar",descricao:"A√ß√£o completa. Move 1,5m por ponto no teste. Modificador ¬±2 por cada 1,5m al√©m/aqu√©m de 9m.",cd:"CD baseada na dist√¢ncia"},{titulo:"Montar Rapidamente",descricao:"Monta ou desmonta como a√ß√£o livre. Falha por 5+ = cai. Nota: sem sela = ‚Äì5 no teste.",cd:"CD 20"}]},Conhecimento:{descricao:"Voc√™ estudou diversos campos do saber, como aritm√©tica, astronomia, dial√©tica, geografia, hist√≥ria.",usos:[{titulo:"Idiomas",descricao:"Voc√™ pode entender idiomas desconhecidos. Se falhar por 5 ou mais, voc√™ tira uma conclus√£o falsa. Idiomas ex√≥ticos ou muito antigos t√™m CD 30.",cd:"CD 20, idiomas ex√≥ticos CD 30"},{titulo:"Informa√ß√£o",descricao:"Voc√™ responde d√∫vidas gerais. Quest√µes simples, como o ano de funda√ß√£o de um reino, n√£o exigem testes. Quest√µes complexas, como saber o ant√≠doto de um veneno, tem CD 20. Por fim, mist√©rios e enigmas, como a origem de uma antiga maldi√ß√£o, tem CD 30.",cd:"CD 20 para quest√µes complexas, CD 30 para mist√©rios"}]},Cura:{descricao:"Voc√™ sabe tratar ferimentos, doen√ßas e venenos.",usos:[{titulo:"Cuidados Prolongados",descricao:"Voc√™ trata uma pessoa para que ela se recupere mais rapidamente. Se passar, ela aumenta sua recupera√ß√£o de PV em +1 por n√≠vel nesse dia. Este uso leva uma hora e o n√∫mero m√°ximo de pessoas que voc√™ pode cuidar √© igual ao seu n√≠vel.",cd:"CD 15, Apenas Treinado"},{titulo:"Necropsia",descricao:"Voc√™ examina um cad√°ver para determinar a causa e o momento aproximado da morte. Causas raras ou extraordin√°rias, como um veneno ou maldi√ß√£o, possuem CD 30. Este uso leva dez minutos.",cd:"CD 20, Apenas Treinado. Causas raras CD 30"},{titulo:"Primeiros Socorros",descricao:"Voc√™ estabiliza um personagem adjacente que esteja sangrando. Este uso gasta uma a√ß√£o padr√£o.",cd:"CD 15"},{titulo:"Tratamento",descricao:"Voc√™ ajuda a v√≠tima de uma doen√ßa ou veneno com efeito cont√≠nuo. Gaste uma a√ß√£o completa e fa√ßa um teste de Cura contra a CD da doen√ßa ou veneno. Se voc√™ passar, o paciente recebe +5 em seu pr√≥ximo teste de Fortitude contra esse efeito. Esta per√≠cia exige uma maleta de medicamentos. Sem ela, voc√™ sofre ‚Äì5 no teste. Voc√™ pode usar a per√≠cia Cura em si mesmo, mas sofre ‚Äì5 no teste.",cd:"CD da doen√ßa ou veneno, Apenas Treinado"}]},Diplomacia:{descricao:"Voc√™ convence pessoas com l√°bia e argumenta√ß√£o. Usos de Diplomacia s√£o efeitos mentais.",usos:[{titulo:"Barganha",descricao:"Comprando ou vendendo algo, voc√™ pode barganhar. Seu teste de Diplomacia √© oposto pelo teste de Vontade do negociante. Se passar, voc√™ muda o pre√ßo em 10% a seu favor. Se passar por 10 ou mais, muda em 20%. Se falhar por 5 ou mais, voc√™ ofende o negociante ‚Äî ele n√£o voltar√° a tratar com voc√™ durante pelo menos uma semana.",cd:"Teste oposto contra Vontade"},{titulo:"Mudar Atitude",descricao:"Voc√™ muda a categoria de atitude de um NPC em rela√ß√£o a voc√™ ou a outra pessoa. Fa√ßa um teste de Diplomacia oposto pelo teste de Vontade do alvo. Se voc√™ passar, muda a atitude dele em uma categoria para cima ou para baixo, √† sua escolha (ou, se passar por 10 ou mais, em duas categorias). Se falhar por 5 ou mais, a atitude do alvo muda uma categoria na dire√ß√£o oposta.",cd:"Teste oposto contra Vontade"},{titulo:"Persuas√£o",descricao:"Voc√™ convence uma pessoa a fazer algo, como responder uma pergunta ou prestar um favor. Se essa coisa for custosa voc√™ sofre ‚Äì5 em seu teste. Se for perigosa voc√™ sofre ‚Äì10 ou falha automaticamente.",cd:"CD 20"}]},"Engana√ß√£o":{descricao:"Voc√™ manipula pessoas com blefes e trapa√ßas.",usos:[{titulo:"Disfarce",descricao:"Voc√™ muda sua apar√™ncia ou a de outra pessoa. Fa√ßa um teste de Engana√ß√£o oposto pelo teste de Percep√ß√£o de quem prestar aten√ß√£o no disfar√ßado. Se voc√™ passar, a pessoa acredita no disfarce; caso contr√°rio, percebe que h√° algo errado. Disfarces muito complexos (como uma ra√ßa diferente) imp√µem ‚Äì5 no seu teste.",cd:"Teste oposto contra Percep√ß√£o"},{titulo:"Falsifica√ß√£o",descricao:"Voc√™ falsifica um documento. Fa√ßa um teste de Engana√ß√£o oposto pelo teste de Percep√ß√£o de quem examinar o documento. Se voc√™ passar, a pessoa acredita na falsifica√ß√£o; caso contr√°rio, percebe que √© falso. Se o documento √© muito complexo, ou inclui uma assinatura ou carimbo espec√≠fico, voc√™ sofre ‚Äì10 no teste.",cd:"Teste oposto contra Percep√ß√£o"},{titulo:"Fintar",descricao:"Voc√™ pode gastar uma a√ß√£o padr√£o e fazer um teste de Engana√ß√£o oposto a um teste de Reflexos de um ser em alcance curto. Se voc√™ passar, ele fica desprevenido contra seu pr√≥ximo ataque, se realizado at√© o fim de seu pr√≥ximo turno.",cd:"Teste oposto contra Reflexos"},{titulo:"Insinua√ß√£o",descricao:"Voc√™ fala algo para algu√©m sem que outras pessoas entendam do que voc√™ est√° falando. Se voc√™ passar, o receptor entende sua mensagem. Se voc√™ falhar por 5 ou mais, ele entende algo diferente do que voc√™ queria.",cd:"CD 20"},{titulo:"Intriga",descricao:"Voc√™ espalha uma fofoca. Por exemplo, pode dizer que o dono da taverna est√° aguando a cerveja, para enfurecer o povo contra ele. Intrigas muito improv√°veis t√™m CD 30.",cd:"CD 20, intrigas improv√°veis CD 30"},{titulo:"Mentir",descricao:"Voc√™ faz uma pessoa acreditar em algo que n√£o √© verdade. Seu teste √© oposto pelo teste de Intui√ß√£o da v√≠tima. Mentiras muito implaus√≠veis imp√µem uma penalidade de ‚Äì10 em seu teste.",cd:"Teste oposto contra Intui√ß√£o"}]},Fortitude:{descricao:"Voc√™ usa esta per√≠cia para resistir a efeitos que exigem vitalidade, como doen√ßas e venenos. A CD √© determinada pelo efeito. Voc√™ tamb√©m usa Fortitude para manter seu f√¥lego quando est√° correndo ou sem respirar. A CD √© 15 +1 por teste anterior.",usos:[{titulo:"Resistir Veneno",descricao:"Para resistir aos efeitos de venenos.",cd:"CD igual ao veneno"},{titulo:"Resistir Doen√ßa",descricao:"Para resistir aos efeitos de doen√ßas.",cd:"CD 15 para doen√ßas leves, CD 20+ para doen√ßas graves"},{titulo:"Resistir Fadiga",descricao:"Para resistir √† fadiga extrema ou condi√ß√µes adversas.",cd:"CD 15 para condi√ß√µes normais, CD 20+ para condi√ß√µes extremas"}]},Furtividade:{descricao:"Voc√™ sabe ser discreto e sorrateiro.",usos:[{titulo:"Esconder-se",descricao:"Fa√ßa um teste de Furtividade oposto pelos testes de Percep√ß√£o de qualquer um que possa not√°-lo. Todos que falharem n√£o conseguem perceb√™-lo (voc√™ tem camuflagem total contra eles). Esconder-se √© uma a√ß√£o livre que voc√™ s√≥ pode fazer no final do seu turno.",cd:"Teste oposto contra Percep√ß√£o"},{titulo:"Seguir",descricao:"Fa√ßa um teste de Furtividade oposto ao teste de Percep√ß√£o da pessoa sendo seguida. Voc√™ sofre ‚Äì5 se estiver em um lugar sem esconderijos ou sem movimento, como uma descampado ou rua deserta.",cd:"Teste oposto contra Percep√ß√£o"}]},Guerra:{descricao:"Voc√™ foi educado em t√°tica, estrat√©gia e log√≠stica.",usos:[{titulo:"Analisar Terreno",descricao:"Como uma a√ß√£o de movimento, voc√™ pode observar o campo de batalha. Se passar, descobre uma vantagem, como cobertura, camuflagem ou terreno elevado, se houver.",cd:"CD 20"},{titulo:"Plano de A√ß√£o",descricao:"Como uma a√ß√£o padr√£o, voc√™ orienta um aliado em alcance m√©dio. Se passar, fornece +5 na Iniciativa dele. Se ele ficar com uma Iniciativa maior do que a sua e ainda n√£o tiver agido nesta rodada, age imediatamente ap√≥s seu turno.",cd:"CD 20"}]},Iniciativa:{descricao:"Esta per√≠cia determina sua velocidade de rea√ß√£o em situa√ß√µes de perigo. Quando uma cena de a√ß√£o come√ßa, cada personagem envolvido faz um teste de Iniciativa. Eles ent√£o agem em ordem decrescente dos resultados.",usos:[{titulo:"Ordem de Combate",descricao:"Para determinar quem age primeiro em combate.",cd:"Teste oposto contra outros combatentes"}]},"Intimida√ß√£o":{descricao:"Voc√™ pode assustar ou coagir outras pessoas. Usos de Intimida√ß√£o s√£o efeitos de medo.",usos:[{titulo:"Assustar",descricao:"Gaste uma a√ß√£o padr√£o e fa√ßa um teste de Intimida√ß√£o oposto pelo teste de Vontade de uma criatura em alcance curto. Se voc√™ passar, ela fica abalada pelo resto da cena. Se voc√™ passar por 10 ou mais, ela fica apavorada por uma rodada e ent√£o abalada pelo resto da cena.",cd:"Teste oposto contra Vontade"},{titulo:"Coagir",descricao:"Fa√ßa um teste de Intimida√ß√£o oposto pelo teste de Vontade de uma criatura inteligente (Int ‚Äì3 ou maior) adjacente. Se voc√™ passar, ela obedece uma ordem sua (como fazer uma pequena tarefa, deixar que voc√™ passe por um lugar que ela estava protegendo...). Se voc√™ mand√°-la fazer algo perigoso ou que v√° contra a natureza dela, ela recebe +5 no teste ou passa automaticamente.",cd:"Teste oposto contra Vontade"}]},"Intui√ß√£o":{descricao:'Esta per√≠cia mede sua empatia e "sexto sentido".',usos:[{titulo:"Perceber Mentira",descricao:"Voc√™ descobre se algu√©m est√° mentindo (veja a per√≠cia Engana√ß√£o).",cd:"Teste oposto contra Engana√ß√£o"},{titulo:"Pressentimento",descricao:"Voc√™ analisa uma pessoa, para ter uma no√ß√£o de sua √≠ndole ou car√°ter, ou uma situa√ß√£o, para saber se h√° algo anormal (por exemplo, se os habitantes de uma vila est√£o agindo de forma estranha). Este uso apenas indica se h√° algo anormal, mas n√£o revela a causa.",cd:"CD 20, Apenas Treinado"}]},"Investiga√ß√£o":{descricao:"Voc√™ sabe encontrar pistas e informa√ß√µes.",usos:[{titulo:"Interrogar",descricao:'Voc√™ descobre informa√ß√µes perguntando ou indo para um lugar movimentado e mantendo os ouvidos atentos. Informa√ß√µes gerais ("Quem √© o guerreiro mais forte da aldeia?") n√£o exigem teste. Informa√ß√µes restritas, que poucas pessoas conhecem ("Quem √© o anci√£o que est√° sempre ao lado do rei?"), t√™m CD 20. Informa√ß√µes confidenciais ou que podem colocar em risco quem falar sobre elas ("Quem √© o l√≠der da guilda dos ladr√µes?"), t√™m CD 30. Este uso gasta uma hora e T$ 3d6 (para comprar bebidas, subornar oficiais etc.), mas esses valores podem variar de acordo com o mestre.',cd:"CD 20 para informa√ß√µes restritas, CD 30 para informa√ß√µes confidenciais"},{titulo:"Procurar",descricao:"Voc√™ examina um local em busca de algo. A CD varia: 15 para um item ou no meio de uma bagun√ßa, mas n√£o necessariamente escondido; 20 para um item escondido (cofre atr√°s de um quadro, documento no fundo falso de uma gaveta); 30 para um item muito bem escondido (passagem secreta ativada por um bot√£o, documento escrito com tinta invis√≠vel). Este uso gasta desde uma a√ß√£o completa (examinar uma escrivaninha) at√© um dia (pesquisar uma biblioteca).",cd:"CD 15 para item em bagun√ßa, CD 20 para item escondido, CD 30 para item muito bem escondido"}]},Jogatina:{descricao:"Voc√™ sabe jogar jogos de azar.",usos:[{titulo:"Apostar",descricao:"Para resolver uma noite de jogatina, pague T$ 1d10, fa√ßa um teste de per√≠cia e consulte a tabela para determinar quanto voc√™ ganha. O mestre pode variar o valor da aposta b√°sica. De T$ 1d3, para uma taverna no porto frequentada por marujos e estivadores, a 1d10 x T$ 1.000, para um cassino de luxo em Valkaria.",cd:"CD vari√°vel conforme o jogo",tabela:{titulo:"Tabela de Lucros da Jogatina",linhas:[{teste:"9 ou menos",ganho:"Nenhum."},{teste:"10 a 14",ganho:"Metade da aposta."},{teste:"15 a 19",ganho:'Valor da aposta (voc√™ "empata").'},{teste:"20 a 29",ganho:"Dobro da aposta."},{teste:"30 a 39",ganho:"Triplo da aposta."},{teste:"40 ou mais",ganho:"Qu√≠ntuplo da aposta."}]}}]},Ladinagem:{descricao:"Voc√™ sabe exercer atividades il√≠citas.",usos:[{titulo:"Abrir Fechadura",descricao:"Voc√™ abre uma fechadura trancada. A CD √© 20 para fechaduras simples (porta de loja), 25 para fechaduras m√©dias (pris√£o, ba√∫) e 30 para fechaduras superiores (cofre, c√¢mara do tesouro). Este uso exige uma a√ß√£o completa e uma gazua. Sem ela, voc√™ sofre ‚Äì5 em seu teste.",cd:"CD 20 para fechaduras simples, CD 25 para m√©dias, CD 30 para superiores"},{titulo:"Ocultar",descricao:"Voc√™ esconde um objeto em voc√™ mesmo. Gaste uma a√ß√£o padr√£o e fa√ßa um teste de Ladinagem oposto pelo teste de Percep√ß√£o de qualquer um que possa v√™-lo. Objetos discretos ou pequenos fornecem +5 no teste; objetos desajeitados ou grandes imp√µem ‚Äì5.",cd:"Teste oposto contra Percep√ß√£o"},{titulo:"Punga",descricao:"Voc√™ pega um objeto de outra pessoa (ou planta um objeto nas posses dela). Gaste uma a√ß√£o padr√£o e fa√ßa um teste de Ladinagem. Se passar, voc√™ pega (ou coloca) o que queria. A v√≠tima tem direito a um teste de Percep√ß√£o (CD igual ao resultado de seu teste de Ladinagem).",cd:"CD 20"},{titulo:"Sabotar",descricao:"Voc√™ desabilita um dispositivo mec√¢nico. Uma a√ß√£o simples (emperrar uma fechadura, desativar uma armadilha b√°sica, sabotar uma roda de carro√ßa para que quebre 1d4 rodadas ap√≥s o uso) tem CD 20. Uma a√ß√£o complexa (desativar uma armadilha avan√ßada, sabotar um canh√£o para explodir quando utilizado) tem CD 30.",cd:"CD 20 para a√ß√µes simples, CD 30 para a√ß√µes complexas"}]},Luta:{descricao:"Voc√™ usa Luta para fazer ataques corpo a corpo. A CD √© a Defesa do alvo. Se voc√™ acertar, causa dano de acordo com a arma utilizada. Veja o Cap√≠tulo 5: Jogando para as regras completas de combate.",usos:[{titulo:"Ataque Corpo a Corpo",descricao:"Para atacar com armas brancas ou desarmado.",cd:"CD igual √† Defesa do oponente"}]},Misticismo:{descricao:"Esta per√≠cia envolve o conhecimento de magias, itens m√°gicos e fen√¥menos sobrenaturais.",usos:[{titulo:"Detectar Magia",descricao:"Como uma a√ß√£o completa, voc√™ detecta a presen√ßa e intensidade de auras m√°gicas em alcance curto (mas n√£o suas localiza√ß√µes exatas). A intensidade de uma aura depende do c√≠rculo da magia ou categoria do item m√°gico que a gerou.",cd:"CD 15"},{titulo:"Identificar Criatura",descricao:"Voc√™ analisa uma criatura m√°gica (construto, drag√£o, fada, morto-vivo etc.) que possa ver. Se passar, lembra uma caracter√≠stica da criatura, como um poder ou vulnerabilidade. Para cada 5 pontos pelos quais o resultado do teste superar a CD, voc√™ lembra outra caracter√≠stica.",cd:"CD 15 + ND da Criatura"},{titulo:"Identificar Item M√°gico",descricao:"Voc√™ estuda um item m√°gico para identificar seus poderes. A CD √© 20 para itens m√°gicos menores, 25 para m√©dios e 30 para itens m√°gicos maiores. Este uso gasta uma hora.",cd:"CD 20 para itens menores, CD 25 para m√©dios, CD 30 para maiores"},{titulo:"Identificar Magia",descricao:"Quando algu√©m lan√ßa uma magia, voc√™ pode adivinhar qual √© atrav√©s de seus gestos e palavras. Este uso √© uma rea√ß√£o.",cd:"CD 15 + Custo em PM da Magia"},{titulo:"Informa√ß√£o",descricao:"Voc√™ responde d√∫vidas relativas a magias, itens m√°gicos, fen√¥menos sobrenaturais, runas, profecias, planos de exist√™ncia etc. Quest√µes simples n√£o exigem teste. Quest√µes complexas tem CD 20. Por fim, mist√©rios e enigmas tem CD 30.",cd:"CD 20 para quest√µes complexas, CD 30 para mist√©rios"},{titulo:"Lan√ßar Magia de Armadura",descricao:"Lan√ßar uma magia arcana usando armadura exige um teste. Esse teste sofre penalidade de armadura. Se falhar, a magia n√£o funciona, mas gasta pontos de mana mesmo assim.",cd:"CD 20 + Custo em PM da Magia"}]},Nobreza:{descricao:"Voc√™ recebeu a educa√ß√£o de um nobre.",usos:[{titulo:"Etiqueta",descricao:"Voc√™ sabe se portar em ambientes aristocr√°ticos, como bailes e audi√™ncias.",cd:"CD 15"},{titulo:"Informa√ß√£o",descricao:"Voc√™ responde d√∫vidas relativas a leis, tradi√ß√µes, linhagens e her√°ldica. Quest√µes simples n√£o exigem teste. Quest√µes complexas tem CD 20. Por fim, mist√©rios e enigmas tem CD 30.",cd:"CD 20 para quest√µes complexas, CD 30 para mist√©rios"}]},"Of√≠cio":{descricao:"Of√≠cio na verdade s√£o v√°rias per√≠cias diferentes. Cada uma permite fabricar itens de certas categorias: Armeiro (armas e armaduras), Artes√£o (equipamento de aventura, ferramentas, esot√©ricos e ve√≠culos), Alquimista (alqu√≠micos), Cozinheiro (alimenta√ß√£o), Alfaiate (vestu√°rio).",usos:[{titulo:"Consertar",descricao:"Reparar um item destru√≠do tem a mesma CD para fabric√°-lo. Cada tentativa consome uma hora de trabalho e um d√©cimo do pre√ßo original do item. Em caso de falha, o tempo e o dinheiro s√£o perdidos (mas voc√™ pode tentar novamente).",cd:"CD igual √† fabrica√ß√£o"},{titulo:"Fabricar",descricao:"Voc√™ produz um item gastando mat√©ria-prima e tempo de trabalho. A mat√©ria-prima custa um ter√ßo do pre√ßo do item. O tempo de trabalho depende do tipo de item: um dia para consum√≠veis, uma semana para n√£o consum√≠veis comuns e um m√™s para n√£o consum√≠veis superiores e/ou m√°gicos.",cd:"CD 15 para itens simples, CD 20 para itens complexos"},{titulo:"Identificar",descricao:"Voc√™ pode identificar itens raros e ex√≥ticos ligados ao seu Of√≠cio. Se passar, descobre as propriedades do item e seu pre√ßo. Este uso gasta uma a√ß√£o completa.",cd:"CD 20"},{titulo:"Sustento",descricao:"Com uma semana de trabalho e um teste de Of√≠cio, voc√™ ganha T$ 1, mais T$ 1 por ponto que seu teste exceder a CD. Por exemplo, com um resultado 20, ganha T$ 6 pela semana de trabalho.",cd:"CD 15"}]},"Percep√ß√£o":{descricao:"Voc√™ nota coisas usando seus sentidos.",usos:[{titulo:"Observar",descricao:"Voc√™ v√™ coisas discretas ou escondidas. A CD varia de 15, para algo dif√≠cil de ser visto (um livro espec√≠fico em uma estante) a 30, para algo quase invis√≠vel (uma gota de sangue em uma folha no meio de uma floresta √† noite). Para pessoas ou itens escondidos, a CD √© o resultado do teste de Furtividade ou Ladinagem feito para esconder a pessoa ou o item. Voc√™ tamb√©m pode ler l√°bios (CD 20).",cd:"CD 15 para algo dif√≠cil de ver, CD 20 para item escondido, CD 30 para algo quase invis√≠vel"},{titulo:"Ouvir",descricao:"Voc√™ escuta barulhos sutis. Uma conversa casual pr√≥xima tem CD 0 ‚Äî ou seja, a menos que exista alguma penalidade, voc√™ passa automaticamente. Ouvir pessoas sussurrando tem CD 15. Ouvir do outro lado de uma porta aumenta a CD em +10. Voc√™ pode fazer testes de Percep√ß√£o para ouvir mesmo que esteja dormindo, mas sofre ‚Äì10 no teste; um sucesso faz voc√™ acordar.",cd:"CD 0 para conversa casual, CD 15 para sussurros, CD 20 para criaturas invis√≠veis"}]},Pilotagem:{descricao:"Voc√™ sabe operar ve√≠culos como carro√ßas, barcos e bal√µes. A√ß√µes simples n√£o exigem testes ‚Äî voc√™ pode atrelhar seus trobos a sua carro√ßa e conduzi-la pela estrada, ou levantar √¢ncora e velejar seu navio em √°guas tranquilas, automaticamente.",usos:[{titulo:"Conduzir em Situa√ß√µes Dif√≠ceis",descricao:"Conduzir um ve√≠culo em situa√ß√µes ruins (terreno acidentado para ve√≠culos terrestres, chuva ou ventania para ve√≠culos aqu√°ticos ou a√©reos, ou a√©reos) exige uma a√ß√£o de movimento e um teste de Pilotagem contra CD 15 por turno ou cena, de acordo com o mestre. Se falhar, voc√™ avan√ßa metade do deslocamento. Se falhar por 5 ou mais, se acidenta de alguma forma. Situa√ß√µes extremas (terreno com obst√°culos, tempestade...) aumentam a CD para 25.",cd:"CD 15 para situa√ß√µes ruins, CD 25 para situa√ß√µes extremas"}]},Pontaria:{descricao:"Voc√™ usa Pontaria para fazer ataques √† dist√¢ncia. A CD √© a Defesa do alvo. Se voc√™ acertar, causa dano de acordo com a arma utilizada. Veja o Cap√≠tulo 5: Jogando para as regras completas de ataque.",usos:[{titulo:"Ataque √† Dist√¢ncia",descricao:"Para atacar com armas de longo alcance.",cd:"CD igual √† Defesa do oponente"}]},Reflexos:{descricao:"Voc√™ usa esta per√≠cia para resistir a efeitos que exigem rea√ß√£o r√°pida, como armadilhas e explos√µes. A CD √© determinada pelo efeito. Voc√™ tamb√©m usa Reflexos para evitar fintas.",usos:[{titulo:"Esquivar",descricao:"Para se esquivar de ataques ou perigos.",cd:"CD igual ao ataque ou perigo"},{titulo:"Rea√ß√£o R√°pida",descricao:"Para reagir rapidamente a situa√ß√µes inesperadas.",cd:"CD 15 para rea√ß√µes normais, CD 20+ para rea√ß√µes complexas"},{titulo:"Agarrar",descricao:"Para agarrar objetos em queda ou em movimento.",cd:"CD 15 para objetos lentos, CD 20+ para objetos r√°pidos"}]},"Religi√£o":{descricao:"Voc√™ possui conhecimento sobre os deuses e as religi√µes de Arton.",usos:[{titulo:"Identificar Criatura",descricao:"Voc√™ pode identificar uma criatura com origem divina (anjos, dem√¥nios, alguns mortos-vivos e construtos etc.). Veja a per√≠cia Misticismo.",cd:"CD 15 + ND da Criatura"},{titulo:"Identificar Item M√°gico",descricao:"Voc√™ pode identificar um item m√°gico de origem divina. Veja a per√≠cia Misticismo.",cd:"CD 20 para itens menores, CD 25 para m√©dios, CD 30 para maiores"},{titulo:"Informa√ß√£o",descricao:"Voc√™ responde d√∫vidas relativas a deuses, profecias, planos de exist√™ncia etc. Quest√µes simples n√£o exigem teste. Quest√µes complexas tem CD 20. Por fim, mist√©rios e enigmas tem CD 30.",cd:"CD 20 para quest√µes complexas, CD 30 para mist√©rios"},{titulo:"Rito",descricao:"Voc√™ realiza uma cerim√¥nia religiosa, como um batizado, casamento ou funeral. Isso inclui a cerim√¥nia de penit√™ncia para redimir um devoto que tenha descumprido as Obriga√ß√µes & Restri√ß√µes de sua divindade. Uma cerim√¥nia de penit√™ncia exige um sacrif√≠cio de T$ 100 por n√≠vel de personagem do devoto ou a realiza√ß√£o de uma miss√£o sagrada, de acordo com o mestre.",cd:"CD 20"}]},"Sobreviv√™ncia":{descricao:"Voc√™ est√° em casa nos ermos.",usos:[{titulo:"Acampamento",descricao:"Voc√™ consegue abrigo e alimento para voc√™ e seu grupo por um dia (ca√ßando, pescando, colhendo frutos...). A CD depende do terreno: 15 para plan√≠cies e colinas, 20 para florestas e p√¢ntanos, 25 para desertos ou montanhas e 30 para regi√µes planares perigosas ou √°reas de Tormenta. Regi√µes muito √°ridas ou est√©reis e clima ruim (neve, tempestade etc.) imp√µem penalidade cumulativa de ‚Äì5. Dormir ao relento sem um acampamento e um saco de dormir diminui sua recupera√ß√£o de PV e PM. Este uso exige equipamento de viagem. Sem ele, voc√™ sofre ‚Äì5 em seu teste.",cd:"CD 15 para plan√≠cies e colinas, CD 20 para florestas e p√¢ntanos, CD 25 para desertos ou montanhas, CD 30 para regi√µes planares perigosas"},{titulo:"Identificar Criatura",descricao:"Voc√™ pode identificar um animal ou monstro. Veja a per√≠cia Misticismo.",cd:"CD 15 + ND da Criatura"},{titulo:"Orientar-se",descricao:'Um personagem viajando pelos ermos precisa fazer um teste de Sobreviv√™ncia por dia para avan√ßar. A CD depende do tipo de terreno (veja em "Acampamento"). Se passar, voc√™ avan√ßa seu deslocamento normal. Se falhar, avan√ßa apenas metade. Se falhar por 5 ou mais, se perde e n√£o avan√ßa pelo dia. Num grupo, um personagem deve ser escolhido como guia. Personagens treinados em Sobreviv√™ncia podem ajud√°-lo. Entretanto, se mais de um personagem quiser fazer o teste por si s√≥, todos dever√£o rolar em segredo. Os jogadores devem decidir qual guia seguir antes de verem o resultado! Este teste √© exigido apenas em jornadas perigosas (de acordo com o mestre).',cd:"CD 15 para plan√≠cies e colinas, CD 20 para florestas e p√¢ntanos, CD 25 para desertos ou montanhas, CD 30 para regi√µes planares perigosas"},{titulo:"Rastrear",descricao:"Voc√™ pode identificar e seguir rastros. A CD √© 15 para solo macio (neve, lama), 20 para solo comum (grama, terra) e 25 para solo duro (rocha ou piso de interiores). A CD diminui em ‚Äì5 se voc√™ estiver rastreando um grupo grande (dez ou mais indiv√≠duos) ou criaturas Enormes ou Colossais, mas aumenta em +5 em visibilidade prec√°ria (noite, chuva, neblina...). Enquanto rastreia, seu deslocamento √© reduzido √† metade. Se falhar, pode tentar novamente gastando mais um dia. Por√©m, a cada dia desde a cria√ß√£o dos rastros, a CD aumenta em +1.",cd:"CD 15 para solo macio, CD 20 para solo comum, CD 25 para solo duro, Apenas Treinado"}]},Vontade:{descricao:"Voc√™ usa esta per√≠cia para resistir a efeitos que exigem determina√ß√£o, como intimida√ß√£o e encantamentos. A CD √© determinada pelo efeito. Testes de Vontade s√£o testes de resist√™ncia.",usos:[{titulo:"Resistir Encantamento",descricao:"Para resistir a magias de encantamento.",cd:"CD igual √† magia"},{titulo:"Resistir Ilus√£o",descricao:"Para resistir a magias de ilus√£o.",cd:"CD igual √† magia"},{titulo:"Resistir Medo",descricao:"Para resistir a efeitos de medo ou terror.",cd:"CD 15 para medo simples, CD 20+ para terror extremo"}]}};function Ce(){["conditions-popup","conditions-overlay","condition-details-popup","condition-details-overlay","avatar-popup","avatar-overlay","skills-popup","skills-overlay","skill-detail-modal","skill-detail-overlay","misc-popup","misc-overlay","grimorio-popup","grimorio-overlay","spells-popup","spells-overlay","spell-cast-popup","spell-cast-overlay","pratos-popup","pratos-overlay","prato-detail-modal","prato-detail-overlay","bebidas-popup","bebidas-overlay","bebida-detail-modal","bebida-detail-overlay","pocoes-popup","pocoes-overlay","pocao-detail-modal","pocao-detail-overlay","config-modal","config-overlay","maneuvers-popup","maneuvers-overlay","attack-effects-popup","attack-effects-overlay","hunter-class-overlay","race-detail-overlay","divinity-detail-overlay","animal-companion-overlay","abilities-popup","abilities-overlay","power-cast-popup","power-cast-overlay"].forEach(e=>{const a=document.getElementById(e);a&&a.remove()}),document.querySelectorAll('[style*="z-index: 1000"], [style*="z-index: 10000"], [style*="z-index: 10001"], [style*="z-index: 10002"], [style*="z-index: 10003"]').forEach(e=>{"fixed"!==e.style.position||"rgba(0,0,0,0.5)"!==e.style.background&&"rgba(0,0,0,0.7)"!==e.style.background&&!e.style.background.includes("rgba(30,30,40")||e.remove()})}function we(e){const a=xe[e];if(!a)return void g.log("Dados da skill n√£o encontrados:",e);const o=document.getElementById("skill-detail-modal");o&&o.remove();const t=document.getElementById("skill-detail-overlay");t&&t.remove();const s=document.createElement("div");s.id="skill-detail-overlay",s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="100%",s.style.height="100%",s.style.background="rgba(0,0,0,0.5)",s.style.zIndex="10002",s.onclick=()=>{s.remove(),r.remove()},document.body.appendChild(s);const r=document.createElement("div");r.id="skill-detail-modal",r.className="roll20-modal",r.style.position="fixed",r.style.top="50%",r.style.left="50%",r.style.transform="translate(-50%, -50%)",r.style.background="rgba(30,30,40,0.98)",r.style.border="2px solid #6ec6ff",r.style.borderRadius="12px",r.style.padding="20px",r.style.zIndex="10003",r.style.maxWidth="600px",r.style.maxHeight="80vh",r.style.overflowY="auto",r.style.overflowX="hidden",r.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="stretch",r.style.wordWrap="break-word",r.style.wordBreak="break-word";const n=document.createElement("div");n.style.display="flex",n.style.justifyContent="space-between",n.style.alignItems="center",n.style.marginBottom="15px",n.style.width="100%";const i=document.createElement("h2");i.textContent=e,i.style.color="#6ec6ff",i.style.margin="0",i.style.fontSize="20px",i.style.fontWeight="bold";const c=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{r.remove();const e=document.getElementById("skill-detail-overlay");e&&e.remove()}});n.appendChild(i),n.appendChild(c.render()),r.appendChild(n);const d=document.createElement("div");d.style.marginBottom="20px",d.style.padding="15px",d.style.background="rgba(110, 198, 255, 0.1)",d.style.borderRadius="8px",d.style.border="1px solid rgba(110, 198, 255, 0.3)",d.style.color="#ecf0f1",d.style.fontSize="14px",d.style.lineHeight="1.5",d.style.wordWrap="break-word",d.style.wordBreak="break-word",d.style.overflowWrap="break-word",d.textContent=a.descricao,r.appendChild(d);const l=document.createElement("div");l.style.marginBottom="20px";const m=document.createElement("h3");m.textContent="Usos da Per√≠cia: Selecione uma especializa√ß√£o",m.style.color="#6ec6ff",m.style.margin="0 0 15px 0",m.style.fontSize="16px",m.style.fontWeight="bold",l.appendChild(m),a.usos.forEach(e=>{const a=document.createElement("div");a.style.marginBottom="15px",a.style.padding="12px",a.style.background="rgba(26,26,46,0.8)",a.style.borderRadius="8px",a.style.border="1px solid rgba(110,198,255,0.2)",a.style.cursor="pointer",a.style.transition="all 0.2s",a.style.position="relative",a.style.wordWrap="break-word",a.style.wordBreak="break-word",a.style.overflowWrap="break-word";const o=document.createElement("h4");o.textContent=e.titulo,o.style.color="#6ec6ff",o.style.margin="0 0 8px 0",o.style.fontSize="14px",o.style.fontWeight="bold",a.appendChild(o);const t=document.createElement("p");t.textContent=e.descricao,t.style.color="#ecf0f1",t.style.margin="0 0 8px 0",t.style.fontSize="13px",t.style.lineHeight="1.4",t.style.wordWrap="break-word",t.style.wordBreak="break-word",t.style.overflowWrap="break-word",a.appendChild(t);const s=document.createElement("p");if(s.textContent=`Dificuldade: ${e.cd}`,s.style.color="#ffd700",s.style.margin="0",s.style.fontSize="12px",s.style.fontWeight="bold",a.appendChild(s),e.tabela){const o=document.createElement("div");o.style.marginTop="10px",o.style.padding="8px",o.style.background="rgba(255, 215, 0, 0.1)",o.style.borderRadius="6px",o.style.border="1px solid rgba(255, 215, 0, 0.3)";const t=document.createElement("h5");t.textContent=e.tabela.titulo,t.style.color="#ffd700",t.style.margin="0 0 8px 0",t.style.fontSize="12px",t.style.fontWeight="bold",o.appendChild(t);const s=document.createElement("table");s.style.width="100%",s.style.borderCollapse="collapse",s.style.fontSize="11px";const r=document.createElement("thead"),n=document.createElement("tr"),i=document.createElement("th");i.textContent="Teste",i.style.padding="4px 6px",i.style.border="1px solid rgba(255, 215, 0, 0.3)",i.style.backgroundColor="rgba(255, 215, 0, 0.2)",i.style.color="#ffd700",i.style.fontWeight="bold",i.style.textAlign="left";const c=document.createElement("th");c.textContent="Ganho",c.style.padding="4px 6px",c.style.border="1px solid rgba(255, 215, 0, 0.3)",c.style.backgroundColor="rgba(255, 215, 0, 0.2)",c.style.color="#ffd700",c.style.fontWeight="bold",c.style.textAlign="left",n.appendChild(i),n.appendChild(c),r.appendChild(n),s.appendChild(r);const d=document.createElement("tbody");e.tabela.linhas.forEach(e=>{const a=document.createElement("tr"),o=document.createElement("td");o.textContent=e.teste,o.style.padding="4px 6px",o.style.border="1px solid rgba(255, 215, 0, 0.2)",o.style.color="#ecf0f1";const t=document.createElement("td");t.textContent=e.ganho,t.style.padding="4px 6px",t.style.border="1px solid rgba(255, 215, 0, 0.2)",t.style.color="#ecf0f1",a.appendChild(o),a.appendChild(t),d.appendChild(a)}),s.appendChild(d),o.appendChild(s),a.appendChild(o)}a.onmouseover=()=>{a.style.background="rgba(110,198,255,0.1)",a.style.border="1px solid #6ec6ff"},a.onmouseout=()=>{u!==e.titulo&&(a.style.background="rgba(26,26,46,0.8)",a.style.border="1px solid rgba(110,198,255,0.2)")},a.onclick=()=>{l.querySelectorAll('div[style*="cursor: pointer"]').forEach(e=>{e.style.background="rgba(26,26,46,0.8)",e.style.border="1px solid rgba(110,198,255,0.2)"}),D(),u=e.titulo,a.style.background="rgba(110,198,255,0.2)",a.style.border="2px solid #6ec6ff",D()},l.appendChild(a)});let u=null;const p=document.createElement("div");p.style.marginBottom="20px";const f=document.createElement("button");f.textContent="Fazer Rolagem",f.style.background="#6ec6ff",f.style.color="#23243a",f.style.border="none",f.style.borderRadius="8px",f.style.padding="12px 20px",f.style.fontSize="14px",f.style.fontWeight="bold",f.style.cursor="pointer",f.style.transition="all 0.2s",f.style.marginTop="10px",f.style.width="100%",f.disabled=!0,f.style.opacity="0.5",f.style.cursor="not-allowed",f.onmouseover=()=>{f.disabled||(f.style.background="#5bb5e6")},f.onmouseout=()=>{f.disabled||(f.style.background="#6ec6ff")};const v=document.createElement("div");v.style.marginBottom="20px",v.style.padding="15px",v.style.background="rgba(255, 184, 108, 0.1)",v.style.borderRadius="8px",v.style.border="1px solid rgba(255, 184, 108, 0.3)";const y=document.createElement("h3");y.textContent="B√¥nus Dispon√≠veis para esta Rolagem",y.style.color="#ffb86c",y.style.margin="0 0 15px 0",y.style.fontSize="16px",y.style.fontWeight="bold",v.appendChild(y);const b=Qe("prato_batata_valkariana"),h=Qe("prato_bolo_de_cenoura"),x=Qe("prato_estrogonofe"),C=Qe("prato_futomaki"),w=Qe("prato_pao_de_queijo"),q=Qe("prato_porco_assado"),E=Qe("prato_salada_elfica"),z=Qe("prato_salada_imperial"),k=Qe("prato_sopa_de_cogumelo"),j=Qe("prato_pizza"),P=Qe("prato_cozido_de_pimenta"),_=Qe("bebida_baba_de_troll"),$=Qe("bebida_cerveja_deheoni"),T=Qe("bebida_sidra_ahleniense");function D(){const e=null!==u,a=Array.from(v.querySelectorAll('input[type="checkbox"]')).some(e=>e.checked);e||a?(f.disabled=!1,f.style.opacity="1",f.style.cursor="pointer"):(f.disabled=!0,f.style.opacity="0.5",f.style.cursor="not-allowed")}function M(e,a,o,t){if(!t)return null;const s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.gap="10px",s.style.marginBottom="10px";const r=document.createElement("input");r.type="checkbox",r.id=e,r.style.width="16px",r.style.height="16px",r.addEventListener("change",D);const n=document.createElement("label");n.htmlFor=e,n.textContent=a,n.style.color="#ecf0f1",n.style.fontSize="14px",n.style.fontWeight="bold",n.style.cursor="pointer";const i=document.createElement("span");return i.textContent=` - ${o}`,i.style.color="#ffb86c",i.style.fontSize="12px",i.style.fontStyle="italic",n.appendChild(i),s.appendChild(r),s.appendChild(n),s}let R=!1;if(b){const e=M("batata-valkariana-bonus","Batata Valkariana (+1d6 no teste)","Consome o efeito ap√≥s a rolagem",!0);v.appendChild(e),R=!0}if(h&&"Percep√ß√£o"===e){const e=M("bolo-cenoura-bonus","Bolo de Cenoura (+2 no teste)","Consome o efeito ap√≥s a rolagem",!0);v.appendChild(e),R=!0}if(x&&"Vontade"===e){const e=M("estrogonofe-bonus","Estrogonofe (+2 no teste)","Consome o efeito ap√≥s a rolagem",!0);v.appendChild(e),R=!0}if(C&&"Diplomacia"===e){const e=M("futomaki-bonus","Futomaki (+2 no teste)","Consome o efeito ap√≥s a rolagem",!0);v.appendChild(e),R=!0}if(w&&"Fortitude"===e){const e=M("pao-queijo-bonus","P√£o de Queijo (+2 no teste)","Consome o efeito ap√≥s a rolagem",!0);v.appendChild(e),R=!0}if(q&&"Luta"===e){const e=M("porco-assado-bonus","Porco Assado (+1 no teste)","Consome o efeito ap√≥s a rolagem",!0);v.appendChild(e),R=!0}if(E&&"Pontaria"===e){const e=M("salada-elfica-bonus","Salada Elfica (+1 no teste)","Consome o efeito ap√≥s a rolagem",!0);v.appendChild(e),R=!0}if(z&&"Iniciativa"===e){const e=M("salada-imperial-bonus","Salada Imperial (+2 no teste)","Consome o efeito ap√≥s a rolagem",!0);v.appendChild(e),R=!0}if(k&&"Misticismo"===e){const e=M("sopa-cogumelo-bonus","Sopa de Cogumelo (+2 no teste)","Consome o efeito ap√≥s a rolagem",!0);v.appendChild(e),R=!0}if(j&&("Vontade"===e||"Reflexos"===e||"Fortitude"===e)){const e=M("pizza-bonus","Pizza (+1 no teste)","Consome o efeito ap√≥s a rolagem",!0);v.appendChild(e),R=!0}if(P&&"Fortitude"===e){const e=M("cozido-de-pimenta-bonus","Cozido de Pimenta (+1 no teste)","Consome o efeito ap√≥s a rolagem",!0);v.appendChild(e),R=!0}if(_){const e=M("baba-de-troll-bonus","Baba de Troll (+1d4 no teste)","Consome o efeito ap√≥s a rolagem",!0);v.appendChild(e),R=!0}if($&&("Fortitude"===e||"Vontade"===e||"Reflexos"===e)){const e=M("cerveja-deheoni-bonus","Cerveja Deheoni (+1 no teste de resist√™ncia)","Efeito ativo por 24 horas",!0);e&&(v.appendChild(e),R=!0)}if(T&&("Adestramento"===e||"Atua√ß√£o"===e||"Diplomacia"===e||"Engana√ß√£o"===e||"Intimida√ß√£o"===e||"Jogatina"===e)){const e=M("sidra-ahleniense-bonus","Sidra Ahleniense (+2 no teste de Carisma)","Efeito ativo por 24 horas",!0);e&&(v.appendChild(e),R=!0)}if(!R){const e=document.createElement("div");e.textContent="Nenhum b√¥nus dispon√≠vel para esta rolagem.",e.style.color="#999",e.style.fontSize="14px",e.style.fontStyle="italic",e.style.textAlign="center",e.style.padding="10px",v.appendChild(e)}r.appendChild(l),r.appendChild(v),r.appendChild(p),r.appendChild(f),f.onclick=()=>{const a=null!==u,o=Array.from(v.querySelectorAll('input[type="checkbox"]')).some(e=>e.checked);if(!a&&!o)return;const t=document.getElementById("batata-valkariana-bonus")&&document.getElementById("batata-valkariana-bonus").checked,s=document.getElementById("bolo-cenoura-bonus")&&document.getElementById("bolo-cenoura-bonus").checked,r=document.getElementById("estrogonofe-bonus")&&document.getElementById("estrogonofe-bonus").checked,n=document.getElementById("futomaki-bonus")&&document.getElementById("futomaki-bonus").checked,i=document.getElementById("pao-queijo-bonus")&&document.getElementById("pao-queijo-bonus").checked,c=document.getElementById("porco-assado-bonus")&&document.getElementById("porco-assado-bonus").checked,d=document.getElementById("salada-elfica-bonus")&&document.getElementById("salada-elfica-bonus").checked,l=document.getElementById("salada-imperial-bonus")&&document.getElementById("salada-imperial-bonus").checked,m=document.getElementById("sopa-cogumelo-bonus")&&document.getElementById("sopa-cogumelo-bonus").checked,p=document.getElementById("pizza-bonus")&&document.getElementById("pizza-bonus").checked,g=document.getElementById("cozido-de-pimenta-bonus")&&document.getElementById("cozido-de-pimenta-bonus").checked,f=a?`${e} - ${u}`:`${e} (Teste Puro)`,y=[{nome:"Acrobacia",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|acrobaciatotal}]]]]}}`},{nome:"Adestramento",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|adestramentototal}]]]]}}`},{nome:"Atletismo",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|atletismototal}]]]]}}`},{nome:"Atua√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|atuacaototal}]]]]}}`},{nome:"Cavalgar",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|cavalgartotal}]]]]}}`},{nome:"Conhecimento",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|conhecimentototal}]]]]}}`},{nome:"Cura",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|curatotal}]]]]}}`},{nome:"Diplomacia",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|diplomaciatotal}]]]]}}`},{nome:"Engana√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|enganacaototal}]]]]}}`},{nome:"Fortitude",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|fortitudetotal}]]]]}}`},{nome:"Furtividade",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|furtividadetotal}]]]]}}`},{nome:"Guerra",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|guerratotal}]]]]}}`},{nome:"Iniciativa",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|iniciativatotal}]] &{tracker}]]}}`},{nome:"Intimida√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|intimidacaototal}]]]]}}`},{nome:"Intui√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|intuicaototal}]]]]}}`},{nome:"Investiga√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|investigacaototal}]]]]}}`},{nome:"Jogatina",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|jogatinatotal}]]]]}}`},{nome:"Ladinagem",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|ladinagemtotal}]]]]}}`},{nome:"Luta",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|lutatotal}]]]]}}`},{nome:"Misticismo",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|misticismototal}]]]]}}`},{nome:"Nobreza",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|nobrezatotal}]]]]}}`},{nome:"Of√≠cio",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|oficiototal}]]]]}}`},{nome:"Percep√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|percepcaototal}]]]]}}`},{nome:"Pilotagem",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|pilotagemtotal}]]]]}}`},{nome:"Pontaria",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|pontariatotal}]]]]}}`},{nome:"Reflexos",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|reflexostotal}]]]]}}`},{nome:"Religi√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|religiaototal}]]]]}}`},{nome:"Sobreviv√™ncia",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|sobrevivenciatotal}]]]]}}`},{nome:"Vontade",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=${f}}}{{theroll=[[1d20+[[@{${I()}|vontadetotal}]]]]}}`}].find(a=>a.nome===e);if(y){let e=y.comando,a=0,o="",u="";t&&(o+="+1d6",u+="%NEWLINE% *+ Batata Valkariana (+1d6)*"),s&&(a+=2,u+="%NEWLINE% *+ Bolo de Cenoura (+2)*"),r&&(a+=2,u+="%NEWLINE% *+ Estrogonofe (+2)*"),n&&(a+=2,u+="%NEWLINE% *+ Futomaki (+2)*"),i&&(a+=2,u+="%NEWLINE% *+ P√£o de Queijo (+2)*"),c&&(a+=1,u+="%NEWLINE% *+ Porco Assado (+1)*"),d&&(a+=1,u+="%NEWLINE% *+ Salada Elfica (+1)*"),l&&(a+=2,u+="%NEWLINE% *+ Salada Imperial (+2)*"),m&&(a+=2,u+="%NEWLINE% *+ Sopa de Cogumelo (+2)*"),p&&(a+=1,u+="%NEWLINE% *+ Pizza (+1)*"),g&&(a+=1,u+="%NEWLINE% *+ Cozido de Pimenta (+1)*");const f=document.getElementById("baba-de-troll-bonus")&&document.getElementById("baba-de-troll-bonus").checked,v=document.getElementById("cerveja-deheoni-bonus")&&document.getElementById("cerveja-deheoni-bonus").checked,b=document.getElementById("sidra-ahleniense-bonus")&&document.getElementById("sidra-ahleniense-bonus").checked;f&&(o+="+1d4",u+="%NEWLINE% *+ Baba de Troll (+1d4)*"),v&&(a+=1,u+="%NEWLINE% *+ Cerveja Deheoni (+1)*"),b&&(a+=2,u+="%NEWLINE% *+ Sidra Ahleniense (+2)*"),0===a&&""===o||(e=""!==o?e.replace(/theroll=\[\[1d20\+\[\[(.*?)\]\]\]\]/,`theroll=[[1d20${o}+[[$1]]${0!==a?`+${a}`:""}]]`):e.replace(/theroll=\[\[(.*?)\]\]/,`theroll=[[$1+${a}]]`),e=e.replace(/(\{\{rollname=)(.*?)(\}\})/,`$1$2${u}$3`)),Z(e),setTimeout(()=>{if(t){Ke("prato_batata_valkariana");let e=JSON.parse(localStorage.getItem("tormenta-20-hotbars-comida-effects")||"[]");e=e.filter(e=>"prato_batata_valkariana"!==e.effectKey),localStorage.setItem("tormenta-20-hotbars-comida-effects",JSON.stringify(e)),A("üçü Efeito da Batata Valkariana consumido no teste!")}if(s&&A("ü•ï B√¥nus do Bolo de Cenoura aplicado no teste!"),r&&A("üçù B√¥nus do Estrogonofe aplicado no teste!"),n&&A("üç£ B√¥nus do Futomaki aplicado no teste!"),i&&A("üßÄ B√¥nus do P√£o de Queijo aplicado no teste!"),c&&A("üê∑ B√¥nus do Porco Assado aplicado no teste!"),d&&A("ü•ó B√¥nus da Salada Elfica aplicado no teste!"),l&&A("ü•ó B√¥nus da Salada Imperial aplicado no teste!"),m&&A("üçÑ B√¥nus da Sopa de Cogumelo aplicado no teste!"),p&&A("üçï B√¥nus da Pizza aplicado no teste!"),g&&A("üå∂Ô∏è B√¥nus do Cozido de Pimenta aplicado no teste!"),f){Ke("bebida_baba_de_troll");let e=JSON.parse(localStorage.getItem("tormenta-20-hotbars-bebida-effects")||"[]");e=e.filter(e=>"bebida_baba_de_troll"!==e.effectKey),localStorage.setItem("tormenta-20-hotbars-bebida-effects",JSON.stringify(e)),A("üßÉ Efeito da Baba de Troll consumido no teste!")}v&&A("üçª B√¥nus da Cerveja Deheoni aplicado no teste!"),b&&A("üçè B√¥nus da Sidra Ahleniense aplicado no teste!")},500),function(){const e=document.getElementById("skills-popup");e&&e.remove();const a=document.getElementById("skills-overlay");a&&a.remove();const o=document.getElementById("skill-detail-modal");o&&o.remove();const t=document.getElementById("skill-detail-overlay");t&&t.remove()}()}},document.body.appendChild(r),S(r,"blue")}function qe(){const e=document.createElement("div");e.id="roll20-hotbar",e.className="roll20-scrollbar-auto",e.style.position="fixed",e.style.bottom="24px",e.style.left="50%",e.style.transform="translateX(-50%)",e.style.background="rgba(30,30,40,0.92)",e.style.padding="0",e.style.borderRadius="16px",e.style.zIndex="9999",e.style.display="flex",e.style.flexDirection="column",e.style.boxShadow="0 4px 16px rgba(0,0,0,0.5)",e.style.userSelect="none",e.style.border="2px solid #6ec6ff",e.style.minWidth="600px",e.style.alignItems="stretch";const a=document.createElement("div");a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.padding="18px 24px 5px 24px",a.style.borderBottom="1px solid rgba(110,198,255,0.2)",a.style.cursor="grab",a.style.position="relative",a.style.width="100%",a.style.boxSizing="border-box";const o=document.createElement("div");o.style.position="absolute",o.style.left="24px",o.style.top="50%",o.style.transform="translateY(-50%)",o.style.cursor="pointer",o.style.display="flex",o.style.alignItems="center",o.style.gap="5px",o.style.fontSize="12px",o.style.color="#ecf0f1",o.style.userSelect="none";const t=document.createElement("span");t.id="ttm-toggle-label",t.textContent="TTM",t.style.fontSize="10px",t.style.fontWeight="bold";const r=document.createElement("div");r.id="ttm-toggle-switch",r.style.width="24px",r.style.height="12px",r.style.background="#444",r.style.borderRadius="6px",r.style.position="relative",r.style.transition="all 0.3s",r.style.border="1px solid #666";const n=document.createElement("div");n.id="ttm-toggle-knob",n.style.width="8px",n.style.height="8px",n.style.background="#fff",n.style.borderRadius="50%",n.style.position="absolute",n.style.top="1px",n.style.left="1px",n.style.transition="all 0.3s",r.appendChild(n),o.appendChild(t),o.appendChild(r),v(),o.onclick=e=>{e.stopPropagation(),Z("/talktomyself"),setTimeout(()=>{v()},100)},a.appendChild(o);const i=document.createElement("span");i.textContent="Hotbar",i.style.color="#ecf0f1",i.style.fontSize="14px",i.style.fontWeight="bold",i.style.cursor="grab",i.style.textAlign="center",i.style.display="flex",i.style.alignItems="center",i.style.lineHeight="1",a.appendChild(i);const c=document.createElement("div");c.style.position="absolute",c.style.right="85px",c.style.top="50%",c.style.transform="translateY(-50%)",c.style.cursor="default",c.style.display="flex",c.style.alignItems="center",c.style.gap="4px",c.style.fontSize="10px",c.style.color="#6ec6ff",c.style.userSelect="none",c.style.background="rgba(110,198,255,0.1)",c.style.padding="4px 8px",c.style.borderRadius="8px",c.style.border="1px solid rgba(110,198,255,0.3)",c.style.fontWeight="bold",c.style.transition="all 0.2s ease",c.style.cursor="pointer",c.style.marginRight="10px",c.onmouseover=()=>{c.style.background="rgba(110,198,255,0.2)",c.style.borderColor="rgba(110,198,255,0.6)",c.style.transform="translateY(-50%) scale(1.05)"},c.onmouseout=()=>{c.style.background="rgba(110,198,255,0.1)",c.style.borderColor="rgba(110,198,255,0.3)",c.style.transform="translateY(-50%) scale(1)"};const d=document.createElement("span");d.textContent="üè∑Ô∏è",d.style.fontSize="10px";const l=document.createElement("span");l.textContent="v0.0.1",l.style.fontSize="10px",l.id="hotbar-version-text",c.appendChild(d),c.appendChild(l),c.title="Vers√£o atual do script: 0.3.1.8744\nClique para copiar a vers√£o",c.onclick=e=>{e.stopPropagation();const a="0.3.1.8744";navigator.clipboard.writeText(a).then(()=>{j(`Vers√£o ${a} copiada para a √°rea de transfer√™ncia!`,"success",2e3)}).catch(()=>{j("Erro ao copiar vers√£o","error",2e3)})};const m=document.createElement("div");m.style.position="absolute",m.style.right="24px",m.style.top="50%",m.style.transform="translateY(-50%)",m.style.cursor="pointer",m.style.display="flex",m.style.alignItems="center",m.style.gap="4px",m.style.fontSize="10px",m.style.color="#ffb86c",m.style.userSelect="none",m.style.background="rgba(255,184,108,0.1)",m.style.padding="4px 8px",m.style.borderRadius="8px",m.style.border="1px solid rgba(255,184,108,0.3)",m.style.fontWeight="bold",m.style.transition="all 0.2s ease",m.onmouseover=()=>{m.style.background="rgba(255,184,108,0.2)",m.style.borderColor="rgba(255,184,108,0.6)",m.style.transform="translateY(-50%) scale(1.05)"},m.onmouseout=()=>{m.style.background="rgba(255,184,108,0.1)",m.style.borderColor="rgba(255,184,108,0.3)",m.style.transform="translateY(-50%) scale(1)"};const u=document.createElement("span");u.textContent="‚öôÔ∏è",u.style.fontSize="10px";const p=document.createElement("span");p.textContent="Config",p.style.fontSize="10px",m.appendChild(u),m.appendChild(p),m.title="Configura√ß√µes do script\nClique para abrir as configura√ß√µes",m.onclick=e=>{e.stopPropagation(),function(){const e=document.getElementById("config-modal");e&&e.remove();const a=document.getElementById("config-overlay");a&&a.remove();const o=document.createElement("div");o.id="config-overlay",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.background="rgba(0,0,0,0.7)",o.style.zIndex="10002",o.onclick=()=>{o.remove(),t.remove()},document.body.appendChild(o);const t=document.createElement("div");t.id="config-modal",t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.background="rgba(30,30,40,0.98)",t.style.border="2px solid #ffb86c",t.style.borderRadius="12px",t.style.padding="20px",t.style.zIndex="10003",t.style.minWidth="500px",t.style.maxWidth="700px",t.style.width="auto",t.style.maxHeight="80vh",t.style.overflowY="auto",t.style.boxShadow="0 8px 32px rgba(0,0,0,0.8)",t.style.boxSizing="border-box";const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="center",r.style.marginBottom="20px",r.style.paddingBottom="15px",r.style.borderBottom="1px solid rgba(255,184,108,0.3)";const n=document.createElement("h2");n.textContent="‚öôÔ∏è Configura√ß√µes",n.style.color="#ffb86c",n.style.margin="0",n.style.fontSize="20px",n.style.fontWeight="bold";const i=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ffb86c",onClick:()=>{o.remove(),t.remove()}});r.appendChild(n),r.appendChild(i.render());const c=document.createElement("div");c.style.color="#ecf0f1";const d=document.createElement("div");d.style.marginBottom="25px",d.style.padding="15px",d.style.background="rgba(255,184,108,0.05)",d.style.borderRadius="8px",d.style.border="1px solid rgba(255,184,108,0.2)",d.style.boxSizing="border-box",d.style.width="100%";const l=document.createElement("h3");l.textContent="üìã Informa√ß√µes do Script",l.style.color="#ffb86c",l.style.margin="0 0 15px 0",l.style.fontSize="16px",l.style.fontWeight="bold",d.appendChild(l),d.innerHTML+=`\n            <p style="margin: 8px 0;"><strong>Vers√£o:</strong> 0.3.1.8744</p>\n            <p style="margin: 8px 0;"><strong>Autor:</strong> Daniel Marinho Goncalves</p>\n            <p style="margin: 8px 0;"><strong>√öltima atualiza√ß√£o:</strong> ${(new Date).toLocaleDateString("pt-BR")}</p>\n        `;const m=document.createElement("div");m.style.marginBottom="25px",m.style.padding="15px",m.style.background="rgba(110,198,255,0.05)",m.style.borderRadius="8px",m.style.border="1px solid rgba(110,198,255,0.2)",m.style.boxSizing="border-box",m.style.width="100%";const u=document.createElement("h3");u.textContent="üîÑ Sincroniza√ß√£o de Dados da Ficha",u.style.color="#6ec6ff",u.style.margin="0 0 15px 0",u.style.fontSize="16px",u.style.fontWeight="bold",m.appendChild(u);const p=document.createElement("div");p.style.marginBottom="20px",p.style.padding="12px",p.style.background="rgba(255, 193, 7, 0.1)",p.style.border="1px solid rgba(255, 193, 7, 0.3)",p.style.borderRadius="6px";const g=document.createElement("h4");g.textContent="üîë Chave de Identifica√ß√£o do Personagem",g.style.color="#FFC107",g.style.margin="0 0 8px 0",g.style.fontSize="14px",g.style.fontWeight="bold";const y=document.createElement("p");y.textContent="Nome do personagem como aparece na ficha do Roll20. Esta chave √© essencial para que as macros @{nome_do_personagem|atributo} funcionem corretamente.",y.style.color="#ecf0f1",y.style.fontSize="12px",y.style.margin="0 0 10px 0",y.style.lineHeight="1.4";const b=document.createElement("input");b.type="text",b.id="char_identification_key",b.value=localStorage.getItem("tormenta-20-hotbars-char-identification-key")||I(),b.placeholder="Ex: Aragorn, Gandalf, etc.",b.style.width="100%",b.style.padding="10px 12px",b.style.border="2px solid rgba(255, 193, 7, 0.4)",b.style.borderRadius="6px",b.style.background="rgba(30,30,40,0.9)",b.style.color="#ecf0f1",b.style.fontSize="13px",b.style.boxSizing="border-box",b.style.fontWeight="bold",b.addEventListener("change",()=>{localStorage.setItem("tormenta-20-hotbars-char-identification-key",b.value),localStorage.setItem(s,b.value)}),p.appendChild(g),p.appendChild(y),p.appendChild(b),m.appendChild(p);const h=document.createElement("div");h.style.marginBottom="15px",h.style.padding="10px",h.style.background="rgba(110, 198, 255, 0.05)",h.style.border="1px solid rgba(110, 198, 255, 0.2)",h.style.borderRadius="6px";const x=document.createElement("p");x.textContent="Os campos abaixo s√£o as chaves de atributo da ficha que devem ser usadas para preencher os valores das propriedades na hotbar (vida, mana, n√≠vel, etc.). Configure cada campo com o nome exato do atributo como aparece na sua ficha do Roll20.",x.style.color="#ecf0f1",x.style.fontSize="12px",x.style.margin="0",x.style.lineHeight="1.4",h.appendChild(x),m.appendChild(h);const C=[{key:"tormenta-20-hotbars-char-name-attr",label:"Nome do Personagem",defaultValue:"menace_name"},{key:"tormenta-20-hotbars-char-race-attr",label:"Ra√ßa",defaultValue:"trace"},{key:"tormenta-20-hotbars-char-class-attr",label:"Classe",defaultValue:"tlevel"},{key:"tormenta-20-hotbars-char-level-attr",label:"N√≠vel",defaultValue:"charnivel"},{key:"tormenta-20-hotbars-char-hp-total-attr",label:"Vida Total",defaultValue:"vidatotal"},{key:"tormenta-20-hotbars-char-hp-current-attr",label:"Vida Atual",defaultValue:"vida"},{key:"tormenta-20-hotbars-char-mp-total-attr",label:"Mana Total",defaultValue:"manatotal"},{key:"tormenta-20-hotbars-char-mp-current-attr",label:"Mana Atual",defaultValue:"mana"},{key:"tormenta-20-hotbars-char-ac-attr",label:"Armadura",defaultValue:"defesatotal"}],w=document.createElement("div");w.style.marginBottom="15px",w.style.width="100%",w.style.boxSizing="border-box",C.forEach(e=>{const a=document.createElement("div");a.style.marginBottom="12px",a.style.width="100%",a.style.boxSizing="border-box";const o=document.createElement("label");o.textContent=e.label,o.style.display="block",o.style.marginBottom="5px",o.style.fontSize="14px",o.style.fontWeight="bold",o.style.color="#ecf0f1";const t=document.createElement("input");t.type="text",t.id=e.key,t.value=localStorage.getItem(e.key)||e.defaultValue,t.style.width="100%",t.style.padding="8px 12px",t.style.border="1px solid rgba(110,198,255,0.3)",t.style.borderRadius="6px",t.style.background="rgba(30,30,40,0.8)",t.style.color="#ecf0f1",t.style.fontSize="13px",t.style.boxSizing="border-box",t.addEventListener("change",()=>{localStorage.setItem(e.key,t.value)});const s=document.createElement("div");s.id=`${e.key}_current`,s.style.fontSize="11px",s.style.color="#888",s.style.marginTop="3px",s.style.fontStyle="italic";const r=e.key.replace("tormenta-20-hotbars-char-","").replace("-attr",""),n=localStorage.getItem(`tormenta-20-hotbars-sync-${r}`);s.textContent=n?`Valor atual: ${n}`:"Nenhum valor salvo",a.appendChild(o),a.appendChild(t),a.appendChild(s),w.appendChild(a)}),m.appendChild(w);const q=document.createElement("button");q.id="sync-data-btn",q.textContent="üîÑ Sincronizar Dados",q.style.width="100%",q.style.padding="12px 20px",q.style.border="1px solid #6ec6ff",q.style.borderRadius="6px",q.style.background="transparent",q.style.color="#6ec6ff",q.style.cursor="pointer",q.style.fontSize="14px",q.style.fontWeight="bold",q.style.transition="all 0.2s ease",q.style.position="relative",q.style.boxSizing="border-box",q.style.whiteSpace="nowrap",q.style.overflow="hidden",q.style.textOverflow="ellipsis",q.disabled=!1,q.style.opacity="1",q.style.cursor="pointer",q.title="Sincroniza os dados da ficha com base nos atributos configurados acima",m.appendChild(q);const E=document.createElement("div");E.style.marginBottom="15px",E.style.padding="15px",E.style.background="rgba(255,110,110,0.05)",E.style.borderRadius="8px",E.style.border="1px solid rgba(255,110,110,0.2)",E.style.boxSizing="border-box",E.style.width="100%";const z=document.createElement("h3");z.textContent="üóëÔ∏è Limpar Cache da Hotbar",z.style.color="#ff6e6e",z.style.margin="0 0 15px 0",z.style.fontSize="16px",z.style.fontWeight="bold",E.appendChild(z);const k=document.createElement("button");k.id="clear-all-data-btn",k.textContent="Limpar Dados do Hotbar",k.style.width="100%",k.style.padding="12px 20px",k.style.border="1px solid #ff6e6e",k.style.borderRadius="6px",k.style.background="transparent",k.style.color="#ff6e6e",k.style.cursor="pointer",k.style.fontSize="14px",k.style.fontWeight="bold",k.style.transition="all 0.2s ease",k.style.boxSizing="border-box",k.style.whiteSpace="nowrap",k.style.overflow="hidden",k.style.textOverflow="ellipsis",k.title="Remove apenas os dados do hotbar (cache de imagens, efeitos ativos, configura√ß√µes, etc.) e recarrega a p√°gina",E.appendChild(k),c.appendChild(d),c.appendChild(m),c.appendChild(E),q.onmouseover=()=>{q.disabled||(q.style.background="rgba(110,198,255,0.1)",q.style.borderColor="#8ed4ff",q.style.color="#8ed4ff",q.style.transform="scale(1.02)")},q.onmouseout=()=>{q.disabled||(q.style.background="transparent",q.style.borderColor="#6ec6ff",q.style.color="#6ec6ff",q.style.transform="scale(1)")},k.onmouseover=()=>{k.style.background="rgba(255, 110, 110, 0.1)",k.style.borderColor="#ff8e8e",k.style.color="#ff8e8e",k.style.transform="scale(1.02)"},k.onmouseout=()=>{k.style.background="transparent",k.style.borderColor="#ff6e6e",k.style.color="#ff6e6e",k.style.transform="scale(1)"},q.onclick=async()=>{if(q.disabled)return;q.disabled=!0,q.style.opacity="0.7",q.style.cursor="not-allowed";const e=q.textContent;q.textContent="‚è≥ Sincronizando...";try{f()||(Z("/talktomyself"),setTimeout(()=>v(),500));const e={};C.forEach(a=>{const o=document.getElementById(a.key),t=a.key.replace("tormenta-20-hotbars-char-","").replace("-attr","");e[t]=o.value}),await ee(e),C.forEach(e=>{const a=e.key.replace("tormenta-20-hotbars-char-","").replace("-attr",""),o=localStorage.getItem(`tormenta-20-hotbars-sync-${a}`),t=document.getElementById(`${e.key}_current`);o?(t.textContent=`Valor atual: ${o}`,t.style.color="#4caf50"):(t.textContent="Nenhum valor salvo",t.style.color="#888")}),j("Sincroniza√ß√£o conclu√≠da com sucesso!","success",3e3),M()}catch(e){console.error("Erro na sincroniza√ß√£o:",e),j(`Erro na sincroniza√ß√£o: ${e.message}`,"error",5e3)}finally{f()&&(Z("/talktomyself"),setTimeout(()=>v(),500)),q.disabled=!1,q.style.opacity="1",q.style.cursor="pointer",q.textContent=e}},k.onclick=()=>{confirm("Tem certeza que deseja limpar todos os dados do hotbar? Esta a√ß√£o ir√° remover o cache de imagens, efeitos ativos, configura√ß√µes e outros dados do hotbar. Esta a√ß√£o n√£o pode ser desfeita.")&&(function(){const e=[];for(let a=0;a<localStorage.length;a++){const o=localStorage.key(a);o&&(o.startsWith("tormenta-20-hotbars-")||"char_identification_key"===o||"tormenta-20-hotbars-char-identification-key"===o||o.startsWith("char_")&&o.endsWith("_attr"))&&e.push(o)}e.forEach(e=>{localStorage.removeItem(e)}),la()}(),j("Dados do hotbar foram limpos com sucesso!","success",3e3),setTimeout(()=>{location.reload()},1e3))},t.appendChild(r),t.appendChild(c),document.body.appendChild(t),S(t,"orange")}()},a.appendChild(m),a.appendChild(c),e.appendChild(a);const y=document.createElement("div");y.style.display="flex",y.style.flexDirection="row",y.style.gap="20px",y.style.padding="14px 24px 14px 24px",y.style.alignItems="center";const b=document.createElement("div");b.textContent="CA√áADOR",b.style.color="#8B4513",b.style.fontSize="10px",b.style.fontWeight="bold",b.style.fontStyle="italic",b.style.textTransform="uppercase",b.style.letterSpacing="1px",b.style.cursor="pointer",b.style.padding="0px 4px",b.style.background="rgba(139, 69, 19, 0.2)",b.style.borderRadius="8px",b.style.border="1px solid rgba(139, 69, 19, 0.4)",b.style.transition="all 0.2s",b.style.display="flex",b.style.alignItems="center",b.style.justifyContent="center",b.style.width="20px",b.style.height="80px",b.style.position="relative",b.style.title="Clique para ver informa√ß√µes da classe",b.style.writingMode="vertical-rl",b.style.textOrientation="mixed",b.style.transform="rotate(180deg)",b.onmouseover=()=>{b.style.background="rgba(139, 69, 19, 0.3)",b.style.borderColor="rgba(139, 69, 19, 0.6)",b.style.transform="rotate(180deg) scale(1.05)"},b.onmouseout=()=>{b.style.background="rgba(139, 69, 19, 0.2)",b.style.borderColor="rgba(139, 69, 19, 0.4)",b.style.transform="rotate(180deg) scale(1)"},b.onclick=()=>{ze()};const x=document.createElement("div");x.style.display="flex",x.style.alignItems="center",x.style.gap="12px",x.style.padding="8px 12px",x.style.background="rgba(26,26,46)",x.style.borderRadius="12px",x.style.border="1px solid rgba(110,198,255,0.3)",x.style.minWidth="200px",x.style.height="64px";const C=document.createElement("div");C.style.position="relative",C.style.cursor="pointer",C.style.transition="all 0.2s";const w=document.createElement("div");w.id="character-avatar",w.style.width="64px",w.style.height="64px",w.style.borderRadius="50%",w.style.border="2px solid #6ec6ff",w.style.display="flex",w.style.alignItems="center",w.style.justifyContent="center",w.style.fontSize="20px",w.style.fontWeight="bold",w.style.color="#ecf0f1",w.style.background="#23243a",w.style.overflow="hidden",w.style.transition="all 0.2s";const q=F();q?(w.style.background=`url(${q}) center/cover`,w.textContent=""):w.textContent="IM";const E=document.createElement("div");E.innerHTML="‚úèÔ∏è",E.style.position="absolute",E.style.bottom="-3px",E.style.right="-3px",E.style.background="#6ec6ff",E.style.borderRadius="50%",E.style.width="22px",E.style.height="22px",E.style.display="flex",E.style.alignItems="center",E.style.justifyContent="center",E.style.fontSize="12px",E.style.border="2px solid rgba(30,30,40,0.92)",E.style.opacity="0",E.style.transition="all 0.2s";const z=document.createElement("div");z.textContent=D(),z.style.position="absolute",z.style.top="-3px",z.style.left="-3px",z.style.background="rgba(26,26,46)",z.style.borderRadius="50%",z.style.width="22px",z.style.height="22px",z.style.display="flex",z.style.alignItems="center",z.style.justifyContent="center",z.style.fontSize="12px",z.style.fontWeight="bold",z.style.color="#fff",z.style.border="2px solid #6ec6ff",z.style.transition="all 0.2s",z.title="N√≠vel do her√≥i";const k=document.createElement("div");k.textContent=localStorage.getItem("tormenta-20-hotbars-char-ac-attr")||"0",k.style.position="absolute",k.style.bottom="-3px",k.style.right="-3px",k.style.background="rgba(26,26,46)",k.style.borderRadius="50%",k.style.width="24px",k.style.height="26px",k.style.display="flex",k.style.alignItems="center",k.style.justifyContent="center",k.style.fontSize="12px",k.style.fontWeight="bold",k.style.color="#fff",k.style.border="2px solid #6ec6ff",k.style.transition="all 0.2s",k.title="Defesa",C.appendChild(w),C.appendChild(E),C.appendChild(z),C.appendChild(k),C.onmouseover=()=>{w.style.transform="scale(1.05)",E.style.opacity="1",z.style.transform="scale(1.1)",k.style.transform="scale(1.05)"},C.onmouseout=()=>{w.style.transform="scale(1)",E.style.opacity="0",z.style.transform="scale(1)",k.style.transform="scale(1)"},C.onclick=Y;const P=document.createElement("div");P.style.display="flex",P.style.flexDirection="column",P.style.gap="1px",P.style.justifyContent="center",P.style.height="80px";const _=document.createElement("div");_.id="character-name";const R=localStorage.getItem(s)||$();_.textContent=R,_.style.color="#ecf0f1",_.style.fontSize="14px",_.style.fontWeight="bold",_.style.whiteSpace="nowrap",_.style.cursor="default",_.title="Nome do personagem (sincronizado da ficha)",P.appendChild(_);const V=document.createElement("div");V.style.display="flex",V.style.alignItems="center",V.style.gap="8px",V.style.marginTop="2px";const B=document.createElement("div");B.style.width="80px",B.style.height="8px",B.style.background="rgba(255, 0, 0, 0.3)",B.style.borderRadius="4px",B.style.overflow="hidden",B.style.position="relative";const N=document.createElement("div");N.style.height="100%",N.style.background="#ff4444",N.style.transition="width 0.3s ease",N.style.borderRadius="4px";const O=parseInt(localStorage.getItem("tormenta-20-hotbars-sync-hp-current")||"0"),U=parseInt(localStorage.getItem("tormenta-20-hotbars-sync-hp-total")||"1"),L=U>0?Math.max(0,Math.min(100,O/U*100)):0;N.style.width=`${L}%`,N.style.background=L>50?"#4caf50":L>25?"#ff9800":"#f44336";const W=document.createElement("div");W.textContent=`${O}/${U}`,W.style.fontSize="10px",W.style.color="#ecf0f1",W.style.fontWeight="bold",W.style.minWidth="35px",B.appendChild(N),V.appendChild(B),V.appendChild(W);const H=document.createElement("div");H.style.display="flex",H.style.alignItems="center",H.style.gap="8px",H.style.marginTop="1px";const J=document.createElement("div");J.style.width="80px",J.style.height="8px",J.style.background="rgba(0, 0, 255, 0.3)",J.style.borderRadius="4px",J.style.overflow="hidden",J.style.position="relative";const G=document.createElement("div");G.style.height="100%",G.style.background="#2196f3",G.style.transition="width 0.3s ease",G.style.borderRadius="4px";const Q=parseInt(localStorage.getItem("tormenta-20-hotbars-sync-mp-current")||"0"),K=parseInt(localStorage.getItem("tormenta-20-hotbars-sync-mp-total")||"1"),X=K>0?Math.max(0,Math.min(100,Q/K*100)):0;G.style.width=`${X}%`;const oe=document.createElement("div");oe.textContent=`${Q}/${K}`,oe.style.fontSize="10px",oe.style.color="#6ec6ff",oe.style.fontWeight="bold",oe.style.minWidth="35px",J.appendChild(G),H.appendChild(J),H.appendChild(oe),P.appendChild(V),P.appendChild(H),x.appendChild(C),x.appendChild(P);const se=document.createElement("div");se.style.width="1px",se.style.height="60px",se.style.background="rgba(110,198,255,0.3)",se.style.margin="0 10px";const re=document.createElement("div");re.style.display="flex",re.style.alignItems="center",re.style.gap="12px",re.style.padding="8px 12px",re.style.background="rgba(46,26,26,0.8)",re.style.borderRadius="12px",re.style.border="1px solid rgba(255,110,110,0.3)",re.style.minWidth="160px",re.style.justifyContent="center";const ne=document.createElement("div");ne.style.width="1px",ne.style.height="60px",ne.style.background="rgba(110,198,255,0.3)",ne.style.margin="0 10px";const ce=document.createElement("div");ce.style.display="flex",ce.style.alignItems="center",ce.style.gap="8px",ce.style.padding="8px 12px",ce.style.background="rgba(26,26,46,0.8)",ce.style.borderRadius="12px",ce.style.border="1px solid rgba(110,198,255,0.3)",ce.style.minWidth="340px",ce.style.justifyContent="center";const de={label:"Atacar",icon:"‚öîÔ∏è",onClick:e=>{if(e&&e.ctrlKey)!function(){const e=document.getElementById("attack-effects-popup");e&&e.remove();const a=document.getElementById("attack-effects-overlay");a&&a.remove();const o=document.createElement("div");o.id="attack-effects-overlay",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.background="rgba(0,0,0,0.5)",o.style.zIndex="10000",o.onclick=()=>{o.remove(),t.remove()},document.body.appendChild(o);const t=document.createElement("div");t.id="attack-effects-popup",t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.background="rgba(30,30,40,0.98)",t.style.border="2px solid #6ec6ff",t.style.borderRadius="12px",t.style.padding="18px 20px 16px 20px",t.style.zIndex="10001",t.style.maxWidth="340px",t.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="stretch";const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="space-between",s.style.alignItems="center",s.style.marginBottom="10px",s.style.width="100%";const r=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{t.remove();const e=document.getElementById("attack-effects-overlay");e&&e.remove()}}),n=document.createElement("h3");n.textContent="Efeitos no Ataque",n.style.color="#ecf0f1",n.style.margin="0",n.style.fontSize="17px",n.style.fontWeight="bold",s.appendChild(n),s.appendChild(r.render()),t.appendChild(s);const i=Ue(parseInt(localStorage.getItem(T)||"1",10)||1),c={},d="tormenta-20-hotbars-attack-effects";let l=[];try{const e=localStorage.getItem(d);e&&(l=JSON.parse(e))}catch(e){console.error("Erro ao carregar sele√ß√£o:",e),l=[]}i.forEach(e=>{const a=document.createElement("label");a.style.display="flex",a.style.alignItems="center",a.style.gap="8px",a.style.marginBottom="8px";const o=document.createElement("input");o.type="checkbox",o.value=e.value,c[e.value]=o,l.includes(e.value)&&(o.checked=!0);const s=document.createElement("span");s.textContent=e.label,s.style.color="#ecf0f1",s.style.fontSize="15px";const r=document.createElement("span");r.textContent=e.origin?` [${e.origin}]`:"",r.style.color="#6ec6ff",r.style.fontSize="12px",r.style.marginLeft="4px",s.appendChild(r),a.appendChild(o),a.appendChild(s),t.appendChild(a)});const m=document.createElement("button");m.textContent="Salvar",m.style.width="100%",m.style.padding="12px 0",m.style.background="#6ec6ff",m.style.color="#23243a",m.style.border="none",m.style.borderRadius="8px",m.style.fontSize="16px",m.style.fontWeight="bold",m.style.cursor="pointer",m.style.transition="all 0.2s",m.style.marginTop="10px",m.onmouseover=()=>{m.style.background="#5bb8ff"},m.onmouseout=()=>{m.style.background="#6ec6ff"},m.onclick=()=>{const e=Object.keys(c).filter(e=>c[e].checked);try{localStorage.setItem(d,JSON.stringify(e))}catch(e){console.error("Erro ao salvar sele√ß√£o:",e)}const a=e.includes("assado_carnes"),o=e.includes("batata_valkariana"),s=e.includes("bolo_cenoura"),r=e.includes("estrogonofe"),n=e.includes("futomaki"),i=e.includes("pao_queijo"),l=e.includes("porco_assado"),m=e.includes("salada_elfica"),u=e.includes("salada_imperial"),p=e.includes("sopa_cogumelo"),g=e.includes("pizza"),f=e.includes("baba_de_troll"),v=e.includes("hidromel_uivante");t.remove();const y=document.getElementById("attack-effects-overlay");if(y&&y.remove(),a||o||s||r||n||i||l||m||u||p||g||f||v){const t=Ue(parseInt(localStorage.getItem(T)||"1",10)||1);let c="",d="",y=18,b=0,h=!1,x=!1;t.forEach(a=>{e.includes(a.value)&&(a.dice&&(c+=`+${a.dice}`),a.critMod&&(y+=a.critMod),a.attackMod&&("string"==typeof a.attackMod&&a.attackMod.includes("d")?b+=`+${a.attackMod}`:b+=a.attackMod),d+="%NEWLINE% "+a.desc,"marca_presa"===a.value&&(h=!0),"inimigo"===a.value&&(x=!0))}),x&&h&&16===y&&(y=14),he(`&{template:t20-attack}{{character=@{${I()}|character_name}}}{{attackname=Espada Longa}}{{attackroll=[[1d20cs>${y}+[[@{${I()}|pontariatotal}+@{${I()}|condicaomodataquedis}+@{${I()}|condicaomodataque}]]+${b}+@{${I()}|ataquetemp}]]}} {{damageroll=[[2d8+@{${I()}|des_mod}+0+0+@{${I()}|danotemp}+@{${I()}|rolltemp}${c}]]}} {{criticaldamageroll=[[2d8 + 2d8 + 2d8 + 0 + 0+0+@{${I()}|des_mod}+0]]}}{{typeofdamage=Cortante}}{{description=**Ataque c/ Espada Longa**${d}}}`),setTimeout(()=>{if(o){Ke("prato_batata_valkariana");let e=JSON.parse(localStorage.getItem("tormenta-20-hotbars-comida-effects")||"[]");e=e.filter(e=>"prato_batata_valkariana"!==e.effectKey),localStorage.setItem("tormenta-20-hotbars-comida-effects",JSON.stringify(e)),A("üçü Efeito da Batata Valkariana consumido no ataque!")}if(a&&A("ü•© B√¥nus do Assado de Carnes aplicado no ataque!"),s&&A("ü•ï B√¥nus do Bolo de Cenoura aplicado no ataque!"),r&&A("üçù B√¥nus do Estrogonofe aplicado no ataque!"),n&&A("üç£ B√¥nus do Futomaki aplicado no ataque!"),i&&A("üßÄ B√¥nus do P√£o de Queijo aplicado no ataque!"),l&&A("üê∑ B√¥nus do Porco Assado aplicado no ataque!"),m&&A("ü•ó B√¥nus da Salada Elfica aplicado no ataque!"),u&&A("ü•ó B√¥nus da Salada Imperial aplicado no ataque!"),p&&A("üçÑ B√¥nus da Sopa de Cogumelo aplicado no ataque!"),g&&A("üçï B√¥nus da Pizza aplicado no ataque!"),f){Ke("bebida_baba_de_troll");let e=JSON.parse(localStorage.getItem("tormenta-20-hotbars-bebida-effects")||"[]");e=e.filter(e=>"bebida_baba_de_troll"!==e.effectKey),localStorage.setItem("tormenta-20-hotbars-bebida-effects",JSON.stringify(e)),A("üßÉ Efeito da Baba de Troll consumido no ataque!")}v&&A("üî• B√¥nus do Hidromel Uivante aplicado no ataque!")},1e3)}},t.appendChild(m),document.body.appendChild(t),S(t,"blue")}();else{const e="tormenta-20-hotbars-attack-effects";let a=[];try{const o=localStorage.getItem(e);o&&(a=JSON.parse(o))}catch(e){console.error("Erro ao carregar sele√ß√£o:",e),a=[]}const o=Ue(parseInt(localStorage.getItem(T)||"1",10)||1);let t="",s="",r=18,n=0,i=!1,c=!1;o.forEach(e=>{a.includes(e.value)&&(e.dice&&(t+=`+${e.dice}`),e.critMod&&(r+=e.critMod),e.attackMod&&(n+=e.attackMod),s+="%NEWLINE% "+e.desc,"marca_presa"===e.value&&(i=!0),"inimigo"===e.value&&(c=!0))}),c&&i&&16===r&&(r=14),he(`&{template:t20-attack}{{character=@{${I()}|character_name}}}{{attackname=Espada Longa}}{{attackroll=[[1d20cs>${r}+[[@{${I()}|pontariatotal}+@{${I()}|condicaomodataquedis}+@{${I()}|condicaomodataque}]]+${n}+@{${I()}|ataquetemp}]]}} {{damageroll=[[2d8+@{${I()}|des_mod}+0+0+@{${I()}|danotemp}+@{${I()}|rolltemp}${t}]]}} {{criticaldamageroll=[[2d8 + 2d8 + 2d8 + 0 + 0+0+@{${I()}|des_mod}+0]]}}{{typeofdamage=Cortante}}{{description=**Ataque c/ Espada Longa**${s}}}`)}}},le={label:"Manobras",icon:"‚ö°",onClick:function(){const e=document.getElementById("maneuvers-popup");e&&e.remove();const a=document.getElementById("maneuvers-overlay");a&&a.remove();const o=document.createElement("div");o.id="maneuvers-overlay",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.background="rgba(0,0,0,0.5)",o.style.zIndex="10000",o.onclick=()=>{o.remove(),t.remove()},document.body.appendChild(o);const t=document.createElement("div");t.id="maneuvers-popup",t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.background="rgba(30,30,40,0.98)",t.style.border="2px solid #ff6e6e",t.style.borderRadius="12px",t.style.padding="18px 20px 16px 20px",t.style.zIndex="10001",t.style.maxWidth="340px",t.style.maxHeight="480px",t.style.overflowY="auto",t.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="stretch";const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="space-between",s.style.alignItems="center",s.style.marginBottom="15px",s.style.width="100%";const r=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{t.remove();const e=document.getElementById("maneuvers-overlay");e&&e.remove()}}),n=document.createElement("h3");n.textContent="Manobras de Combate",n.style.color="#ecf0f1",n.style.margin="0",n.style.fontSize="18px",n.style.fontWeight="bold",s.appendChild(n),s.appendChild(r.render()),t.appendChild(s);const i=document.createElement("div");i.style.position="relative",i.style.marginBottom="10px";const c=document.createElement("div");c.innerHTML="üí° <strong>Dica:</strong> Clique segurando CTRL para ver detalhes completos da manobra",c.style.color="#ff6e6e",c.style.fontSize="12px",c.style.marginBottom="8px",c.style.textAlign="center",c.style.fontStyle="italic",t.appendChild(c);const d=document.createElement("input");d.type="text",d.placeholder="Filtrar manobras...",d.style.width="100%",d.style.padding="10px 28px 10px 12px",d.style.borderRadius="8px",d.style.border="1px solid #ff6e6e",d.style.background="#23243a",d.style.color="#fff",d.style.fontSize="14px",d.style.outline="none",d.style.boxSizing="border-box",d.style.fontSize="15px";const l=document.createElement("span");l.textContent="√ó",l.style.position="absolute",l.style.right="8px",l.style.top="50%",l.style.transform="translateY(-50%)",l.style.cursor="pointer",l.style.color="#ff6e6e",l.style.fontSize="18px",l.style.display="none",l.onclick=()=>{d.value="",d.dispatchEvent(new Event("input")),d.focus()},d.oninput=()=>{d.value.length>0?l.style.display="block":l.style.display="none",p()},d.onfocus=()=>{d.style.borderColor="#ff8e8e"},d.style.borderColor="#ff6e6e",i.appendChild(d),i.appendChild(l),t.appendChild(i);const m=document.createElement("div");m.style.display="flex",m.style.flexDirection="column",m.style.gap="6px",m.style.marginTop="2px";const u=[{name:"Investida",description:"Voc√™ avan√ßa at√© o dobro de seu deslocamento (e no m√≠nimo 3m) em linha reta e, no fim do movimento, faz um ataque corpo a corpo. Voc√™ recebe +2 no teste de ataque, mas sofre ‚Äì2 na Defesa at√© o seu pr√≥ximo turno, porque sua guarda fica aberta. Voc√™ n√£o pode fazer uma investida em terreno dif√≠cil. Durante uma investida, voc√™ pode fazer a manobra atropelar como uma a√ß√£o livre (mas n√£o pode atropelar e atacar o mesmo alvo).",icon:"‚ö°",shortDesc:"A√ß√£o completa: Ataque corpo a corpo com +2 no teste de ataque, mas sofra ‚Äì2 na Defesa at√© o pr√≥ximo turno.",actionType:"A√ß√£o Completa",testType:"Ataque corpo a corpo",difficulty:"Teste de Pontaria +2",effects:["+2 no teste de ataque","-2 na Defesa at√© pr√≥ximo turno","Pode fazer Atropelar como a√ß√£o livre"],restrictions:["N√£o pode ser feita em terreno dif√≠cil","M√≠nimo 3m de movimento"]},{name:"Atropelar",description:"Voc√™ pode tentar atropelar um oponente como uma a√ß√£o de movimento. Fa√ßa um teste de For√ßa (Atletismo) oposto ao teste de For√ßa (Atletismo) do oponente. Se voc√™ vencer, empurra o oponente 1,5m para tr√°s e pode continuar seu movimento. Se voc√™ perder, para no espa√ßo do oponente.",icon:"üí®",shortDesc:"A√ß√£o de movimento: Teste de Atletismo para empurrar oponente 1,5m para tr√°s.",actionType:"A√ß√£o de Movimento",testType:"Teste de For√ßa (Atletismo)",difficulty:"Oposto ao teste de For√ßa (Atletismo) do oponente",effects:["Empurra oponente 1,5m para tr√°s","Pode continuar movimento"],restrictions:["Se perder, para no espa√ßo do oponente"]},{name:"Agarrar",description:"Voc√™ pode tentar agarrar um oponente como uma a√ß√£o padr√£o. Fa√ßa um teste de For√ßa (Luta) oposto ao teste de For√ßa (Luta) ou Destreza (Acrobacia) do oponente. Se voc√™ vencer, o oponente fica agarrado.",icon:"ü§ù",shortDesc:"A√ß√£o padr√£o: Teste de Luta para agarrar oponente.",actionType:"A√ß√£o Padr√£o",testType:"Teste de For√ßa (Luta)",difficulty:"Oposto ao teste de For√ßa (Luta) ou Destreza (Acrobacia) do oponente",effects:["Oponente fica agarrado"],restrictions:["Oponente pode usar Luta ou Acrobacia para resistir"]},{name:"Desarmar",description:"Voc√™ pode tentar desarmar um oponente como uma a√ß√£o padr√£o. Fa√ßa um teste de For√ßa (Luta) oposto ao teste de For√ßa (Luta) do oponente. Se voc√™ vencer, o oponente solta a arma.",icon:"üó°Ô∏è",shortDesc:"A√ß√£o padr√£o: Teste de Luta para fazer oponente soltar arma.",actionType:"A√ß√£o Padr√£o",testType:"Teste de For√ßa (Luta)",difficulty:"Oposto ao teste de For√ßa (Luta) do oponente",effects:["Oponente solta a arma"],restrictions:["S√≥ funciona contra oponentes empunhando armas"]},{name:"Derrubar",description:"Voc√™ deixa o alvo ca√≠do. Esta queda normalmente n√£o causa dano. Se voc√™ vencer o teste oposto por 5 pontos ou mais, derruba o oponente com tanta for√ßa que tamb√©m o empurra um quadrado em uma dire√ß√£o a sua escolha. Se isso o jogar al√©m de um parapeito ou precip√≠cio, ele pode fazer um teste de Reflexos (CD 20) para se agarrar numa beirada.",icon:"üîª",shortDesc:"A√ß√£o padr√£o: Deixe o alvo ca√≠do. Se vencer por 5+, empurre o alvo 1 quadrado.",actionType:"A√ß√£o Padr√£o",testType:"Teste de For√ßa (Luta)",difficulty:"Oposto ao teste de For√ßa (Luta) do oponente",effects:["Alvo fica ca√≠do","Se vencer por 5+, empurra 1 quadrado"],restrictions:["Queda n√£o causa dano","Teste de Reflexos CD 20 se cair de altura"]},{name:"Empurrar",description:"Voc√™ empurra a criatura 1,5m. Para cada 5 pontos de diferen√ßa entre os testes, voc√™ empurra o alvo mais 1,5m. Voc√™ pode gastar uma a√ß√£o de movimento para avan√ßar junto com a criatura (at√© o limite do seu deslocamento).",icon:"‚û°Ô∏è",shortDesc:"A√ß√£o padr√£o: Empurre o alvo 1,5m. Para cada 5 pontos de diferen√ßa, empurre mais 1,5m.",actionType:"A√ß√£o Padr√£o",testType:"Teste de For√ßa (Luta)",difficulty:"Oposto ao teste de For√ßa (Luta) do oponente",effects:["Empurra 1,5m","Cada 5 pontos de diferen√ßa = +1,5m","Pode avan√ßar junto usando a√ß√£o de movimento"],restrictions:["Limitado pelo deslocamento do personagem"]},{name:"Bloquear",description:"Voc√™ pode tentar bloquear um ataque como uma rea√ß√£o. Fa√ßa um teste de For√ßa (Luta) oposto ao teste de ataque do oponente. Se voc√™ vencer, o ataque √© bloqueado e n√£o causa dano.",icon:"üõ°Ô∏è",shortDesc:"Rea√ß√£o: Teste de Luta para bloquear ataque.",actionType:"Rea√ß√£o",testType:"Teste de For√ßa (Luta)",difficulty:"Oposto ao teste de ataque do oponente",effects:["Bloqueia o ataque","N√£o causa dano"],restrictions:["S√≥ pode ser usada como rea√ß√£o","Precisa estar empunhando escudo ou arma"]},{name:"Esquivar",description:"Voc√™ pode tentar esquivar de um ataque como uma rea√ß√£o. Fa√ßa um teste de Destreza (Acrobacia) oposto ao teste de ataque do oponente. Se voc√™ vencer, o ataque erra completamente.",icon:"üîÑ",shortDesc:"Rea√ß√£o: Teste de Acrobacia para esquivar de ataque.",actionType:"Rea√ß√£o",testType:"Teste de Destreza (Acrobacia)",difficulty:"Oposto ao teste de ataque do oponente",effects:["Ataque erra completamente"],restrictions:["S√≥ pode ser usada como rea√ß√£o","Precisa estar livre de movimento"]},{name:"Contra-ataque",description:"Quando um oponente erra um ataque corpo a corpo contra voc√™, voc√™ pode fazer um contra-ataque como uma rea√ß√£o. Fa√ßa um teste de ataque normal. Se acertar, causa dano normal.",icon:"‚öîÔ∏è",shortDesc:"Rea√ß√£o: Ataque quando oponente erra ataque corpo a corpo.",actionType:"Rea√ß√£o",testType:"Teste de ataque normal",difficulty:"Teste de Pontaria normal",effects:["Ataque normal se acertar"],restrictions:["S√≥ quando oponente erra ataque corpo a corpo","Precisa estar empunhando arma corpo a corpo"]}];u.forEach((e,a)=>{const o=document.createElement("button");o.id=`maneuver-btn-${a}`,o.textContent=`${e.icon} ${e.name}`,o.style.width="100%",o.style.background="#23243a",o.style.color="#fff",o.style.border="1px solid #ff6e6e",o.style.borderRadius="6px",o.style.padding="8px 0",o.style.fontSize="15px",o.style.fontWeight="bold",o.style.cursor="pointer",o.style.transition="all 0.2s",o.style.position="relative",o.style.display="block";let s=null,r=null;o.onmouseover=()=>{o.style.background="#ff6e6e",o.style.color="#23243a",r=setTimeout(()=>{s&&s.remove(),s=document.createElement("div"),s.style.position="fixed",s.style.background="rgba(20,20,30,0.98)",s.style.border="2px solid #ff6e6e",s.style.borderRadius="8px",s.style.padding="12px",s.style.minWidth="280px",s.style.maxWidth="320px",s.style.zIndex="10004",s.style.boxShadow="0 4px 16px rgba(0,0,0,0.8)",s.style.pointerEvents="none";const a=o.getBoundingClientRect();s.style.left=a.right+10+"px",s.style.top=a.top+"px";const t=document.createElement("div");t.style.display="flex",t.style.flexDirection="column",t.style.gap="8px";const r=document.createElement("div");r.textContent=e.name,r.style.color="#ff6e6e",r.style.fontSize="16px",r.style.fontWeight="bold",r.style.marginBottom="4px",t.appendChild(r);const n=document.createElement("div");n.textContent="Manobra de Combate",n.style.background="#ff6e6e",n.style.color="#23243a",n.style.fontSize="11px",n.style.fontWeight="bold",n.style.borderRadius="4px",n.style.padding="2px 8px",n.style.display="inline-block",n.style.width="fit-content",t.appendChild(n);const i=document.createElement("div");i.textContent="A√ß√£o Completa",i.style.background="#8B4513",i.style.color="#fff",i.style.fontSize="11px",i.style.fontWeight="bold",i.style.borderRadius="4px",i.style.padding="2px 8px",i.style.display="inline-block",i.style.width="fit-content",i.style.marginTop="2px",t.appendChild(i);const c=document.createElement("div");c.textContent=e.shortDesc,c.style.color="#ecf0f1",c.style.fontSize="13px",c.style.lineHeight="1.4",c.style.marginTop="6px",t.appendChild(c),s.appendChild(t),document.body.appendChild(s)},300)},o.onmouseout=()=>{o.style.background="#23243a",o.style.color="#fff",r&&(clearTimeout(r),r=null),s&&(s.remove(),s=null)},o.onclick=a=>{if(a.ctrlKey)return a.preventDefault(),void function(e){const a=document.getElementById("maneuver-details-popup");a&&a.remove();const o=document.getElementById("maneuver-details-overlay");o&&o.remove();const t=document.createElement("div");t.id="maneuver-details-overlay",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0,0,0,0.7)",t.style.zIndex="10002",t.onclick=()=>{t.remove(),s.remove()},document.body.appendChild(t);const s=document.createElement("div");s.id="maneuver-details-popup",s.style.position="fixed",s.style.top="50%",s.style.left="50%",s.style.transform="translate(-50%, -50%)",s.style.background="rgba(20,20,30,0.98)",s.style.border="2px solid #ff6e6e",s.style.borderRadius="12px",s.style.padding="20px",s.style.zIndex="10003",s.style.maxWidth="500px",s.style.maxHeight="80vh",s.style.overflowY="auto",s.style.boxShadow="0 12px 40px rgba(0,0,0,0.8)",s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="stretch";const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="center",r.style.marginBottom="20px",r.style.width="100%";const n=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{s.remove();const e=document.getElementById("maneuver-details-overlay");e&&e.remove()}}),i=document.createElement("h2");i.innerHTML=`${e.icon} ${e.name}`,i.style.color="#ff6e6e",i.style.margin="0",i.style.fontSize="22px",i.style.fontWeight="bold",r.appendChild(i),r.appendChild(n.render()),s.appendChild(r);const c=document.createElement("div");c.style.display="flex",c.style.flexDirection="column",c.style.gap="16px";const d=document.createElement("div");d.style.display="flex",d.style.gap="8px",d.style.flexWrap="wrap";const l=document.createElement("span");l.textContent=e.actionType,l.style.background="#8B4513",l.style.color="#fff",l.style.fontSize="12px",l.style.fontWeight="bold",l.style.borderRadius="6px",l.style.padding="4px 10px",l.style.display="inline-block",d.appendChild(l);const m=document.createElement("span");m.textContent=e.testType,m.style.background="#4a90e2",m.style.color="#fff",m.style.fontSize="12px",m.style.fontWeight="bold",m.style.borderRadius="6px",m.style.padding="4px 10px",m.style.display="inline-block",d.appendChild(m),c.appendChild(d);const u=document.createElement("div");u.style.background="rgba(255,110,110,0.1)",u.style.border="1px solid #ff6e6e",u.style.borderRadius="8px",u.style.padding="12px";const p=document.createElement("h3");p.textContent="üéØ Dificuldade",p.style.color="#ff6e6e",p.style.margin="0 0 8px 0",p.style.fontSize="16px",p.style.fontWeight="bold",u.appendChild(p);const g=document.createElement("p");g.textContent=e.difficulty,g.style.color="#ecf0f1",g.style.margin="0",g.style.fontSize="14px",g.style.lineHeight="1.4",u.appendChild(g),c.appendChild(u);const f=document.createElement("div");f.style.background="rgba(76,175,80,0.1)",f.style.border="1px solid #4CAF50",f.style.borderRadius="8px",f.style.padding="12px";const v=document.createElement("h3");v.textContent="‚ú® Efeitos",v.style.color="#4CAF50",v.style.margin="0 0 8px 0",v.style.fontSize="16px",v.style.fontWeight="bold",f.appendChild(v);const y=document.createElement("ul");if(y.style.margin="0",y.style.paddingLeft="20px",y.style.color="#ecf0f1",y.style.fontSize="14px",y.style.lineHeight="1.4",e.effects.forEach(e=>{const a=document.createElement("li");a.textContent=e,a.style.marginBottom="4px",y.appendChild(a)}),f.appendChild(y),c.appendChild(f),e.restrictions&&e.restrictions.length>0){const a=document.createElement("div");a.style.background="rgba(255,152,0,0.1)",a.style.border="1px solid #FF9800",a.style.borderRadius="8px",a.style.padding="12px";const o=document.createElement("h3");o.textContent="‚ö†Ô∏è Restri√ß√µes",o.style.color="#FF9800",o.style.margin="0 0 8px 0",o.style.fontSize="16px",o.style.fontWeight="bold",a.appendChild(o);const t=document.createElement("ul");t.style.margin="0",t.style.paddingLeft="20px",t.style.color="#ecf0f1",t.style.fontSize="14px",t.style.lineHeight="1.4",e.restrictions.forEach(e=>{const a=document.createElement("li");a.textContent=e,a.style.marginBottom="4px",t.appendChild(a)}),a.appendChild(t),c.appendChild(a)}const b=document.createElement("div");b.style.background="rgba(156,39,176,0.1)",b.style.border="1px solid #9C27B0",b.style.borderRadius="8px",b.style.padding="12px";const h=document.createElement("h3");h.textContent="üìñ Descri√ß√£o Completa",h.style.color="#9C27B0",h.style.margin="0 0 8px 0",h.style.fontSize="16px",h.style.fontWeight="bold",b.appendChild(h);const x=document.createElement("p");x.textContent=e.description,x.style.color="#ecf0f1",x.style.margin="0",x.style.fontSize="14px",x.style.lineHeight="1.5",b.appendChild(x),c.appendChild(b);const C=document.createElement("button");C.textContent=`‚ö° Executar ${e.name}`,C.style.width="100%",C.style.padding="12px 0",C.style.background="#ff6e6e",C.style.color="#23243a",C.style.border="none",C.style.borderRadius="8px",C.style.fontSize="16px",C.style.fontWeight="bold",C.style.cursor="pointer",C.style.transition="all 0.2s",C.style.marginTop="16px",C.onmouseover=()=>{C.style.background="#ff8e8e"},C.onmouseout=()=>{C.style.background="#ff6e6e"},C.onclick=()=>{if("Investida"===e.name){const e="tormenta-20-hotbars-attack-effects";let a=[];try{const o=localStorage.getItem(e);o&&(a=JSON.parse(o))}catch(e){console.error("Erro ao carregar sele√ß√£o:",e),a=[]}const o=Ue(parseInt(localStorage.getItem(T)||"1",10)||1);let t="",s="",r=18,n=2,i=!1,c=!1;o.forEach(e=>{a.includes(e.value)&&(e.dice&&(t+=`+${e.dice}`),e.critMod&&(r+=e.critMod),e.attackMod&&(n+=e.attackMod),s+="%NEWLINE% "+e.desc,"marca_presa"===e.value&&(i=!0),"inimigo"===e.value&&(c=!0))}),c&&i&&16===r&&(r=14),he(`&{template:t20-attack}{{character=@{${I()}|character_name}}}{{attackname=Investida}}{{attackroll=[[1d20cs>${r}+[[@{${I()}|pontariatotal}+@{${I()}|condicaomodataquedis}+@{${I()}|condicaomodataque}]]+${n}+@{${I()}|ataquetemp}]]}} {{damageroll=[[2d8+@{${I()}|des_mod}+0+0+@{${I()}|danotemp}+@{${I()}|rolltemp}${t}]]}} {{criticaldamageroll=[[2d8 + 2d8 + 2d8 + 0 + 0+0+@{${I()}|des_mod}+0]]}}{{typeofdamage=Cortante}}{{description=**Investida c/ Espada Longa** ${s}}}`)}else"Atropelar"===e.name?Z(`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Manobra Atropelar}}{{theroll=[[1d20+[[@{${I()}|atletismototal}]]]]}}`):"Agarrar"===e.name?Z(`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Manobra Agarrar}}{{theroll=[[1d20+[[@{${I()}|lutatotal}]]]]}}`):"Desarmar"===e.name?Z(`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Manobra Desarmar}}{{theroll=[[1d20+[[@{${I()}|lutatotal}]]]]}}`):"Derrubar"===e.name?Z(`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Manobra Derrubar}}{{theroll=[[1d20+[[@{${I()}|lutatotal}]]]]}}`):"Empurrar"===e.name?Z(`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Manobra Empurrar}}{{theroll=[[1d20+[[@{${I()}|lutatotal}]]]]}}`):"Bloquear"===e.name?Z(`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Manobra Bloquear}}{{theroll=[[1d20+[[@{${I()}|lutatotal}]]]]}}`):"Esquivar"===e.name?Z(`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Manobra Esquivar}}{{theroll=[[1d20+[[@{${I()}|acrobaciatotal}]]]]}}`):"Contra-ataque"===e.name&&he(`&{template:t20-attack}{{character=@{${I()}|character_name}}}{{attackname=Contra-ataque}}{{attackroll=[[1d20+[[@{${I()}|pontariatotal}+@{${I()}|condicaomodataquedis}+@{${I()}|condicaomodataque}]]+@{${I()}|ataquetemp}]]}} {{damageroll=[[2d8+@{${I()}|des_mod}+0+0+@{${I()}|danotemp}+@{${I()}|rolltemp}]]}} {{criticaldamageroll=[[2d8 + 2d8 + 2d8 + 0 + 0+0+@{${I()}|des_mod}+0]]}}{{typeofdamage=Cortante}}{{description=**Contra-ataque**}}`);s.remove();const a=document.getElementById("maneuver-details-overlay");a&&a.remove()},c.appendChild(C),s.appendChild(c),document.body.appendChild(s),S(s,"red")}(e);if(r&&(clearTimeout(r),r=null),s&&(s.remove(),s=null),"Investida"===e.name){const e="tormenta-20-hotbars-attack-effects";let a=[];try{const o=localStorage.getItem(e);o&&(a=JSON.parse(o))}catch(e){console.error("Erro ao carregar sele√ß√£o:",e),a=[]}const o=Ue(parseInt(localStorage.getItem(T)||"1",10)||1);let t="",s="",r=18,n=2,i=!1,c=!1;o.forEach(e=>{a.includes(e.value)&&(e.dice&&(t+=`+${e.dice}`),e.critMod&&(r+=e.critMod),e.attackMod&&(n+=e.attackMod),s+="%NEWLINE% "+e.desc,"marca_presa"===e.value&&(i=!0),"inimigo"===e.value&&(c=!0))}),c&&i&&16===r&&(r=14),he(`&{template:t20-attack}{{character=@{${I()}|character_name}}}{{attackname=Investida}}{{attackroll=[[1d20cs>${r}+[[@{${I()}|pontariatotal}+@{${I()}|condicaomodataquedis}+@{${I()}|condicaomodataque}]]+${n}+@{${I()}|ataquetemp}]]}} {{damageroll=[[2d8+@{${I()}|des_mod}+0+0+@{${I()}|danotemp}+@{${I()}|rolltemp}${t}]]}} {{criticaldamageroll=[[2d8 + 2d8 + 2d8 + 0 + 0+0+@{${I()}|des_mod}+0]]}}{{typeofdamage=Cortante}}{{description=**Investida c/ Espada Longa** ${s}}}`)}else"Atropelar"===e.name?Z(`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Manobra Atropelar}}{{theroll=[[1d20+[[@{${I()}|atletismototal}]]]]}}`):"Agarrar"===e.name?Z(`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Manobra Agarrar}}{{theroll=[[1d20+[[@{${I()}|lutatotal}]]]]}}`):"Desarmar"===e.name?Z(`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Manobra Desarmar}}{{theroll=[[1d20+[[@{${I()}|lutatotal}]]]]}}`):"Derrubar"===e.name?Z(`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Manobra Derrubar}}{{theroll=[[1d20+[[@{${I()}|lutatotal}]]]]}}`):"Empurrar"===e.name?Z(`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Manobra Empurrar}}{{theroll=[[1d20+[[@{${I()}|lutatotal}]]]]}}`):"Bloquear"===e.name?Z(`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Manobra Bloquear}}{{theroll=[[1d20+[[@{${I()}|lutatotal}]]]]}}`):"Esquivar"===e.name?Z(`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Manobra Esquivar}}{{theroll=[[1d20+[[@{${I()}|acrobaciatotal}]]]]}}`):"Contra-ataque"===e.name&&he(`&{template:t20-attack}{{character=@{${I()}|character_name}}}{{attackname=Contra-ataque}}{{attackroll=[[1d20+[[@{${I()}|pontariatotal}+@{${I()}|condicaomodataquedis}+@{${I()}|condicaomodataque}]]+@{${I()}|ataquetemp}]]}} {{damageroll=[[2d8+@{${I()}|des_mod}+0+0+@{${I()}|danotemp}+@{${I()}|rolltemp}]]}} {{criticaldamageroll=[[2d8 + 2d8 + 2d8 + 0 + 0+0+@{${I()}|des_mod}+0]]}}{{typeofdamage=Cortante}}{{description=**Contra-ataque**}}`);t.remove();const o=document.getElementById("maneuvers-overlay");o&&o.remove()},m.appendChild(o)});const p=()=>{const e=d.value.toLowerCase();m.querySelectorAll("button").forEach((a,o)=>{const t=u[o],s=t.name.toLowerCase().includes(e)||t.shortDesc.toLowerCase().includes(e);a.style.display=s?"block":"none"})};d.addEventListener("input",p),t.appendChild(m),document.body.appendChild(t),S(t,"red")}},me=[{label:"Per√≠cias",icon:"üß†",onClick:ae},{label:"Magias",icon:"üîÆ",onClick:ie},{label:"Poderes",icon:"‚ú®",onClick:We},{label:"Efeitos",icon:"üåÄ",onClick:va},{label:"Misc.",icon:"üì¶",onClick:te}],ue=h({icon:de.icon,label:de.label,onClick:de.onClick,theme:"red"}),pe=h({icon:le.icon,label:le.label,onClick:le.onClick,theme:"red"});re.appendChild(ue),re.appendChild(pe),me.forEach(e=>{const a=h({icon:e.icon,label:e.label,onClick:e.onClick,theme:"blue",dataLabel:e.label});ce.appendChild(a)}),y.appendChild(b),y.appendChild(x),y.appendChild(se),y.appendChild(re),y.appendChild(ne),y.appendChild(ce),e.appendChild(y);const ge=document.createElement("div");ge.id="effects-indicators-section",ge.style.display="none",ge.style.padding="8px 24px 12px 24px",ge.style.borderTop="1px solid rgba(255,255,255,0.1)",ge.style.width="100%",ge.style.boxSizing="border-box";const fe=document.createElement("div");fe.id="effects-icons-container",fe.style.display="flex",fe.style.gap="6px",fe.style.justifyContent="flex-start",fe.style.alignItems="center",fe.style.flexWrap="wrap",fe.style.position="relative",ge.appendChild(fe),e.appendChild(ge),document.body.appendChild(e),function(e,a){let o,t,s,r,n=!1,i=0,c=0;a.addEventListener("mousedown",function(e){e.preventDefault(),s=e.clientX-i,r=e.clientY-c,n=!0,a.style.cursor="grabbing"}),document.addEventListener("mousemove",function(a){var d,l;n&&(a.preventDefault(),o=a.clientX-s,t=a.clientY-r,i=o,c=t,d=o,l=t,e.style.transform=`translate3d(${d}px, ${l}px, 0)`)}),document.addEventListener("mouseup",function(){s=o,r=t,n=!1,a.style.cursor="grab"})}(e,a),function(){const e=document.getElementById("hotbar-version-text");if(e){const a="0.3.1.8744";e.textContent=a}}(),Ye(),pa(),setTimeout(()=>{(async function(){g.log("Iniciando pr√©-carregamento de imagens...");const e=["https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_60.jpg","https://wow.zamimg.com/images/wow/icons/large/achievement_halloween_candy_01.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_cauldron_frost.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_103_potatobread.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_fishcake.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_144_cakeslice.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_swirlingmistsoup.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_sauteedcarrots.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_06.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_161_fish_white.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_meat_cooked_08.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_cask_04.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_cooking_90_cinnamonbonefishstew.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_orchardfruit01.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_deliciouspizza.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_123_roast.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_18.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_goldcarpconsomme.jpg","https://wow.zamimg.com/images/wow/icons/large/spell_shadow_curseoftounges.jpg","https://wow.zamimg.com/images/wow/icons/large/spell_shadow_mindsteal.jpg","https://wow.zamimg.com/images/wow/icons/large/spell_shadow_charm.jpg","https://wow.zamimg.com/images/wow/icons/large/spell_nature_poisoncleansingtotem.jpg","https://wow.zamimg.com/images/wow/icons/large/spell_shadow_psychicscream.jpg","https://wow.zamimg.com/images/wow/icons/large/spell_nature_sleep.jpg","https://wow.zamimg.com/images/wow/icons/large/spell_nature_eyeofthestorm.jpg","https://wow.zamimg.com/images/wow/icons/large/spell_shadow_deathscream.jpg","https://wow.zamimg.com/images/wow/icons/large/spell_nature_earthbind.jpg","https://wow.zamimg.com/images/wow/icons/large/spell_shadow_blackplague.jpg","https://wow.zamimg.com/images/wow/icons/large/ability_stealth.jpg","https://wow.zamimg.com/images/wow/icons/large/spell_nature_slow.jpg","https://wow.zamimg.com/images/wow/icons/large/spell_nature_earthbindtotem.jpg","https://wow.zamimg.com/images/wow/icons/large/spell_shadow_antishadow.jpg","https://wow.zamimg.com/images/wow/icons/large/spell_shadow_soulleech.jpg","https://wow.zamimg.com/images/wow/icons/large/spell_shadow_deathpact.jpg","https://wow.zamimg.com/images/wow/icons/large/spell_shadow_curseofmannoroth.jpg","https://wow.zamimg.com/images/wow/icons/large/spell_shadow_unholyfrenzy.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_braisedturtle.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_valleystirfry.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_slime_02.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_63.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_10.jpg","https://wow.zamimg.com/images/wow/icons/large/inv_misc_fork-knife.jpg"],a=Xe();let o=0,t=0;for(let s=0;s<e.length;s+=5){const r=e.slice(s,s+5);await Promise.all(r.map(async e=>{if(a.images[e])t++;else try{await ma(e),o++}catch(a){console.warn(`Erro ao pr√©-carregar ${e}:`,a)}})),s+5<e.length&&await new Promise(e=>setTimeout(e,100))}g.log(`Pr√©-carregamento conclu√≠do: ${o} novas imagens carregadas, ${t} j√° estavam no cache`)})().catch(e=>{console.warn("Erro no pr√©-carregamento de imagens:",e)})},1e3)}var Ee;function ze(){const e=document.getElementById("hunter-class-modal");e&&e.remove();const a=document.getElementById("hunter-class-overlay");a&&a.remove();const o=[{name:"Acuidade com Arma",description:"Quando usa uma arma corpo a corpo leve ou uma arma de arremesso, voc√™ pode usar sua Destreza em vez de For√ßa nos testes de ataque e rolagens de dano.",prereq:"Des 1"},{name:"Arma Secund√°ria Grande",description:"Voc√™ pode empunhar duas armas de uma m√£o com o poder Estilo de Duas Armas.",prereq:"Estilo de Duas Armas"},{name:"Arremesso Potente",description:"Quando usa uma arma de arremesso, voc√™ pode usar sua For√ßa em vez de Destreza nos testes de ataque. Se voc√™ possuir o poder Ataque Poderoso, poder√° us√°-lo com armas de arremesso.",prereq:"For 1, Estilo de Arremesso"},{name:"Arremesso M√∫ltiplo",description:"Uma vez por rodada, quando faz um ataque com uma arma de arremesso, voc√™ pode gastar 1 PM para fazer um ataque adicional contra o mesmo alvo, arremessando outra arma de arremesso.",prereq:"Des 1, Estilo de Arremesso"},{name:"Ataque com Escudo",description:"Uma vez por rodada, se estiver empunhando um escudo e fizer a a√ß√£o agredir, voc√™ pode gastar 1 PM para fazer um ataque corpo a corpo extra com o escudo. Este ataque n√£o faz voc√™ perder o b√¥nus do escudo na Defesa.",prereq:"Estilo de Arma e Escudo"},{name:"Ataque Pesado",description:"Quando faz um ataque corpo a corpo com uma arma de duas m√£os, voc√™ pode pagar 1 PM. Se fizer isso e acertar o ataque, al√©m do dano voc√™ faz uma manobra derrubar ou empurrar contra o alvo como uma a√ß√£o livre (use o resultado do ataque como o teste de manobra).",prereq:"Estilo de Duas M√£os"},{name:"Ataque Poderoso",description:"Sempre que faz um ataque corpo a corpo, voc√™ pode sofrer ‚Äì2 no teste de ataque para receber +5 na rolagem de dano.",prereq:"For 1"},{name:"Ataque Preciso",description:"Se estiver empunhando uma arma corpo a corpo em uma das m√£os e nada na outra, voc√™ recebe +2 na margem de amea√ßa e +1 no multiplicador de cr√≠tico com ela.",prereq:"Estilo de Uma Arma"},{name:"Bloqueio com Escudo",description:"Quando sofre dano, voc√™ pode gastar 1 PM para receber redu√ß√£o de dano igual ao b√¥nus na Defesa que seu escudo fornece contra este dano. Voc√™ s√≥ pode usar este poder se estiver usando um escudo.",prereq:"Estilo de Arma e Escudo"},{name:"Carga de Cavalaria",description:"Quando faz uma investida montada, voc√™ causa +2d8 pontos de dano. Al√©m disso, pode continuar se movendo depois do ataque. Voc√™ deve se mover em linha reta e seu movimento m√°ximo ainda √© o dobro do seu deslocamento.",prereq:"Ginete"},{name:"Combate Defensivo",description:"Quando usa a a√ß√£o agredir, voc√™ pode usar este poder. Se fizer isso, at√© seu pr√≥ximo turno, sofre ‚Äì2 em todos os testes de ataque, mas recebe +5 na Defesa.",prereq:"Int 1"},{name:"Derrubar Aprimorado",description:"Voc√™ recebe +2 em testes de ataque para derrubar. Quando derruba uma criatura com essa manobra, pode gastar 1 PM para fazer um ataque extra contra ela.",prereq:"Combate Defensivo"},{name:"Desarmar Aprimorado",description:'Voc√™ recebe +2 em testes de ataque para desarmar. Quando desarma uma criatura, pode gastar 1 PM para arremessar a arma dela para longe. Para definir onde a arma cai, role 1d8 para a dire√ß√£o (sendo "1" diretamente √† sua frente, "2" √† frente e √† direita e assim por diante) e 1d6 para a dist√¢ncia (medida em quadrados de 1,5m a partir da criatura desarmada).',prereq:"Combate Defensivo"},{name:"Disparo Preciso",description:"Voc√™ pode fazer ataques √† dist√¢ncia contra oponentes envolvidos em combate corpo a corpo sem sofrer a penalidade de ‚Äì5 no teste de ataque.",prereq:"Estilo de Disparo ou Estilo de Arremesso"},{name:"Disparo R√°pido",description:"Se estiver empunhando uma arma de disparo que possa recarregar como a√ß√£o livre e gastar uma a√ß√£o completa para agredir, pode fazer um ataque adicional com ela. Se fizer isso, sofre ‚Äì2 em todos os testes de ataque at√© o seu pr√≥ximo turno.",prereq:"Des 1, Estilo de Disparo"},{name:"Empunhadura Poderosa",description:"Ao usar uma arma feita para uma categoria de tamanho maior que a sua, a penalidade que voc√™ sofre nos testes de ataque diminui para ‚Äì2 (normalmente, usar uma arma de uma categoria de tamanho maior imp√µe ‚Äì5 nos testes de ataque).",prereq:"For 3"},{name:"Encoura√ßado",description:"Se estiver usando uma armadura pesada, voc√™ recebe +2 na Defesa. Esse b√¥nus aumenta em +2 para cada outro poder que voc√™ possua que tenha Encoura√ßado como pr√©-requisito.",prereq:"profici√™ncia com armaduras pesadas"},{name:"Esquiva",description:"Voc√™ recebe +2 na Defesa e Reflexos.",prereq:"Des 1"},{name:"Estilo de Arma e Escudo",description:"Se voc√™ estiver usando um escudo, o b√¥nus na Defesa que ele fornece aumenta em +2.",prereq:"treinado em Luta, profici√™ncia com escudos"},{name:"Estilo de Arma Longa",description:"Voc√™ recebe +2 em testes de ataque com armas alongadas e pode atacar alvos adjacentes com essas armas.",prereq:"For 1, treinado em Luta"},{name:"Estilo de Arremesso",description:"Voc√™ pode sacar armas de arremesso como uma a√ß√£o livre e recebe +2 nas rolagens de dano com elas. Se tamb√©m possuir o poder Saque R√°pido, tamb√©m recebe +2 nos testes de ataque com essas armas.",prereq:"treinado em Pontaria"},{name:"Estilo de Disparo",description:"Se estiver usando uma arma de disparo, voc√™ soma sua Destreza nas rolagens de dano.",prereq:"treinado em Pontaria"},{name:"Estilo de Duas Armas",description:"Se estiver empunhando duas armas (e pelo menos uma delas for leve) e fizer a a√ß√£o agredir, voc√™ pode fazer dois ataques, um com cada arma. Se fizer isso, sofre ‚Äì2 em todos os testes de ataque at√© o seu pr√≥ximo turno. Se possuir Ambidestria, em vez disso n√£o sofre penalidade para us√°-lo.",prereq:"Des 2, treinado em Luta"},{name:"Estilo de Duas M√£os",description:"Se estiver usando uma arma corpo a corpo com as duas m√£os, voc√™ recebe +5 nas rolagens de dano. Este poder n√£o pode ser usado com armas leves.",prereq:"For 2, Treinado em Luta"},{name:"Estilo de Uma Arma",description:"Se estiver usando uma arma corpo a corpo em uma das m√£os e nada na outra, voc√™ recebe +2 na Defesa e nos testes de ataque com essa arma (exceto ataques desarmados).",prereq:"treinado em Luta"},{name:"Estilo Desarmado",description:"Seus ataques desarmados causam 1d6 pontos de dano e podem causar dano letal ou n√£o letal (sem penalidades).",prereq:"treinado em Luta"},{name:"Fan√°tico",description:"Seu deslocamento n√£o √© reduzido por usar armaduras pesadas.",prereq:"12¬∫ n√≠vel de personagem, Encoura√ßado"},{name:"Finta Aprimorada",description:"Voc√™ recebe +2 em testes de Engana√ß√£o para fintar e pode fintar como uma a√ß√£o de movimento.",prereq:"treinado em Engana√ß√£o"},{name:"Foco em Arma",description:"Escolha uma arma. Voc√™ recebe +2 em testes de ataque com essa arma. Voc√™ pode escolher este poder outras vezes para armas diferentes.",prereq:"profici√™ncia com a arma"},{name:"Ginete",description:"Voc√™ passa automaticamente em testes de Cavalgar para n√£o cair da montaria quando sofre dano. Al√©m disso, n√£o sofre penalidades para atacar √† dist√¢ncia ou lan√ßar magias quando montado.",prereq:"treinado em Cavalgar"},{name:"Inexpugn√°vel",description:"Se estiver usando uma armadura pesada, voc√™ recebe +2 em todos os testes de resist√™ncia.",prereq:"Encoura√ßado, 6¬∫ n√≠vel de personagem"},{name:"Mira Apurada",description:"Quando usa a a√ß√£o mirar, voc√™ recebe +2 em testes de ataque e na margem de amea√ßa com ataques √† dist√¢ncia at√© o fim do turno.",prereq:"Sab 1, Disparo Preciso"},{name:"Piqueiro",description:"Uma vez por rodada, se estiver empunhando uma arma alongada e um inimigo entrar voluntariamente em seu alcance corpo a corpo, voc√™ pode gastar 1 PM para fazer um ataque corpo a corpo contra este oponente com esta arma. Se o oponente tiver se aproximado fazendo uma investida, seu ataque causa dois dados de dano extra do mesmo tipo.",prereq:"Estilo de Arma Longa"},{name:"Presen√ßa Aterradora",description:"Voc√™ pode gastar uma a√ß√£o padr√£o e 1 PM para assustar todas as criaturas a sua escolha em alcance curto. Veja a per√≠cia Intimida√ß√£o para as regras de assustar.",prereq:"treinado em Intimida√ß√£o"},{name:"Profici√™ncia",description:"Escolha uma profici√™ncia: armas marciais, armas de fogo, armaduras pesadas ou escudos (se for proficiente em armas marciais, voc√™ tamb√©m pode escolher armas ex√≥ticas). Voc√™ recebe essa profici√™ncia. Voc√™ pode escolher este poder outras vezes para profici√™ncias diferentes."},{name:"Quebrar Aprimorado",description:"Voc√™ recebe +2 em testes de ataque para quebrar. Quando reduz os PV de uma arma para 0 ou menos, voc√™ pode gastar 1 PM para realizar um ataque extra contra o usu√°rio dela. O ataque adicional usa os mesmos valores de ataque e dano, mas os dados devem ser rolados novamente.",prereq:"Ataque Poderoso"},{name:"Reflexos de Combate",description:"Voc√™ ganha uma a√ß√£o de movimento extra no seu primeiro turno de cada combate.",prereq:"Des 1"},{name:"Saque R√°pido",description:"Voc√™ recebe +2 em Iniciativa e pode sacar ou guardar itens como uma a√ß√£o livre (em vez de a√ß√£o de movimento). Al√©m disso, a a√ß√£o que voc√™ gasta para recarregar armas de disparo diminui em uma categoria (a√ß√£o completa para padr√£o, padr√£o para movimento, movimento para livre).",prereq:"treinado em Iniciativa"},{name:"Trespassar",description:"Quando voc√™ faz um ataque corpo a corpo e reduz os pontos de vida do alvo para 0 ou menos, pode gastar 1 PM para fazer um ataque adicional contra outra criatura dentro do seu alcance.",prereq:"Ataque Poderoso"},{name:"Vitalidade",description:"Voc√™ recebe +1 PV por n√≠vel de personagem e +2 em Fortitude.",prereq:"Con 1"}],t=document.createElement("div");t.id="hunter-class-modal",t.className="roll20-modal roll20-popup-green",t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.background="rgba(30,30,40,0.98)",t.style.border="2px solid #8B4513",t.style.borderRadius="12px",t.style.zIndex="10001",t.style.maxWidth="900px",t.style.maxHeight="85vh",t.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="stretch",t.style.overflow="hidden";const s=document.createElement("div");s.id="hunter-class-overlay",s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.width="100%",s.style.height="100%",s.style.background="rgba(0,0,0,0.5)",s.style.zIndex="10000",document.body.appendChild(s),document.addEventListener("race-selection-changed",()=>{const e=document.getElementById("spells-popup");if(e){e.remove();const a=document.getElementById("spells-overlay");a&&a.remove(),ie()}});const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="center",r.style.width="100%",r.style.borderBottom="1px solid rgba(139, 69, 19, 0.3)",r.style.padding="15px 20px",r.style.background="rgba(30,30,40,0.98)",r.style.borderRadius="12px 12px 0 0",r.style.flexShrink="0",r.style.minHeight="60px",r.style.boxSizing="border-box";const i=document.createElement("h2");i.innerHTML="üèπ Ca√ßador",i.style.color="#8B4513",i.style.margin="0",i.style.fontSize="22px",i.style.fontWeight="bold",i.style.flex="1",i.style.minWidth="0";const c=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{t.remove();const e=document.getElementById("hunter-class-overlay");e&&e.remove()}});r.appendChild(i),r.appendChild(c.render()),t.appendChild(r);const d=document.createElement("div");d.style.padding="15px 20px 0 20px",d.style.background="rgba(30,30,40,0.98)",d.style.borderBottom="1px solid rgba(139, 69, 19, 0.3)",d.style.flexShrink="0";const l=document.createElement("div");l.style.display="flex",l.style.gap="5px",l.style.marginBottom="15px";const m=document.createElement("div");m.style.minHeight="400px",m.style.overflowY="auto",m.style.padding="20px",m.style.flex="1",m.style.maxHeight="calc(85vh - 180px)",m.style.boxSizing="border-box";const u=document.createElement("button");u.textContent="Caracter√≠sticas da Classe",u.style.padding="10px 15px",u.style.background="#8B4513",u.style.color="#fff",u.style.border="none",u.style.borderRadius="8px 8px 0 0",u.style.fontSize="14px",u.style.fontWeight="bold",u.style.cursor="pointer",u.style.transition="all 0.2s";const p=document.createElement("div");p.id="tab1-content",p.style.display="block",[{label:"Pontos de Vida",value:"Um ca√ßador come√ßa com 16 pontos de vida + Constitui√ß√£o e ganha 4 PV + Constitui√ß√£o por n√≠vel."},{label:"Pontos de Mana",value:"4 PM por n√≠vel."},{label:"Per√≠cias",value:"Luta (For) ou Pontaria (Des), Sobreviv√™ncia (Sab), mais 6 a sua escolha entre Adestramento (Car), Atletismo (For), Cavalgar (Des), Cura (Sab), Fortitude (Con), Furtividade (Des), Iniciativa (Des), Investiga√ß√£o (Int), Luta (For), Of√≠cio (Int), Percep√ß√£o (Sab), Pontaria (Des) e Reflexos (Des)."},{label:"Profici√™ncias",value:"Armas marciais e escudos."}].forEach(e=>{const a=document.createElement("div");a.style.marginBottom="12px",a.style.padding="10px",a.style.background="rgba(139, 69, 19, 0.1)",a.style.borderRadius="8px",a.style.border="1px solid rgba(139, 69, 19, 0.2)";const o=document.createElement("div");o.textContent=e.label,o.style.color="#8B4513",o.style.fontSize="14px",o.style.fontWeight="bold",o.style.marginBottom="5px";const t=document.createElement("div");t.textContent=e.value,t.style.color="#ecf0f1",t.style.fontSize="13px",t.style.lineHeight="1.4",a.appendChild(o),a.appendChild(t),p.appendChild(a)});const f=document.createElement("button");f.textContent="Habilidades da Classe",f.style.padding="10px 15px",f.style.background="rgba(139, 69, 19, 0.3)",f.style.color="#ecf0f1",f.style.border="none",f.style.borderRadius="8px 8px 0 0",f.style.fontSize="14px",f.style.fontWeight="bold",f.style.cursor="pointer",f.style.transition="all 0.2s";const v=document.createElement("div");v.id="tab2-content",v.style.display="none";const y=document.createElement("button");y.textContent="Poderes de Combate",y.style.padding="10px 15px",y.style.background="rgba(139, 69, 19, 0.3)",y.style.color="#ecf0f1",y.style.border="none",y.style.borderRadius="8px 8px 0 0",y.style.fontSize="14px",y.style.fontWeight="bold",y.style.cursor="pointer",y.style.transition="all 0.2s",y.style.cursor="pointer";const b=document.createElement("div");b.id="tab3-content",b.style.display="none";const h=document.createElement("button");h.textContent="Divindade",h.style.padding="10px 15px",h.style.background="rgba(139, 69, 19, 0.3)",h.style.color="#ecf0f1",h.style.border="none",h.style.borderRadius="8px 8px 0 0",h.style.fontSize="14px",h.style.fontWeight="bold",h.style.cursor="pointer",h.style.transition="all 0.2s";const x=document.createElement("div");x.id="tab4-content",x.style.display="none";const C=document.createElement("button");C.textContent="Ra√ßa",C.style.padding="10px 15px",C.style.background="rgba(139, 69, 19, 0.3)",C.style.color="#ecf0f1",C.style.border="none",C.style.borderRadius="8px 8px 0 0",C.style.fontSize="14px",C.style.fontWeight="bold",C.style.cursor="pointer",C.style.transition="all 0.2s";const w=document.createElement("div");w.id="tab5-content",w.style.display="none";const q=document.createElement("div");q.style.marginBottom="15px",q.style.padding="12px",q.style.background="rgba(139, 69, 19, 0.1)",q.style.borderRadius="8px",q.style.border="1px solid rgba(139, 69, 19, 0.2)";const E=document.createElement("div");E.style.position="relative",E.style.marginBottom="10px";const z=document.createElement("input");z.type="text",z.placeholder="Filtrar pratos...",z.style.width="100%",z.style.padding="10px 12px",z.style.borderRadius="8px",z.style.border="1px solid #ffb86c",z.style.background="#23243a",z.style.color="#fff",z.style.fontSize="14px",z.style.outline="none",z.style.boxSizing="border-box",z.style.fontSize="15px";const k=document.createElement("span");k.textContent="√ó",k.style.position="absolute",k.style.right="8px",k.style.top="50%",k.style.transform="translateY(-50%)",k.style.cursor="pointer",k.style.color="#ffb86c",k.style.fontSize="18px",k.style.display="none",k.onclick=()=>{z.value="",z.dispatchEvent(new Event("input")),z.focus()},z.oninput=()=>{z.value.length>0?k.style.display="block":k.style.display="none",R()},E.appendChild(z),E.appendChild(k);const j=document.createElement("div");j.style.display="flex",j.style.gap="10px",j.style.flexWrap="wrap";const P=document.createElement("button");P.textContent="Todas",P.style.padding="6px 12px",P.style.background="#8B4513",P.style.color="#fff",P.style.border="none",P.style.borderRadius="6px",P.style.fontSize="12px",P.style.fontWeight="bold",P.style.cursor="pointer",P.style.transition="all 0.2s";const $=document.createElement("button");$.textContent="Aprendidos",$.style.padding="6px 12px",$.style.background="rgba(139, 69, 19, 0.3)",$.style.color="#ecf0f1",$.style.border="none",$.style.borderRadius="6px",$.style.fontSize="12px",$.style.fontWeight="bold",$.style.cursor="pointer",$.style.transition="all 0.2s";const I=document.createElement("button");I.textContent="Dispon√≠veis",I.style.padding="6px 12px",I.style.background="rgba(139, 69, 19, 0.3)",I.style.color="#ecf0f1",I.style.border="none",I.style.borderRadius="6px",I.style.fontSize="12px",I.style.fontWeight="bold",I.style.cursor="pointer",I.style.transition="all 0.2s",j.appendChild(P),j.appendChild($),j.appendChild(I),q.appendChild(E),q.appendChild(j),b.appendChild(q);const D=document.createElement("div");D.id="combat-powers-list-container",b.appendChild(D);let M="all";function R(){D.innerHTML="";const e=o.filter(e=>{const a=e.name.toLowerCase().includes(z.value.toLowerCase())||e.description.toLowerCase().includes(z.value.toLowerCase());let o=!0;return"learned"===M?o=ke(e.name):"available"===M&&(o=!ke(e.name)),a&&o});if(0===e.length){const e=document.createElement("div");e.style.textAlign="center",e.style.padding="20px",e.style.color="#8B4513",e.style.fontSize="14px",e.style.fontStyle="italic",e.style.background="rgba(139, 69, 19, 0.1)",e.style.border="1px solid rgba(139, 69, 19, 0.3)",e.style.borderRadius="8px",e.style.marginTop="10px";const a=z.value.trim();return e.innerHTML=a?`\n                            <div style="margin-bottom: 8px;">üîç</div>\n                            <div>Nenhum poder encontrado para "<strong style="color: #8B4513;">${a}</strong>"</div>\n                            <div style="margin-top: 8px; font-size: 12px;">Tente um termo diferente ou limpe o filtro</div>\n                        `:'\n                            <div style="margin-bottom: 8px;">‚öîÔ∏è</div>\n                            <div>Nenhum poder dispon√≠vel</div>\n                            <div style="margin-top: 8px; font-size: 12px;">Selecione uma classe para obter poderes de combate</div>\n                        ',void D.appendChild(e)}e.forEach(e=>{const a=ke(e.name);let o,t,s;a?(o="rgba(76, 175, 80, 0.1)",t="rgba(76, 175, 80, 0.3)",s="#4CAF50"):(o="rgba(139, 69, 19, 0.1)",t="rgba(139, 69, 19, 0.2)",s="#8B4513");const r=document.createElement("div");r.style.marginBottom="15px",r.style.padding="12px",r.style.background=o,r.style.borderRadius="8px",r.style.border=`1px solid ${t}`,r.style.transition="all 0.2s";const i=document.createElement("div");i.style.display="flex",i.style.justifyContent="space-between",i.style.alignItems="flex-start",i.style.marginBottom="8px",i.style.flexWrap="wrap",i.style.gap="10px";const c=document.createElement("div");c.style.display="flex",c.style.alignItems="center",c.style.gap="8px",c.style.flex="1";const d=document.createElement("input");d.type="checkbox",d.checked=a,d.style.width="16px",d.style.height="16px",d.style.accentColor="#8B4513",d.style.cursor="pointer",d.onchange=()=>{!function(e){const a=Se(),o=a.indexOf(e);o>-1?(a.splice(o,1),_(`Poder de Destino "${e}" removido da lista de aprendidos.`)):(a.push(e),A(`Poder de Destino "${e}" adicionado √† lista de aprendidos!`)),function(e){try{localStorage.setItem(n,JSON.stringify(e))}catch(e){g.log("Erro ao salvar poderes de destino aprendidos:",e)}}(a)}(e.name),R()},c.appendChild(d);const l=document.createElement("div");l.textContent=e.name,l.style.color=s,l.style.fontSize="15px",l.style.fontWeight="bold",c.appendChild(l),i.appendChild(c);const m=document.createElement("div");if(m.textContent=e.description,m.style.color="#ecf0f1",m.style.fontSize="13px",m.style.lineHeight="1.4",m.style.marginBottom="5px",r.appendChild(i),r.appendChild(m),e.prereq){const a=document.createElement("div");a.textContent=`Pr√©-requisito: ${e.prereq}`,a.style.color="#ffa726",a.style.fontSize="11px",a.style.fontStyle="italic",a.style.fontWeight="bold",r.appendChild(a)}const u=document.createElement("div");if(u.style.marginTop="5px",u.style.display="flex",u.style.gap="8px",u.style.flexWrap="wrap",a){const e=document.createElement("div");e.innerHTML="‚úì Aprendido",e.style.color="#4CAF50",e.style.fontSize="11px",e.style.fontWeight="bold",e.style.fontStyle="italic",u.appendChild(e)}else{const e=document.createElement("div");e.innerHTML="üìã Dispon√≠vel",e.style.color="#8B4513",e.style.fontSize="11px",e.style.fontWeight="bold",e.style.fontStyle="italic",u.appendChild(e)}u.children.length>0&&r.appendChild(u),D.appendChild(r)});const a=document.createElement("div");a.style.marginTop="15px",a.style.padding="10px",a.style.background="rgba(26,26,46,0.8)",a.style.borderRadius="8px",a.style.border="1px solid rgba(139, 69, 19, 0.3)",a.style.textAlign="center";const t=Se().length,s=o.length,r=Math.round(t/s*100),i=document.createElement("div");i.innerHTML=`<strong>Poderes Aprendidos:</strong> ${t}/${s} (${r}%)`,i.style.color="#8B4513",i.style.fontSize="14px",i.style.fontWeight="bold",a.appendChild(i),D.appendChild(a)}P.onclick=()=>{M="all",P.style.background="#8B4513",P.style.color="#fff",$.style.background="rgba(139, 69, 19, 0.3)",$.style.color="#ecf0f1",I.style.background="rgba(139, 69, 19, 0.3)",I.style.color="#ecf0f1",R()},$.onclick=()=>{M="learned",P.style.background="rgba(139, 69, 19, 0.3)",P.style.color="#ecf0f1",$.style.background="#8B4513",$.style.color="#fff",I.style.background="rgba(139, 69, 19, 0.3)",I.style.color="#ecf0f1",R()},I.onclick=()=>{M="available",P.style.background="rgba(139, 69, 19, 0.3)",P.style.color="#ecf0f1",$.style.background="rgba(139, 69, 19, 0.3)",$.style.color="#ecf0f1",I.style.background="#8B4513",I.style.color="#fff",R()},R(),b.appendChild(D);const V=document.createElement("div");V.style.display="flex",V.style.flexDirection="column",V.style.gap="15px",[{name:"Azgher",title:"Deus-Sol",shortDescription:"Deus da luz e do calor, venerado por viajantes e combatentes das trevas.",description:"Venerado pelos povos do Deserto da Perdi√ß√£o, o Deus-Sol √© tamb√©m cultuado por viajantes, mercadores honestos e todos aqueles que combatem as trevas. √â um deus generoso; sua jornada di√°ria derrama calor e conforto sobre Arton. Azgher √© como um pai severo: respons√°vel, provedor, mas que tamb√©m exige respeito de seus filhos. Como um olho sempre vigilante nos c√©us, nada acontece √† luz do dia sem que Azgher perceba.",beliefs:"Praticar a gratid√£o pela prote√ß√£o e generosidade do sol. Promover a honestidade, expor embustes e mentiras. Praticar a caridade e o altru√≠smo. Proteger os necessitados. Oferecer clem√™ncia, perd√£o e reden√ß√£o. Combater o mal.",symbol:"Um sol dourado",energy:"Positiva",weapon:"Cimitarra",devotees:"Aggelus, qareen, arcanistas, b√°rbaros, ca√ßadores, cavaleiros, guerreiros, nobres, paladinos",powers:[{name:"Espada Solar",description:"Voc√™ pode gastar 1 PM para fazer uma arma corpo a corpo de corte que esteja empunhada causar +1d6 de dano por fogo at√© o fim da cena."},{name:"Fulgor Solar",description:"Voc√™ recebe redu√ß√£o de frio e trevas 5. Al√©m disso, quando √© alvo de um ataque voc√™ pode gastar 1 PM para emitir um clar√£o solar que deixa o atacante ofuscado por uma rodada."},{name:"Habitante do Deserto",description:"Voc√™ recebe redu√ß√£o de fogo 10 e pode pagar 1 PM para criar √°gua pura e pot√°vel suficiente para um odre (ou outro recipiente pequeno)."},{name:"Inimigo de Tenebra",description:"Seus ataques e habilidades causam +1d6 pontos de dano contra mortos-vivos. Quando voc√™ usa um efeito que gera luz, o alcance da ilumina√ß√£o dobra."}],obligations:"O devoto de Azgher deve manter o rosto sempre coberto (com uma m√°scara, capuz ou trapos). Sua face pode ser revelada apenas ao sumo-sacerdote ou em seu funeral. Devotos do Sol tamb√©m devem doar para a igreja de Azgher 20% de qualquer tesouro obtido. Essa doa√ß√£o deve ser feita em ouro, seja na forma de moedas ou itens."}].forEach(e=>{const a=Ie()===e.name,o=document.createElement("div");o.style.background=a?"#2d4a3e":"#23243a",o.style.border="2px solid "+(a?"#4caf50":"#6ec6ff"),o.style.borderRadius="8px",o.style.padding="10px",o.style.cursor="pointer",o.style.transition="all 0.3s",o.style.width="100%",o.style.boxSizing="border-box",o.onmouseover=()=>{a||(o.style.background="#2a2b4a")},o.onmouseout=()=>{a||(o.style.background="#23243a")},o.onclick=()=>{!function(e){const a=document.getElementById("divinity-detail-modal");a&&a.remove();const o=document.getElementById("divinity-detail-overlay");o&&o.remove();const t=document.createElement("div");t.id="divinity-detail-overlay",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0,0,0,0.5)",t.style.zIndex="10002",t.onclick=()=>{t.remove(),s.remove()},document.body.appendChild(t);const s=document.createElement("div");s.id="divinity-detail-modal",s.style.position="fixed",s.style.top="50%",s.style.left="50%",s.style.transform="translate(-50%, -50%)",s.style.background="rgba(30,30,40,0.98)",s.style.border="2px solid #8B4513",s.style.borderRadius="12px",s.style.padding="20px",s.style.zIndex="10003",s.style.maxWidth="800px",s.style.maxHeight="85vh",s.style.overflowY="auto",s.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="stretch";const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="center",r.style.marginBottom="20px",r.style.borderBottom="1px solid rgba(139, 69, 19, 0.3)",r.style.paddingBottom="15px";const n=document.createElement("h2");n.innerHTML=`‚òÄÔ∏è ${e.name} - ${e.title}`,n.style.color="#8B4513",n.style.margin="0",n.style.fontSize="24px",n.style.fontWeight="bold";const i=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{s.remove(),t.remove()}});r.appendChild(n),r.appendChild(i.render()),s.appendChild(r);const c=document.createElement("div");c.style.marginBottom="20px",c.style.padding="15px",c.style.background="rgba(139, 69, 19, 0.1)",c.style.borderRadius="8px",c.style.border="1px solid rgba(139, 69, 19, 0.2)";const d=document.createElement("h3");d.textContent="Descri√ß√£o",d.style.color="#8B4513",d.style.fontSize="16px",d.style.fontWeight="bold",d.style.marginBottom="10px";const l=document.createElement("div");l.textContent=e.description,l.style.color="#ecf0f1",l.style.fontSize="14px",l.style.lineHeight="1.6",c.appendChild(d),c.appendChild(l),s.appendChild(c);const m=document.createElement("div");m.style.marginBottom="20px";const u=document.createElement("h3");u.textContent="Informa√ß√µes da Divindade",u.style.color="#8B4513",u.style.fontSize="16px",u.style.fontWeight="bold",u.style.marginBottom="15px",u.style.borderBottom="2px solid rgba(139, 69, 19, 0.3)",u.style.paddingBottom="8px",m.appendChild(u);const p=document.createElement("div");p.style.display="grid",p.style.gridTemplateColumns="1fr 1fr",p.style.gap="12px";[{label:"Cren√ßas e Objetivos",value:e.beliefs},{label:"S√≠mbolo Sagrado",value:e.symbol},{label:"Canalizar Energia",value:e.energy},{label:"Arma Preferida",value:e.weapon},{label:"Devotos",value:e.devotees}].forEach(e=>{const a=document.createElement("div");a.style.background="rgba(139, 69, 19, 0.1)",a.style.padding="12px",a.style.borderRadius="8px",a.style.border="1px solid rgba(139, 69, 19, 0.2)";const o=document.createElement("div");o.textContent=e.label,o.style.color="#8B4513",o.style.fontSize="12px",o.style.fontWeight="bold",o.style.marginBottom="5px";const t=document.createElement("div");t.textContent=e.value,t.style.color="#ecf0f1",t.style.fontSize="13px",t.style.lineHeight="1.4",a.appendChild(o),a.appendChild(t),p.appendChild(a)}),m.appendChild(p),s.appendChild(m);const g=document.createElement("div");g.style.marginBottom="20px",g.style.padding="15px",g.style.background="rgba(255, 167, 38, 0.1)",g.style.borderRadius="8px",g.style.border="1px solid rgba(255, 167, 38, 0.3)";const f=document.createElement("h3");f.textContent="Obriga√ß√µes & Restri√ß√µes",f.style.color="#ffa726",f.style.fontSize="16px",f.style.fontWeight="bold",f.style.marginBottom="10px";const v=document.createElement("div");v.textContent=e.obligations,v.style.color="#ecf0f1",v.style.fontSize="14px",v.style.lineHeight="1.6",g.appendChild(f),g.appendChild(v),s.appendChild(g);const y=document.createElement("div");y.style.marginBottom="20px";const b=document.createElement("h3");b.textContent="Poderes Concedidos",b.style.color="#8B4513",b.style.fontSize="16px",b.style.fontWeight="bold",b.style.marginBottom="15px",b.style.borderBottom="2px solid rgba(139, 69, 19, 0.3)",b.style.paddingBottom="8px",y.appendChild(b);const h=document.createElement("div");h.style.display="flex",h.style.flexDirection="column",h.style.gap="10px";let x=De();if(e.powers&&0!==e.powers.length)e.powers.forEach(e=>{const a=x===e.name,o=document.createElement("div");o.style.background=a?"#2d4a3e":"#23243a",o.style.border="1px solid "+(a?"#4caf50":"#6ec6ff"),o.style.borderRadius="8px",o.style.padding="12px",o.style.cursor="pointer",o.style.transition="all 0.2s",o.onmouseover=()=>{a||(o.style.background="#2a2b4a")},o.onmouseout=()=>{a||(o.style.background="#23243a")},o.onclick=()=>{const a=h.querySelector(".selected-power");a&&(a.classList.remove("selected-power"),a.style.background="#23243a",a.style.border="1px solid #6ec6ff"),o.classList.add("selected-power"),o.style.background="#2d4a3e",o.style.border="1px solid #4caf50",x=e.name};const t=document.createElement("div");t.style.display="flex",t.style.justifyContent="flex-start",t.style.alignItems="center",t.style.marginBottom="6px";const s=document.createElement("div");s.textContent=e.name,s.style.color=a?"#4caf50":"#6ec6ff",s.style.fontSize="14px",s.style.fontWeight="bold",t.appendChild(s),o.appendChild(t);const r=document.createElement("div");r.textContent=e.description,r.style.color="#ecf0f1",r.style.fontSize="12px",r.style.lineHeight="1.4",o.appendChild(r),h.appendChild(o)});else{const e=document.createElement("div");e.style.textAlign="center",e.style.padding="20px",e.style.color="#8B4513",e.style.fontSize="14px",e.style.fontStyle="italic",e.style.background="rgba(139, 69, 19, 0.1)",e.style.border="1px solid rgba(139, 69, 19, 0.3)",e.style.borderRadius="8px",e.style.marginTop="10px",e.innerHTML='\n                    <div style="margin-bottom: 8px;">üôè</div>\n                    <div>Nenhum poder concedido dispon√≠vel</div>\n                    <div style="margin-top: 8px; font-size: 12px;">Esta divindade n√£o possui poderes especiais</div>\n                ',h.appendChild(e)}y.appendChild(h),s.appendChild(y);const C=document.createElement("div");C.style.display="flex",C.style.gap="12px",C.style.justifyContent="center",C.style.marginTop="20px";const w=Ie()===e.name,q=w?"Remover Divindade":"Definir como Divindade Atual",E=w?"#f44336":"#4caf50",z=document.createElement("button");z.textContent=q,z.style.padding="12px 24px",z.style.background=E,z.style.color="#fff",z.style.border="none",z.style.borderRadius="8px",z.style.fontSize="14px",z.style.fontWeight="bold",z.style.cursor="pointer",z.style.transition="all 0.2s",z.onmouseover=()=>{z.style.opacity="0.8"},z.onmouseout=()=>{z.style.opacity="1"},z.onclick=()=>{w?(Te(null),Me(null)):(Te(e.name),x&&Me(x)),s.remove(),t.remove(),ze()},C.appendChild(z),s.appendChild(C),document.body.appendChild(s),S(s,"brown")}(e)};const t=document.createElement("div");t.style.display="flex",t.style.justifyContent="space-between",t.style.alignItems="center",t.style.marginBottom="8px";const s=document.createElement("div");s.innerHTML=`<strong style="color: ${a?"#4caf50":"#6ec6ff"}; font-size: 15px;">${e.name}</strong><br><em style="color: #ecf0f1; font-size: 12px;">${e.title}</em>`;const r=document.createElement("div");r.textContent=a?"‚úì Selecionada":"Clique para ver detalhes",r.style.color=a?"#4caf50":"#6ec6ff",r.style.fontSize="11px",r.style.fontWeight="bold",r.style.fontStyle="italic",t.appendChild(s),t.appendChild(r),o.appendChild(t);const n=document.createElement("div");n.textContent=e.shortDescription,n.style.color="#ecf0f1",n.style.fontSize="11px",n.style.lineHeight="1.4",o.appendChild(n),V.appendChild(o)}),x.appendChild(V);const B=document.createElement("div");function N(e){const a=document.getElementById("race-detail-modal");a&&a.remove();const o=document.getElementById("race-detail-overlay");o&&o.remove();const t=document.createElement("div");t.id="race-detail-overlay",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0,0,0,0.5)",t.style.zIndex="10002",t.onclick=()=>{t.remove(),s.remove()},document.body.appendChild(t);const s=document.createElement("div");s.id="race-detail-modal",s.style.position="fixed",s.style.top="50%",s.style.left="50%",s.style.transform="translate(-50%, -50%)",s.style.background="rgba(30,30,40,0.98)",s.style.border="2px solid #8B4513",s.style.borderRadius="12px",s.style.padding="20px",s.style.zIndex="10003",s.style.maxWidth="800px",s.style.maxHeight="85vh",s.style.overflowY="auto",s.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="stretch";const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="center",r.style.marginBottom="20px",r.style.borderBottom="1px solid rgba(139, 69, 19, 0.3)",r.style.paddingBottom="15px";const n=document.createElement("h2");n.innerHTML=`üë• ${e.name} - ${e.title}`,n.style.color="#8B4513",n.style.margin="0",n.style.fontSize="24px",n.style.fontWeight="bold";const i=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{s.remove(),t.remove()}});r.appendChild(n),r.appendChild(i.render()),s.appendChild(r);const c=document.createElement("div");c.style.marginBottom="20px",c.style.padding="15px",c.style.background="rgba(139, 69, 19, 0.1)",c.style.borderRadius="8px",c.style.border="1px solid rgba(139, 69, 19, 0.2)";const d=document.createElement("h3");d.textContent="Descri√ß√£o",d.style.color="#8B4513",d.style.fontSize="16px",d.style.fontWeight="bold",d.style.marginBottom="10px";const l=document.createElement("div");l.textContent=e.description,l.style.color="#ecf0f1",l.style.fontSize="14px",l.style.lineHeight="1.6",c.appendChild(d),c.appendChild(l),s.appendChild(c);const m=document.createElement("div");m.style.marginBottom="20px";const u=document.createElement("h3");u.textContent="Caracter√≠sticas da Ra√ßa",u.style.color="#8B4513",u.style.fontSize="16px",u.style.fontWeight="bold",u.style.marginBottom="15px",u.style.borderBottom="2px solid rgba(139, 69, 19, 0.3)",u.style.paddingBottom="8px",m.appendChild(u);const p=document.createElement("div");p.style.display="grid",p.style.gridTemplateColumns="1fr 1fr",p.style.gap="12px",[{label:"Atributos",value:e.attributes},{label:"Heran√ßa",value:e.heritage}].forEach(e=>{const a=document.createElement("div");a.style.background="rgba(139, 69, 19, 0.1)",a.style.padding="12px",a.style.borderRadius="8px",a.style.border="1px solid rgba(139, 69, 19, 0.2)";const o=document.createElement("div");o.textContent=e.label,o.style.color="#8B4513",o.style.fontSize="12px",o.style.fontWeight="bold",o.style.marginBottom="5px";const t=document.createElement("div");t.textContent=e.value,t.style.color="#ecf0f1",t.style.fontSize="13px",t.style.lineHeight="1.4",a.appendChild(o),a.appendChild(t),p.appendChild(a)}),m.appendChild(p),s.appendChild(m);const g=document.createElement("div");g.style.marginBottom="20px";const f=document.createElement("h3");f.textContent="Tipos de Ra√ßa",f.style.color="#8B4513",f.style.fontSize="16px",f.style.fontWeight="bold",f.style.marginBottom="15px",f.style.borderBottom="2px solid rgba(139, 69, 19, 0.3)",f.style.paddingBottom="8px",g.appendChild(f);const v=document.createElement("div");if(v.style.display="flex",v.style.flexDirection="column",v.style.gap="15px",e.types&&0!==e.types.length)e.types.forEach(a=>{const o=Ve()===e.name&&Ne()===a.name,r=document.createElement("div");r.style.background=o?"rgba(76, 175, 80, 0.1)":"rgba(139, 69, 19, 0.1)",r.style.border=o?"2px solid #4caf50":"1px solid rgba(139, 69, 19, 0.3)",r.style.borderRadius="10px",r.style.padding="15px",r.style.cursor="pointer",r.style.transition="all 0.2s",r.onclick=()=>{Be(e.name),Oe(a.name),s.remove(),t.remove(),setTimeout(()=>{N(e)},100)},r.onmouseover=()=>{o||(r.style.background="rgba(139, 69, 19, 0.2)",r.style.border="1px solid rgba(139, 69, 19, 0.5)")},r.onmouseout=()=>{o||(r.style.background="rgba(139, 69, 19, 0.1)",r.style.border="1px solid rgba(139, 69, 19, 0.3)")};const n=document.createElement("div");n.style.display="flex",n.style.justifyContent="space-between",n.style.alignItems="center",n.style.marginBottom="10px";const i=document.createElement("div");i.innerHTML=`<strong style="color: ${o?"#4caf50":"#6ec6ff"}; font-size: 16px;">${a.name}</strong><br><em style="color: #ecf0f1; font-size: 12px;">${a.title}</em>`;const c=document.createElement("div");o?(c.innerHTML="‚úì Selecionado",c.style.color="#4caf50"):(c.innerHTML="Clique para selecionar",c.style.color="#6ec6ff"),c.style.fontSize="12px",c.style.fontWeight="bold",c.style.fontStyle="italic",n.appendChild(i),n.appendChild(c),r.appendChild(n);const d=document.createElement("div");d.textContent=a.description,d.style.color="#ecf0f1",d.style.fontSize="13px",d.style.lineHeight="1.4",r.appendChild(d),v.appendChild(r)});else{const e=document.createElement("div");e.style.textAlign="center",e.style.padding="20px",e.style.color="#8B4513",e.style.fontSize="14px",e.style.fontStyle="italic",e.style.background="rgba(139, 69, 19, 0.1)",e.style.border="1px solid rgba(139, 69, 19, 0.3)",e.style.borderRadius="8px",e.style.marginTop="10px",e.innerHTML='\n                    <div style="margin-bottom: 8px;">üë•</div>\n                    <div>Nenhum tipo de ra√ßa dispon√≠vel</div>\n                    <div style="margin-top: 8px; font-size: 12px;">Esta ra√ßa n√£o possui subtipos especiais</div>\n                ',v.appendChild(e)}g.appendChild(v),s.appendChild(g);const y=document.createElement("div");y.style.display="flex",y.style.gap="12px",y.style.justifyContent="center",y.style.marginTop="20px";const b=Ve()===e.name,h=b?"Remover Ra√ßa":"Definir como Ra√ßa Atual",x=b?"#f44336":"#4caf50",C=document.createElement("button");C.textContent=h,C.style.padding="12px 24px",C.style.background=x,C.style.color="#fff",C.style.border="none",C.style.borderRadius="8px",C.style.fontSize="14px",C.style.fontWeight="bold",C.style.cursor="pointer",C.style.transition="all 0.2s",C.onmouseover=()=>{C.style.opacity="0.8"},C.onmouseout=()=>{C.style.opacity="1"},C.onclick=()=>{b?(Be(null),Oe(null)):Be(e.name),s.remove(),t.remove(),ze()},y.appendChild(C),s.appendChild(y),document.body.appendChild(s),S(s,"brown")}B.style.display="flex",B.style.flexDirection="column",B.style.gap="15px",[{name:"Suraggel",title:"Descendentes de Extraplanares Divinos",shortDescription:"Seres com tra√ßos angelicais ou demon√≠acos, ligados √†s for√ßas opostas da luz e trevas.",description:"Descendentes de extraplanares divinos, esta ra√ßa √© formada por seres com tra√ßos angelicais ou demon√≠acos ‚Äî ou ambos. Por serem ligados √†s for√ßas opostas da luz e trevas, suraggel t√™m tra√ßos diferentes quando orientados para seu lado celestial, sendo ent√£o conhecidos como aggelus; ou para o lado abissal, assim sendo chamados sulfure. Sua natureza em geral combina com a ascend√™ncia, lembrando habitantes dos Mundos dos Deuses, mas eles tamb√©m podem ser surpreendentes e contradit√≥rios: n√£o se espante muito ao conhecer um aggelus ladino ou um sulfure paladino.",attributes:"Sabedoria +2, Carisma +1 (Aggelus); Destreza +2, Intelig√™ncia +1 (Sulfure)",heritage:"Heran√ßa Divina. Voc√™ √© uma criatura do tipo esp√≠rito e recebe vis√£o no escuro.",types:[{name:"Aggelus",title:"Lado Celestial",description:"Voc√™ recebe +2 em Diplomacia e Intui√ß√£o. Al√©m disso, pode lan√ßar Luz (como uma magia divina; atributo-chave Carisma). Caso aprenda novamente essa magia, seu custo diminui em ‚Äì1 PM.",power:"Luz Sagrada"},{name:"Sulfure",title:"Lado Abissal",description:"Voc√™ recebe +2 em Engana√ß√£o e Furtividade. Al√©m disso, pode lan√ßar Escurid√£o (como uma magia divina; atributo-chave Intelig√™ncia). Caso aprenda novamente essa magia, seu custo diminui em ‚Äì1 PM.",power:"Sombras Profanas"}]}].forEach(e=>{const a=Ve()===e.name,o=Ne(),t=document.createElement("div");t.style.background=a?"rgba(76, 175, 80, 0.1)":"rgba(139, 69, 19, 0.1)",t.style.border=a?"2px solid #4caf50":"1px solid rgba(139, 69, 19, 0.3)",t.style.borderRadius="8px",t.style.padding="10px",t.style.cursor="pointer",t.style.transition="all 0.2s",t.style.width="100%",t.style.boxSizing="border-box",t.onclick=()=>{a?N(e):(Be(e.name),N(e),setTimeout(()=>{const e=new Event("race-selection-changed");document.dispatchEvent(e)},100))},t.onmouseover=()=>{a||(t.style.background="rgba(139, 69, 19, 0.2)",t.style.border="1px solid rgba(139, 69, 19, 0.5)")},t.onmouseout=()=>{a||(t.style.background="rgba(139, 69, 19, 0.1)",t.style.border="1px solid rgba(139, 69, 19, 0.3)")};const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="space-between",s.style.alignItems="flex-start",s.style.marginBottom="8px";const r=document.createElement("div");r.innerHTML=`<strong style="color: ${a?"#4caf50":"#6ec6ff"}; font-size: 15px;">${e.name}</strong><br><em style="color: #ecf0f1; font-size: 12px;">${e.title}</em>`;const n=document.createElement("div");a?n.innerHTML=o?`‚úì Selecionada<br><small style="color: #4caf50;">${o}</small>`:'‚úì Selecionada<br><small style="color: #ffa726;">Tipo n√£o definido</small>':n.textContent="Clique para ver detalhes",n.style.color=a?"#4caf50":"#6ec6ff",n.style.fontSize="11px",n.style.fontWeight="bold",n.style.fontStyle="italic",n.style.textAlign="right",s.appendChild(r),s.appendChild(n),t.appendChild(s);const i=document.createElement("div");i.textContent=e.shortDescription,i.style.color="#ecf0f1",i.style.fontSize="11px",i.style.lineHeight="1.4",t.appendChild(i),B.appendChild(t)}),w.appendChild(B);const O=[{name:"Marca da Presa",description:"Voc√™ pode gastar uma a√ß√£o de movimento e 1 PM para analisar uma criatura em alcance curto. At√© o fim da cena, voc√™ recebe +1d4 nas rolagens de dano contra essa criatura. A cada quatro n√≠veis, voc√™ pode gastar +1 PM para aumentar o b√¥nus de dano (veja a tabela da classe).",level:"1¬∫ n√≠vel"},{name:"Rastreador",description:"Voc√™ recebe +2 em Sobreviv√™ncia. Al√©m disso, pode se mover com seu deslocamento normal enquanto rastreia sem sofrer penalidades no teste de Sobreviv√™ncia.",level:"1¬∫ n√≠vel"},{name:"Ambidestria",description:"Se estiver empunhando duas armas (e pelo menos uma delas for leve) e fizer a a√ß√£o agredir, voc√™ pode fazer dois ataques, um com cada arma. Se fizer isso, sofre ‚Äì2 em todos os testes de ataque at√© o seu pr√≥ximo turno.",level:"Poder de Ca√ßador",prereq:"Des 2"},{name:"Armadilha: Arataca",description:"A v√≠tima sofre 2d6 pontos de dano de perfura√ß√£o e fica agarrada. Uma criatura agarrada pode escapar com uma a√ß√£o padr√£o e um teste de For√ßa ou Acrobacia (CD Sab).",level:"Poder de Ca√ßador"},{name:"Armadilha: Espinhos",description:"A v√≠tima sofre 6d6 pontos de dano de perfura√ß√£o. Um teste de Reflexos (CD Sab) reduz o dano √† metade.",level:"Poder de Ca√ßador"},{name:"Armadilha: La√ßo",description:"A v√≠tima deve fazer um teste de Reflexos (CD Sab). Se passar, fica ca√≠da. Se falhar, fica agarrada. Uma criatura agarrada pode se soltar com uma a√ß√£o padr√£o e um teste de For√ßa ou Acrobacia (CD Sab).",level:"Poder de Ca√ßador"},{name:"Armadilha: Rede",description:"Todas as criaturas na √°rea ficam enredadas e n√£o podem sair da √°rea. Uma v√≠tima pode se libertar com uma a√ß√£o padr√£o e um teste de For√ßa ou Acrobacia (CD 25). Al√©m disso, a √°rea ocupada pela rede √© considerada terreno dif√≠cil. Nesta armadilha voc√™ escolhe quantas criaturas precisam estar na √°rea para ativ√°-la.",level:"Poder de Ca√ßador"},{name:"Armadilheiro",description:"Voc√™ soma sua Sabedoria no dano e na CD de suas armadilhas (cumulativo).",level:"Poder de Ca√ßador",prereq:"um poder de armadilha, 5¬∫ n√≠vel de ca√ßador"},{name:"Arqueiro",description:"Se estiver usando uma arma de ataque √† dist√¢ncia, voc√™ soma sua Sabedoria nas rolagens de dano (limitado pelo seu n√≠vel).",level:"Poder de Ca√ßador",prereq:"Sab 1"},{name:"Aumento de Atributo",description:"Voc√™ recebe +1 em um atributo. Voc√™ pode escolher este poder v√°rias vezes, mas apenas uma vez por patamar para um mesmo atributo.",level:"Poder de Ca√ßador"},{name:"Bote",description:"Se estiver empunhando duas armas e fizer uma investida, voc√™ pode pagar 1 PM para fazer um ataque adicional com sua arma secund√°ria.",level:"Poder de Ca√ßador",prereq:"Ambidestria, 6¬∫ n√≠vel de ca√ßador"},{name:"Camuflagem",description:"Voc√™ pode gastar 2 PM para se esconder mesmo sem camuflagem ou cobertura dispon√≠vel.",level:"Poder de Ca√ßador",prereq:"6¬∫ n√≠vel de ca√ßador"},{name:"Chuva de L√¢minas",description:"Uma vez por rodada, quando usa Ambidestria, voc√™ pode pagar 2 PM para fazer um ataque adicional com sua arma prim√°ria.",level:"Poder de Ca√ßador",prereq:"Des 4, Ambidestria, 12¬∫ n√≠vel de ca√ßador"},{name:"Companheiro Animal",description:"Voc√™ recebe um companheiro animal. Veja o quadro na p√°gina 62.",level:"Poder de Ca√ßador",prereq:"Car 1, treinado em Adestramento"},{name:"Elo com a Natureza",description:"Voc√™ soma sua Sabedoria em seu total de pontos de mana e aprende e pode lan√ßar Caminhos da Natureza (atributo-chave Sabedoria).",level:"Poder de Ca√ßador",prereq:"Sab 1, 3¬∫ n√≠vel de ca√ßador"},{name:"Emboscar",description:"Voc√™ pode gastar 2 PM para realizar uma a√ß√£o padr√£o adicional em seu turno. Voc√™ s√≥ pode usar este poder na primeira rodada de um combate.",level:"Poder de Ca√ßador",prereq:"treinado em Furtividade"},{name:"Empatia Selvagem",description:"Voc√™ pode se comunicar com animais por meio de linguagem corporal e vocaliza√ß√µes. Voc√™ pode usar Adestramento com animais para mudar atitude e persuas√£o (veja Diplomacia, na p√°gina 118).",level:"Poder de Ca√ßador"},{name:"Escaramu√ßa",description:"Quando se move 6m ou mais, voc√™ recebe +2 na Defesa e Reflexos e +1d8 nas rolagens de dano de ataques corpo a corpo e √† dist√¢ncia em alcance curto at√© o in√≠cio de seu pr√≥ximo turno. Voc√™ n√£o pode usar esta habilidade se estiver vestindo armadura pesada.",level:"Poder de Ca√ßador",prereq:"Des 2, 6¬∫ n√≠vel de ca√ßador"},{name:"Escaramu√ßa Superior",description:"Quando usa Escaramu√ßa, seus b√¥nus aumentam para +5 na Defesa e Reflexos e +1d12 em rolagens de dano.",level:"Poder de Ca√ßador",prereq:"Escaramu√ßa, 12¬∫ n√≠vel de ca√ßador"},{name:"Espreitar",description:"Quando usa a habilidade Marca da Presa, voc√™ recebe um b√¥nus de +1 em testes de per√≠cia contra a criatura marcada. Esse b√¥nus aumenta em +1 para cada PM adicional gasto na habilidade e tamb√©m dobra com a habilidade Inimigo.",level:"Poder de Ca√ßador"},{name:"Ervas Curativas",description:"Voc√™ pode gastar uma a√ß√£o completa e uma quantidade de PM a sua escolha (limitado por sua Sabedoria) para aplicar ervas que curam ou desintoxicam em voc√™ ou num aliado adjacente. Para cada PM que gastar, cura 2d6 PV ou remove uma condi√ß√£o envenenado afetando o alvo.",level:"Poder de Ca√ßador"},{name:"√çmpeto",description:"Voc√™ pode gastar 1 PM para aumentar seu deslocamento em +6m por uma rodada.",level:"Poder de Ca√ßador"},{name:"Inimigo de (Criatura)",description:"Escolha um tipo de criatura entre animal, construto, esp√≠rito, monstro ou morto-vivo, ou duas ra√ßas humanoides (por exemplo, orcs e gnolls, ou elfos e qareen). Quando voc√™ usa a habilidade Marca da Presa contra uma criatura do tipo ou da ra√ßa escolhida, dobra os dados de b√¥nus no dano. O nome desta habilidade varia de acordo com o tipo de criatura escolhida (Inimigo de Monstros, Inimigo de Mortos-Vivos etc.). Voc√™ pode escolher este poder outras vezes para inimigos diferentes.",level:"Poder de Ca√ßador"},{name:"Olho do Falc√£o",description:"Voc√™ pode usar a habilidade Marca da Presa em criaturas em alcance longo.",level:"Poder de Ca√ßador"},{name:"Ponto Fraco",description:"Quando usa a habilidade Marca da Presa, seus ataques contra a criatura marcada recebem +2 na margem de amea√ßa. Esse b√¥nus dobra com a habilidade Inimigo.",level:"Poder de Ca√ßador"},{name:"Explorador",description:"No 3¬∫ n√≠vel, escolha um tipo de terreno entre aqu√°tico, √°rtico, colina, deserto, floresta, montanha, p√¢ntano, plan√≠cie, subterr√¢neo ou urbano. A partir do 11¬∫ n√≠vel, voc√™ tamb√©m pode escolher √°rea de Tormenta. Quando estiver no tipo de terreno escolhido, voc√™ soma sua Sabedoria (m√≠nimo +1) na Defesa e nos testes de Acrobacia, Atletismo, Furtividade, Percep√ß√£o e Sobreviv√™ncia. A cada quatro n√≠veis, escolha outro tipo de terreno para receber o b√¥nus ou aumente o b√¥nus em um tipo de terreno j√° escolhido em +2.",level:"3¬∫ n√≠vel"},{name:"Caminho do Explorador",description:"No 5¬∫ n√≠vel, voc√™ pode atravessar terrenos dif√≠ceis sem sofrer redu√ß√£o em seu deslocamento e a CD para rastrear voc√™ aumenta em +10. Esta habilidade s√≥ funciona em terrenos nos quais voc√™ tenha a habilidade Explorador.",level:"5¬∫ n√≠vel"},{name:"Mestre Ca√ßador",description:"No 20¬∫ n√≠vel, voc√™ pode usar a habilidade Marca da Presa como uma a√ß√£o livre. Al√©m disso, quando usa a habilidade, pode pagar 5 PM para aumentar sua margem de amea√ßa contra a criatura em +2. Se voc√™ reduz uma criatura contra a qual usou Marca da Presa a 0 pontos de vida, recupera 5 PM.",level:"20¬∫ n√≠vel"}],F=document.createElement("div");F.style.marginBottom="15px",F.style.padding="12px",F.style.background="rgba(139, 69, 19, 0.1)",F.style.borderRadius="8px",F.style.border="1px solid rgba(139, 69, 19, 0.2)";const U=document.createElement("div");U.style.position="relative",U.style.marginBottom="10px";const W=document.createElement("input");W.type="text",W.placeholder="Filtrar poderes...",W.style.width="100%",W.style.padding="10px 28px 10px 12px",W.style.borderRadius="8px",W.style.border="1px solid #6ec6ff",W.style.background="#23243a",W.style.color="#fff",W.style.fontSize="14px",W.style.outline="none",W.style.boxSizing="border-box";const Q=document.createElement("span");Q.textContent="√ó",Q.style.position="absolute",Q.style.right="8px",Q.style.top="50%",Q.style.transform="translateY(-50%)",Q.style.cursor="pointer",Q.style.color="#6ec6ff",Q.style.fontSize="18px",Q.style.display="none",Q.onclick=()=>{W.value="",W.dispatchEvent(new Event("input")),W.focus()},W.oninput=()=>{oe=W.value,W.value.length>0?Q.style.display="block":Q.style.display="none",se()},U.appendChild(W),U.appendChild(Q);const Y=document.createElement("div");Y.style.display="flex",Y.style.gap="10px",Y.style.flexWrap="wrap";const X=document.createElement("button");X.textContent="Todas",X.style.padding="6px 12px",X.style.background="#8B4513",X.style.color="#fff",X.style.border="none",X.style.borderRadius="6px",X.style.fontSize="12px",X.style.fontWeight="bold",X.style.cursor="pointer",X.style.transition="all 0.2s";const Z=document.createElement("button");Z.textContent="Aprendidas",Z.style.padding="6px 12px",Z.style.background="rgba(139, 69, 19, 0.3)",Z.style.color="#ecf0f1",Z.style.border="none",Z.style.borderRadius="6px",Z.style.fontSize="12px",Z.style.fontWeight="bold",Z.style.cursor="pointer",Z.style.transition="all 0.2s";const ee=document.createElement("button");ee.textContent="Dispon√≠veis",ee.style.padding="6px 12px",ee.style.background="rgba(139, 69, 19, 0.3)",ee.style.color="#ecf0f1",ee.style.border="none",ee.style.borderRadius="6px",ee.style.fontSize="12px",ee.style.fontWeight="bold",ee.style.cursor="pointer",ee.style.transition="all 0.2s",Y.appendChild(X),Y.appendChild(Z),Y.appendChild(ee),F.appendChild(U),F.appendChild(Y),v.appendChild(F);const ae=document.createElement("div");ae.id="abilities-list-container",v.appendChild(ae);let oe="",te="all";function se(){const e=L(),a=["Marca da Presa","Rastreador"],o=parseInt(localStorage.getItem(T)||"1",10)||1,t=J(o);ae.innerHTML="";const s=O.filter(e=>{const a=e.name.toLowerCase().includes(oe.toLowerCase())||e.description.toLowerCase().includes(oe.toLowerCase());let t=!0;return"learned"===te?t=K(e.name):"available"===te&&(t=!K(e.name)&&G(e.name,o)),a&&t});if(0===s.length){const e=document.createElement("div");if(e.style.textAlign="center",e.style.padding="20px",e.style.color="#8B4513",e.style.fontSize="14px",e.style.fontStyle="italic",e.style.background="rgba(139, 69, 19, 0.1)",e.style.border="1px solid rgba(139, 69, 19, 0.3)",e.style.borderRadius="8px",e.style.marginTop="10px",oe){const e=ye(oe,"habilidade","brown");return void ae.appendChild(e)}return e.innerHTML='\n                            <div style="margin-bottom: 8px;">üèπ</div>\n                            <div>Nenhuma habilidade dispon√≠vel</div>\n                            <div style="margin-top: 8px; font-size: 12px;">Selecione uma classe para obter habilidades especiais</div>\n                        ',void ae.appendChild(e)}if(s.forEach(e=>{const s=document.createElement("div"),r=a.includes(e.name),n=t.includes(e.name),i=K(e.name),c=G(e.name,o);let d,l,m;r?(d="rgba(76, 175, 80, 0.15)",l="rgba(76, 175, 80, 0.4)",m="#4CAF50"):n?(d="rgba(156, 39, 176, 0.15)",l="rgba(156, 39, 176, 0.4)",m="#9C27B0"):i?(d="rgba(76, 175, 80, 0.1)",l="rgba(76, 175, 80, 0.3)",m="#4CAF50"):(d="rgba(139, 69, 19, 0.1)",l="rgba(139, 69, 19, 0.2)",m="#8B4513"),s.style.marginBottom="15px",s.style.padding="12px",s.style.background=d,s.style.borderRadius="8px",s.style.border=`1px solid ${l}`,s.style.transition="all 0.2s";const u=document.createElement("div");u.style.display="flex",u.style.justifyContent="space-between",u.style.alignItems="flex-start",u.style.marginBottom="8px",u.style.flexWrap="wrap",u.style.gap="10px";const p=document.createElement("div");if(p.style.display="flex",p.style.alignItems="center",p.style.gap="8px",p.style.flex="1",!r&&!n){const a=document.createElement("input");a.type="checkbox",a.checked=i,a.style.width="16px",a.style.height="16px",a.style.accentColor="#8B4513",a.style.cursor="pointer","Companheiro Animal"===e.name?a.onchange=()=>{if(H(e.name),a.checked){const e=document.getElementById("animal-companion-modal");e&&e.remove();const a=document.getElementById("animal-companion-overlay");a&&a.remove();const o=document.createElement("div");o.id="animal-companion-overlay",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.background="rgba(0,0,0,0.5)",o.style.zIndex="10000",o.onclick=()=>{o.remove(),t.remove()},document.body.appendChild(o);const t=document.createElement("div");t.id="animal-companion-modal",t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.background="rgba(30,30,40,0.98)",t.style.border="2px solid #6ec6ff",t.style.borderRadius="12px",t.style.padding="24px 28px",t.style.zIndex="10001",t.style.maxWidth="340px",t.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="stretch";const s=document.createElement("h3");s.textContent="Tipo de Companheiro Animal",s.style.color="#ecf0f1",s.style.margin="0 0 18px 0",s.style.fontSize="17px",s.style.fontWeight="bold",t.appendChild(s);const r=document.createElement("button");r.textContent="Assassino",r.style.background="#6ec6ff",r.style.color="#23243a",r.style.border="none",r.style.borderRadius="8px",r.style.fontSize="15px",r.style.fontWeight="bold",r.style.padding="12px 0",r.style.cursor="pointer",r.style.marginBottom="10px",r.onmouseover=()=>{r.style.background="#5bb8ff"},r.onmouseout=()=>{r.style.background="#6ec6ff"},r.onclick=()=>{Ae("assassino"),o.remove(),t.remove(),se()},t.appendChild(r);const n=window.Roll20Components.createCloseButton({customStyles:"position: absolute; top: 8px; right: 12px;",onClick:()=>{o.remove(),t.remove()}});t.appendChild(n.render()),document.body.appendChild(t)}else Ae("");se()}:a.onchange=()=>{H(e.name),se()},p.appendChild(a)}const g=document.createElement("div");if(g.textContent=e.name,g.style.color=m,g.style.fontSize="15px",g.style.fontWeight="bold","Companheiro Animal"===e.name&&i&&"assassino"===Pe()){const e=document.createElement("span");e.textContent="Assassino",e.style.background="#6ec6ff",e.style.color="#23243a",e.style.borderRadius="8px",e.style.padding="2px 10px",e.style.fontSize="12px",e.style.fontWeight="bold",e.style.marginLeft="8px",e.style.display="inline-block",e.style.letterSpacing="0.5px",e.style.boxShadow="0 1px 4px rgba(0,0,0,0.08)",g.appendChild(e)}p.appendChild(g);const f=document.createElement("div");f.textContent=e.level,f.style.color="#6ec6ff",f.style.fontSize="12px",f.style.fontWeight="bold",f.style.fontStyle="italic",u.appendChild(p),u.appendChild(f);const v=document.createElement("div");if(v.textContent=e.description,v.style.color="#ecf0f1",v.style.fontSize="13px",v.style.lineHeight="1.4",v.style.marginBottom="5px",s.appendChild(u),s.appendChild(v),e.prereq){const a=document.createElement("div");a.textContent=`Pr√©-requisito: ${e.prereq}`,a.style.color="#ffa726",a.style.fontSize="11px",a.style.fontStyle="italic",a.style.fontWeight="bold",s.appendChild(a)}const y=document.createElement("div");if(y.style.marginTop="5px",y.style.display="flex",y.style.gap="8px",y.style.flexWrap="wrap",r){const e=document.createElement("div");e.innerHTML="üîÑ Autom√°tica",e.style.color="#4CAF50",e.style.fontSize="11px",e.style.fontWeight="bold",e.style.fontStyle="italic",y.appendChild(e)}else if(n){const e=document.createElement("div");e.innerHTML="‚≠ê Especial",e.style.color="#9C27B0",e.style.fontSize="11px",e.style.fontWeight="bold",e.style.fontStyle="italic",y.appendChild(e)}else if(i){const e=document.createElement("div");e.innerHTML="‚úì Aprendida",e.style.color="#4CAF50",e.style.fontSize="11px",e.style.fontWeight="bold",e.style.fontStyle="italic",y.appendChild(e)}else if(c){const e=document.createElement("div");e.innerHTML="üìã Dispon√≠vel",e.style.color="#8B4513",e.style.fontSize="11px",e.style.fontWeight="bold",e.style.fontStyle="italic",y.appendChild(e)}y.children.length>0&&s.appendChild(y),ae.appendChild(s)}),0===s.length&&oe.length>0){const e=ye(oe,"habilidade","blue");ae.appendChild(e)}const r=document.createElement("div");r.style.marginTop="15px",r.style.padding="10px",r.style.background="rgba(26,26,46,0.8)",r.style.borderRadius="8px",r.style.border="1px solid rgba(139, 69, 19, 0.3)",r.style.textAlign="center";const n=e.length,i=O.length,c=Math.round(n/i*100),d=document.createElement("div");d.innerHTML=`<strong>Habilidades Aprendidas:</strong> ${n}/${i} (${c}%)`,d.style.color="#8B4513",d.style.fontSize="14px",d.style.fontWeight="bold",r.appendChild(d),ae.appendChild(r)}function re(e){p.style.display="none",v.style.display="none",b.style.display="none",x.style.display="none",w.style.display="none",u.style.background="rgba(139, 69, 19, 0.3)",u.style.color="#ecf0f1",f.style.background="rgba(139, 69, 19, 0.3)",f.style.color="#ecf0f1",y.style.background="rgba(139, 69, 19, 0.3)",y.style.color="#ecf0f1",h.style.background="rgba(139, 69, 19, 0.3)",h.style.color="#ecf0f1",C.style.background="rgba(139, 69, 19, 0.3)",C.style.color="#ecf0f1",1===e?(p.style.display="block",u.style.background="#8B4513",u.style.color="#fff"):2===e?(v.style.display="block",f.style.background="#8B4513",f.style.color="#fff"):3===e?(b.style.display="block",y.style.background="#8B4513",y.style.color="#fff"):4===e?(x.style.display="block",h.style.background="#8B4513",h.style.color="#fff"):5===e&&(w.style.display="block",C.style.background="#8B4513",C.style.color="#fff")}X.onclick=()=>{te="all",X.style.background="#8B4513",X.style.color="#fff",Z.style.background="rgba(139, 69, 19, 0.3)",Z.style.color="#ecf0f1",ee.style.background="rgba(139, 69, 19, 0.3)",ee.style.color="#ecf0f1",se()},Z.onclick=()=>{te="learned",X.style.background="rgba(139, 69, 19, 0.3)",X.style.color="#ecf0f1",Z.style.background="#8B4513",Z.style.color="#fff",ee.style.background="rgba(139, 69, 19, 0.3)",ee.style.color="#ecf0f1",se()},ee.onclick=()=>{te="available",X.style.background="rgba(139, 69, 19, 0.3)",X.style.color="#ecf0f1",Z.style.background="rgba(139, 69, 19, 0.3)",Z.style.color="#ecf0f1",ee.style.background="#8B4513",ee.style.color="#fff",se()},se(),u.onclick=()=>re(1),f.onclick=()=>re(2),y.onclick=()=>re(3),h.onclick=()=>re(4),C.onclick=()=>re(5),u.onmouseover=()=>{"none"===p.style.display&&(u.style.background="rgba(139, 69, 19, 0.5)")},u.onmouseout=()=>{"none"===p.style.display&&(u.style.background="rgba(139, 69, 19, 0.3)")},f.onmouseover=()=>{"none"===v.style.display&&(f.style.background="rgba(139, 69, 19, 0.5)")},f.onmouseout=()=>{"none"===v.style.display&&(f.style.background="rgba(139, 69, 19, 0.3)")},y.onmouseover=()=>{"none"===b.style.display&&(y.style.background="rgba(139, 69, 19, 0.5)")},y.onmouseout=()=>{"none"===b.style.display&&(y.style.background="rgba(139, 69, 19, 0.3)")},h.onmouseover=()=>{"none"===x.style.display&&(h.style.background="rgba(139, 69, 19, 0.5)")},h.onmouseout=()=>{"none"===x.style.display&&(h.style.background="rgba(139, 69, 19, 0.3)")},C.onmouseover=()=>{"none"===w.style.display&&(C.style.background="rgba(139, 69, 19, 0.5)")},C.onmouseout=()=>{"none"===w.style.display&&(C.style.background="rgba(139, 69, 19, 0.3)")},l.appendChild(u),l.appendChild(f),l.appendChild(y),l.appendChild(h),l.appendChild(C),m.appendChild(p),m.appendChild(v),m.appendChild(b),m.appendChild(x),m.appendChild(w),d.appendChild(l),t.appendChild(d);const ne=document.createElement("div");ne.style.flex="1",ne.style.overflow="hidden",ne.appendChild(m),t.appendChild(ne);const ce=document.createElement("div");ce.style.marginBottom="20px";const de=document.createElement("h3");de.textContent="Tabela de Progress√£o",de.style.color="#8B4513",de.style.fontSize="18px",de.style.fontWeight="bold",de.style.marginBottom="15px",de.style.borderBottom="2px solid rgba(139, 69, 19, 0.3)",de.style.paddingBottom="8px",ce.appendChild(de);const le=document.createElement("div");le.style.background="rgba(26,26,46,0.8)",le.style.border="1px solid rgba(139, 69, 19, 0.3)",le.style.borderRadius="8px",le.style.overflow="hidden";const me=document.createElement("div");me.style.display="grid",me.style.gridTemplateColumns="80px 1fr",me.style.background="rgba(139, 69, 19, 0.2)",me.style.padding="12px 15px",me.style.borderBottom="1px solid rgba(139, 69, 19, 0.3)";const ue=document.createElement("div");ue.textContent="N√≠vel",ue.style.color="#8B4513",ue.style.fontWeight="bold",ue.style.fontSize="14px";const pe=document.createElement("div");pe.textContent="Habilidades de Classe",pe.style.color="#8B4513",pe.style.fontWeight="bold",pe.style.fontSize="14px",me.appendChild(ue),me.appendChild(pe),le.appendChild(me);const ge=[{level:"1¬∫",abilities:"Marca da presa +1d4, rastreador"},{level:"2¬∫",abilities:"Poder de ca√ßador"},{level:"3¬∫",abilities:"Explorador, poder de ca√ßador"},{level:"4¬∫",abilities:"Poder de ca√ßador"},{level:"5¬∫",abilities:"Caminho do explorador, marca da presa +1d8, poder de ca√ßador"},{level:"6¬∫",abilities:"Poder de ca√ßador"},{level:"7¬∫",abilities:"Explorador, poder de ca√ßador"},{level:"8¬∫",abilities:"Poder de ca√ßador"},{level:"9¬∫",abilities:"Marca da presa +1d12, poder de ca√ßador"},{level:"10¬∫",abilities:"Poder de ca√ßador"},{level:"11¬∫",abilities:"Explorador, poder de ca√ßador"},{level:"12¬∫",abilities:"Poder de ca√ßador"},{level:"13¬∫",abilities:"Marca da presa +2d8, poder de ca√ßador"},{level:"14¬∫",abilities:"Poder de ca√ßador"},{level:"15¬∫",abilities:"Explorador, poder de ca√ßador"},{level:"16¬∫",abilities:"Poder de ca√ßador"},{level:"17¬∫",abilities:"Marca da presa +2d10, poder de ca√ßador"},{level:"18¬∫",abilities:"Poder de ca√ßador"},{level:"19¬∫",abilities:"Explorador, poder de ca√ßador"},{level:"20¬∫",abilities:"Mestre ca√ßador, poder de ca√ßador"}];ge.forEach((e,a)=>{const o=document.createElement("div");o.style.display="grid",o.style.gridTemplateColumns="80px 1fr",o.style.padding="10px 15px",o.style.borderBottom=a<ge.length-1?"1px solid rgba(139, 69, 19, 0.1)":"none",o.style.transition="background 0.2s",o.onmouseover=()=>{o.style.background="rgba(139, 69, 19, 0.1)"},o.onmouseout=()=>{o.style.background="transparent"};const t=document.createElement("div");t.textContent=e.level,t.style.color="#8B4513",t.style.fontWeight="bold",t.style.fontSize="13px";const s=document.createElement("div");s.textContent=e.abilities,s.style.color="#ecf0f1",s.style.fontSize="13px",s.style.lineHeight="1.3",o.appendChild(t),o.appendChild(s),le.appendChild(o)}),ce.appendChild(le),p.appendChild(ce);const fe=document.createElement("div");fe.style.textAlign="center",fe.style.padding="15px",fe.style.background="rgba(139, 69, 19, 0.1)",fe.style.borderRadius="8px",fe.style.border="1px solid rgba(139, 69, 19, 0.2)",fe.style.marginTop="15px";const ve=document.createElement("div");ve.textContent="üìñ Informa√ß√µes baseadas no Livro do Jogador - Tormenta 20",ve.style.color="#8B4513",ve.style.fontSize="12px",ve.style.fontStyle="italic",ve.style.fontWeight="bold",fe.appendChild(ve),p.appendChild(fe),document.body.appendChild(t),S(t,"brown"),s.onclick=()=>{s.remove(),t.remove()}}function Se(){try{const e=localStorage.getItem(n);return e?JSON.parse(e):[]}catch(e){return g.log("Erro ao carregar poderes de destino aprendidos:",e),[]}}function ke(e){return Se().includes(e)}(Ee="#textchat-input",new Promise(e=>{if(document.querySelector(Ee))return e(document.querySelector(Ee));const a=new MutationObserver(()=>{document.querySelector(Ee)&&(a.disconnect(),e(document.querySelector(Ee)))});a.observe(document.body,{childList:!0,subtree:!0})})).then(()=>{setTimeout(()=>{if(function(){const e=L();let a=!1;["Marca da Presa","Rastreador"].forEach(o=>{e.includes(o)||(e.push(o),a=!0)}),a&&W(e)}(),function(){const e=document.createElement("style");e.id="roll20-custom-scrollbar-styles",e.textContent="\n                /* Scrollbars customizadas para todos os elementos do script */\n                #roll20-hotbar *::-webkit-scrollbar,\n                .roll20-popup *::-webkit-scrollbar,\n                .roll20-modal *::-webkit-scrollbar,\n                #roll20-notification-container *::-webkit-scrollbar,\n                #skills-popup *::-webkit-scrollbar,\n                #spells-popup *::-webkit-scrollbar,\n                #misc-popup *::-webkit-scrollbar,\n                #avatar-popup *::-webkit-scrollbar,\n                #spell-cast-popup *::-webkit-scrollbar,\n                #pratos-popup *::-webkit-scrollbar,\n                #bebidas-popup *::-webkit-scrollbar,\n                #pocoes-popup *::-webkit-scrollbar,\n                #conditions-popup *::-webkit-scrollbar,\n                #hunter-class-modal *::-webkit-scrollbar,\n                #skill-detail-modal *::-webkit-scrollbar {\n                    width: 8px !important;\n                    height: 8px !important;\n                }\n\n                #roll20-hotbar *::-webkit-scrollbar-track,\n                .roll20-popup *::-webkit-scrollbar-track,\n                .roll20-modal *::-webkit-scrollbar-track,\n                #roll20-notification-container *::-webkit-scrollbar-track,\n                #skills-popup *::-webkit-scrollbar-track,\n                #spells-popup *::-webkit-scrollbar-track,\n                #misc-popup *::-webkit-scrollbar-track,\n                #avatar-popup *::-webkit-scrollbar-track,\n                #spell-cast-popup *::-webkit-scrollbar-track,\n                #pratos-popup *::-webkit-scrollbar-track,\n                #bebidas-popup *::-webkit-scrollbar-track,\n                #pocoes-popup *::-webkit-scrollbar-track,\n                #conditions-popup *::-webkit-scrollbar-track,\n                #hunter-class-modal *::-webkit-scrollbar-track,\n                #skill-detail-modal *::-webkit-scrollbar-track {\n                    background: rgba(35, 36, 58, 0.3) !important;\n                    border-radius: 4px !important;\n                    margin: 2px !important;\n                }\n\n                #roll20-hotbar *::-webkit-scrollbar-thumb,\n                .roll20-popup *::-webkit-scrollbar-thumb,\n                .roll20-modal *::-webkit-scrollbar-thumb,\n                #roll20-notification-container *::-webkit-scrollbar-thumb,\n                #skills-popup *::-webkit-scrollbar-thumb,\n                #spells-popup *::-webkit-scrollbar-thumb,\n                #misc-popup *::-webkit-scrollbar-thumb,\n                #avatar-popup *::-webkit-scrollbar-thumb,\n                #spell-cast-popup *::-webkit-scrollbar-thumb,\n                #pratos-popup *::-webkit-scrollbar-thumb,\n                #bebidas-popup *::-webkit-scrollbar-thumb,\n                #pocoes-popup *::-webkit-scrollbar-thumb,\n                #conditions-popup *::-webkit-scrollbar-thumb,\n                #hunter-class-modal *::-webkit-scrollbar-thumb,\n                #skill-detail-modal *::-webkit-scrollbar-thumb {\n                    background: rgba(110, 198, 255, 0.6) !important;\n                    border-radius: 4px !important;\n                    border: 1px solid rgba(110, 198, 255, 0.2) !important;\n                    transition: all 0.2s ease !important;\n                }\n\n                #roll20-hotbar *::-webkit-scrollbar-thumb:hover,\n                .roll20-popup *::-webkit-scrollbar-thumb:hover,\n                .roll20-modal *::-webkit-scrollbar-thumb:hover,\n                #roll20-notification-container *::-webkit-scrollbar-thumb:hover,\n                #skills-popup *::-webkit-scrollbar-thumb:hover,\n                #spells-popup *::-webkit-scrollbar-thumb:hover,\n                #misc-popup *::-webkit-scrollbar-thumb:hover,\n                #avatar-popup *::-webkit-scrollbar-thumb:hover,\n                #spell-cast-popup *::-webkit-scrollbar-thumb:hover,\n                #pratos-popup *::-webkit-scrollbar-thumb:hover,\n                #bebidas-popup *::-webkit-scrollbar-thumb:hover,\n                #pocoes-popup *::-webkit-scrollbar-thumb:hover,\n                #conditions-popup *::-webkit-scrollbar-thumb:hover,\n                #hunter-class-modal *::-webkit-scrollbar-thumb:hover,\n                #skill-detail-modal *::-webkit-scrollbar-thumb:hover {\n                    background: rgba(110, 198, 255, 0.8) !important;\n                    border-color: rgba(110, 198, 255, 0.4) !important;\n                }\n\n                #roll20-hotbar *::-webkit-scrollbar-thumb:active,\n                .roll20-popup *::-webkit-scrollbar-thumb:active,\n                .roll20-modal *::-webkit-scrollbar-thumb:active,\n                #roll20-notification-container *::-webkit-scrollbar-thumb:active,\n                #skills-popup *::-webkit-scrollbar-thumb:active,\n                #spells-popup *::-webkit-scrollbar-thumb:active,\n                #misc-popup *::-webkit-scrollbar-thumb:active,\n                #avatar-popup *::-webkit-scrollbar-thumb:active,\n                #spell-cast-popup *::-webkit-scrollbar-thumb:active,\n                #pratos-popup *::-webkit-scrollbar-thumb:active,\n                #bebidas-popup *::-webkit-scrollbar-thumb:active,\n                #pocoes-popup *::-webkit-scrollbar-thumb:active,\n                #conditions-popup *::-webkit-scrollbar-thumb:active,\n                #hunter-class-modal *::-webkit-scrollbar-thumb:active,\n                #skill-detail-modal *::-webkit-scrollbar-thumb:active {\n                    background: rgba(110, 198, 255, 1) !important;\n                    border-color: rgba(110, 198, 255, 0.6) !important;\n                }\n\n                #roll20-hotbar *::-webkit-scrollbar-corner,\n                .roll20-popup *::-webkit-scrollbar-corner,\n                .roll20-modal *::-webkit-scrollbar-corner,\n                #roll20-notification-container *::-webkit-scrollbar-corner,\n                #skills-popup *::-webkit-scrollbar-corner,\n                #spells-popup *::-webkit-scrollbar-corner,\n                #misc-popup *::-webkit-scrollbar-corner,\n                #avatar-popup *::-webkit-scrollbar-corner,\n                #spell-cast-popup *::-webkit-scrollbar-corner,\n                #pratos-popup *::-webkit-scrollbar-corner,\n                #bebidas-popup *::-webkit-scrollbar-corner,\n                #pocoes-popup *::-webkit-scrollbar-corner,\n                #conditions-popup *::-webkit-scrollbar-corner,\n                #hunter-class-modal *::-webkit-scrollbar-corner,\n                #skill-detail-modal *::-webkit-scrollbar-corner {\n                    background: rgba(35, 36, 58, 0.3) !important;\n                    border-radius: 4px !important;\n                }\n\n                /* Scrollbars para Firefox */\n                #roll20-hotbar *,\n                .roll20-popup *,\n                .roll20-modal *,\n                #roll20-notification-container *,\n                #skills-popup *,\n                #spells-popup *,\n                #misc-popup *,\n                #avatar-popup *,\n                #spell-cast-popup *,\n                #pratos-popup *,\n                #bebidas-popup *,\n                #conditions-popup *,\n                #hunter-class-modal *,\n                #skill-detail-modal * {\n                    scrollbar-width: thin !important;\n                    scrollbar-color: rgba(110, 198, 255, 0.6) rgba(35, 36, 58, 0.3) !important;\n                }\n\n                /* Scrollbars para elementos espec√≠ficos com cores diferentes */\n                .roll20-popup-orange *::-webkit-scrollbar-thumb,\n                #misc-popup *::-webkit-scrollbar-thumb,\n                #pratos-popup *::-webkit-scrollbar-thumb,\n                #bebidas-popup *::-webkit-scrollbar-thumb {\n                    background: rgba(255, 184, 108, 0.6) !important;\n                    border-color: rgba(255, 184, 108, 0.2) !important;\n                }\n\n                .roll20-popup-orange *::-webkit-scrollbar-thumb:hover,\n                #misc-popup *::-webkit-scrollbar-thumb:hover,\n                #pratos-popup *::-webkit-scrollbar-thumb:hover,\n                #bebidas-popup *::-webkit-scrollbar-thumb:hover {\n                    background: rgba(255, 184, 108, 0.8) !important;\n                    border-color: rgba(255, 184, 108, 0.4) !important;\n                }\n\n                .roll20-popup-orange *::-webkit-scrollbar-thumb:active,\n                #misc-popup *::-webkit-scrollbar-thumb:active,\n                #pratos-popup *::-webkit-scrollbar-thumb:active,\n                #bebidas-popup *::-webkit-scrollbar-thumb:active {\n                    background: rgba(255, 184, 108, 1) !important;\n                    border-color: rgba(255, 184, 108, 0.6) !important;\n                }\n\n                .roll20-popup-orange *,\n                #misc-popup *,\n                #pratos-popup *,\n                #bebidas-popup * {\n                    scrollbar-color: rgba(255, 184, 108, 0.6) rgba(35, 36, 58, 0.3) !important;\n                }\n\n                /* Scrollbars para elementos com tema verde */\n                .roll20-popup-green *::-webkit-scrollbar-thumb,\n                #hunter-class-modal *::-webkit-scrollbar-thumb {\n                    background: rgba(76, 175, 80, 0.6) !important;\n                    border-color: rgba(76, 175, 80, 0.2) !important;\n                }\n\n                .roll20-popup-green *::-webkit-scrollbar-thumb:hover,\n                #hunter-class-modal *::-webkit-scrollbar-thumb:hover {\n                    background: rgba(76, 175, 80, 0.8) !important;\n                    border-color: rgba(76, 175, 80, 0.4) !important;\n                }\n\n                .roll20-popup-green *::-webkit-scrollbar-thumb:active,\n                #hunter-class-modal *::-webkit-scrollbar-thumb:active {\n                    background: rgba(76, 175, 80, 1) !important;\n                    border-color: rgba(76, 175, 80, 0.6) !important;\n                }\n\n                .roll20-popup-green *,\n                #hunter-class-modal * {\n                    scrollbar-color: rgba(76, 175, 80, 0.6) rgba(35, 36, 58, 0.3) !important;\n                }\n\n                /* Scrollbars para elementos com tema roxo */\n                .roll20-popup-purple *::-webkit-scrollbar-thumb,\n                #spells-popup *::-webkit-scrollbar-thumb,\n                #spell-cast-popup *::-webkit-scrollbar-thumb {\n                    background: rgba(156, 39, 176, 0.6) !important;\n                    border-color: rgba(156, 39, 176, 0.2) !important;\n                }\n\n                .roll20-popup-purple *::-webkit-scrollbar-thumb:hover,\n                #spells-popup *::-webkit-scrollbar-thumb:hover,\n                #spell-cast-popup *::-webkit-scrollbar-thumb:hover {\n                    background: rgba(156, 39, 176, 0.8) !important;\n                    border-color: rgba(156, 39, 176, 0.4) !important;\n                }\n\n                .roll20-popup-purple *::-webkit-scrollbar-thumb:active,\n                #spells-popup *::-webkit-scrollbar-thumb:active,\n                #spell-cast-popup *::-webkit-scrollbar-thumb:active {\n                    background: rgba(156, 39, 176, 1) !important;\n                    border-color: rgba(156, 39, 176, 0.6) !important;\n                }\n\n                .roll20-popup-purple *,\n                #spells-popup *,\n                #spell-cast-popup * {\n                    scrollbar-color: rgba(156, 39, 176, 0.6) rgba(35, 36, 58, 0.3) !important;\n                }\n\n                /* Scrollbars para elementos com tema vermelho */\n                .roll20-popup-red *::-webkit-scrollbar-thumb,\n                #conditions-popup *::-webkit-scrollbar-thumb {\n                    background: rgba(244, 67, 54, 0.6) !important;\n                    border-color: rgba(244, 67, 54, 0.2) !important;\n                }\n\n                .roll20-popup-red *::-webkit-scrollbar-thumb:hover,\n                #conditions-popup *::-webkit-scrollbar-thumb:hover {\n                    background: rgba(244, 67, 54, 0.8) !important;\n                    border-color: rgba(244, 67, 54, 0.4) !important;\n                }\n\n                .roll20-popup-red *::-webkit-scrollbar-thumb:active,\n                #conditions-popup *::-webkit-scrollbar-thumb:active {\n                    background: rgba(244, 67, 54, 1) !important;\n                    border-color: rgba(244, 67, 54, 0.6) !important;\n                }\n\n                .roll20-popup-red *,\n                #conditions-popup * {\n                    scrollbar-color: rgba(244, 67, 54, 0.6) rgba(35, 36, 58, 0.3) !important;\n                }\n\n                /* Anima√ß√µes suaves para scrollbars */\n                #roll20-hotbar *::-webkit-scrollbar-thumb,\n                .roll20-popup *::-webkit-scrollbar-thumb,\n                .roll20-modal *::-webkit-scrollbar-thumb,\n                #roll20-notification-container *::-webkit-scrollbar-thumb {\n                    transition: background 0.2s ease, border-color 0.2s ease, opacity 0.2s ease !important;\n                }\n\n                /* Scrollbars mais finas para elementos pequenos */\n                .roll20-scrollbar-thin *::-webkit-scrollbar {\n                    width: 6px !important;\n                    height: 6px !important;\n                }\n\n                .roll20-scrollbar-thin *::-webkit-scrollbar-thumb {\n                    border-radius: 3px !important;\n                }\n\n                .roll20-scrollbar-thin *::-webkit-scrollbar-track {\n                    border-radius: 3px !important;\n                    margin: 1px !important;\n                }\n\n                /* Scrollbars mais grossas para elementos grandes */\n                .roll20-scrollbar-thick *::-webkit-scrollbar {\n                    width: 12px !important;\n                    height: 12px !important;\n                }\n                .roll20-scrollbar-thick *::-webkit-scrollbar-thumb {\n                    border-radius: 6px !important;\n                }\n                .roll20-scrollbar-thick *::-webkit-scrollbar-track {\n                    border-radius: 6px !important;\n                    margin: 3px !important;\n                }\n\n                /* Esconder scrollbars quando n√£o necess√°rio */\n                .roll20-scrollbar-auto *::-webkit-scrollbar {\n                    width: 8px !important;\n                    height: 8px !important;\n                }\n\n                .roll20-scrollbar-auto *::-webkit-scrollbar-thumb {\n                    background: rgba(110, 198, 255, 0.3) !important;\n                }\n\n                .roll20-scrollbar-auto *:hover::-webkit-scrollbar-thumb {\n                    background: rgba(110, 198, 255, 0.6) !important;\n                }\n            ",document.head.appendChild(e)}(),!document.getElementById("skeleton-loader-style")){const e=document.createElement("style");e.id="skeleton-loader-style",e.textContent="\n                            @keyframes skeleton-loading { \n                                0% { background-position: -200px 0; } \n                                100% { background-position: calc(200px + 100%) 0; } \n                            }\n                        ",document.head.appendChild(e)}qe(),document.addEventListener("keydown",function(e){if(e.ctrlKey&&("'"===e.key||'"'===e.key)){v();const a=document.getElementById("roll20-hotbar");a&&("none"===a.style.display?a.style.display="":a.style.display="none"),e.preventDefault(),e.stopPropagation()}e.ctrlKey&&"Space"===e.code&&(e.preventDefault(),e.stopPropagation(),function(){const e=document.getElementById("quick-search-modal");e&&e.remove();const a=document.getElementById("quick-search-overlay");a&&a.remove();const o=document.createElement("div");o.id="quick-search-overlay",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.background="rgba(0,0,0,0.7)",o.style.zIndex="10000",o.style.display="flex",o.style.justifyContent="center",o.style.alignItems="flex-start",o.style.paddingTop="10vh";const t=document.createElement("div");t.id="quick-search-modal",t.style.background="rgba(30,30,40,0.98)",t.style.border="2px solid #6ec6ff",t.style.borderRadius="12px",t.style.padding="20px",t.style.width="600px",t.style.maxWidth="90vw",t.style.maxHeight="70vh",t.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",t.style.display="flex",t.style.flexDirection="column",t.style.gap="15px";const s=document.createElement("h2");s.textContent="üîç Busca R√°pida",s.style.color="#6ec6ff",s.style.margin="0",s.style.textAlign="center",s.style.fontSize="18px";const r=document.createElement("input");r.type="text",r.placeholder="Digite para buscar... (dishes, drinks, potions, conditions, skills, spells, powers, divinity)",r.style.padding="12px 16px",r.style.border="2px solid #6ec6ff",r.style.borderRadius="8px",r.style.background="rgba(20,20,30,0.9)",r.style.color="#ecf0f1",r.style.fontSize="14px",r.style.width="100%",r.style.boxSizing="border-box";const n=document.createElement("div");n.style.flex="1",n.style.overflowY="auto",n.style.maxHeight="400px",n.style.border="1px solid rgba(110,198,255,0.3)",n.style.borderRadius="8px",n.style.padding="10px",n.style.background="rgba(20,20,30,0.5)",S(n,"blue"),t.appendChild(s),t.appendChild(r),t.appendChild(n),o.appendChild(t),document.body.appendChild(o),r.focus(),r.addEventListener("input",async e=>{const a=e.target.value.trim();if(a.length>=1)await async function(e){if(!window.grimorioSpellsCache)try{window.grimorioSpellsCache=await se()}catch(e){console.warn("Erro ao carregar magias para busca:",e),window.grimorioSpellsCache=[]}const a=function(){const e=[];[{nome:"Assado de Carnes",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_60.jpg",raridade:"Comum",descricao:"Um prato muito apreciado no Reinado, mas mal visto no Imp√©rio de Tauron. Pura prote√≠na, deixa qualquer um mais forte.",bonus:"+2 em rolagens de dano corpo a corpo.",preco:"T$ 30",ingredientes:"Carne, carne de ca√ßa, porco",custoIngredientes:"T$ 56",cdTeste:"20",icone:"ü•©"},{nome:"Balinhas",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/achievement_halloween_candy_01.jpg",raridade:"Comum",descricao:"Balas coloridas e doces. Arcanistas gostam ‚Äî dizem que o a√ß√∫car fe√©rico usado nas balinhas potencializa suas magias.",bonus:"+2 em rolagens de dano de magias.",preco:"T$ 30",ingredientes:"A√ß√∫car das fadas, fruta",custoIngredientes:"T$ 53",cdTeste:"20",icone:"üç¨"},{nome:"Banquete dos Her√≥is",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_cauldron_frost.jpg",raridade:"Comum",descricao:"Uma mesa repleta das melhores comidas que o dinheiro pode pagar.",bonus:"+1 em um atributo a sua escolha. Esse aumento n√£o oferece PV, PM e per√≠cias adicionais.",preco:"T$ 150",ingredientes:"Carne de ca√ßa, ovo de monstro, avel√£ de Norba",custoIngredientes:"T$ 82",cdTeste:"25",icone:"üçΩÔ∏è"},{nome:"Batata Valkariana",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_103_potatobread.jpg",raridade:"Comum",descricao:"Batatas cortadas em tiras e mergulhadas em √≥leo fervente. Gordurentas e pouco nutritivas, s√£o o tipo de prato que s√≥ √© servido numa metr√≥pole como Valkaria. Apesar disso, s√£o saborosas e deixam qualquer um empolgado.",bonus:"+1d6 em um teste a sua escolha realizado at√© o fim do dia.",preco:"T$ 2",ingredientes:"√ìleo, legume",custoIngredientes:"T$ 4",cdTeste:"15",icone:"üçü"},{nome:"Bolo de Cenoura",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_fishcake.jpg",raridade:"Comum",descricao:'Uma sobremesa simples, que "faz bem para a vista", segundo anci√µes de todo o Reinado. Aparentemente, os anci√µes est√£o certos, pois o bolo de cenoura fornece +2 em testes de Percep√ß√£o.',bonus:"+2 em testes de Percep√ß√£o.",preco:"T$ 4",ingredientes:"Farinha, fruta, √≥leo",custoIngredientes:"T$ 7",cdTeste:"15",icone:"üç∞"},{nome:"Bolo do Pante√£o",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_144_cakeslice.jpg",raridade:"Comum",descricao:"Uma sobremesa divina! Este bolo de gorad √© preparado com os melhores ingredientes, por isso √© car√≠ssimo, servido apenas em banquetes reais ‚Äî ou em tavernas que atendem aventureiros famosos. Dizem que o gorad usado no bolo √© uma das fontes de energia do Pante√£o.",bonus:"Seu custo para ativar habilidades e lan√ßar magias diminui em -1 PM (m√≠nimo 1).",preco:"T$ 150",ingredientes:"A√ß√∫car das fadas, avel√£ de Norba, farinha, gorad",custoIngredientes:"T$ 121",cdTeste:"25",icone:"üç∞"},{nome:"Ensopado Refor√ßado",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_swirlingmistsoup.jpg",raridade:"Comum",descricao:"Um prato nutritivo, mas pesado.",bonus:"+20 PV tempor√°rios, mas seu deslocamento diminui em ‚Äì1,5m.",preco:"T$ 6",ingredientes:"Cereal, porco, verdura",custoIngredientes:"T$ 10",cdTeste:"15",icone:"üç≤"},{nome:"Estrogonofe",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_sauteedcarrots.jpg",raridade:"Comum",descricao:"Essa iguaria deliciosa foi inventada nas cortes do antigo Reino de Yudennach ‚Äî dizem que √© uma das poucas coisas boas a sair daquele lugar. Comer estrogonofe deixa voc√™ firme em suas convic√ß√µes.",bonus:"+2 em testes de Vontade.",preco:"T$ 12",ingredientes:"Carne, cogumelo, leite",custoIngredientes:"T$ 22",cdTeste:"15",icone:"üç≤"},{nome:"Fritada Monstruosa",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_06.jpg",raridade:"Comum",descricao:"A receita √© simples ‚Äî o segredo est√° nos ingredientes. Feita com ovos de monstros, esta omelete √© extremamente nutritiva.",bonus:"+10 PV tempor√°rios.",preco:"T$ 30",ingredientes:"Ovo de monstro, √≥leo",custoIngredientes:"T$ 53",cdTeste:"20",icone:"üç≥"},{nome:"Futomaki",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_161_fish_white.jpg",raridade:"Comum",descricao:"Criado no Imp√©rio de Jade, este prato consiste em um rolo de arroz recheado com peixes, folhas e ra√≠zes. Uma refei√ß√£o elegante, que deixa todos dispostos a dialogar.",bonus:"+2 em testes de Diplomacia.",preco:"T$ 12",ingredientes:"Cereal, peixe",custoIngredientes:"T$ 8",cdTeste:"15",icone:"üç£"},{nome:"Gorad Quente",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_meat_cooked_08.jpg",raridade:"Comum",descricao:"Gorad e leite, servidos fumegando. N√£o tem erro. O gorad ativa o c√©rebro.",bonus:"+2 PM tempor√°rios.",preco:"T$ 18",ingredientes:"Gorad, leite",custoIngredientes:"T$ 31",cdTeste:"20",icone:"ü•õ"},{nome:"Gorvel√£",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_cask_04.jpg",raridade:"Comum",descricao:"Gorad com avel√£ de Norba. √â uma sobremesa cara, mas deliciosa.",bonus:"+5 PM tempor√°rios.",preco:"T$ 42",ingredientes:"Gorad, avel√£ de Norba",custoIngredientes:"T$ 70",cdTeste:"25",icone:"üç∞"},{nome:"Macarr√£o de Yuvalin",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_cooking_90_cinnamonbonefishstew.jpg",raridade:"Comum",descricao:"Yuvalin √© uma cidade mineradora em Zakharov, na fronteira com as Montanhas Uivantes. Seus habitantes criaram este prato refor√ßado (macarr√£o, bacon e creme de leite) para encarar suas √°rduas jornadas de trabalho nas minas. Deliciosa, a receita se espalhou por outras cidades e reinos.",bonus:"+5 PV tempor√°rios.",preco:"T$ 6",ingredientes:"Farinha, leite, porco",custoIngredientes:"T$ 10",cdTeste:"15",icone:"üçù"},{nome:"P√£o de Queijo",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_orchardfruit01.jpg",raridade:"Comum",descricao:"Um bom p√£o de queijo deixa qualquer aventureiro bem nutrido e saud√°vel.",bonus:"+2 em testes de Fortitude.",preco:"T$ 10",ingredientes:"Farinha, queijo",custoIngredientes:"T$ 7",cdTeste:"15",icone:"ü•®"},{nome:"Pizza",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_deliciouspizza.jpg",raridade:"Comum",descricao:"Um disco de massa coberto com molho de tomate e queijo, este prato foi criado por Guido Venusto, um nobre de Ahlen que queria ascender socialmente. Inepto nas artes da intriga, Venusto resolveu manipular a corte pela barriga. Funcionou ‚Äî o prato foi um sucesso e o nobre cozinheiro teve muita influ√™ncia por anos. Certa noite, um espi√£o conseguiu roubar a receita. O segredo da pizza se espalhou e, sem seu trunfo, Venusto foi assassinado logo depois. Comer uma pizza deixa-o pronto para encarar qualquer perigo.",bonus:"+1 em todos os testes de resist√™ncia.",preco:"T$ 6",ingredientes:"Farinha, fruta, queijo",custoIngredientes:"T$ 10",cdTeste:"15",icone:"üçï"},{nome:"Porco Assado",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_123_roast.jpg",raridade:"Comum",descricao:"Um prato t√≠pico e popular em Deheon, que j√° se alastrou pelo Reinado. Comer um porco assado o deixa valente e brig√£o.",bonus:"+1 em testes de Luta.",preco:"T$ 36",ingredientes:"Porco, frutas, legume",custoIngredientes:"T$ 12",cdTeste:"15",icone:"üçñ"},{nome:"Prato do Aventureiro",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_fish_18.jpg",raridade:"Comum",descricao:"Um cozido de frango com legumes, esta √© uma refei√ß√£o simples, mas mant√©m qualquer um bem alimentado.",bonus:"Em sua pr√≥xima noite de sono, voc√™ aumenta a sua recupera√ß√£o de pontos de vida em +1 por n√≠vel.",preco:"T$ 2",ingredientes:"Ave, legume",custoIngredientes:"T$ 5",cdTeste:"10",icone:"üç≤"},{nome:"Salada de Salistick",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_goldcarpconsomme.jpg",raridade:"Comum",descricao:"Com folhas e carne de frango, esta salada foi criada no Reino dos M√©dicos, onde a sa√∫de √© uma grande preocupa√ß√£o. Uma alimenta√ß√£o leve, mas nutritiva.",bonus:"Aumenta seu deslocamento em +1,5m (1 quadrado).",preco:"T$ 4",ingredientes:"Ave, fruta, legume",custoIngredientes:"T$ 8",cdTeste:"15",icone:"ü•ó"},{nome:"Salada √âlfica",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_swirlingmistsoup.jpg",raridade:"Comum",descricao:"Esta salada vegetariana leva uma mistura de folhas, frutas e legumes. Segundo os relatos, a receita foi inventada em Len√≥rienn e passada aos reinos humanos de Lamnor, antes do isolamento dos povos. Felizmente, a salada se espalhou por Arton antes da queda do continente. Um prato leve e equilibrado, inspira disparos precisos.",bonus:"+1 em testes de Pontaria.",preco:"T$ 4",ingredientes:"Fruta, legume, verdura",custoIngredientes:"T$ 5",cdTeste:"15",icone:"ü•ó"},{nome:"Salada Imperial",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_braisedturtle.jpg",raridade:"Comum",descricao:"Uma mistura de folhas com bacon e queijo, esta salada √© leve, mas empolgante.",bonus:"+2 em testes de Iniciativa.",preco:"T$ 6",ingredientes:"Porco, queijo, verdura",custoIngredientes:"T$ 15",cdTeste:"15",icone:"ü•ó"},{nome:"Sashimi",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_valleystirfry.jpg",raridade:"Comum",descricao:"Uma iguaria da culin√°ria tamuraniana, este prato consiste de peixes e frutos do mar fatiados em pequenos peda√ßos e servidos com um molho t√≠pico do Imp√©rio de Jade. Uma refei√ß√£o refinada, leve e equilibrada.",bonus:"+2 em rolagens de dano √† dist√¢ncia.",preco:"T$ 22",ingredientes:"Peixe, molho tamuraniano",custoIngredientes:"T$ 37",cdTeste:"20",icone:"üç£"},{nome:"Sopa de Cogumelos",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_slime_02.jpg",raridade:"Comum",descricao:"Esta sopa expande sua percep√ß√£o m√≠stica.",bonus:"+2 em testes de Misticismo.",preco:"T$ 6",ingredientes:"Cogumelo, legume, verdura",custoIngredientes:"T$ 7",cdTeste:"15",icone:"üç≤"},{nome:"Sopa de Peixe",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_63.jpg",raridade:"Comum",descricao:"Um cozido de peixe com verduras, √© um prato simples e humilde, mas garante descanso relaxante.",bonus:"Em sua pr√≥xima noite de sono, voc√™ aumenta a sua recupera√ß√£o de pontos de mana em +1 por n√≠vel.",preco:"T$ 3",ingredientes:"Verdura, peixe",custoIngredientes:"T$ 8",cdTeste:"10",icone:"üç≤"},{nome:"Torta de Ma√ß√£",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_10.jpg",raridade:"Comum",descricao:"Dizem que, ap√≥s uma bruxa usar uma ma√ß√£ envenenada para matar uma princesa, Thantalla-Dhaedelin, a Rainha das Fadas, decretou que ma√ß√£s nunca mais fariam mal a ningu√©m. Se a lenda √© verdade, ou se ma√ß√£s s√£o simplesmente saud√°veis, ningu√©m sabe dizer, mas comer este prato fornece resist√™ncia a veneno +5.",bonus:"Resist√™ncia a veneno +5.",preco:"T$ 2",ingredientes:"Farinha, fruta",custoIngredientes:"T$ 4",cdTeste:"15",icone:"üç∞"},{nome:"Baga Celeste Cozida",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_goldcarpconsomme.jpg",raridade:"Comum",descricao:"Encontradas originalmente nas encostas invertidas de Vectora, estas bagas se espalharam por toda Arton. Quando preparadas adequadamente, fornecem qualidades m√≠sticas de flutua√ß√£o.",bonus:"Todo dano de queda que voc√™ sofre √© reduzido em ‚àí1d6.",preco:"T$ 25",ingredientes:"Fruta, especiaria",custoIngredientes:"T$ 35",cdTeste:"20",icone:"üåü"},{nome:"Cozido de Pimenta",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_159_fish_82.jpg",raridade:"Comum",descricao:"Um prato forte, capaz de trazer l√°grimas aos olhos do mais resistente dos comensais.",bonus:"+1 em Fortitude (cumulativo com outros itens) e +1 na rolagem do D20 para testes da per√≠cia Fortitude.",preco:"T$ 15",ingredientes:"Legume, especiaria",custoIngredientes:"T$ 12",cdTeste:"18",icone:"üå∂Ô∏è"},{nome:"Manjar de Sombras",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_cooking_80_ravenberrytart.jpg",raridade:"Comum",descricao:"A origem da receita original deste prato se perdeu, mas sua ess√™ncia se manteve inalterada. Consiste de um manjar com ingredientes cultivados em terras pr√≥ximas de cemit√©rios, que protege o corpo contra energias sombrias.",bonus:"Voc√™ ignora os pr√≥ximos 10 pontos de dano de trevas que sofrer.",preco:"T$ 40",ingredientes:"Cereal, especiaria, verdura",custoIngredientes:"T$ 28",cdTeste:"22",icone:"üåë"}].forEach(a=>{e.push({name:a.nome,category:"Prato",description:a.descricao,effects:a.bonus,icon:a.icone||"üçΩÔ∏è",type:"prato",data:a})}),[{nome:"Baba de Troll",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_potion_136.jpg",tipo:"N√£o alco√≥lica",descricao:"Uma bebida sem √°lcool, √† base de leite, castanhas, nozes e mel.",efeito:"+1d4 em um teste √† sua escolha at√© o fim do dia.",cd:"‚Äî",icone:"üßÉ"},{nome:"Barba Queimada",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_05.jpg",tipo:"Alco√≥lica",descricao:"Forte e amarga, esta cerveja an√£ fortalece o corpo e o esp√≠rito.",efeito:"Redu√ß√£o de Dano 2.",cd:"20",icone:"üç∫"},{nome:"Cerveja Deheoni",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_08.jpg",tipo:"Alco√≥lica",descricao:"A bebida mais comum nas tavernas do Reinado.",efeito:"+1 em testes de resist√™ncia.",cd:"15",icone:"üçª"},{nome:"Dil√≠nio",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_11.jpg",tipo:"Alco√≥lica",descricao:"Destilado tradicional de Mortenstenn, feito com um cereal que s√≥ cresce no continente sul. A receita se perdeu ap√≥s as invas√µes duyshidakk, e poucos barris chegaram ao Reinado.",efeito:"O limite de gasto de PM aumenta em +1.",cd:"20",observacao:"N√£o pode ser fabricado",icone:"ü•É"},{nome:"Grogue Negro",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_12.jpg",tipo:"Alco√≥lica",descricao:"Rum misturado com especiarias. Seu nome vem de sua origem ‚Äî piratas do Conclave, que atuam no Mar Negro ‚Äî e n√£o da cor da bebida, que √© dourada clara.",efeito:"Quando voc√™ usa Aud√°cia, o b√¥nus fornecido pelo poder aumenta em +1.",cd:"15",icone:"üè¥‚Äç‚ò†Ô∏è"},{nome:"Grogue Rubro",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_13.jpg",tipo:"Alco√≥lica",descricao:"Varia√ß√£o do grogue negro, com especiarias picantes que fazem a bebida adquirir uma colora√ß√£o avermelhada ‚Äî e quem a bebe, certa inclina√ß√£o para a viol√™ncia.",efeito:"Voc√™ pode usar Aud√°cia para testes de ataque.",cd:"20",icone:"üî•"},{nome:"Hidromel Uivante",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_14.jpg",tipo:"Alco√≥lica",descricao:"Fabricada nas montanhas geladas, esta bebida aquece e incita.",efeito:"+2 em rolagens de dano corpo a corpo.",cd:"20",icone:"‚ùÑÔ∏è"},{nome:"Licor Fe√©rico",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_15.jpg",tipo:"Alco√≥lica",descricao:"De apar√™ncia enevoada e gosto adocicado, dizem que √© feito na Pondsm√¢nia e trazido com dificuldade ao Reinado. Alguns acham que √© inven√ß√£o dos taverneiros, at√© provarem uma dose.",efeito:"Escolha uma habilidade. O custo para ativ√°-la diminui em ‚Äì1 PM.",cd:"25",icone:"‚ú®"},{nome:"Sidra Ahleniense",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_16.jpg",tipo:"Alco√≥lica",descricao:"Esta bebida doce deixa qualquer um mais falante.",efeito:"+2 em testes de per√≠cias originalmente baseadas em Carisma.",cd:"15",icone:"üçè"},{nome:"Vinho Pruss",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_17.jpg",tipo:"Alco√≥lica",descricao:"Batizado em homenagem ao antigo Rei-Imperador Thormy ‚Äî dizem que era o favorito do monarca.",efeito:"Concede 3 pontos de mana tempor√°rios.",cd:"15",icone:"üç∑"},{nome:"Vinho √âlfico",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_18.jpg",tipo:"Alco√≥lica",descricao:"De sabor complexo, agu√ßa a mente.",efeito:"+1 na CD para resistir √†s suas habilidades.",cd:"20",icone:"üåø"}].forEach(a=>{e.push({name:a.nome,category:"Bebida",description:a.descricao,effects:a.efeito,icon:a.icone||"ü•§",type:"bebida",data:a})}),me().forEach(a=>{e.push({name:a.nome,category:"Po√ß√£o",description:a.descricao,effects:a.efeito,icon:a.icone||"üß™",type:"pocao",data:a})}),da().forEach(a=>{e.push({name:a.nome,category:"Condi√ß√£o",description:a.descricao,effects:a.efeitos,icon:a.icone||"‚ö°",type:"condition",data:a})}),Object.keys(xe).forEach(a=>{const o=xe[a];e.push({name:a,category:"Per√≠cia",description:o.descricao,effects:o.usos?o.usos.map(e=>e.titulo).join(", "):"",icon:"üéØ",type:"skill",data:o})});const a=window.grimorioSpellsCache||[];a&&a.length>0?a.forEach(a=>{const o="arcana"===a.tradition?"Arcana":"divina"===a.tradition?"Divina":"universal"===a.tradition?"Universal":a.tradition,t=a.system?.description?.value||"";e.push({name:a.name,category:"Magia",description:`${o} - ${a.circuloDisplay} - ${a.escola}`,effects:t,icon:"‚ú®",type:"spell",data:{...a,tradition:o,circle:a.circulo,school:a.escola}})}):[{name:"Luz Sagrada",tradition:"Divina",circle:1,school:"Evoca√ß√£o"},{name:"Bola de Fogo",tradition:"Arcana",circle:3,school:"Evoca√ß√£o"},{name:"Cura Ferimentos Leves",tradition:"Divina",circle:1,school:"Necromancia"},{name:"Detectar Magia",tradition:"Universal",circle:1,school:"Adivinha√ß√£o"}].forEach(a=>{e.push({name:a.name,category:"Magia",description:`${a.tradition} - ${a.circle}¬∫ C√≠rculo - ${a.school}`,effects:"",icon:"‚ú®",type:"spell",data:a})}),[{name:"Acuidade com Arma",description:"Quando usa uma arma corpo a corpo leve ou uma arma de arremesso, voc√™ pode usar sua Destreza em vez de For√ßa nos testes de ataque e rolagens de dano."},{name:"Arma Secund√°ria Grande",description:"Voc√™ pode empunhar duas armas de uma m√£o com o poder Estilo de Duas Armas."},{name:"Arremesso Potente",description:"Quando usa uma arma de arremesso, voc√™ pode usar sua For√ßa em vez de Destreza nos testes de ataque."},{name:"Ataque Poderoso",description:"Sempre que faz um ataque corpo a corpo, voc√™ pode sofrer ‚Äì2 no teste de ataque para receber +5 na rolagem de dano."},{name:"Bloqueio com Escudo",description:"Quando sofre dano, voc√™ pode gastar 1 PM para receber redu√ß√£o de dano igual ao b√¥nus na Defesa que seu escudo fornece contra este dano."}].forEach(a=>{e.push({name:a.name,category:"Poder de Combate",description:a.description,effects:"",icon:"‚öîÔ∏è",type:"combat_power",data:a})}),[{name:"Azgher",title:"Deus-Sol",description:"Deus da luz e do calor, venerado por viajantes e combatentes das trevas."},{name:"Kallyadranoch",title:"Deus-Drag√£o",description:"Deus da sabedoria e conhecimento, venerado por magos e s√°bios."},{name:"Megalokk",title:"Deus da Guerra",description:"Deus da guerra e da for√ßa, venerado por guerreiros e b√°rbaros."}].forEach(a=>{e.push({name:`${a.name} - ${a.title}`,category:"Divindade",description:a.description,effects:"",icon:"üôè",type:"divinity",data:a})});const o=L(),t=["Marca da Presa","Rastreador"],s=parseInt(localStorage.getItem(T)||"1",10)||1,r=J(s);return t.forEach(a=>{e.push({name:a,category:"Habilidade",description:"Habilidade autom√°tica do Ca√ßador",effects:"Sempre dispon√≠vel",icon:"üéØ",type:"ability",data:{nome:a,tipo:"autom√°tica"}})}),r.forEach(a=>{e.push({name:a,category:"Habilidade",description:`Habilidade especial dispon√≠vel no n√≠vel ${s}`,effects:"Habilidade de classe",icon:"üåü",type:"ability",data:{nome:a,tipo:"especial"}})}),o.forEach(a=>{t.includes(a)||r.includes(a)||e.push({name:a,category:"Habilidade",description:"Habilidade aprendida pelo Ca√ßador",effects:"Habilidade escolhida",icon:"üéØ",type:"ability",data:{nome:a,tipo:"aprendida"}})}),Se().forEach(a=>{e.push({name:a,category:"Poder de Destino",description:"Poder de destino aprendido pelo personagem",effects:"Poder de destino",icon:"‚≠ê",type:"destiny_power",data:{nome:a,tipo:"destino"}})}),e}().filter(a=>`${a.name} ${a.category} ${a.description||""} ${a.effects||""}`.toLowerCase().includes(e.toLowerCase()));if(n.innerHTML="",0===a.length){const e=document.createElement("div");return e.textContent="Nenhum resultado encontrado.",e.style.color="#888",e.style.textAlign="center",e.style.padding="20px",void n.appendChild(e)}const o=a.slice(0,50);o.forEach((e,a)=>{const t=document.createElement("div");t.style.display="flex",t.style.alignItems="center",t.style.padding="10px",a<o.length-1&&(t.style.borderBottom="1px solid rgba(110,198,255,0.2)"),t.style.cursor="pointer",t.style.transition="background 0.2s";const s=document.createElement("div");if(s.style.width="32px",s.style.height="32px",s.style.marginRight="10px",s.style.flexShrink="0",s.style.borderRadius="6px",s.style.border="2px solid rgba(110,198,255,0.3)",s.style.background="#23243a",s.style.overflow="hidden",s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="center",e.data&&e.data.iconeUrl){const a=ua(e.data.iconeUrl,e.name,e.icon||"üìÑ",{width:"100%",height:"100%",borderRadius:"4px",objectFit:"cover",showSkeleton:!0});s.appendChild(a)}else{const a=document.createElement("div");a.textContent=e.icon||"üìÑ",a.style.fontSize="16px",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.width="100%",a.style.height="100%",s.appendChild(a)}const r=document.createElement("div");r.style.flex="1";const i=document.createElement("div");i.textContent=e.name,i.style.color="#6ec6ff",i.style.fontWeight="bold",i.style.fontSize="14px";const c=document.createElement("div");c.textContent=e.category,c.style.color="#888",c.style.fontSize="12px",c.style.marginTop="2px";const d=document.createElement("div");d.textContent=e.description||e.effects||"",d.style.color="#ecf0f1",d.style.fontSize="12px",d.style.marginTop="4px",d.style.lineHeight="1.3",r.appendChild(i),r.appendChild(c),r.appendChild(d),t.appendChild(s),t.appendChild(r),t.onmouseover=()=>{t.style.background="rgba(110,198,255,0.1)"},t.onmouseout=()=>{t.style.background="transparent"},t.onclick=()=>{!function(e){const a=document.getElementById("quick-search-modal"),o=document.getElementById("quick-search-overlay");switch(a&&a.remove(),o&&o.remove(),e.type){case"prato":ue(e.data);break;case"bebida":pe(e.data);break;case"pocao":ge(e.data);break;case"condition":w(e.data);break;case"skill":{const a=e.name,o=[{nome:"Acrobacia",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Acrobacia}}{{theroll=[[1d20+[[@{${I()}|acrobaciatotal}]]]]}}`},{nome:"Adestramento",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Adestramento}}{{theroll=[[1d20+[[@{${I()}|adestramentototal}]]]]}}`},{nome:"Atletismo",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Atletismo}}{{theroll=[[1d20+[[@{${I()}|atletismototal}]]]]}}`},{nome:"Atua√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Atua√ß√£o}}{{theroll=[[1d20+[[@{${I()}|atuacaototal}]]]]}}`},{nome:"Cavalgar",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Cavalgar}}{{theroll=[[1d20+[[@{${I()}|cavalgartotal}]]]]}}`},{nome:"Conhecimento",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Conhecimento}}{{theroll=[[1d20+[[@{${I()}|conhecimentototal}]]]]}}`},{nome:"Cura",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Cura}}{{theroll=[[1d20+[[@{${I()}|curatotal}]]]]}}`},{nome:"Diplomacia",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Diplomacia}}{{theroll=[[1d20+[[@{${I()}|diplomaciatotal}]]]]}}`},{nome:"Engana√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Engana√ß√£o}}{{theroll=[[1d20+[[@{${I()}|enganacaototal}]]]]}}`},{nome:"Fortitude",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Fortitude}}{{theroll=[[1d20+[[@{${I()}|fortitudetotal}]]]]}}`},{nome:"Furtividade",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Furtividade}}{{theroll=[[1d20+[[@{${I()}|furtividadetotal}]]]]}}`},{nome:"Guerra",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Guerra}}{{theroll=[[1d20+[[@{${I()}|guerratotal}]]]]}}`},{nome:"Iniciativa",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Iniciativa}}{{theroll=[[1d20+[[@{${I()}|iniciativatotal}]] &{tracker}]]}}`},{nome:"Intimida√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Intimida√ß√£o}}{{theroll=[[1d20+[[@{${I()}|intimidacaototal}]]]]}}`},{nome:"Intui√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Intui√ß√£o}}{{theroll=[[1d20+[[@{${I()}|intuicaototal}]]]]}}`},{nome:"Investiga√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Investiga√ß√£o}}{{theroll=[[1d20+[[@{${I()}|investigacaototal}]]]]}}`},{nome:"Jogatina",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Jogatina}}{{theroll=[[1d20+[[@{${I()}|jogatinatotal}]]]]}}`},{nome:"Ladinagem",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Ladinagem}}{{theroll=[[1d20+[[@{${I()}|ladinagemtotal}]]]]}}`},{nome:"Misticismo",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Misticismo}}{{theroll=[[1d20+[[@{${I()}|misticismototal}]]]]}}`},{nome:"Nobreza",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Nobreza}}{{theroll=[[1d20+[[@{${I()}|nobrezatotal}]]]]}}`},{nome:"Of√≠cio",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Of√≠cio}}{{theroll=[[1d20+[[@{${I()}|oficiototal}]]]]}}`},{nome:"Percep√ß√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Percep√ß√£o}}{{theroll=[[1d20+[[@{${I()}|percepcaototal}]]]]}}`},{nome:"Pilotagem",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Pilotagem}}{{theroll=[[1d20+[[@{${I()}|pilotagemtotal}]]]]}}`},{nome:"Pontaria",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Pontaria}}{{theroll=[[1d20+[[@{${I()}|pontariatotal}]]]]}}`},{nome:"Reflexos",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Reflexos}}{{theroll=[[1d20+[[@{${I()}|reflexostotal}]]]]}}`},{nome:"Religi√£o",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Religi√£o}}{{theroll=[[1d20+[[@{${I()}|religiaototal}]]]]}}`},{nome:"Sobreviv√™ncia",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Sobreviv√™ncia}}{{theroll=[[1d20+[[@{${I()}|sobrevivenciatotal}]]]]}}`},{nome:"Vontade",comando:`&{template:t20}{{character=@{${I()}|character_name}}}{{rollname=Vontade}}{{theroll=[[1d20+[[@{${I()}|vontadetotal}]]]]}}`}].find(e=>e.nome===a);o?(Z(o.comando),A(`Teste de ${a} executado!`)):we(a);break}case"spell":if(e.data&&e.data.name){re((window.grimorioSpellsCache||[]).find(a=>a.name===e.data.name)||{name:e.data.name,tradition:e.data.tradition?.toLowerCase()||"universal",circulo:e.data.circle||1,circuloDisplay:`${e.data.circle||1}¬∫ C√≠rculo`,escola:e.data.school||"Universal",execucao:"A√ß√£o Padr√£o",system:{description:{value:e.effects||"Descri√ß√£o n√£o dispon√≠vel"},alcance:"Curto",duracao:"Cena",alvo:"1 Alvo",resistencia:"Nenhuma",custo:"1 PM"}})}break;case"combat_power":Z(`&{template:t20-info}{{infoname=${e.data.name||"Poder de Combate"}}}{{description=${e.data.description||""}}}`),A(`Poder "${e.name}" compartilhado no chat!`),Ce();break;case"divinity":Z(`&{template:t20-info}{{infoname=${e.name}}}{{description=${e.description||""}}}`),A(`Divindade "${e.name}" compartilhada no chat!`),Ce();break;case"ability":He(e.data.nome,e.data.nome);break;case"destiny_power":Z(`&{template:t20-info}{{infoname=${e.name}}}{{description=${e.description||""}}}`),A(`Poder de Destino "${e.name}" compartilhado no chat!`),Ce();break;default:Z(`&{template:t20-info}{{infoname=${e.name}}}{{description=${e.description||e.effects||""}}}`),Ce()}}(e)},n.appendChild(t)})}(a);else{n.innerHTML="";const e=document.createElement("div");e.textContent="Digite para come√ßar a buscar...",e.style.color="#888",e.style.textAlign="center",e.style.padding="20px",n.appendChild(e)}}),r.addEventListener("keydown",e=>{"Escape"===e.key&&o.remove()}),o.addEventListener("click",e=>{e.target===o&&o.remove()});const i=document.createElement("div");i.textContent="Digite para come√ßar a buscar...",i.style.color="#888",i.style.textAlign="center",i.style.padding="20px",n.appendChild(i)}()),e.ctrlKey&&"g"===e.key&&(e.preventDefault(),e.stopPropagation(),ne())})},1e3)});const je="tormenta-20-hotbars-animal-companion-type";function Pe(){return localStorage.getItem(je)||""}function Ae(e){localStorage.setItem(je,e)}const _e="tormenta-20-hotbars-selected-divinity",$e="tormenta-20-hotbars-selected-divinity-power";function Ie(){return localStorage.getItem(_e)||null}function Te(e){localStorage.setItem(_e,e)}function De(){return localStorage.getItem($e)||null}function Me(e){localStorage.setItem($e,e)}function Re(e){return De()===e}function Ve(){try{return localStorage.getItem(i)||null}catch(e){return g.log("Erro ao carregar ra√ßa selecionada:",e),null}}function Be(e){try{localStorage.setItem(i,e)}catch(e){g.log("Erro ao salvar ra√ßa selecionada:",e)}}function Ne(){try{return localStorage.getItem(c)||null}catch(e){return g.log("Erro ao carregar tipo de ra√ßa selecionado:",e),null}}function Oe(e){try{localStorage.setItem(c,e)}catch(e){g.log("Erro ao salvar tipo de ra√ßa selecionado:",e)}}function Fe(e){const a=Ve(),o=Ne();if("Suraggel"===a){if("Aggelus"===o&&"Luz Sagrada"===e)return!0;if("Sulfure"===o&&"Sombras Profanas"===e)return!0}return!1}function Ue(e){const a=[];if(Qe("prato_assado_de_carnes")&&a.push({label:"Assado de Carnes (+2 dano)",value:"assado_carnes",dice:"2",desc:"*+ Assado de Carnes (+2 dano)*",origin:"Prato Especial",priority:1}),Qe("prato_batata_valkariana")&&a.push({label:"Batata Valkariana (+1d6 acerto)",value:"batata_valkariana",attackMod:"1d6",desc:"*+ Batata Valkariana (+1d6 acerto)*",origin:"Prato Especial",priority:1}),Qe("prato_bolo_de_cenoura")&&a.push({label:"Bolo de Cenoura (+2 Percep√ß√£o)",value:"bolo_cenoura",attackMod:2,desc:"*+ Bolo de Cenoura (+2 Percep√ß√£o)*",origin:"Prato Especial",priority:2}),Qe("prato_estrogonofe")&&a.push({label:"Estrogonofe (+2 Vontade)",value:"estrogonofe",attackMod:2,desc:"*+ Estrogonofe (+2 Vontade)*",origin:"Prato Especial",priority:2}),Qe("prato_futomaki")&&a.push({label:"Futomaki (+2 Diplomacia)",value:"futomaki",attackMod:2,desc:"*+ Futomaki (+2 Diplomacia)*",origin:"Prato Especial",priority:2}),Qe("prato_pao_de_queijo")&&a.push({label:"P√£o de Queijo (+2 Fortitude)",value:"pao_queijo",attackMod:2,desc:"*+ P√£o de Queijo (+2 Fortitude)*",origin:"Prato Especial",priority:2}),Qe("prato_porco_assado")&&a.push({label:"Porco Assado (+1 Luta)",value:"porco_assado",attackMod:1,desc:"*+ Porco Assado (+1 Luta)*",origin:"Prato Especial",priority:2}),Qe("prato_salada_elfica")&&a.push({label:"Salada Elfica (+1 Pontaria)",value:"salada_elfica",attackMod:1,desc:"*+ Salada Elfica (+1 Pontaria)*",origin:"Prato Especial",priority:2}),Qe("prato_salada_imperial")&&a.push({label:"Salada Imperial (+2 Iniciativa)",value:"salada_imperial",attackMod:2,desc:"*+ Salada Imperial (+2 Iniciativa)*",origin:"Prato Especial",priority:2}),Qe("prato_sopa_de_cogumelo")&&a.push({label:"Sopa de Cogumelo (+2 Misticismo)",value:"sopa_cogumelo",attackMod:2,desc:"*+ Sopa de Cogumelo (+2 Misticismo)*",origin:"Prato Especial",priority:2}),Qe("prato_pizza")&&a.push({label:"Pizza (+1 Vontade/Reflexos/Fortitude)",value:"pizza",attackMod:1,desc:"*+ Pizza (+1 Vontade/Reflexos/Fortitude)*",origin:"Prato Especial",priority:2}),Qe("prato_baga_celeste_cozida")&&a.push({label:"Baga Celeste Cozida (Reduz dano de queda)",value:"baga_celeste_cozida",desc:"*+ Baga Celeste Cozida (Dano de queda reduzido em ‚àí1d6)*",origin:"Prato Especial",priority:2}),Qe("prato_cozido_de_pimenta")&&a.push({label:"Cozido de Pimenta (+1 Fortitude)",value:"cozido_de_pimenta",attackMod:1,desc:"*+ Cozido de Pimenta (+1 Fortitude)*",origin:"Prato Especial",priority:2}),Qe("prato_manjar_de_sombras")&&a.push({label:"Manjar de Sombras (Prote√ß√£o contra trevas)",value:"manjar_de_sombras",desc:"*+ Manjar de Sombras (Ignora pr√≥ximos 10 pontos de dano de trevas)*",origin:"Prato Especial",priority:2}),Qe("bebida_baba_de_troll")&&a.push({label:"Baba de Troll (+1d4 acerto)",value:"baba_de_troll",attackMod:"1d4",desc:"*+ Baba de Troll (+1d4 acerto)*",origin:"Bebida Artoniana",priority:1}),Qe("bebida_hidromel_uivante")&&a.push({label:"Hidromel Uivante (+2 dano corpo a corpo)",value:"hidromel_uivante",dice:"2",desc:"*+ Hidromel Uivante (+2 dano corpo a corpo)*",origin:"Bebida Artoniana",priority:2}),a.push({label:"Flanqueado (+2 acerto)",value:"flanqueado",attackMod:2,desc:"*+ Flanqueado*",origin:"Condi√ß√£o de Combate"}),Re("Espada Solar")&&a.push({label:"Espada Solar (+1d6 dano)",value:"espada_solar",dice:"1d6",desc:"*+ Espada Solar*",origin:"Divindade: Azgher"}),Re("Inimigo de Tenebra")&&a.push({label:"Inimigo de Tenebra (+1d6 vs mortos-vivos)",value:"inimigo_tenebra",dice:"1d6",desc:"*+ Inimigo de Tenebra*",origin:"Divindade: Azgher"}),K("Escaramu√ßa")&&a.push({label:"Escaramu√ßa (+1d8 dano)",value:"escaramurca",dice:"1d8",desc:"*+ Escaramu√ßa*",origin:"Habilidade de Ca√ßador"}),K("Marca da Presa")){let o=0,t="",s="";e>=17?(o=3,t="+2d10",s="+3 acerto, +2d10 dano, crit 16+"):e>=13?(o=3,t="+2d8",s="+3 acerto, +2d8 dano, crit 16+"):e>=9?(o=3,t="+1d12",s="+3 acerto, +1d12 dano, crit 16+"):e>=5?(o=2,t="+1d8",s="+2 acerto, +1d8 dano, crit 16+"):(o=1,t="+1d4",s="+1 acerto, +1d4 dano, crit 16+"),a.push({label:`Marca da Presa (${s})`,value:"marca_presa",dice:t.replace("+",""),attackMod:o,critMod:-2,desc:"*+ Marca da Presa*",origin:"Habilidade de Ca√ßador"})}if(K("Inimigo de (Criatura)")&&a.push({label:"Inimigo (dobra margem de cr√≠tico)",value:"inimigo",desc:"*+ Inimigo*",origin:"Habilidade de Ca√ßador"}),K("Companheiro Animal")&&"assassino"===Pe()){let o="1d6",t="*+ Ataque Furtivo*";(parseInt(e,10)||1)>=15&&(o="2d6"),a.push({label:`Ataque Furtivo (+${o} dano)`,value:"ataque_furtivo",dice:o,desc:t,origin:"Companheiro Animal: Assassino"})}return Qe("cachecol_sombrio")&&a.push({label:"Ataque Sombrio (+1d6 dano furtivo)",value:"ataque_sombrio",dice:"1d6",desc:"*+ Ataque Sombrio*",origin:"Item: Cachecol Sombrio"}),a.sort((e,a)=>{const o=e.priority||0;return(a.priority||0)-o}),a}const Le={createAbility:e=>({nome:e.nome,descricao:e.descricao,onClick:()=>He(e.nome,e.nome)})};function We(){const e=document.getElementById("abilities-popup");e&&e.remove();const a=document.getElementById("abilities-overlay");a&&a.remove();const o=document.createElement("div");o.id="abilities-overlay",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.background="rgba(0,0,0,0.5)",o.style.zIndex="10000",o.onclick=()=>{o.remove(),t.remove()},document.body.appendChild(o);const t=document.createElement("div");t.id="abilities-popup",t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.background="rgba(30,30,40,0.98)",t.style.border="2px solid #6ec6ff",t.style.borderRadius="12px",t.style.padding="18px 20px 16px 20px",t.style.zIndex="10001",t.style.maxWidth="400px",t.style.maxHeight="600px",t.style.overflowY="auto",t.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="stretch";const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="space-between",s.style.alignItems="center",s.style.marginBottom="15px",s.style.width="100%";const r=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{t.remove();const e=document.getElementById("abilities-overlay");e&&e.remove()}}),n=document.createElement("h3");n.textContent="Poderes",n.style.color="#ecf0f1",n.style.margin="0",n.style.fontSize="17px",n.style.fontWeight="bold",s.appendChild(n),s.appendChild(r.render()),t.appendChild(s);const i=document.createElement("div");i.style.position="relative",i.style.marginBottom="10px";const c=document.createElement("input");c.type="text",c.placeholder="Filtrar poderes...",c.style.width="100%",c.style.padding="10px 28px 10px 12px",c.style.borderRadius="8px",c.style.border="1px solid #6ec6ff",c.style.background="#23243a",c.style.color="#fff",c.style.fontSize="14px",c.style.outline="none",c.style.boxSizing="border-box",c.style.fontSize="15px";const d=document.createElement("span");d.textContent="√ó",d.style.position="absolute",d.style.right="8px",d.style.top="50%",d.style.transform="translateY(-50%)",d.style.cursor="pointer",d.style.color="#6ec6ff",d.style.fontSize="18px",d.style.display="none",d.onclick=()=>{c.value="",c.dispatchEvent(new Event("input")),c.focus()},c.oninput=()=>{c.value.length>0?d.style.display="block":d.style.display="none",u()},i.appendChild(c),t.appendChild(i);const l=z("power");t.appendChild(l);const m=document.createElement("div");function u(){const e=c.value.trim().toLowerCase();m.innerHTML="";const a=[];K("Ervas Curativas")&&a.push(Le.createAbility({nome:"Ervas Curativas",descricao:"Voc√™ pode gastar uma a√ß√£o completa e uma quantidade de PM a sua escolha (limitado por sua Sabedoria) para aplicar ervas que curam ou desintoxicam em voc√™ ou num aliado adjacente. Para cada PM que gastar, cura 2d6 PV ou remove uma condi√ß√£o envenenado afetando o alvo. (JdA:51)"})),K("Bote")&&a.push(Le.createAbility({nome:"Bote",descricao:"Se estiver empunhando duas armas e fizer uma investida, voc√™ pode pagar 1 PM para fazer um ataque adicional com sua arma secund√°ria. Pr√©-requisito: Ambidestria, 6¬∫ n√≠vel de ca√ßador."})),K("Emboscar")&&a.push(Le.createAbility({nome:"Emboscar",descricao:"Voc√™ pode gastar 2 PM para realizar uma a√ß√£o padr√£o adicional em seu turno. Voc√™ s√≥ pode usar este poder na primeira rodada de um combate. Pr√©-requisito: treinado em Furtividade."}));const o=a.filter(a=>a.nome.toLowerCase().includes(e));if(0===o.length){const a=document.createElement("div");if(a.style.textAlign="center",a.style.padding="20px",a.style.color="#999",a.style.fontSize="14px",a.style.fontStyle="italic",e.length>0){const a=ye(e,"habilidade","blue");return void m.appendChild(a)}a.innerHTML='\n                            <div style="margin-bottom: 8px;">‚ú®</div>\n                            <div>Nenhuma habilidade dispon√≠vel</div>\n                            <div style="margin-top: 8px; font-size: 12px;">Aprenda habilidades no modal da classe para v√™-las aqui</div>\n                        ',m.appendChild(a)}else o.forEach(e=>{const a=document.createElement("button");a.textContent=e.nome,a.style.width="100%",a.style.background="#23243a",a.style.color="#fff",a.style.border="1px solid #6ec6ff",a.style.borderRadius="6px",a.style.padding="10px 0",a.style.fontSize="15px",a.style.fontWeight="bold",a.style.cursor="pointer",a.style.transition="all 0.2s",a.style.position="relative";let o=null,t=null;a.onmouseover=()=>{a.style.background="#6ec6ff",a.style.color="#23243a",t=setTimeout(()=>{o&&o.remove(),o=document.createElement("div"),o.style.position="fixed",o.style.background="rgba(20,20,30,0.98)",o.style.border="2px solid #6ec6ff",o.style.borderRadius="8px",o.style.padding="12px",o.style.minWidth="280px",o.style.maxWidth="320px",o.style.zIndex="10004",o.style.boxShadow="0 4px 16px rgba(0,0,0,0.8)",o.style.pointerEvents="none";const t=a.getBoundingClientRect();o.style.left=t.right+10+"px",o.style.top=t.top+"px";const s=document.createElement("div");s.style.display="flex",s.style.flexDirection="column",s.style.gap="8px";const r=document.createElement("div");r.textContent=e.nome,r.style.color="#6ec6ff",r.style.fontSize="16px",r.style.fontWeight="bold",r.style.marginBottom="4px",s.appendChild(r);const n=document.createElement("div");n.textContent="Habilidade de Classe",n.style.background="#6ec6ff",n.style.color="#23243a",n.style.fontSize="11px",n.style.fontWeight="bold",n.style.borderRadius="4px",n.style.padding="2px 8px",n.style.display="inline-block",n.style.width="fit-content",s.appendChild(n);const i=document.createElement("div");"Bote"===e.nome||"Emboscar"===e.nome?(i.textContent="A√ß√£o Livre",i.style.background="#ff6e6e"):(i.textContent="Poder de Ca√ßador",i.style.background="#4a90e2"),i.style.color="#fff",i.style.fontSize="11px",i.style.fontWeight="bold",i.style.borderRadius="4px",i.style.padding="2px 8px",i.style.display="inline-block",i.style.width="fit-content",i.style.marginTop="2px",s.appendChild(i);const c=document.createElement("div");"Ervas Curativas"===e.nome?c.textContent="A√ß√£o completa: Gaste PM para curar 2d6 PV por PM ou remover condi√ß√£o envenenado de voc√™ ou aliado adjacente.":"Bote"===e.nome?c.textContent="A√ß√£o livre: Pague 1 PM para fazer um ataque adicional com arma secund√°ria durante uma investida.":"Emboscar"===e.nome&&(c.textContent="A√ß√£o livre: Pague 2 PM para realizar uma a√ß√£o padr√£o adicional na primeira rodada de combate."),c.style.color="#ecf0f1",c.style.fontSize="13px",c.style.lineHeight="1.4",c.style.marginTop="6px",s.appendChild(c),o.appendChild(s),document.body.appendChild(o)},300)},a.onmouseout=()=>{a.style.background="#23243a",a.style.color="#fff",t&&(clearTimeout(t),t=null),o&&(o.remove(),o=null)},a.onclick=e.onClick,m.appendChild(a)})}m.style.display="flex",m.style.flexDirection="column",m.style.gap="8px",m.style.marginTop="2px",t.appendChild(m),u(),document.body.appendChild(t),S(t,"blue")}function He(e,a){if("Bote"===e){const e=document.getElementById("power-cast-popup");e&&e.remove();const o=document.getElementById("power-cast-overlay");o&&o.remove();const t=document.createElement("div");t.id="power-cast-overlay",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0,0,0,0.5)",t.style.zIndex="10002",t.onclick=()=>{t.remove(),s.remove()},document.body.appendChild(t);const s=document.createElement("div");s.id="power-cast-popup",s.style.position="fixed",s.style.top="50%",s.style.left="50%",s.style.transform="translate(-50%, -50%)",s.style.background="rgba(30,30,40,0.98)",s.style.border="2px solid #ff6e6e",s.style.borderRadius="12px",s.style.padding="20px",s.style.zIndex="10003",s.style.maxWidth="400px",s.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="stretch";const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="center",r.style.marginBottom="10px",r.style.width="100%";const n=document.createElement("div");n.style.display="flex",n.style.flexDirection="column",n.style.alignItems="flex-start",n.style.gap="2px";const i=document.createElement("h3");i.textContent=a,i.style.color="#ecf0f1",i.style.margin="0",i.style.fontSize="18px",i.style.fontWeight="bold",n.appendChild(i);const c=document.createElement("span");c.textContent="Habilidade de Combate",c.style.background="#ff6e6e",c.style.color="#23243a",c.style.fontSize="12px",c.style.fontWeight="bold",c.style.borderRadius="8px",c.style.padding="2px 10px",c.style.marginTop="2px",c.style.display="inline-block",c.style.letterSpacing="0.5px",c.style.boxShadow="0 1px 4px rgba(0,0,0,0.08)",n.appendChild(c),r.appendChild(n);const d=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{s.remove();const e=document.getElementById("power-cast-overlay");e&&e.remove()}});r.appendChild(d.render()),s.appendChild(r);const l=document.createElement("div");l.style.background="#1a1a2e",l.style.border="1px solid #ff6e6e",l.style.borderRadius="8px",l.style.padding="12px",l.style.marginBottom="15px",l.style.display="flex",l.style.flexDirection="column",l.style.gap="6px";const m=document.createElement("div");m.textContent="Descri√ß√£o",m.style.color="#ff6e6e",m.style.fontSize="13px",m.style.fontWeight="bold",m.style.marginBottom="2px",l.appendChild(m);const u=document.createElement("div");u.style.color="#ecf0f1",u.style.fontSize="14px",u.style.lineHeight="1.4",u.textContent="Se estiver empunhando duas armas e fizer uma investida, voc√™ pode pagar 1 PM para fazer um ataque adicional com sua arma secund√°ria. Pr√©-requisito: Ambidestria, 6¬∫ n√≠vel de ca√ßador.",l.appendChild(u);const p=document.createElement("button");p.textContent="Compartilhar",p.style.background="none",p.style.border="1px solid #ff6e6e",p.style.color="#ff6e6e",p.style.fontSize="14px",p.style.fontWeight="bold",p.style.borderRadius="6px",p.style.padding="8px 0",p.style.marginTop="10px",p.style.width="100%",p.style.cursor="pointer",p.style.transition="all 0.2s",p.onmouseover=()=>{p.style.background="#ff6e6e",p.style.color="#23243a"},p.onmouseout=()=>{p.style.background="none",p.style.color="#ff6e6e"},p.onclick=()=>{Z(`&{template:t20-info}{{infoname=Bote}}{{description=${u.textContent}}}`)},l.appendChild(p),s.appendChild(l);const g=document.createElement("button");g.textContent="Executar Ataque com Bote",g.style.background="#ff6e6e",g.style.color="#23243a",g.style.border="none",g.style.borderRadius="8px",g.style.padding="12px 0",g.style.fontSize="16px",g.style.fontWeight="bold",g.style.cursor="pointer",g.style.transition="all 0.2s",g.style.marginBottom="10px",g.onmouseover=()=>{g.style.background="#ff8e8e"},g.onmouseout=()=>{g.style.background="#ff6e6e"},g.onclick=()=>{let e=[];try{const a=localStorage.getItem("tormenta-20-hotbars-attack-effects");a&&(e=JSON.parse(a))}catch(a){console.error("Erro ao carregar sele√ß√£o:",a),e=[]}const a=Ue(parseInt(localStorage.getItem(T)||"1",10)||1);let o="",t="",s=18,r=2,n=!1,i=!1;a.forEach(a=>{e.includes(a.value)&&(a.dice&&(o+=`+${a.dice}`),a.critMod&&(s+=a.critMod),a.attackMod&&(r+=a.attackMod),t+="%NEWLINE% "+a.desc,"marca_presa"===a.value&&(n=!0),"inimigo"===a.value&&(i=!0))}),i&&n&&16===s&&(s=14),Z(`/em ${$()} usa **Bote** (1 PM) para fazer um ataque adicional com sua arma secund√°ria!`),he(`&{template:t20-attack}{{character=@{${I()}|character_name}}}{{attackname=Ataque Adicional}}{{attackroll=[[1d20cs>${s}+[[@{${I()}|pontariatotal}+@{${I()}|condicaomodataquedis}+@{${I()}|condicaomodataque}]]+${r}+@{${I()}|ataquetemp}]]}} {{damageroll=[[2d8+@{${I()}|des_mod}+0+0+@{${I()}|danotemp}+@{${I()}|rolltemp}${o}]]}} {{criticaldamageroll=[[2d8 + 2d8 + 2d8 + 0 + 0+0+@{${I()}|des_mod}+0]]}}{{typeofdamage=Cortante}}{{description=**Bote c/ Espada Longa (1PM)** ${t}}}`),["power-cast-popup","power-cast-overlay","abilities-popup","abilities-overlay","skills-popup","skills-overlay","spells-popup","spells-overlay","maneuvers-popup","maneuvers-overlay","attack-effects-popup","attack-effects-overlay","effects-popup","effects-overlay","avatar-popup","avatar-overlay"].forEach(e=>{const a=document.getElementById(e);a&&a.remove()})},s.appendChild(g),document.body.appendChild(s)}else if("Emboscar"===e){const e=document.getElementById("power-cast-popup");e&&e.remove();const o=document.getElementById("power-cast-overlay");o&&o.remove();const t=document.createElement("div");t.id="power-cast-overlay",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0,0,0,0.5)",t.style.zIndex="10002",t.onclick=()=>{t.remove(),s.remove()},document.body.appendChild(t);const s=document.createElement("div");s.id="power-cast-popup",s.style.position="fixed",s.style.top="50%",s.style.left="50%",s.style.transform="translate(-50%, -50%)",s.style.background="rgba(30,30,40,0.98)",s.style.border="2px solid #ff6e6e",s.style.borderRadius="12px",s.style.padding="20px",s.style.zIndex="10003",s.style.maxWidth="400px",s.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="stretch";const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="center",r.style.marginBottom="10px",r.style.width="100%";const n=document.createElement("div");n.style.display="flex",n.style.flexDirection="column",n.style.alignItems="flex-start",n.style.gap="2px";const i=document.createElement("h3");i.textContent=a,i.style.color="#ecf0f1",i.style.margin="0",i.style.fontSize="18px",i.style.fontWeight="bold",n.appendChild(i);const c=document.createElement("span");c.textContent="Habilidade de Combate",c.style.background="#ff6e6e",c.style.color="#23243a",c.style.fontSize="12px",c.style.fontWeight="bold",c.style.borderRadius="8px",c.style.padding="2px 10px",c.style.marginTop="2px",c.style.display="inline-block",c.style.letterSpacing="0.5px",c.style.boxShadow="0 1px 4px rgba(0,0,0,0.08)",n.appendChild(c),r.appendChild(n);const d=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{s.remove();const e=document.getElementById("power-cast-overlay");e&&e.remove()}});r.appendChild(d.render()),s.appendChild(r);const l=document.createElement("div");l.style.background="#1a1a2e",l.style.border="1px solid #ff6e6e",l.style.borderRadius="8px",l.style.padding="12px",l.style.marginBottom="15px",l.style.display="flex",l.style.flexDirection="column",l.style.gap="6px";const m=document.createElement("div");m.textContent="Descri√ß√£o",m.style.color="#ff6e6e",m.style.fontSize="13px",m.style.fontWeight="bold",m.style.marginBottom="2px",l.appendChild(m);const u=document.createElement("div");u.style.color="#ecf0f1",u.style.fontSize="14px",u.style.lineHeight="1.4",u.textContent="Voc√™ pode gastar 2 PM para realizar uma a√ß√£o padr√£o adicional em seu turno. Voc√™ s√≥ pode usar este poder na primeira rodada de um combate. Pr√©-requisito: treinado em Furtividade.",l.appendChild(u);const p=document.createElement("button");p.textContent="Compartilhar",p.style.background="none",p.style.border="1px solid #ff6e6e",p.style.color="#ff6e6e",p.style.fontSize="14px",p.style.fontWeight="bold",p.style.borderRadius="6px",p.style.padding="8px 0",p.style.marginTop="10px",p.style.width="100%",p.style.cursor="pointer",p.style.transition="all 0.2s",p.onmouseover=()=>{p.style.background="#ff6e6e",p.style.color="#23243a"},p.onmouseout=()=>{p.style.background="none",p.style.color="#ff6e6e"},p.onclick=()=>{Z(`&{template:t20-info}{{infoname=Emboscar}}{{description=${u.textContent}}}`)},l.appendChild(p),s.appendChild(l);const g=document.createElement("button");g.textContent="Executar A√ß√£o Adicional",g.style.background="#ff6e6e",g.style.color="#23243a",g.style.border="none",g.style.borderRadius="8px",g.style.padding="12px 0",g.style.fontSize="16px",g.style.fontWeight="bold",g.style.cursor="pointer",g.style.transition="all 0.2s",g.style.marginBottom="10px",g.onmouseover=()=>{g.style.background="#ff8e8e"},g.onmouseout=()=>{g.style.background="#ff6e6e"},g.onclick=()=>{Z(`/em ${$()} usa **Emboscar** (2 PM) para realizar uma a√ß√£o padr√£o adicional!`),["power-cast-popup","power-cast-overlay","abilities-popup","abilities-overlay","skills-popup","skills-overlay","spells-popup","spells-overlay","maneuvers-popup","maneuvers-overlay","attack-effects-popup","attack-effects-overlay","effects-popup","effects-overlay","avatar-popup","avatar-overlay"].forEach(e=>{const a=document.getElementById(e);a&&a.remove()})},s.appendChild(g),document.body.appendChild(s)}else if("Ervas Curativas"===e){const e=document.getElementById("power-cast-popup");e&&e.remove();const o=document.getElementById("power-cast-overlay");o&&o.remove();const t=document.createElement("div");t.id="power-cast-overlay",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0,0,0,0.5)",t.style.zIndex="10002",t.onclick=()=>{t.remove(),s.remove()},document.body.appendChild(t);const s=document.createElement("div");s.id="power-cast-popup",s.style.position="fixed",s.style.top="50%",s.style.left="50%",s.style.transform="translate(-50%, -50%)",s.style.background="rgba(30,30,40,0.98)",s.style.border="2px solid #6ec6ff",s.style.borderRadius="12px",s.style.padding="20px",s.style.zIndex="10003",s.style.maxWidth="400px",s.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",s.style.display="flex",s.style.flexDirection="column",s.style.alignItems="stretch";const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="center",r.style.marginBottom="10px",r.style.width="100%";const n=document.createElement("div");n.style.display="flex",n.style.flexDirection="column",n.style.alignItems="flex-start",n.style.gap="2px";const i=document.createElement("h3");i.textContent=a,i.style.color="#ecf0f1",i.style.margin="0",i.style.fontSize="18px",i.style.fontWeight="bold",n.appendChild(i);const c=document.createElement("span");c.textContent="Habilidade de Classe",c.style.background="#6ec6ff",c.style.color="#23243a",c.style.fontSize="12px",c.style.fontWeight="bold",c.style.borderRadius="8px",c.style.padding="2px 10px",c.style.marginTop="2px",c.style.display="inline-block",c.style.letterSpacing="0.5px",c.style.boxShadow="0 1px 4px rgba(0,0,0,0.08)",n.appendChild(c),r.appendChild(n);const d=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{s.remove();const e=document.getElementById("power-cast-overlay");e&&e.remove()}});r.appendChild(d.render()),s.appendChild(r);const l=document.createElement("div");l.style.background="#1a1a2e",l.style.border="1px solid #6ec6ff",l.style.borderRadius="8px",l.style.padding="12px",l.style.marginBottom="15px",l.style.display="flex",l.style.flexDirection="column",l.style.gap="6px";const m=document.createElement("div");m.textContent="Descri√ß√£o",m.style.color="#6ec6ff",m.style.fontSize="13px",m.style.fontWeight="bold",m.style.marginBottom="2px",l.appendChild(m);const u=document.createElement("div");u.style.color="#ecf0f1",u.style.fontSize="14px",u.style.lineHeight="1.4",u.textContent="Voc√™ pode gastar uma a√ß√£o completa e uma quantidade de PM a sua escolha (limitado por sua Sabedoria) para aplicar ervas que curam ou desintoxicam em voc√™ ou num aliado adjacente. Para cada PM que gastar, cura 2d6 PV ou remove uma condi√ß√£o envenenado afetando o alvo. (JdA:51)",l.appendChild(u);const p=document.createElement("button");p.textContent="Compartilhar",p.style.background="none",p.style.border="1px solid #6ec6ff",p.style.color="#6ec6ff",p.style.fontSize="14px",p.style.fontWeight="bold",p.style.borderRadius="6px",p.style.padding="8px 0",p.style.marginTop="10px",p.style.width="100%",p.style.cursor="pointer",p.style.transition="all 0.2s",p.onmouseover=()=>{p.style.background="#6ec6ff",p.style.color="#23243a"},p.onmouseout=()=>{p.style.background="none",p.style.color="#6ec6ff"},p.onclick=()=>{Z(`&{template:t20-info}{{infoname=Ervas Curativas}}{{description=${u.textContent}}}`)},l.appendChild(p),s.appendChild(l);const f=document.createElement("div");f.style.marginBottom="20px";const v=document.createElement("div");v.textContent="Custo em PM:",v.style.color="#ecf0f1",v.style.fontSize="14px",v.style.fontWeight="bold",v.style.marginBottom="10px",f.appendChild(v);const y=document.createElement("div");y.style.display="flex",y.style.gap="8px",y.style.justifyContent="center",y.style.background="#1a1a2e",y.style.border="1px solid #6ec6ff",y.style.borderRadius="12px",y.style.padding="15px",y.style.marginTop="5px";let b=0;const h=[];for(let e=1;e<=5;e++){const a=document.createElement("button");a.textContent=e,a.style.width="40px",a.style.height="40px",a.style.borderRadius="50%",a.style.border="2px solid #6ec6ff",a.style.background="#23243a",a.style.color="#6ec6ff",a.style.fontSize="16px",a.style.fontWeight="bold",a.style.cursor="pointer",a.style.transition="all 0.2s",h.push(a),a.onclick=()=>{b=e,h.forEach((a,o)=>{o<e?(a.style.background="#6ec6ff",a.style.color="#23243a"):(a.style.background="#23243a",a.style.color="#6ec6ff")})},y.appendChild(a)}f.appendChild(y),s.appendChild(f);const x=document.createElement("button");return x.textContent="Usar",x.style.width="100%",x.style.padding="12px 0",x.style.background="#6ec6ff",x.style.color="#23243a",x.style.border="none",x.style.borderRadius="8px",x.style.fontSize="16px",x.style.fontWeight="bold",x.style.cursor="pointer",x.style.transition="all 0.2s",x.style.marginTop="10px",x.onmouseover=()=>{x.style.background="#5bb8ff"},x.onmouseout=()=>{x.style.background="#6ec6ff"},x.onclick=()=>{if(0===b)return void alert("Selecione pelo menos 1 PM para usar!");const e=document.getElementById("power-cast-popup");e&&e.remove();const o=document.getElementById("power-cast-overlay");o&&o.remove();const t=document.getElementById("abilities-popup");t&&t.remove();const s=document.getElementById("abilities-overlay");var r,n;s&&s.remove(),r=`/roll ${2*b}d6`,n=`/em usou o poder "${a}" (${b} PM)`,Z("/fx nova-holy @{target|token_id}"),setTimeout(()=>{Z(r),Z(n),setTimeout(()=>{!function(){const e=document.getElementById("healing-effect");e&&e.remove(),function(){try{const e=new Audio;e.src="https://wow.zamimg.com/sound-ids/live/enus/80/1687888/Spell_DR_Revamp_Nature_Cast_Small06.ogg",e.volume=.6,e.preload="auto",e.play()}catch(e){g.log("Erro ao criar √°udio de cura:",e),be()}}();const a=document.createElement("div");a.id="healing-effect",a.style.position="fixed",a.style.bottom="0",a.style.left="0",a.style.width="100%",a.style.height="15vh",a.style.background="linear-gradient(to top, rgba(76, 255, 80, 0.45), transparent 80%)",a.style.zIndex="9998",a.style.pointerEvents="none",a.style.overflow="hidden";for(let e=0;e<15;e++){const e=document.createElement("div");e.style.position="absolute",e.style.bottom="10px",e.left="-50px",e.style.width="20px",e.style.height="20px",e.style.background="radial-gradient(circle, #4CAF50 0%, #388E3C 70%, #2E7D32 100%)",e.style.borderRadius="50% 0 50% 0",e.style.transform="rotate(45deg)",e.style.opacity="0.8",e.style.animation="leafFloat 1.5s linear",e.style.animationDelay=`${Math.random()}s`;const o=10+20*Math.random();e.style.setProperty("--leaf-amplitude",`${o}px`),a.appendChild(e)}if(!document.getElementById("healing-effect-styles")){const e=document.createElement("style");e.id="healing-effect-styles",e.textContent="\n                    @keyframes leafFloat {\n                        0% {\n                            transform: translateX(-50px) translateY(0px) rotate(45deg);\n                            opacity: 0;\n                        }\n                        10% {\n                            opacity: 0.8;\n                        }\n                        20% {\n                            transform: translateX(20vw) translateY(calc(var(--leaf-amplitude) * -1)) rotate(45deg);\n                        }\n                        40% {\n                            transform: translateX(40vw) translateY(calc(var(--leaf-amplitude) * 1)) rotate(45deg);\n                        }\n                        60% {\n                            transform: translateX(60vw) translateY(calc(var(--leaf-amplitude) * -1)) rotate(45deg);\n                        }\n                        80% {\n                            transform: translateX(80vw) translateY(calc(var(--leaf-amplitude) * 1)) rotate(45deg);\n                        }\n                        100% {\n                            transform: translateX(calc(100vw + 50px)) translateY(0px) rotate(45deg);\n                            opacity: 0;\n                        }\n                    }\n                ",document.head.appendChild(e)}document.body.appendChild(a),setTimeout(()=>{a.parentNode&&a.remove()},2e3)}()},100)},200)},s.appendChild(x),void document.body.appendChild(s)}}function Je(){const e=localStorage.getItem("tormenta-20-hotbars-active-effects");return e?JSON.parse(e):[]}function Ge(e){localStorage.setItem("tormenta-20-hotbars-active-effects",JSON.stringify(e))}function Qe(e){const a=Je(),o=fa();return a.includes(e)||o.includes(e)}function Ke(e,a=!1){const o=Je(),t=o.indexOf(e);return t>-1?(o.splice(t,1),ca(e,ta(e)?"item":"food"),a||_(`Efeito "${e}" desativado.`)):(o.push(e),ia(e,ta(e)?"item":"food"),a||A(`Efeito "${e}" ativado!`)),Ge(o),Ye(),pa(),o}function Ye(){const e=document.querySelector('#roll20-hotbar button[data-label="Efeitos"]');if(!e)return void g.log("Bot√£o de efeitos n√£o encontrado");const a=e.querySelector(".hotbar-button-badge");a&&a.remove();const o=Je(),t=fa(),s=o.length+t.length;if(g.log("Efeitos ativos:",o),g.log("Selectable cards ativos:",t),s>0){const a=document.createElement("div");a.className="hotbar-button-badge",a.style.position="absolute",a.style.top="-2px",a.style.right="-2px",a.style.background="#4caf50",a.style.color="#fff",a.style.borderRadius="50%",a.style.width="16px",a.style.height="16px",a.style.fontSize="10px",a.style.fontWeight="bold",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.border="2px solid #23243a",a.style.zIndex="1000",a.textContent=s,e.appendChild(a),g.log("Badge criado com valor:",s)}else g.log("Nenhum efeito ativo, badge n√£o criado")}function Xe(){try{const e=localStorage.getItem(l);if(!e)return{version:m,images:{}};const a=JSON.parse(e);return a.version!==m?(g.log("Vers√£o do cache de imagens desatualizada, limpando..."),la(),{version:m,images:{}}):{version:a.version||m,images:a.images||{}}}catch(e){return console.error("Erro ao carregar cache de imagens:",e),{version:m,images:{}}}}function Ze(){const e=localStorage.getItem("tormenta-20-hotbars-active-conditions");return e?JSON.parse(e):[]}function ea(e){const a=Ze(),o=a.indexOf(e);var t;return o>-1?(a.splice(o,1),Ke(e,!0),ca(e,"condition"),_(`Condi√ß√£o "${e}" removida.`)):(a.push(e),Ke(e,!0),ia(e,"condition"),A(`Condi√ß√£o "${e}" aplicada!`),oa(e)),t=a,localStorage.setItem("tormenta-20-hotbars-active-conditions",JSON.stringify(t)),pa(),Ye(),Je()}function aa(e){return da().find(a=>a.nome===e)}function oa(e){const a=aa(e);a&&Z(`&{template:t20-info}{{infoname=${e} ${a.icone||"‚ö°"}}}{{description=Categoria: ${a.categoria||"Status"}\n${a.efeitos||a.descricao}}}`)}function ta(e){return[{name:"Cachecol Sombrio",description:"Efeito de Dano: Todos os ataques melee recebem +1d6 de dano furtivo. Efeito acumulativo com outros ataques furtivos.",type:"Item",effectKey:"cachecol_sombrio",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/ability_ambush.jpg",icone:"‚öîÔ∏è"}].find(a=>a.effectKey===e)}const sa="tormenta-20-hotbars-effects-order";function ra(){try{return JSON.parse(localStorage.getItem(sa)||"[]")}catch(e){return console.error("Erro ao carregar ordem dos efeitos:",e),[]}}function na(e){try{localStorage.setItem(sa,JSON.stringify(e))}catch(e){console.error("Erro ao salvar ordem dos efeitos:",e)}}function ia(e,a){const o=ra(),t=`${a}:${e}`,s=o.findIndex(e=>e.id===t);-1!==s&&o.splice(s,1),o.unshift({id:t,effectKey:e,effectType:a,timestamp:Date.now()}),na(o)}function ca(e,a){const o=ra(),t=`${a}:${e}`,s=o.findIndex(e=>e.id===t);-1!==s&&(o.splice(s,1),na(o))}function da(){try{return[{nome:"Abalado",descricao:"O personagem sofre -2 em testes de per√≠cia. Se ficar abalado novamente, em vez...",descricaoCompleta:"O personagem sofre -2 em testes de per√≠cia. Se ficar abalado novamente, em vez disso fica Apavorado.",efeitos:"-2 em testes",categoria:"Medo",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_curseoftounges.jpg",icone:"üò∞"},{nome:"Agarrado",descricao:"O personagem fica Desprevenido e Im√≥vel, sofre -2 em testes de ataque e s√≥ pode...",descricaoCompleta:"O personagem fica Desprevenido e Im√≥vel, sofre -2 em testes de ataque e s√≥ pode atacar com armas leves. Um personagem fazendo um ataque √† dist√¢ncia contra um alvo envolvido na manobra agarrar tem 50% de chance de acertar o alvo errado.\n\nDesprevenido: -5 defesa e -5 Reflexos.\n\nIm√≥vel: Todas as formas de deslocamento s√£o reduzidas a 0m.",efeitos:"-2 em testes ‚Ä¢ -5 em testes",categoria:"Paralisia",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_earthbind.jpg",icone:"ü§ù"},{nome:"Alquebrado",descricao:"Condi√ß√£o Mental\n\nO custo em pontos de mana das habilidades e magias do...",descricaoCompleta:"Condi√ß√£o Mental\n\nO custo em pontos de mana das habilidades e magias do personagem aumenta em +1.",efeitos:"+1 PM no custo de habilidades",categoria:"Mental",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_psychicscream.jpg",icone:"üß†"},{nome:"Apavorado",descricao:"O personagem sofre ‚Äì5 em testes de per√≠cia e n√£o pode se aproximar...",descricaoCompleta:"O personagem sofre ‚Äì5 em testes de per√≠cia e n√£o pode se aproximar voluntariamente da fonte do medo.",efeitos:"Efeitos variam conforme a condi√ß√£o",categoria:"Medo",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_deathscream.jpg",icone:"üò±"},{nome:"Atordoado",descricao:"Condi√ß√£o Mental\n\nO personagem fica Desprevenido e n√£o pode fazer...",descricaoCompleta:"Condi√ß√£o Mental\n\nO personagem fica Desprevenido e n√£o pode fazer a√ß√µes.\n\nDesprevenido:¬† Defesa -5 e Reflexos -5.",efeitos:"-5 em testes ‚Ä¢ N√£o pode fazer a√ß√µes",categoria:"Mental",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_mindsteal.jpg",icone:"üí´"},{nome:"Ca√≠do",descricao:"Condi√ß√£o F√≠sica\n\nDeitado no ch√£o. O personagem sofre -5 em ataques corpo a...",descricaoCompleta:"Condi√ß√£o F√≠sica\n\nDeitado no ch√£o. O personagem sofre -5 em ataques corpo a corpo e seu deslocamento √© reduzido a 1,5m. Al√©m disso, sofre -5 de Defesa contra ataques corpo a corpo, mas recebe +5 de Defesa contra ataques √† dist√¢ncia.",efeitos:"-5 em testes",categoria:"F√≠sica",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_earthbindtotem.jpg",icone:"üõê"},{nome:"Cego",descricao:"Condi√ß√£o F√≠sica\n\nO personagem fica Desprevenido e Lento, n√£o pode fazer testes...",descricaoCompleta:"Condi√ß√£o F√≠sica\n\nO personagem fica Desprevenido e Lento, n√£o pode fazer testes de Percep√ß√£o para observar e sofre -5 em testes de per√≠cias baseadas em For√ßa ou Destreza. Todos os alvos de seus ataques recebem camuflagem total. Condi√ß√£o de sentidos.\n\n‚Ä¢ Desprevenido: defesa -5 e reflexos -5.\n\n‚Ä¢ Lento: movimento reduzido a metade e n√£o pode correr ou fazer investidas.",efeitos:"-5 em testes",categoria:"sentidos.",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_curseoftounges.jpg",icone:"üëÅÔ∏è"},{nome:"Confuso",descricao:"Condi√ß√£o Mental\n\nO personagem comporta-se de modo aleat√≥rio. Role 1d6 no in√≠cio...",descricaoCompleta:"Condi√ß√£o Mental\n\nO personagem comporta-se de modo aleat√≥rio. Role 1d6 no in√≠cio de seus turnos:\n\n‚Ä¢ 1) Movimenta-se em uma dire√ß√£o escolhida por uma rolagem de 1d8;\n\n‚Ä¢ 2-3) N√£o pode fazer a√ß√µes, exceto rea√ß√µes, e fica balbuciando incoerentemente;\n\n‚Ä¢ 4-5) Usa a arma que estiver empunhando para atacar a criatura mais pr√≥xima, ou a si mesmo se estiver sozinho (nesse caso, apenas role o dano);\n\n‚Ä¢ 6) A condi√ß√£o termina e pode agir normalmente.",efeitos:"-5 em testes ‚Ä¢ Sofre dano ‚Ä¢ 1d6 dano por turno ‚Ä¢ A√ß√£o aleat√≥ria (1d6)",categoria:"Mental",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_mindsteal.jpg",icone:"ü§™"},{nome:"Debilitado",descricao:"Condi√ß√£o F√≠sica\n\nO personagem sofre -5 em testes de atributos f√≠sicos (For√ßa,...",descricaoCompleta:"Condi√ß√£o F√≠sica\n\nO personagem sofre -5 em testes de atributos f√≠sicos (For√ßa, Destreza e Constitui√ß√£o) e de per√≠cias baseadas nesses atributos. Se o personagem ficar debilitado novamente, em vez disso fica Inconsciente.",efeitos:"-5 em testes",categoria:"F√≠sica",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_psychicscream.jpg",icone:"üòµ"},{nome:"Desprevenido",descricao:"Condi√ß√£o F√≠sica\n\nDespreparado para reagir. O personagem sofre -5 na Defesa e em...",descricaoCompleta:"Condi√ß√£o F√≠sica\n\nDespreparado para reagir. O personagem sofre -5 na Defesa e em Reflexos. Voc√™ fica desprevenido contra inimigos que n√£o possa ver.",efeitos:"-5 em testes ‚Ä¢ Fica desprevenido",categoria:"F√≠sica",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_curseofmannoroth.jpg",icone:"üò≥"},{nome:"Doente",descricao:"Condi√ß√£o F√≠sica\n\nSob efeito de uma doen√ßa.",descricaoCompleta:"Condi√ß√£o F√≠sica\n\nSob efeito de uma doen√ßa.",efeitos:"Efeitos variam conforme a condi√ß√£o",categoria:"F√≠sica",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_poisoncleansingtotem.jpg",icone:"ü§í"},{nome:"Em Chamas",descricao:"Em Chamas\n\nCondi√ß√£o F√≠sica\n\nO personagem est√° pegando fogo. No in√≠cio de seus...",descricaoCompleta:"Em Chamas\n\nCondi√ß√£o F√≠sica\n\nO personagem est√° pegando fogo. No in√≠cio de seus turnos, sofre [[/r 1d6]] pontos de dano de fogo. O personagem pode gastar uma a√ß√£o padr√£o para apagar o fogo com as m√£os. Imers√£o em √°gua tamb√©m apaga as chamas.",efeitos:"Sofre dano ‚Ä¢ 1d6 dano por turno",categoria:"F√≠sica",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_fire_immolation.jpg",icone:"üî•"},{nome:"Enjoado",descricao:"Condi√ß√£o F√≠sica\n\nO personagem s√≥ pode realizar uma a√ß√£o padr√£o ou de movimento...",descricaoCompleta:"Condi√ß√£o F√≠sica\n\nO personagem s√≥ pode realizar uma a√ß√£o padr√£o ou de movimento (n√£o ambas) por rodada. Ele ainda pode fazer a√ß√µes livres ou extras, como o normal. Ele pode gastar uma a√ß√£o padr√£o para fazer uma investida, mas pode avan√ßar no m√°ximo seu deslocamento (e n√£o o dobro).",efeitos:"Efeitos variam conforme a condi√ß√£o",categoria:"F√≠sica",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_poisoncleansingtotem.jpg",icone:"ü§¢"},{nome:"Enredado",descricao:"O personagem fica Lento e Vulner√°vel e sofre -2 em testes de ataque.\n\n‚Ä¢ Lento:...",descricaoCompleta:"O personagem fica Lento e Vulner√°vel e sofre -2 em testes de ataque.\n\n‚Ä¢ Lento: Movimento reduzido a metade e n√£o pode correr ou fazer investidas.\n\n‚Ä¢ V√∫lner√°vel: Defesa -2.",efeitos:"-2 em testes",categoria:"Paralisia",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_earthbind.jpg",icone:"üï∏Ô∏è"},{nome:"Envenenado",descricao:"Condi√ß√£o F√≠sica\n\nO efeito desta condi√ß√£o varia de acordo com o veneno. Pode ser...",descricaoCompleta:"Condi√ß√£o F√≠sica\n\nO efeito desta condi√ß√£o varia de acordo com o veneno. Pode ser outra condi√ß√£o (por exemplo, fraco ou enjoado) ou dano recorrente (por exemplo, 1d12 pontos de dano por rodada). A descri√ß√£o do veneno determina a dura√ß√£o dele (caso nada seja dito, a condi√ß√£o dura pela cena).",efeitos:"Sofre dano",categoria:"F√≠sica",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_poisoncleansingtotem.jpg",icone:"‚ò†Ô∏è"},{nome:"Esmorecido",descricao:"Condi√ß√£o Mental\n\nO personagem sofre -5 em testes de atributos mentais...",descricaoCompleta:"Condi√ß√£o Mental\n\nO personagem sofre -5 em testes de atributos mentais (Intelig√™ncia, Sabedoria e Carisma) e de per√≠cias baseadas nesses atributos.",efeitos:"-5 em testes",categoria:"Mental",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_psychicscream.jpg",icone:"üòû"},{nome:"Exausto",descricao:"O personagem fica Debilitado, Lento e Vulner√°vel. Se ficar exausto novamente,...",descricaoCompleta:"O personagem fica Debilitado, Lento e Vulner√°vel. Se ficar exausto novamente, em vez disso fica Inconsciente.\n\n‚Ä¢ Debilitado: -5 em testes de atributos f√≠sicos e de per√≠cias baseadas nestes atributos.\n\n‚Ä¢ Lento: Movimento reduzido a metade e n√£o pode correr ou fazer investidas.\n\n‚Ä¢ Vulner√°vel: Sofre Defesa -2.",efeitos:"-2 em testes ‚Ä¢ -5 em testes",categoria:"Fadiga",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_psychicscream.jpg",icone:"üò¥"},{nome:"Fascinado",descricao:"Condi√ß√£o Mental\n\nCom a aten√ß√£o presa em alguma coisa. O personagem sofre -5 em...",descricaoCompleta:"Condi√ß√£o Mental\n\nCom a aten√ß√£o presa em alguma coisa. O personagem sofre -5 em Percep√ß√£o e n√£o pode fazer a√ß√µes, exceto observar aquilo que o fascinou. Qualquer a√ß√£o hostil contra o personagem anula esta condi√ß√£o. Balan√ßar uma criatura fascinada para tir√°-la desse estado gasta uma a√ß√£o padr√£o.",efeitos:"-5 em testes ‚Ä¢ N√£o pode fazer a√ß√µes",categoria:"Mental",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_eyeofthestorm.jpg",icone:"üòµ"},{nome:"Fatigado",descricao:"O personagem fica Fraco e Vulner√°vel. Se o personagem ficar fatigado novamente,...",descricaoCompleta:"O personagem fica Fraco e Vulner√°vel. Se o personagem ficar fatigado novamente, em vez disso fica Exausto.\n\n‚Ä¢ Fraco: Sofre -2 em testes de atributos f√≠sicos (For√ßa, Destreza e Constitui√ß√£o) e de per√≠cias baseadas nestes atributos.\n\n‚Ä¢ Vulner√°vel: Sofre Defesa -2.",efeitos:"-2 em testes",categoria:"Fadiga",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_sleep.jpg",icone:"üò™"},{nome:"Fraco",descricao:"Condi√ß√£o F√≠sica\n\nO personagem sofre -2 em testes de atributos f√≠sicos (For√ßa,...",descricaoCompleta:"Condi√ß√£o F√≠sica\n\nO personagem sofre -2 em testes de atributos f√≠sicos (For√ßa, Destreza e Constitui√ß√£o) e de per√≠cias baseadas nesses atributos. Se ficar fraco novamente, em vez disso fica Debilitado.",efeitos:"-2 em testes",categoria:"F√≠sica",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_psychicscream.jpg",icone:"üò£"},{nome:"Frustrado",descricao:"Condi√ß√£o Mental\n\nO personagem sofre -2 em testes de atributos mentais...",descricaoCompleta:"Condi√ß√£o Mental\n\nO personagem sofre -2 em testes de atributos mentais (Intelig√™ncia, Sabedoria e Carisma) e de per√≠cias baseadas nesses atributos. Se ficar frustrado novamente, em vez disso fica Esmorecido.",efeitos:"-2 em testes",categoria:"Mental",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_psychicscream.jpg",icone:"üò§"},{nome:"Im√≥vel",descricao:"Todas as formas de deslocamento do personagem s√£o reduzidas a 0m.",descricaoCompleta:"Todas as formas de deslocamento do personagem s√£o reduzidas a 0m.",efeitos:"Efeitos variam conforme a condi√ß√£o",categoria:"Paralisia",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_earthbind.jpg",icone:"üõë"},{nome:"Inconsciente",descricao:"Condi√ß√£o F√≠sica\n\nO personagem fica Indefeso e n√£o pode fazer a√ß√µes. Balan√ßar...",descricaoCompleta:"Condi√ß√£o F√≠sica\n\nO personagem fica Indefeso e n√£o pode fazer a√ß√µes. Balan√ßar uma criatura para acord√°-la gasta uma a√ß√£o padr√£o.\n\n‚Ä¢ Indefeso: √â considerado Desprevenido, sofre -10 na Defesa, falha automaticamente em testes de Reflexos e pode sofrer golpes de miseric√≥rdia.",efeitos:"-10 na Defesa ‚Ä¢ N√£o pode fazer a√ß√µes",categoria:"F√≠sica",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_blackplague.jpg",icone:"üòµ"},{nome:"Indefeso",descricao:"O personagem √© considerado Desprevenido, mas sofre -10 na Defesa, falha...",descricaoCompleta:"O personagem √© considerado Desprevenido, mas sofre -10 na Defesa, falha automaticamente em testes de Reflexos e pode sofrer golpes de miseric√≥rdia.",efeitos:"-10 na Defesa",categoria:"Status",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_curseofmannoroth.jpg",icone:"üíÄ"},{nome:"Lento",descricao:"Todas as formas de deslocamento do personagem s√£o reduzidas √† metade (arredonde...",descricaoCompleta:"Todas as formas de deslocamento do personagem s√£o reduzidas √† metade (arredonde para baixo para o primeiro incremento de 1,5m) e ele n√£o pode correr ou fazer investidas.",efeitos:"Efeitos variam conforme a condi√ß√£o",categoria:"Paralisia",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_slow.jpg",icone:"üêå"},{nome:"Ofuscado",descricao:"O personagem sofre -2 em testes de ataque e de Percep√ß√£o.",descricaoCompleta:"O personagem sofre -2 em testes de ataque e de Percep√ß√£o.",efeitos:"-2 em testes",categoria:"Sentidos",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_curseoftounges.jpg",icone:"üòµ‚Äçüí´"},{nome:"Paralisado",descricao:"O personagem fica Im√≥vel e Indefeso e s√≥ pode realizar a√ß√µes puramente...",descricaoCompleta:"O personagem fica Im√≥vel e Indefeso e s√≥ pode realizar a√ß√µes puramente mentais.\n\n‚Ä¢ Im√≥vel: todas as formas de deslocamento s√£o reduzidas a 0m.\n\n‚Ä¢ Indefeso: √â considerado desprevinido, sofre -10 na Defesa, falha automaticamente em testes de Reflexos e pode sofrer golpes de miserid√≥rdia.",efeitos:"-10 na Defesa",categoria:"Paralisia",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_nature_earthbindtotem.jpg",icone:"üßä"},{nome:"Pasmo",descricao:"Condi√ß√£o Mental\n\nO personagem n√£o pode fazer a√ß√µes, exceto rea√ß√µes.",descricaoCompleta:"Condi√ß√£o Mental\n\nO personagem n√£o pode fazer a√ß√µes, exceto rea√ß√µes.",efeitos:"N√£o pode fazer a√ß√µes",categoria:"Mental",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_mindsteal.jpg",icone:"üò∂"},{nome:"Petrificado",descricao:"O personagem fica inconsciente e recebe resist√™ncia a dano 8.\n\n‚Ä¢ Incosciente: O...",descricaoCompleta:"O personagem fica inconsciente e recebe resist√™ncia a dano 8.\n\n‚Ä¢ Incosciente: O personagem fica Indefeso e n√£o pode fazer a√ß√µes.\n\n‚Ä¢ Indefeso: √â considerado Desprevenido, sofre -10 na Defesa, falha automaticamente em testes de Reflexos e pode sofrer golpes de miseric√≥rdia.",efeitos:"-10 na Defesa ‚Ä¢ N√£o pode fazer a√ß√µes ‚Ä¢ Sofre dano",categoria:"Status",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_antishadow.jpg",icone:"üóø"},{nome:"Sangrando",descricao:"Com um ferimento aberto. No in√≠cio de seus turnos, o personagem deve fazer um...",descricaoCompleta:"Com um ferimento aberto. No in√≠cio de seus turnos, o personagem deve fazer um teste de Constitui√ß√£o (CD 15). Se passar, estabiliza e remove essa condi√ß√£o. Se falhar, perde [[/r 1d6]] pontos de vida e continua sangrando.",efeitos:"Teste de Constitui√ß√£o ‚Ä¢ 1d6 dano por turno",categoria:"Status",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_blackplague.jpg",icone:"ü©∏"},{nome:"Surdo",descricao:"O personagem n√£o pode fazer testes de Percep√ß√£o para ouvir e sofre -5 em testes...",descricaoCompleta:"O personagem n√£o pode fazer testes de Percep√ß√£o para ouvir e sofre -5 em testes de Iniciativa. Al√©m disso, √© considerado em condi√ß√£o ruim para lan√ßar magias.",efeitos:"-5 em testes",categoria:"Sentidos",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_soulleech.jpg",icone:"üîá"},{nome:"Surpreendido",descricao:"Condi√ß√£o F√≠sica\n\nN√£o ciente de seus inimigos. O personagem fica Desprevenido e...",descricaoCompleta:"Condi√ß√£o F√≠sica\n\nN√£o ciente de seus inimigos. O personagem fica Desprevenido e n√£o pode fazer a√ß√µes, exceto rea√ß√µes.\n\n‚Ä¢ Desprevenido: Sofre -5 na Defesa e em Reflexos.",efeitos:"-5 em testes ‚Ä¢ N√£o pode fazer a√ß√µes",categoria:"F√≠sica",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_curseofmannoroth.jpg",icone:"üò≤"},{nome:"Vulner√°vel",descricao:"Condi√ß√£o F√≠sica\n\nO personagem sofre -2 na Defesa.",descricaoCompleta:"Condi√ß√£o F√≠sica\n\nO personagem sofre -2 na Defesa.",efeitos:"-2 em testes",categoria:"F√≠sica",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_curseofmannoroth.jpg",icone:"üíî"}]}catch{return console.warn("Generated conditions data not available, using hardcoded data"),[]}}function la(){try{localStorage.removeItem(l),g.log("Cache de imagens limpo")}catch(e){console.error("Erro ao limpar cache de imagens:",e)}}function ma(e){return new Promise(a=>{const o=Xe();if(o.images&&o.images[e])return g.log(`Imagem carregada do cache: ${e}`),void a(o.images[e]);g.log(`Carregando e cacheando imagem: ${e}`);const t=new Image;t.crossOrigin="anonymous",t.onload=()=>{try{const s=document.createElement("canvas"),r=s.getContext("2d");s.width=t.naturalWidth,s.height=t.naturalHeight,r.drawImage(t,0,0);const n=s.toDataURL("image/png");o.images||(o.images={}),o.images[e]=n,function(e){try{localStorage.setItem(l,JSON.stringify(e))}catch(e){console.error("Erro ao salvar cache de imagens:",e)}}(o),g.log(`Imagem cacheada com sucesso: ${e}`),a(n)}catch(o){console.error(`Erro ao cachear imagem ${e}:`,o),a(null)}},t.onerror=()=>{console.warn(`Erro ao carregar imagem ${e}, usando fallback`),a(null)},t.src=e})}function ua(e,a,o="üçΩÔ∏è",t={}){const{width:s="100%",height:r="100%",borderRadius:n="4px",objectFit:i="cover",showSkeleton:c=!0,onLoad:d=null,onError:l=null}=t,m=document.createElement("div");m.style.position="relative",m.style.width="100%",m.style.height="100%";let u=null;c&&(u=document.createElement("div"),u.style.width="100%",u.style.height="100%",u.style.background="linear-gradient(90deg, #23243a 25%, #2c2d4a 50%, #23243a 75%)",u.style.backgroundSize="200px 100%",u.style.animation="skeleton-loading 1.2s infinite linear",u.style.borderRadius=n,m.appendChild(u));const p=document.createElement("div");p.textContent=o,p.style.fontSize="20px",p.style.display="none",p.style.position="absolute",p.style.top="0",p.style.left="0",p.style.width="100%",p.style.height="100%",p.style.display="flex",p.style.alignItems="center",p.style.justifyContent="center",p.style.zIndex="2",m.appendChild(p);const g=document.createElement("img");return g.alt=a,g.style.width=s,g.style.height=r,g.style.objectFit=i,g.style.borderRadius=n,g.style.position="absolute",g.style.top="0",g.style.left="0",g.style.zIndex="3",ma(e).then(a=>{g.src=a||e}),g.onload=()=>{u&&(u.style.display="none"),d&&d(g)},g.onerror=()=>{u&&(u.style.display="none"),g.style.display="none",p.style.display="flex",l&&l()},m.appendChild(g),m}function pa(){const e=document.getElementById("effects-indicators-section"),a=document.getElementById("effects-icons-container");if(!e||!a)return void g.log("Se√ß√£o de indicadores de efeitos n√£o encontrada");a.innerHTML="";const o=function(){const e=ra(),a=Je(),o=Ze();return e.filter(e=>"condition"===e.effectType?o.includes(e.effectKey):("food"===e.effectType||"drink"===e.effectType||"potion"===e.effectType||"item"===e.effectType)&&a.includes(e.effectKey))}();0!==o.length?(e.style.display="block",o.forEach(e=>{if("food"===e.effectType){let a=[];try{a=JSON.parse(localStorage.getItem("tormenta-20-hotbars-comida-effects")||"[]")}catch(e){console.error("Erro ao carregar efeitos de comida:",e),a=[]}const o=a.find(a=>a.effectKey===e.effectKey);if(o){const e=(t=o.name,[{nome:"Assado de Carnes",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_60.jpg",raridade:"Comum",descricao:"Um prato muito apreciado no Reinado, mas mal visto no Imp√©rio de Tauron. Pura prote√≠na, deixa qualquer um mais forte.",bonus:"+2 em rolagens de dano corpo a corpo.",preco:"T$ 30",ingredientes:"Carne, carne de ca√ßa, porco",custoIngredientes:"T$ 56",cdTeste:"20",icone:"ü•©"},{nome:"Balinhas",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/achievement_halloween_candy_01.jpg",raridade:"Comum",descricao:"Balas coloridas e doces. Arcanistas gostam ‚Äî dizem que o a√ß√∫car fe√©rico usado nas balinhas potencializa suas magias.",bonus:"+2 em rolagens de dano de magias.",preco:"T$ 30",ingredientes:"A√ß√∫car das fadas, fruta",custoIngredientes:"T$ 53",cdTeste:"20",icone:"üç¨"},{nome:"Banquete dos Her√≥is",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_cauldron_frost.jpg",raridade:"Comum",descricao:"Uma mesa repleta das melhores comidas que o dinheiro pode pagar.",bonus:"+1 em um atributo a sua escolha. Esse aumento n√£o oferece PV, PM e per√≠cias adicionais.",preco:"T$ 150",ingredientes:"Carne de ca√ßa, ovo de monstro, avel√£ de Norba",custoIngredientes:"T$ 82",cdTeste:"25",icone:"üçΩÔ∏è"},{nome:"Batata Valkariana",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_103_potatobread.jpg",raridade:"Comum",descricao:"Batatas cortadas em tiras e mergulhadas em √≥leo fervente. Gordurentas e pouco nutritivas, s√£o o tipo de prato que s√≥ √© servido numa metr√≥pole como Valkaria. Apesar disso, s√£o saborosas e deixam qualquer um empolgado.",bonus:"+1d6 em um teste a sua escolha realizado at√© o fim do dia.",preco:"T$ 2",ingredientes:"√ìleo, legume",custoIngredientes:"T$ 4",cdTeste:"15",icone:"üçü"},{nome:"Bolo de Cenoura",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_fishcake.jpg",raridade:"Comum",descricao:'Uma sobremesa simples, que "faz bem para a vista", segundo anci√µes de todo o Reinado. Aparentemente, os anci√µes est√£o certos, pois o bolo de cenoura fornece +2 em testes de Percep√ß√£o.',bonus:"+2 em testes de Percep√ß√£o.",preco:"T$ 4",ingredientes:"Farinha, fruta, √≥leo",custoIngredientes:"T$ 7",cdTeste:"15",icone:"üç∞"},{nome:"Bolo do Pante√£o",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_144_cakeslice.jpg",raridade:"Comum",descricao:"Uma sobremesa divina! Este bolo de gorad √© preparado com os melhores ingredientes, por isso √© car√≠ssimo, servido apenas em banquetes reais ‚Äî ou em tavernas que atendem aventureiros famosos. Dizem que o gorad usado no bolo √© uma das fontes de energia do Pante√£o.",bonus:"Seu custo para ativar habilidades e lan√ßar magias diminui em -1 PM (m√≠nimo 1).",preco:"T$ 150",ingredientes:"A√ß√∫car das fadas, avel√£ de Norba, farinha, gorad",custoIngredientes:"T$ 121",cdTeste:"25",icone:"üç∞"},{nome:"Ensopado Refor√ßado",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_swirlingmistsoup.jpg",raridade:"Comum",descricao:"Um prato nutritivo, mas pesado.",bonus:"+20 PV tempor√°rios, mas seu deslocamento diminui em ‚Äì1,5m.",preco:"T$ 6",ingredientes:"Cereal, porco, verdura",custoIngredientes:"T$ 10",cdTeste:"15",icone:"üç≤"},{nome:"Estrogonofe",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_sauteedcarrots.jpg",raridade:"Comum",descricao:"Essa iguaria deliciosa foi inventada nas cortes do antigo Reino de Yudennach ‚Äî dizem que √© uma das poucas coisas boas a sair daquele lugar. Comer estrogonofe deixa voc√™ firme em suas convic√ß√µes.",bonus:"+2 em testes de Vontade.",preco:"T$ 12",ingredientes:"Carne, cogumelo, leite",custoIngredientes:"T$ 22",cdTeste:"15",icone:"üç≤"},{nome:"Fritada Monstruosa",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_06.jpg",raridade:"Comum",descricao:"A receita √© simples ‚Äî o segredo est√° nos ingredientes. Feita com ovos de monstros, esta omelete √© extremamente nutritiva.",bonus:"+10 PV tempor√°rios.",preco:"T$ 30",ingredientes:"Ovo de monstro, √≥leo",custoIngredientes:"T$ 53",cdTeste:"20",icone:"üç≥"},{nome:"Futomaki",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_161_fish_white.jpg",raridade:"Comum",descricao:"Criado no Imp√©rio de Jade, este prato consiste em um rolo de arroz recheado com peixes, folhas e ra√≠zes. Uma refei√ß√£o elegante, que deixa todos dispostos a dialogar.",bonus:"+2 em testes de Diplomacia.",preco:"T$ 12",ingredientes:"Cereal, peixe",custoIngredientes:"T$ 8",cdTeste:"15",icone:"üç£"},{nome:"Gorad Quente",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_meat_cooked_08.jpg",raridade:"Comum",descricao:"Gorad e leite, servidos fumegando. N√£o tem erro. O gorad ativa o c√©rebro.",bonus:"+2 PM tempor√°rios.",preco:"T$ 18",ingredientes:"Gorad, leite",custoIngredientes:"T$ 31",cdTeste:"20",icone:"ü•õ"},{nome:"Gorvel√£",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_cask_04.jpg",raridade:"Comum",descricao:"Gorad com avel√£ de Norba. √â uma sobremesa cara, mas deliciosa.",bonus:"+5 PM tempor√°rios.",preco:"T$ 42",ingredientes:"Gorad, avel√£ de Norba",custoIngredientes:"T$ 70",cdTeste:"25",icone:"üç∞"},{nome:"Macarr√£o de Yuvalin",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_cooking_90_cinnamonbonefishstew.jpg",raridade:"Comum",descricao:"Yuvalin √© uma cidade mineradora em Zakharov, na fronteira com as Montanhas Uivantes. Seus habitantes criaram este prato refor√ßado (macarr√£o, bacon e creme de leite) para encarar suas √°rduas jornadas de trabalho nas minas. Deliciosa, a receita se espalhou por outras cidades e reinos.",bonus:"+5 PV tempor√°rios.",preco:"T$ 6",ingredientes:"Farinha, leite, porco",custoIngredientes:"T$ 10",cdTeste:"15",icone:"üçù"},{nome:"P√£o de Queijo",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_orchardfruit01.jpg",raridade:"Comum",descricao:"Um bom p√£o de queijo deixa qualquer aventureiro bem nutrido e saud√°vel.",bonus:"+2 em testes de Fortitude.",preco:"T$ 10",ingredientes:"Farinha, queijo",custoIngredientes:"T$ 7",cdTeste:"15",icone:"ü•®"},{nome:"Pizza",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_deliciouspizza.jpg",raridade:"Comum",descricao:"Um disco de massa coberto com molho de tomate e queijo, este prato foi criado por Guido Venusto, um nobre de Ahlen que queria ascender socialmente. Inepto nas artes da intriga, Venusto resolveu manipular a corte pela barriga. Funcionou ‚Äî o prato foi um sucesso e o nobre cozinheiro teve muita influ√™ncia por anos. Certa noite, um espi√£o conseguiu roubar a receita. O segredo da pizza se espalhou e, sem seu trunfo, Venusto foi assassinado logo depois. Comer uma pizza deixa-o pronto para encarar qualquer perigo.",bonus:"+1 em todos os testes de resist√™ncia.",preco:"T$ 6",ingredientes:"Farinha, fruta, queijo",custoIngredientes:"T$ 10",cdTeste:"15",icone:"üçï"},{nome:"Porco Assado",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_123_roast.jpg",raridade:"Comum",descricao:"Um prato t√≠pico e popular em Deheon, que j√° se alastrou pelo Reinado. Comer um porco assado o deixa valente e brig√£o.",bonus:"+1 em testes de Luta.",preco:"T$ 36",ingredientes:"Porco, frutas, legume",custoIngredientes:"T$ 12",cdTeste:"15",icone:"üçñ"},{nome:"Prato do Aventureiro",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_fish_18.jpg",raridade:"Comum",descricao:"Um cozido de frango com legumes, esta √© uma refei√ß√£o simples, mas mant√©m qualquer um bem alimentado.",bonus:"Em sua pr√≥xima noite de sono, voc√™ aumenta a sua recupera√ß√£o de pontos de vida em +1 por n√≠vel.",preco:"T$ 2",ingredientes:"Ave, legume",custoIngredientes:"T$ 5",cdTeste:"10",icone:"üç≤"},{nome:"Salada de Salistick",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_goldcarpconsomme.jpg",raridade:"Comum",descricao:"Com folhas e carne de frango, esta salada foi criada no Reino dos M√©dicos, onde a sa√∫de √© uma grande preocupa√ß√£o. Uma alimenta√ß√£o leve, mas nutritiva.",bonus:"Aumenta seu deslocamento em +1,5m (1 quadrado).",preco:"T$ 4",ingredientes:"Ave, fruta, legume",custoIngredientes:"T$ 8",cdTeste:"15",icone:"ü•ó"},{nome:"Salada √âlfica",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_swirlingmistsoup.jpg",raridade:"Comum",descricao:"Esta salada vegetariana leva uma mistura de folhas, frutas e legumes. Segundo os relatos, a receita foi inventada em Len√≥rienn e passada aos reinos humanos de Lamnor, antes do isolamento dos povos. Felizmente, a salada se espalhou por Arton antes da queda do continente. Um prato leve e equilibrado, inspira disparos precisos.",bonus:"+1 em testes de Pontaria.",preco:"T$ 4",ingredientes:"Fruta, legume, verdura",custoIngredientes:"T$ 5",cdTeste:"15",icone:"ü•ó"},{nome:"Salada Imperial",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_braisedturtle.jpg",raridade:"Comum",descricao:"Uma mistura de folhas com bacon e queijo, esta salada √© leve, mas empolgante.",bonus:"+2 em testes de Iniciativa.",preco:"T$ 6",ingredientes:"Porco, queijo, verdura",custoIngredientes:"T$ 15",cdTeste:"15",icone:"ü•ó"},{nome:"Sashimi",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_valleystirfry.jpg",raridade:"Comum",descricao:"Uma iguaria da culin√°ria tamuraniana, este prato consiste de peixes e frutos do mar fatiados em pequenos peda√ßos e servidos com um molho t√≠pico do Imp√©rio de Jade. Uma refei√ß√£o refinada, leve e equilibrada.",bonus:"+2 em rolagens de dano √† dist√¢ncia.",preco:"T$ 22",ingredientes:"Peixe, molho tamuraniano",custoIngredientes:"T$ 37",cdTeste:"20",icone:"üç£"},{nome:"Sopa de Cogumelos",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_slime_02.jpg",raridade:"Comum",descricao:"Esta sopa expande sua percep√ß√£o m√≠stica.",bonus:"+2 em testes de Misticismo.",preco:"T$ 6",ingredientes:"Cogumelo, legume, verdura",custoIngredientes:"T$ 7",cdTeste:"15",icone:"üç≤"},{nome:"Sopa de Peixe",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_63.jpg",raridade:"Comum",descricao:"Um cozido de peixe com verduras, √© um prato simples e humilde, mas garante descanso relaxante.",bonus:"Em sua pr√≥xima noite de sono, voc√™ aumenta a sua recupera√ß√£o de pontos de mana em +1 por n√≠vel.",preco:"T$ 3",ingredientes:"Verdura, peixe",custoIngredientes:"T$ 8",cdTeste:"10",icone:"üç≤"},{nome:"Torta de Ma√ß√£",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_10.jpg",raridade:"Comum",descricao:"Dizem que, ap√≥s uma bruxa usar uma ma√ß√£ envenenada para matar uma princesa, Thantalla-Dhaedelin, a Rainha das Fadas, decretou que ma√ß√£s nunca mais fariam mal a ningu√©m. Se a lenda √© verdade, ou se ma√ß√£s s√£o simplesmente saud√°veis, ningu√©m sabe dizer, mas comer este prato fornece resist√™ncia a veneno +5.",bonus:"Resist√™ncia a veneno +5.",preco:"T$ 2",ingredientes:"Farinha, fruta",custoIngredientes:"T$ 4",cdTeste:"15",icone:"üç∞"},{nome:"Baga Celeste Cozida",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_cooked_goldcarpconsomme.jpg",raridade:"Comum",descricao:"Encontradas originalmente nas encostas invertidas de Vectora, estas bagas se espalharam por toda Arton. Quando preparadas adequadamente, fornecem qualidades m√≠sticas de flutua√ß√£o.",bonus:"Todo dano de queda que voc√™ sofre √© reduzido em ‚àí1d6.",preco:"T$ 25",ingredientes:"Fruta, especiaria",custoIngredientes:"T$ 35",cdTeste:"20",icone:"üåü"},{nome:"Cozido de Pimenta",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_misc_food_159_fish_82.jpg",raridade:"Comum",descricao:"Um prato forte, capaz de trazer l√°grimas aos olhos do mais resistente dos comensais.",bonus:"+1 em Fortitude (cumulativo com outros itens) e +1 na rolagem do D20 para testes da per√≠cia Fortitude.",preco:"T$ 15",ingredientes:"Legume, especiaria",custoIngredientes:"T$ 12",cdTeste:"18",icone:"üå∂Ô∏è"},{nome:"Manjar de Sombras",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_cooking_80_ravenberrytart.jpg",raridade:"Comum",descricao:"A origem da receita original deste prato se perdeu, mas sua ess√™ncia se manteve inalterada. Consiste de um manjar com ingredientes cultivados em terras pr√≥ximas de cemit√©rios, que protege o corpo contra energias sombrias.",bonus:"Voc√™ ignora os pr√≥ximos 10 pontos de dano de trevas que sofrer.",preco:"T$ 40",ingredientes:"Cereal, especiaria, verdura",custoIngredientes:"T$ 28",cdTeste:"22",icone:"üåë"}].find(e=>e.nome===t));e&&function(e,a){const o=document.getElementById("effects-icons-container");if(!o)return;const t=document.createElement("div");t.className="food-indicator",t.style.position="relative",t.style.width="32px",t.style.height="32px",t.style.borderRadius="6px",t.style.border="2px solid #4caf50",t.style.background="#23243a",t.style.cursor="pointer",t.style.transition="all 0.2s",t.style.overflow="hidden",t.onmouseover=()=>{t.style.transform="scale(1.1)",t.style.borderColor="#66bb6a",q(t,e,"food")},t.onmouseout=()=>{t.style.transform="scale(1)",t.style.borderColor="#4caf50",E()},t.onclick=()=>{E(),function(e){let a=[];try{a=JSON.parse(localStorage.getItem("tormenta-20-hotbars-comida-effects")||"[]"),a=a.filter(a=>a.effectKey!==e),localStorage.setItem("tormenta-20-hotbars-comida-effects",JSON.stringify(a))}catch(e){console.error("Erro ao remover efeito de comida:",e)}Ke(e),ca(e,"food"),pa()}(a.effectKey)};const s=ua(e.iconeUrl||"https://wow.zamimg.com/images/wow/icons/large/inv_misc_fork-knife.jpg",e.nome,e.icone||"üçΩÔ∏è",{width:"100%",height:"100%",borderRadius:"4px",objectFit:"cover",showSkeleton:!0});t.appendChild(s);const r=document.createElement("div");r.style.position="absolute",r.style.bottom="0",r.style.right="0",r.style.background="rgba(0, 0, 0, 0.7)",r.style.color="#ffffff",r.style.fontSize="8px",r.style.fontWeight="bold",r.style.padding="1px 3px",r.style.borderRadius="3px 0 4px 0",r.style.lineHeight="1",r.style.minWidth="12px",r.style.textAlign="center",r.style.border="1px solid #000000",r.style.zIndex="10",r.style.pointerEvents="none","Batata Valkariana"===e.nome?r.textContent="1x":r.textContent="24h",t.appendChild(r),o.appendChild(t)}(e,o)}}else if("condition"===e.effectType){const a=aa(e.effectKey);a&&function(e){const a=document.getElementById("effects-icons-container");if(!a)return;const o=document.createElement("div");o.className="condition-indicator",o.style.position="relative",o.style.width="32px",o.style.height="32px",o.style.borderRadius="6px",o.style.border="2px solid #ff6e6e",o.style.background="#23243a",o.style.cursor="pointer",o.style.transition="all 0.2s",o.style.overflow="hidden",o.onmouseover=()=>{o.style.transform="scale(1.1)",o.style.borderColor="#ff8a8a",q(o,e,"condition")},o.onmouseout=()=>{o.style.transform="scale(1)",o.style.borderColor="#ff6e6e",E()},o.onclick=()=>{E(),ea(e.nome)};const t=ua(e.iconeUrl||"https://wow.zamimg.com/images/wow/icons/large/spell_shadow_curseoftounges.jpg",e.nome,e.icone||"‚ö†Ô∏è",{width:"100%",height:"100%",borderRadius:"4px",objectFit:"cover",showSkeleton:!0});o.appendChild(t),a.appendChild(o)}(a)}else if("item"===e.effectType){const a=ta(e.effectKey);a&&function(e){const a=document.getElementById("effects-icons-container");if(!a)return;const o=document.createElement("div");o.className="item-effect-indicator",o.style.position="relative",o.style.width="32px",o.style.height="32px",o.style.borderRadius="6px",o.style.border="2px solid #9c27b0",o.style.background="#23243a",o.style.cursor="pointer",o.style.transition="all 0.2s",o.style.overflow="hidden",o.onmouseover=()=>{o.style.transform="scale(1.1)",o.style.borderColor="#ba68c8",q(o,e,"item")},o.onmouseout=()=>{o.style.transform="scale(1)",o.style.borderColor="#9c27b0",E()},o.onclick=()=>{E(),Ke(e.effectKey,!0),ca(e.effectKey,"item")};const t=ua(e.iconeUrl||"https://wow.zamimg.com/images/wow/icons/large/inv_misc_questionmark.jpg",e.name,e.icone||"‚öîÔ∏è",{width:"100%",height:"100%",borderRadius:"4px",objectFit:"cover",showSkeleton:!0});o.appendChild(t),a.appendChild(o)}(a)}else if("drink"===e.effectType){let a=[];try{a=JSON.parse(localStorage.getItem("tormenta-20-hotbars-bebida-effects")||"[]")}catch(e){console.error("Erro ao carregar efeitos de bebida:",e),a=[]}const t=a.find(a=>a.effectKey===e.effectKey);if(t){const e=(o=t.name,[{nome:"Baba de Troll",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_potion_136.jpg",tipo:"N√£o alco√≥lica",descricao:"Uma bebida sem √°lcool, √† base de leite, castanhas, nozes e mel.",efeito:"+1d4 em um teste √† sua escolha at√© o fim do dia.",cd:"‚Äî",icone:"üßÉ"},{nome:"Barba Queimada",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_05.jpg",tipo:"Alco√≥lica",descricao:"Forte e amarga, esta cerveja an√£ fortalece o corpo e o esp√≠rito.",efeito:"Redu√ß√£o de Dano 2.",cd:"20",icone:"üç∫"},{nome:"Cerveja Deheoni",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_08.jpg",tipo:"Alco√≥lica",descricao:"A bebida mais comum nas tavernas do Reinado.",efeito:"+1 em testes de resist√™ncia.",cd:"15",icone:"üçª"},{nome:"Dil√≠nio",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_11.jpg",tipo:"Alco√≥lica",descricao:"Destilado tradicional de Mortenstenn, feito com um cereal que s√≥ cresce no continente sul. A receita se perdeu ap√≥s as invas√µes duyshidakk, e poucos barris chegaram ao Reinado.",efeito:"O limite de gasto de PM aumenta em +1.",cd:"20",observacao:"N√£o pode ser fabricado",icone:"ü•É"},{nome:"Grogue Negro",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_12.jpg",tipo:"Alco√≥lica",descricao:"Rum misturado com especiarias. Seu nome vem de sua origem ‚Äî piratas do Conclave, que atuam no Mar Negro ‚Äî e n√£o da cor da bebida, que √© dourada clara.",efeito:"Quando voc√™ usa Aud√°cia, o b√¥nus fornecido pelo poder aumenta em +1.",cd:"15",icone:"üè¥‚Äç‚ò†Ô∏è"},{nome:"Grogue Rubro",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_13.jpg",tipo:"Alco√≥lica",descricao:"Varia√ß√£o do grogue negro, com especiarias picantes que fazem a bebida adquirir uma colora√ß√£o avermelhada ‚Äî e quem a bebe, certa inclina√ß√£o para a viol√™ncia.",efeito:"Voc√™ pode usar Aud√°cia para testes de ataque.",cd:"20",icone:"üî•"},{nome:"Hidromel Uivante",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_14.jpg",tipo:"Alco√≥lica",descricao:"Fabricada nas montanhas geladas, esta bebida aquece e incita.",efeito:"+2 em rolagens de dano corpo a corpo.",cd:"20",icone:"‚ùÑÔ∏è"},{nome:"Licor Fe√©rico",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_15.jpg",tipo:"Alco√≥lica",descricao:"De apar√™ncia enevoada e gosto adocicado, dizem que √© feito na Pondsm√¢nia e trazido com dificuldade ao Reinado. Alguns acham que √© inven√ß√£o dos taverneiros, at√© provarem uma dose.",efeito:"Escolha uma habilidade. O custo para ativ√°-la diminui em ‚Äì1 PM.",cd:"25",icone:"‚ú®"},{nome:"Sidra Ahleniense",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_16.jpg",tipo:"Alco√≥lica",descricao:"Esta bebida doce deixa qualquer um mais falante.",efeito:"+2 em testes de per√≠cias originalmente baseadas em Carisma.",cd:"15",icone:"üçè"},{nome:"Vinho Pruss",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_17.jpg",tipo:"Alco√≥lica",descricao:"Batizado em homenagem ao antigo Rei-Imperador Thormy ‚Äî dizem que era o favorito do monarca.",efeito:"Concede 3 pontos de mana tempor√°rios.",cd:"15",icone:"üç∑"},{nome:"Vinho √âlfico",iconeUrl:"https://wow.zamimg.com/images/wow/icons/large/inv_drink_18.jpg",tipo:"Alco√≥lica",descricao:"De sabor complexo, agu√ßa a mente.",efeito:"+1 na CD para resistir √†s suas habilidades.",cd:"20",icone:"üåø"}].find(e=>e.nome===o));e&&function(e,a){const o=document.getElementById("effects-icons-container");if(!o)return;const t=document.createElement("div");if(t.className="bebida-indicator",t.style.position="relative",t.style.width="32px",t.style.height="32px",t.style.borderRadius="6px",t.style.border="2px solid #4caf50",t.style.background="#23243a",t.style.cursor="pointer",t.style.transition="all 0.2s",t.style.overflow="hidden",t.onmouseover=()=>{t.style.transform="scale(1.1)",t.style.borderColor="#66bb6a",q(t,e,"drink")},t.onmouseout=()=>{t.style.transform="scale(1)",t.style.borderColor="#4caf50",E()},t.onclick=()=>{E(),function(e){let a=[];try{a=JSON.parse(localStorage.getItem("tormenta-20-hotbars-bebida-effects")||"[]"),a=a.filter(a=>a.effectKey!==e),localStorage.setItem("tormenta-20-hotbars-bebida-effects",JSON.stringify(a))}catch(e){console.error("Erro ao remover efeito de bebida:",e)}Ke(e),ca(e,"drink"),pa()}(a.effectKey)},e.iconeUrl){const a=ua(e.iconeUrl,e.nome,e.icone||"üç∫",{width:"100%",height:"100%",borderRadius:"4px",objectFit:"cover",showSkeleton:!1});t.appendChild(a)}else{const a=document.createElement("div");a.textContent=e.icone||"üç∫",a.style.width="100%",a.style.height="100%",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.fontSize="16px",t.appendChild(a)}const s=document.createElement("div");s.style.position="absolute",s.style.bottom="0",s.style.right="0",s.style.background="rgba(0, 0, 0, 0.7)",s.style.color="#ffffff",s.style.fontSize="8px",s.style.fontWeight="bold",s.style.padding="1px 3px",s.style.borderRadius="3px 0 4px 0",s.style.lineHeight="1",s.style.minWidth="12px",s.style.textAlign="center",s.style.border="1px solid #000000",s.style.zIndex="10",s.style.pointerEvents="none","Baba de Troll"===e.nome?s.textContent="1x":s.textContent="24h",t.appendChild(s),o.appendChild(t)}(e,t)}}else if("potion"===e.effectType){let o=[];try{o=JSON.parse(localStorage.getItem("tormenta-20-hotbars-pocao-effects")||"[]")}catch(e){console.error("Erro ao carregar efeitos de po√ß√£o:",e),o=[]}const t=o.find(a=>a.effectKey===e.effectKey);if(t){const e=(a=t.name,me().find(e=>e.nome===a));e&&function(e,a){const o=document.getElementById("effects-icons-container");if(!o)return;const t=document.createElement("div");if(t.className="pocao-indicator",t.style.position="relative",t.style.width="32px",t.style.height="32px",t.style.borderRadius="6px",t.style.border="2px solid #9c27b0",t.style.background="#23243a",t.style.cursor="pointer",t.style.transition="all 0.2s",t.style.overflow="hidden",t.onmouseover=()=>{t.style.transform="scale(1.1)",t.style.borderColor="#ba68c8",q(t,e,"potion")},t.onmouseout=()=>{t.style.transform="scale(1)",t.style.borderColor="#9c27b0",E()},t.onclick=()=>{E(),function(e){let a=[];try{a=JSON.parse(localStorage.getItem("tormenta-20-hotbars-pocao-effects")||"[]"),a=a.filter(a=>a.effectKey!==e),localStorage.setItem("tormenta-20-hotbars-pocao-effects",JSON.stringify(a))}catch(e){console.error("Erro ao remover efeito de po√ß√£o:",e)}Ke(e),ca(e,"potion"),pa()}(a.effectKey)},e.iconeUrl){const a=ua(e.iconeUrl,e.nome,e.icone||"üß™",{width:"100%",height:"100%",borderRadius:"4px",objectFit:"cover",showSkeleton:!1});t.appendChild(a)}else{const a=document.createElement("div");a.textContent=e.icone||"üß™",a.style.width="100%",a.style.height="100%",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.fontSize="16px",t.appendChild(a)}const s=document.createElement("div");s.style.position="absolute",s.style.bottom="0",s.style.right="0",s.style.background="rgba(0, 0, 0, 0.7)",s.style.color="#ffffff",s.style.fontSize="8px",s.style.fontWeight="bold",s.style.padding="1px 3px",s.style.borderRadius="3px 0 4px 0",s.style.lineHeight="1",s.style.minWidth="12px",s.style.textAlign="center",s.style.border="1px solid #000000",s.style.zIndex="10",s.style.pointerEvents="none",s.textContent="Cena",t.appendChild(s),o.appendChild(t)}(e,t)}}var a,o,t})):e.style.display="none"}const ga="tormenta-20-hotbars-selectable-cards";function fa(){try{return JSON.parse(localStorage.getItem(ga)||"[]")}catch(e){return console.error("Erro ao carregar selectable-cards:",e),[]}}function va(){const e=document.getElementById("effects-popup");e&&e.remove();const a=document.getElementById("effects-overlay");a&&a.remove();const o=document.createElement("div");o.id="effects-overlay",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.background="rgba(0,0,0,0.5)",o.style.zIndex="10000",o.onclick=()=>{o.remove(),t.remove(),setTimeout(()=>{Ye()},100)},document.body.appendChild(o);const t=document.createElement("div");t.id="effects-popup",t.style.position="fixed",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.background="rgba(30,30,40,0.98)",t.style.border="2px solid #6ec6ff",t.style.borderRadius="12px",t.style.padding="18px 20px 16px 20px",t.style.zIndex="10001",t.style.maxWidth="400px",t.style.maxHeight="600px",t.style.overflowY="auto",t.style.boxShadow="0 8px 32px rgba(0,0,0,0.7)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="stretch";const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="space-between",s.style.alignItems="center",s.style.marginBottom="15px",s.style.width="100%";const r=document.createElement("h3");r.textContent="Efeitos",r.style.color="#ecf0f1",r.style.margin="0",r.style.fontSize="17px",r.style.fontWeight="bold";const n=window.Roll20Components.createCloseButton({text:"√ó",fontSize:"24px",width:"32px",height:"32px",padding:"0",color:"#ecf0f1",onClick:()=>{t.remove();const e=document.getElementById("effects-overlay");e&&e.remove(),setTimeout(()=>{Ye()},100)}});s.appendChild(r),s.appendChild(n.render()),t.appendChild(s);let i=[];try{i=JSON.parse(localStorage.getItem("tormenta-20-hotbars-comida-effects")||"[]")}catch(e){console.error("Erro ao carregar efeitos de comida:",e),i=[]}const c=Je(),d=i.filter(e=>c.includes(e.effectKey)).map(e=>{let a="",o=e.description;const t=[/\+[^.]*$/i,/\+[^,]*$/i,/\+[^!]*$/i];for(const e of t){const t=o.match(e);if(t){a=t[0].trim(),o=o.substring(0,o.lastIndexOf(t[0])).trim();break}}if(!a){const e=o.lastIndexOf(".");if(-1!==e&&e<o.length-1){const t=o.substring(e+1).trim();t&&t.length>0&&(a=t,o=o.substring(0,e+1).trim())}}return{title:e.name,description:o,chips:a?[a,"Comida","24h"]:["Comida","24h"],type:"Comida",effectKey:e.effectKey}});let l=[];try{l=JSON.parse(localStorage.getItem("tormenta-20-hotbars-bebida-effects")||"[]")}catch(e){console.error("Erro ao carregar efeitos de bebida:",e),l=[]}const m=l.filter(e=>c.includes(e.effectKey)).map(e=>({title:e.name,description:e.description,chips:["Bebida","24h"],type:"Bebida",effectKey:e.effectKey}));let u=[];try{u=JSON.parse(localStorage.getItem("tormenta-20-hotbars-pocao-effects")||"[]")}catch(e){console.error("Erro ao carregar efeitos de po√ß√£o:",e),u=[]}const p=[{title:"Cachecol Sombrio",description:"Efeito de Dano: Todos os ataques melee recebem +1d6 de dano furtivo. Efeito acumulativo com outros ataques furtivos.",chips:["+1d6","Furtivo","Melee"],type:"Item",effectKey:"cachecol_sombrio"},...d,...m,...u.filter(e=>c.includes(e.effectKey)).map(e=>({title:e.name,description:e.description,chips:["Po√ß√£o","Cena"],type:"Po√ß√£o",effectKey:e.effectKey})),...Ze().map(e=>{const a=aa(e);return{title:a?a.nome:e,description:a?a.descricao:"",chips:a&&a.efeitos?[a.efeitos.split("‚Ä¢")[0].trim(),"Condi√ß√£o"]:["Condi√ß√£o"],type:"Condi√ß√£o",effectKey:e}})],g=document.createElement("div");g.style.display="flex",g.style.flexDirection="column",g.style.gap="8px",g.style.marginTop="2px",t.appendChild(g),function e(){g.innerHTML="",p.forEach(a=>{const o=Qe(a.effectKey),t=document.createElement("div");t.style.background=o?"#2d4a3e":"#23243a",t.style.border="1px solid "+(o?"#4caf50":"#6ec6ff"),t.style.borderRadius="8px",t.style.padding="12px",t.style.cursor="pointer",t.style.transition="all 0.2s",t.onmouseover=()=>{t.style.background=o?"#3d5a4e":"#2a2b4a"},t.onmouseout=()=>{t.style.background=o?"#2d4a3e":"#23243a"},t.onclick=()=>{if("Condi√ß√£o"===a.type){ea(a.effectKey);const e=document.getElementById("conditions-popup");e&&e.remove();const o=document.getElementById("conditions-overlay");o&&o.remove();const t=document.getElementById("condition-details-popup");t&&t.remove();const s=document.getElementById("condition-details-overlay");s&&s.remove();const r=document.getElementById("effects-popup");r&&r.remove();const n=document.getElementById("effects-overlay");n&&n.remove()}else if("Selectable"===a.type)!function(e){const a=fa(),o=a.indexOf(e);o>-1?(a.splice(o,1),_("Efeito removido.")):(a.push(e),A("Efeito ativado!")),function(e){try{localStorage.setItem(ga,JSON.stringify(e))}catch(e){console.error("Erro ao salvar selectable-cards:",e)}}(a),Ye(),pa()}(a.effectKey);else if("Comida"===a.type){const e=Je(),o=e.indexOf(a.effectKey);if(o>-1){e.splice(o,1);let t=JSON.parse(localStorage.getItem("tormenta-20-hotbars-comida-effects")||"[]");t=t.filter(e=>e.effectKey!==a.effectKey),localStorage.setItem("tormenta-20-hotbars-comida-effects",JSON.stringify(t)),Ge(e),_(`Efeito "${a.title}" removido.`)}else{e.push(a.effectKey);let o=JSON.parse(localStorage.getItem("tormenta-20-hotbars-comida-effects")||"[]");o=o.filter(e=>e.effectKey!==a.effectKey),o.push({name:a.title,description:a.description,type:"Comida",effectKey:a.effectKey}),localStorage.setItem("tormenta-20-hotbars-comida-effects",JSON.stringify(o)),Ge(e),A(`Efeito "${a.title}" ativado!`)}}else if("Bebida"===a.type){const e=Je(),o=e.indexOf(a.effectKey);if(o>-1){e.splice(o,1);let t=JSON.parse(localStorage.getItem("tormenta-20-hotbars-bebida-effects")||"[]");t=t.filter(e=>e.effectKey!==a.effectKey),localStorage.setItem("tormenta-20-hotbars-bebida-effects",JSON.stringify(t)),Ge(e),_(`Efeito "${a.title}" removido.`)}else{e.push(a.effectKey);let o=JSON.parse(localStorage.getItem("tormenta-20-hotbars-bebida-effects")||"[]");o=o.filter(e=>e.effectKey!==a.effectKey),o.push({name:a.title,description:a.description,type:"Bebida",effectKey:a.effectKey}),localStorage.setItem("tormenta-20-hotbars-bebida-effects",JSON.stringify(o)),Ge(e),A(`Efeito "${a.title}" ativado!`)}}else if("Po√ß√£o"===a.type){const e=Je(),o=e.indexOf(a.effectKey);if(o>-1){e.splice(o,1);let t=JSON.parse(localStorage.getItem("tormenta-20-hotbars-pocao-effects")||"[]");t=t.filter(e=>e.effectKey!==a.effectKey),localStorage.setItem("tormenta-20-hotbars-pocao-effects",JSON.stringify(t)),Ge(e),_(`Efeito "${a.title}" removido.`)}else{e.push(a.effectKey);let o=JSON.parse(localStorage.getItem("tormenta-20-hotbars-pocao-effects")||"[]");o=o.filter(e=>e.effectKey!==a.effectKey),o.push({name:a.title,description:a.description,type:"Po√ß√£o",effectKey:a.effectKey}),localStorage.setItem("tormenta-20-hotbars-pocao-effects",JSON.stringify(o)),Ge(e),A(`Efeito "${a.title}" ativado!`)}}else Ke(a.effectKey);e(),Ye(),pa()};const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="space-between",s.style.alignItems="center",s.style.marginBottom="6px";const r=document.createElement("div");r.textContent=a.title||a.name,r.style.color=o?"#4caf50":"#6ec6ff",r.style.fontSize="15px",r.style.fontWeight="bold";const n=document.createElement("div");n.textContent=o?"‚óè":"‚óã",n.style.color=o?"#4caf50":"#6ec6ff",n.style.fontSize="18px",n.style.fontWeight="bold",s.appendChild(r),s.appendChild(n),t.appendChild(s);const i=document.createElement("div");i.textContent=a.type,i.style.background="#6ec6ff",i.style.color="#23243a",i.style.fontSize="11px",i.style.fontWeight="bold",i.style.borderRadius="4px",i.style.padding="2px 8px",i.style.display="inline-block",i.style.width="fit-content",i.style.marginBottom="6px",t.appendChild(i);const c=document.createElement("div");if(c.textContent=a.description,c.style.color="#ecf0f1",c.style.fontSize="13px",c.style.lineHeight="1.4",t.appendChild(c),a.chips&&a.chips.length>0){const e=document.createElement("div");e.style.display="flex",e.style.flexWrap="wrap",e.style.gap="4px",e.style.marginTop="8px",a.chips.forEach(a=>{const o=document.createElement("div");o.textContent=a,o.style.background="#ffb86c",o.style.color="#23243a",o.style.fontSize="10px",o.style.fontWeight="bold",o.style.padding="2px 6px",o.style.borderRadius="10px",o.style.border="1px solid #ffc97a",o.style.display="inline-block",e.appendChild(o)}),t.appendChild(e)}g.appendChild(t)})}(),document.body.appendChild(t),S(t,"blue")}window.Roll20Components={createCloseButton:function(e){const{text:a="√ó",fontSize:o="18px",width:t="32px",height:s="32px",padding:r="4px",color:n="#ecf0f1",onClick:i=null}=e,c=document.createElement("button");return c.textContent=a,c.style.background="none",c.style.border="none",c.style.color=n,c.style.fontSize=o,c.style.width=t,c.style.height=s,c.style.padding=r,c.style.cursor="pointer",c.style.borderRadius="4px",c.style.transition="all 0.2s",c.style.display="flex",c.style.alignItems="center",c.style.justifyContent="center",c.onmouseover=()=>{c.style.background="rgba(255,255,255,0.1)"},c.onmouseout=()=>{c.style.background="none"},i&&(c.onclick=i),{element:c,render:function(){return c}}},createFavoritableCardWithPreset:function(e,a){const{title:o,summary:t,description:s,chips:r=[],bonus:n,efeito:i,efeitos:c,additionalInfo:d,onFavorite:l=null,onUnfavorite:m=null,onFavoriteToggle:u=null,onClick:p=null,isFavorite:g=!1}=a,f=document.createElement("div");f.style.background="#23243a",f.style.border="1px solid #6ec6ff",f.style.borderRadius="8px",f.style.padding="12px",f.style.cursor="pointer",f.style.transition="all 0.2s",f.style.marginBottom="8px",f.style.position="relative",f.onmouseover=()=>{f.style.background="#2a2b4a",f.style.borderColor="#8ed8ff"},f.onmouseout=()=>{f.style.background="#23243a",f.style.borderColor="#6ec6ff"},p&&(f.onclick=e=>{e.target!==h&&p(e)});const v=document.createElement("div");v.textContent=o,v.style.color="#6ec6ff",v.style.fontSize="14px",v.style.fontWeight="bold",v.style.marginBottom="4px",f.appendChild(v);const y=document.createElement("div");if(y.textContent=t||s||"",y.style.color="#ecf0f1",y.style.fontSize="12px",y.style.lineHeight="1.3",y.style.marginBottom="8px",f.appendChild(y),"potion"!==e){if(n){const e=document.createElement("div");e.textContent=`B√¥nus: ${n}`,e.style.color="#27ae60",e.style.fontSize="11px",e.style.fontWeight="bold",e.style.marginBottom="4px",f.appendChild(e)}if(i){const e=document.createElement("div");e.textContent=`Efeito: ${i}`,e.style.color="#e67e22",e.style.fontSize="11px",e.style.fontWeight="bold",e.style.marginBottom="4px",f.appendChild(e)}if(c)if(Array.isArray(c))c.forEach(e=>{const a=document.createElement("div");a.textContent=`${e}`,a.style.color="#9b59b6",a.style.fontSize="11px",a.style.fontWeight="bold",a.style.marginBottom="2px",f.appendChild(a)});else if("string"==typeof c){const e=document.createElement("div");e.textContent=`${c}`,e.style.color="#9b59b6",e.style.fontSize="11px",e.style.fontWeight="bold",e.style.marginBottom="2px",f.appendChild(e)}}const b=document.createElement("div");b.style.display="flex",b.style.gap="4px",b.style.flexWrap="wrap",r.forEach(e=>{const a=document.createElement("span");a.textContent=e,a.style.background="#6ec6ff",a.style.color="#23243a",a.style.fontSize="10px",a.style.padding="2px 6px",a.style.borderRadius="10px",a.style.fontWeight="bold",b.appendChild(a)}),d&&Array.isArray(d)&&d.forEach(e=>{const a=document.createElement("span");a.textContent=e.text,a.style.background=e.color||"#6ec6ff",a.style.color="#23243a",a.style.fontSize="10px",a.style.padding="2px 6px",a.style.borderRadius="10px",a.style.fontWeight="bold",b.appendChild(a)});const h=document.createElement("button");return h.innerHTML=g?"‚òÖ":"‚òÜ",h.style.position="absolute",h.style.top="8px",h.style.right="8px",h.style.background="none",h.style.border="none",h.style.color=g?"#ffd700":"#666",h.style.fontSize="16px",h.style.cursor="pointer",h.style.padding="0",h.style.width="20px",h.style.height="20px",h.style.display="flex",h.style.alignItems="center",h.style.justifyContent="center",h.onclick=e=>{e.stopPropagation(),u?u():g?m&&m():l&&l()},f.appendChild(v),f.appendChild(y),f.appendChild(b),f.appendChild(h),{element:f,render:function(){return f}}}}}();